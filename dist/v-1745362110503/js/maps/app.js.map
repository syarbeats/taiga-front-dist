{"version":3,"sources":["coffee/app.coffee","coffee/classes.coffee","coffee/utils.coffee","coffee/modules/controllerMixins.coffee","coffee/modules/admin.coffee","coffee/modules/angular-translate-handler-log.coffee","coffee/modules/auth.coffee","coffee/modules/backlog.coffee","coffee/modules/base.coffee","coffee/modules/common.coffee","coffee/modules/detail.coffee","coffee/modules/epics.coffee","coffee/modules/events.coffee","coffee/modules/feedback.coffee","coffee/modules/integrations.coffee","coffee/modules/issues.coffee","coffee/modules/kanban.coffee","coffee/modules/plugins.coffee","coffee/modules/projects.coffee","coffee/modules/related-tasks.coffee","coffee/modules/resources.coffee","coffee/modules/search.coffee","coffee/modules/taskboard.coffee","coffee/modules/tasks.coffee","coffee/modules/team.coffee","coffee/modules/user-settings.coffee","coffee/modules/userstories.coffee","coffee/modules/wiki.coffee","coffee/modules/common/analytics.coffee","coffee/modules/common/bind-scope.coffee","coffee/modules/common/compile-html.directive.coffee","coffee/modules/common/components.coffee","coffee/modules/common/confirm.coffee","coffee/modules/common/custom-field-values.coffee","coffee/modules/common/emojis.coffee","coffee/modules/common/estimation.coffee","coffee/modules/common/filters.coffee","coffee/modules/common/lightboxes.coffee","coffee/modules/common/loaded.coffee","coffee/modules/common/loader.coffee","coffee/modules/common/loading.coffee","coffee/modules/common/popovers.coffee","coffee/modules/common/raven-logger.coffee","coffee/modules/common/sections.coffee","coffee/modules/common/tag-manager.coffee","coffee/modules/common/tags.coffee","coffee/modules/common/userpilot.coffee","coffee/modules/backlog/lightboxes.coffee","coffee/modules/backlog/main.coffee","coffee/modules/backlog/sortable.coffee","coffee/modules/backlog/sprints.coffee","coffee/modules/taskboard/charts.coffee","coffee/modules/taskboard/lightboxes.coffee","coffee/modules/taskboard/main.coffee","coffee/modules/taskboard/sortable.coffee","coffee/modules/taskboard/taskboard-issues.coffee","coffee/modules/taskboard/taskboard-tasks.coffee","coffee/modules/kanban/kanban-usertories.coffee","coffee/modules/kanban/main.coffee","coffee/modules/kanban/sortable.coffee","coffee/modules/epics/detail.coffee","coffee/modules/issues/detail.coffee","coffee/modules/issues/lightboxes.coffee","coffee/modules/issues/list.coffee","coffee/modules/userstories/detail.coffee","coffee/modules/tasks/detail.coffee","coffee/modules/team/main.coffee","coffee/modules/wiki/main.coffee","coffee/modules/wiki/nav.coffee","coffee/modules/wiki/pages-list.coffee","coffee/modules/admin/lightboxes.coffee","coffee/modules/admin/memberships.coffee","coffee/modules/admin/nav.coffee","coffee/modules/admin/project-profile.coffee","coffee/modules/admin/project-values.coffee","coffee/modules/admin/roles.coffee","coffee/modules/admin/third-parties.coffee","coffee/modules/projects/lightboxes.coffee","coffee/modules/base/bind.coffee","coffee/modules/base/conf.coffee","coffee/modules/base/contrib.coffee","coffee/modules/base/filters.coffee","coffee/modules/base/http.coffee","coffee/modules/base/load-element.coffee","coffee/modules/base/location.coffee","coffee/modules/base/model.coffee","coffee/modules/base/navurls.coffee","coffee/modules/base/repository.coffee","coffee/modules/base/storage.coffee","coffee/modules/base/urls.coffee","coffee/modules/resources/custom-attributes-values.coffee","coffee/modules/resources/custom-attributes.coffee","coffee/modules/resources/epics.coffee","coffee/modules/resources/history.coffee","coffee/modules/resources/invitations.coffee","coffee/modules/resources/issues.coffee","coffee/modules/resources/kanban.coffee","coffee/modules/resources/locales.coffee","coffee/modules/resources/mdrender.coffee","coffee/modules/resources/memberships.coffee","coffee/modules/resources/modules.coffee","coffee/modules/resources/notify-policies.coffee","coffee/modules/resources/projects.coffee","coffee/modules/resources/roles.coffee","coffee/modules/resources/search.coffee","coffee/modules/resources/sprints.coffee","coffee/modules/resources/swimlanes.coffee","coffee/modules/resources/tasks.coffee","coffee/modules/resources/user-project-settings.coffee","coffee/modules/resources/user-settings.coffee","coffee/modules/resources/users.coffee","coffee/modules/resources/userstories.coffee","coffee/modules/resources/webhooklogs.coffee","coffee/modules/resources/webhooks.coffee","coffee/modules/resources/wiki.coffee","coffee/modules/user-settings/change-password.coffee","coffee/modules/user-settings/lightboxes.coffee","coffee/modules/user-settings/live-notifications.coffee","coffee/modules/user-settings/main.coffee","coffee/modules/user-settings/nav.coffee","coffee/modules/user-settings/notifications.coffee","coffee/modules/user-settings/user-project-settings.coffee","coffee/modules/user-settings/web-notifications.coffee","modules/components/components.module.coffee","modules/discover/discover.module.coffee","modules/external-apps/external-apps.module.coffee","modules/history/history.module.coffee","modules/home/home.module.coffee","modules/navigation-bar/navigation-bar.module.coffee","modules/notifications/notifications.module.coffee","modules/profile/profile.module.coffee","modules/projects/projects.module.coffee","modules/resources/resources.module.coffee","modules/user-timeline/user-timeline.module.coffee","modules/utils/utils.module.coffee","modules/wiki/history/wiki-history.module.coffee","modules/components/animated-counter/animated-counter.directive.coffee","modules/components/assigned-inline/assigned-to-inline.directive.coffee","modules/components/assigned-inline/assigned-users-inline.directive.coffee","modules/components/attachment-link/attachment-link.directive.coffee","modules/components/attachment/attachment-gallery.directive.coffee","modules/components/attachment/attachment.controller.coffee","modules/components/attachment/attachment.directive.coffee","modules/components/attachments-drop/attachments-drop.directive.coffee","modules/components/attachments-full/attachments-full.controller.coffee","modules/components/attachments-full/attachments-full.directive.coffee","modules/components/attachments-full/attachments-full.service.coffee","modules/components/attachments-preview/attachments-preview.controller.coffee","modules/components/attachments-preview/attachments-preview.directive.coffee","modules/components/attachments-preview/attachments-preview.service.coffee","modules/components/attachments-simple/attachments-simple.controller.coffee","modules/components/attachments-simple/attachments-simple.directive.coffee","modules/components/attachments-sortable/attachments-sortable.directive.coffee","modules/components/auto-select/auto-select.directive.coffee","modules/components/avatar/avatar.directive.coffee","modules/components/belong-to-epics/belong-to-epics.directive.coffee","modules/components/bind-wysiwyg-html.coffee","modules/components/board-zoom/board-zoom.directive.coffee","modules/components/card-slideshow/card-slideshow.controller.coffee","modules/components/card-slideshow/card-slideshow.directive.coffee","modules/components/card/card.controller.coffee","modules/components/card/card.directive.coffee","modules/components/click-input-file.directive.coffee","modules/components/color-selector/color-selector.controller.coffee","modules/components/color-selector/color-selector.directive.coffee","modules/components/detail/header/detail-header.controller.coffee","modules/components/detail/header/detail-header.directive.coffee","modules/components/detail/nav/detail-nav.controller.coffee","modules/components/detail/nav/detail-nav.directive.coffee","modules/components/due-date/due-date-controller.coffee","modules/components/due-date/due-date-popover.directive.coffee","modules/components/due-date/due-date.directive.coffee","modules/components/due-date/due-date.service.coffee","modules/components/file-change/file-change.directive.coffee","modules/components/filter/filter-remote.service.coffee","modules/components/filter/filter-slide-down.directive.coffee","modules/components/filter/filter.controller.coffee","modules/components/filter/filter.directive.coffee","modules/components/input-search/input-search.component.coffee","modules/components/issues-table/issues-table.controller.coffee","modules/components/issues-table/issues-table.directive.coffee","modules/components/joy-ride/joy-ride.directive.coffee","modules/components/joy-ride/joy-ride.service.coffee","modules/components/kanban-board-zoom/kanban-board-zoom.directive.coffee","modules/components/lb-select-user/lb-select-user.directive.coffee","modules/components/live-announcement/live-announcement.directive.coffee","modules/components/live-announcement/live-announcement.service.coffee","modules/components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.controller.coffee","modules/components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.directive.coffee","modules/components/move-to-sprint/move-to-sprint.controller.coffee","modules/components/move-to-sprint/move-to-sprint.directive.coffee","modules/components/project-logo-big-src/project-logo-big-src.directive.coffee","modules/components/project-logo-small-src/project-logo-small-src.directive.coffee","modules/components/project-menu/project-menu.controller.coffee","modules/components/project-menu/project-menu.directive.coffee","modules/components/promote-to-us/promote-to-us.directive.coffee","modules/components/search-list/search-list.directive.coffee","modules/components/swimlane-selector/swimlane-selector.directive.coffee","modules/components/tags/tag-dropdown/tag-dropdown.directive.coffee","modules/components/tags/tag-line-common/tag-line-common.controller.coffee","modules/components/tags/tag-line-common/tag-line-common.directive.coffee","modules/components/tags/tag-line-detail/tag-line-detail.controller.coffee","modules/components/tags/tag-line-detail/tag-line-detail.directive.coffee","modules/components/tags/tag-line.service.coffee","modules/components/tags/tag/tag.directive.coffee","modules/components/taskboard-zoom/taskboard-zoom.directive.coffee","modules/components/tasks-sortable/tasks-sortable.directive.coffee","modules/components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.directive.coffee","modules/components/ticket-assigned/assigned-to.directive.coffee","modules/components/ticket-assigned/assigned-users.directive.coffee","modules/components/ticket-watchers/ticket-watchers.controller.coffee","modules/components/ticket-watchers/ticket-watchers.directive.coffee","modules/components/tips/tips.directive.coffee","modules/components/tribe-button/tribe-button.directive.coffee","modules/components/tribe-button/tribe-linked.directive.coffee","modules/components/vote-button/vote-button.controller.coffee","modules/components/vote-button/vote-button.directive.coffee","modules/components/wip-limit-selector/wip-limit-selector.controller.coffee","modules/components/wip-limit-selector/wip-limit-selector.directive.coffee","modules/components/wysiwyg/comment-edit-wysiwyg.directive.coffee","modules/components/wysiwyg/comment-wysiwyg.directive.coffee","modules/components/wysiwyg/custom-field-edit-wysiwyg.directive.coffee","modules/components/wysiwyg/item-wysiwyg.directive.coffee","modules/components/wysiwyg/wysiwyg.directive.coffee","modules/components/wysiwyg/wysiwyg.service.coffee","modules/discover/components/discover-home-order-by/discover-home-order-by.controller.coffee","modules/discover/components/discover-home-order-by/discover-home-order-by.directive.coffee","modules/discover/components/discover-search-bar/discover-search-bar.controller.coffee","modules/discover/components/discover-search-bar/discover-search-bar.directive.coffee","modules/discover/components/discover-search-list-header/discover-search-list-header.controller.coffee","modules/discover/components/discover-search-list-header/discover-search-list-header.directive.coffee","modules/discover/components/featured-projects/featured-projects.controller.coffee","modules/discover/components/featured-projects/featured-projects.directive.coffee","modules/discover/components/highlighted/highlighted.directive.coffee","modules/discover/components/most-active/most-active.controller.coffee","modules/discover/components/most-active/most-active.directive.coffee","modules/discover/components/most-liked/most-liked.controller.coffee","modules/discover/components/most-liked/most-liked.directive.coffee","modules/discover/discover-home/discover-home.controller.coffee","modules/discover/discover-search/discover-search.controller.coffee","modules/discover/discover-search/discover-search.directive.coffee","modules/discover/services/discover-projects.service.coffee","modules/epics/create-epic/create-epic.controller.coffee","modules/epics/create-epic/create-epic.directive.coffee","modules/epics/dashboard/epic-row/epic-row.controller.coffee","modules/epics/dashboard/epic-row/epic-row.directive.coffee","modules/epics/dashboard/epics-dashboard.controller.coffee","modules/epics/dashboard/epics-sortable/epics-sortable.directive.coffee","modules/epics/dashboard/epics-table/epics-table.controller.coffee","modules/epics/dashboard/epics-table/epics-table.directive.coffee","modules/epics/dashboard/story-row/story-row.controller.coffee","modules/epics/dashboard/story-row/story-row.directive.coffee","modules/epics/epics.service.coffee","modules/epics/related-userstories/related-userstories-controller.coffee","modules/epics/related-userstories/related-userstories-create/related-userstories-create.controller.coffee","modules/epics/related-userstories/related-userstories-create/related-userstories-create.directive.coffee","modules/epics/related-userstories/related-userstories-sortable/related-userstories-sortable.directive.coffee","modules/epics/related-userstories/related-userstories.directive.coffee","modules/epics/related-userstories/related-userstory-row/related-userstory-row.controller.coffee","modules/epics/related-userstories/related-userstory-row/related-userstory-row.directive.coffee","modules/external-apps/external-app.controller.coffee","modules/external-apps/external-app.service.coffee","modules/feedback/feedback.service.coffee","modules/history/activity/activity.service.coffee","modules/history/comments/comment.controller.coffee","modules/history/comments/comment.directive.coffee","modules/history/comments/comments.controller.coffee","modules/history/comments/comments.directive.coffee","modules/history/history-lightbox/comment-history-lightbox.controller.coffee","modules/history/history-lightbox/comment-history-lightbox.directive.coffee","modules/history/history-lightbox/history-entry.directive.coffee","modules/history/history-tabs/history-tabs.directive.coffee","modules/history/history.controller.coffee","modules/history/history.directive.coffee","modules/history/history/history-diff.controller.coffee","modules/history/history/history-diff.directive.coffee","modules/history/history/history.directive.coffee","modules/home/duties/duty.directive.coffee","modules/home/home.controller.coffee","modules/home/home.service.coffee","modules/home/projects/home-project-list.directive.coffee","modules/home/working-on/working-on.controller.coffee","modules/home/working-on/working-on.directive.coffee","modules/invite-members/invite-members-form/invite-members-form.controller.coffee","modules/invite-members/invite-members-form/invite-members-form.directive.coffee","modules/invite-members/lightbox-add-members.controller.coffee","modules/invite-members/lightbox-add-members.directive.coffee","modules/invite-members/suggest-add-members/suggest-add-members.controller.coffee","modules/invite-members/suggest-add-members/suggest-add-members.directive.coffee","modules/navigation-bar/dropdown-notifications/dropdown-notifications.directive.coffee","modules/navigation-bar/dropdown-project-list/dropdown-project-list.directive.coffee","modules/navigation-bar/dropdown-user/dropdown-user.directive.coffee","modules/navigation-bar/navigation-bar.directive.coffee","modules/navigation-bar/navigation-bar.service.coffee","modules/notifications/notifications-list/notifications-list.directive.coffee","modules/notifications/notifications.controller.coffee","modules/notifications/notifications.service.coffee","modules/profile/profile-bar/profile-bar.controller.coffee","modules/profile/profile-bar/profile-bar.directive.coffee","modules/profile/profile-contacts/profile-contacts.controller.coffee","modules/profile/profile-contacts/profile-contacts.directive.coffee","modules/profile/profile-favs/items/items.directive.coffee","modules/profile/profile-favs/profile-favs.controller.coffee","modules/profile/profile-favs/profile-favs.directive.coffee","modules/profile/profile-hints/profile-hints.controller.coffee","modules/profile/profile-hints/profile-hints.directive.coffee","modules/profile/profile-projects/profile-projects.controller.coffee","modules/profile/profile-projects/profile-projects.directive.coffee","modules/profile/profile-tab/profile-tab.directive.coffee","modules/profile/profile-tabs/profile-tabs.controller.coffee","modules/profile/profile-tabs/profile-tabs.directive.coffee","modules/profile/profile.controller.coffee","modules/projects/components/blocked-project-explanation.directive.coffee","modules/projects/components/contact-project-button/contact-project-button.controller.coffee","modules/projects/components/contact-project-button/contact-project-button.directive.coffee","modules/projects/components/lb-contact-project/lb-contact-project.controller.coffee","modules/projects/components/lb-contact-project/lb-contact-project.directive.coffee","modules/projects/components/like-project-button/like-project-button.controller.coffee","modules/projects/components/like-project-button/like-project-button.directive.coffee","modules/projects/components/like-project-button/like-project-button.service.coffee","modules/projects/components/sort-projects.directive.coffee","modules/projects/components/watch-project-button/watch-project-button.controller.coffee","modules/projects/components/watch-project-button/watch-project-button.directive.coffee","modules/projects/components/watch-project-button/watch-project-button.service.coffee","modules/projects/create/asana-import/asana-import-project-form/asana-import-project-form.controller.coffee","modules/projects/create/asana-import/asana-import-project-form/asana-import-project-form.directive.coffee","modules/projects/create/asana-import/asana-import.controller.coffee","modules/projects/create/asana-import/asana-import.directive.coffee","modules/projects/create/asana-import/asana-import.service.coffee","modules/projects/create/create-project-form/create-project-form.controller.coffee","modules/projects/create/create-project-form/create-project-form.directive.coffee","modules/projects/create/create-project-members-restrictions/create-project-members-restrictions.directive.coffee","modules/projects/create/create-project-restrictions/create-project-restrictions.directive.coffee","modules/projects/create/create-project.controller.coffee","modules/projects/create/duplicate/duplicate-project.controller.coffee","modules/projects/create/duplicate/duplicate-project.directive.coffee","modules/projects/create/github-import/github-import-project-form/github-import-project-form.controller.coffee","modules/projects/create/github-import/github-import-project-form/github-import-project-form.directive.coffee","modules/projects/create/github-import/github-import.controller.coffee","modules/projects/create/github-import/github-import.directive.coffee","modules/projects/create/github-import/github-import.service.coffee","modules/projects/create/import-project-members/import-project-members.controller.coffee","modules/projects/create/import-project-members/import-project-members.directive.coffee","modules/projects/create/import-project-selector/import-project-selector.controller.coffee","modules/projects/create/import-project-selector/import-project-selector.directive.coffee","modules/projects/create/import-taiga/import-taiga.controller.coffee","modules/projects/create/import-taiga/import-taiga.directive.coffee","modules/projects/create/import/import-project-error-lb.directive.coffee","modules/projects/create/import/import-project.controller.coffee","modules/projects/create/import/import-project.directive.coffee","modules/projects/create/import/import-project.service.coffee","modules/projects/create/invite-members/invite-members.controller.coffee","modules/projects/create/invite-members/invite-members.directive.coffee","modules/projects/create/invite-members/single-member/single-member.directive.coffee","modules/projects/create/jira-import/jira-import-project-form/jira-import-project-form.controller.coffee","modules/projects/create/jira-import/jira-import-project-form/jira-import-project-form.directive.coffee","modules/projects/create/jira-import/jira-import.controller.coffee","modules/projects/create/jira-import/jira-import.directive.coffee","modules/projects/create/jira-import/jira-import.service.coffee","modules/projects/create/newsletter-email-lightbox/newsletter-email-lightbox.directive.coffee","modules/projects/create/select-import-user-lightbox/select-import-user-lightbox.controller.coffee","modules/projects/create/select-import-user-lightbox/select-import-user-lightbox.directive.coffee","modules/projects/create/trello-import/trello-import-project-form/trello-import-project-form.controller.coffee","modules/projects/create/trello-import/trello-import-project-form/trello-import-project-form.directive.coffee","modules/projects/create/trello-import/trello-import.controller.coffee","modules/projects/create/trello-import/trello-import.directive.coffee","modules/projects/create/trello-import/trello-import.service.coffee","modules/projects/create/warning-user-import-lightbox/warning-user-import-lightbox.directive.coffee","modules/projects/listing/projects-listing.controller.coffee","modules/projects/project/project-router.controller.coffee","modules/projects/project/project.controller.coffee","modules/projects/projects.service.coffee","modules/projects/transfer/cant-own-project-explanation.directive.coffee","modules/projects/transfer/transfer-project.controller.coffee","modules/projects/transfer/transfer-project.directive.coffee","modules/resources/attachments-resource.service.coffee","modules/resources/epics-resource.service.coffee","modules/resources/external-apps-resource.service.coffee","modules/resources/history-resource.service.coffee","modules/resources/importers-resource.service.coffee","modules/resources/issues-resource.service.coffee","modules/resources/onpremise-resource.service.coffee","modules/resources/projects-resource.service.coffee","modules/resources/resources.coffee","modules/resources/stats-resource.service.coffee","modules/resources/tasks-resource.service.coffee","modules/resources/user-resource.service.coffee","modules/resources/users-resource.service.coffee","modules/resources/userstories-resource.service.coffee","modules/services/app-meta.service.coffee","modules/services/attachments.service.coffee","modules/services/avatar.service.coffee","modules/services/check-permissions.service.coffee","modules/services/current-user.service.coffee","modules/services/error-handling.service.coffee","modules/services/lightbox-factory.service.coffee","modules/services/paginate-response.service.coffee","modules/services/project-logo.service.coffee","modules/services/project.service.coffee","modules/services/theme.service.coffee","modules/services/user-activity.service.coffee","modules/services/user-list.service.coffee","modules/services/user.service.coffee","modules/services/xhrError.service.coffee","modules/user-timeline/user-timeline-attachment/user-timeline-attachment.directive.coffee","modules/user-timeline/user-timeline-item/user-timeline-item-title.service.coffee","modules/user-timeline/user-timeline-item/user-timeline-item-type.service.coffee","modules/user-timeline/user-timeline-item/user-timeline-item.directive.coffee","modules/user-timeline/user-timeline-pagination-sequence/user-timeline-pagination-sequence.service.coffee","modules/user-timeline/user-timeline/user-timeline.controller.coffee","modules/user-timeline/user-timeline/user-timeline.directive.coffee","modules/user-timeline/user-timeline/user-timeline.service.coffee","modules/utils/isolate-click.directive.coffee","modules/wiki/history/wiki-history-diff.directive.coffee","modules/wiki/history/wiki-history-entry.directive.coffee","modules/wiki/history/wiki-history.controller.coffee","modules/wiki/history/wiki-history.directive.coffee"],"names":[],"mappings":"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","file":"../app.js","sourcesContent":["###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n@taiga = taiga = {}\r\ntaiga.emojis = window.emojis\r\n@.taigaContribPlugins = @.taigaContribPlugins or window.taigaContribPlugins or []\r\n\r\n# Generic function for generate hash from a arbitrary length\r\n# collection of parameters.\r\ntaiga.generateHash = (components=[]) ->\r\n    components = _.map(components, (x) -> JSON.stringify(x))\r\n    return hex_sha1(components.join(\":\"))\r\n\r\n\r\ntaiga.generateUniqueSessionIdentifier = ->\r\n    date = (new Date()).getTime()\r\n    randomNumber = Math.floor(Math.random() * 0x9000000)\r\n    return taiga.generateHash([date, randomNumber])\r\n\r\n\r\ntaiga.sessionId = taiga.generateUniqueSessionIdentifier()\r\n\r\noldWindowOpen = window.open\r\n\r\nwindow.open = (url, name, config) =>\r\n    if url.startsWith('/')\r\n        url = document.baseURI + url\r\n\r\n    oldWindowOpen(url)\r\n\r\nconfigure = ($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider, $compileProvider,\r\n             $translateProvider, $translatePartialLoaderProvider, $animateProvider, $logProvider) ->\r\n\r\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/)\r\n\r\n    # wait until the translation is ready to resolve the page\r\n    originalWhen = $routeProvider.when\r\n\r\n    $routeProvider.when = (path, route) ->\r\n        route.resolve || (route.resolve = {})\r\n        angular.extend(route.resolve, {\r\n            languageLoad: [\"$q\", \"$translate\", ($q, $translate) ->\r\n                deferred = $q.defer()\r\n\r\n                $translate(\"COMMON.YES\").then () -> deferred.resolve()\r\n\r\n                return deferred.promise\r\n            ],\r\n            projectLoaded: [\"$q\", \"tgProjectService\", \"$route\", ($q, projectService, $route) ->\r\n                deferred = $q.defer()\r\n\r\n                projectService.setSection($route.current.$$route?.section)\r\n\r\n                if $route.current.params.pslug\r\n                    projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve)\r\n                else\r\n                    projectService.cleanProject()\r\n                    deferred.resolve()\r\n\r\n                return deferred.promise\r\n            ]\r\n        })\r\n\r\n        return originalWhen.call($routeProvider, path, route)\r\n\r\n    # Home\r\n    $routeProvider.when(\"/\",\r\n        {\r\n            templateUrl: \"home/home.html\",\r\n            controller: \"Home\",\r\n            controllerAs: \"vm\"\r\n            loader: true,\r\n            title: \"HOME.PAGE_TITLE\",\r\n            loader: true,\r\n            description: \"HOME.PAGE_DESCRIPTION\",\r\n            joyride: \"dashboard\"\r\n        }\r\n    )\r\n\r\n    # Discover\r\n    $routeProvider.when(\"/discover\",\r\n        {\r\n            templateUrl: \"discover/discover-home/discover-home.html\",\r\n            controller: \"DiscoverHome\",\r\n            controllerAs: \"vm\",\r\n            title: \"PROJECT.NAVIGATION.DISCOVER\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/discover/search\",\r\n        {\r\n            templateUrl: \"discover/discover-search/discover-search.html\",\r\n            title: \"PROJECT.NAVIGATION.DISCOVER\",\r\n            loader: true,\r\n            controller: \"DiscoverSearch\",\r\n            controllerAs: \"vm\",\r\n            reloadOnSearch: false\r\n        }\r\n    )\r\n\r\n    # My Projects\r\n    $routeProvider.when(\"/projects/\",\r\n        {\r\n            templateUrl: \"projects/listing/projects-listing.html\",\r\n            access: {\r\n                requiresLogin: true\r\n            },\r\n            title: \"PROJECTS.PAGE_TITLE\",\r\n            description: \"PROJECTS.PAGE_DESCRIPTION\",\r\n            loader: true,\r\n            controller: \"ProjectsListing\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    # Project\r\n    $routeProvider.when(\"/project/new\",\r\n        {\r\n            title: \"PROJECT.CREATE.TITLE\",\r\n            templateUrl: \"projects/create/create-project.html\",\r\n            loader: true,\r\n            controller: \"CreateProjectCtrl\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    # Project - scrum\r\n    $routeProvider.when(\"/project/new/scrum\",\r\n        {\r\n            title: \"PROJECT.CREATE.TITLE\",\r\n            template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    # Project - kanban\r\n    $routeProvider.when(\"/project/new/kanban\",\r\n        {\r\n            title: \"PROJECT.CREATE.TITLE\",\r\n            template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    # Project - duplicate\r\n    $routeProvider.when(\"/project/new/duplicate\",\r\n        {\r\n            title: \"PROJECT.CREATE.TITLE\",\r\n            template: \"<tg-duplicate-project></tg-duplicate-project>\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    # Project - import\r\n    $routeProvider.when(\"/project/new/import/:platform?\",\r\n        {\r\n            title: \"PROJECT.CREATE.TITLE\",\r\n            template: \"<tg-import-project></tg-import-project>\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    # Project\r\n    $routeProvider.when(\"/project/:pslug/\",\r\n        {\r\n            template: \"\",\r\n            loader: true,\r\n            controller: \"ProjectRouter\"\r\n        }\r\n    )\r\n\r\n    # Project\r\n    $routeProvider.when(\"/project/:pslug/timeline\",\r\n        {\r\n            templateUrl: \"projects/project/project.html\",\r\n            loader: true,\r\n            controller: \"Project\",\r\n            controllerAs: \"vm\"\r\n            section: \"project-timeline\"\r\n        }\r\n    )\r\n\r\n    # Project ref detail\r\n    $routeProvider.when(\"/project/:pslug/t/:ref\",\r\n        {\r\n            loader: true,\r\n            controller: \"DetailController\",\r\n            template: \"\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/project/:pslug/search\",\r\n        {\r\n            templateUrl: \"search/search.html\",\r\n            reloadOnSearch: false,\r\n            section: \"search\",\r\n            loader: true\r\n        }\r\n    )\r\n\r\n    # Epics\r\n    $routeProvider.when(\"/project/:pslug/epics\",\r\n        {\r\n            section: \"epics\",\r\n            templateUrl: \"epics/dashboard/epics-dashboard.html\",\r\n            loader: true,\r\n            controller: \"EpicsDashboardCtrl\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\",\r\n        {\r\n            templateUrl: \"epic/epic-detail.html\",\r\n            loader: true,\r\n            section: \"epics\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/project/:pslug/backlog\",\r\n        {\r\n            templateUrl: \"backlog/backlog.html\",\r\n            loader: true,\r\n            section: \"backlog\",\r\n            joyride: \"backlog\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/project/:pslug/kanban\",\r\n        {\r\n            templateUrl: \"kanban/kanban.html\",\r\n            loader: true,\r\n            section: \"kanban\",\r\n            joyride: \"kanban\"\r\n        }\r\n    )\r\n\r\n    # Milestone\r\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\",\r\n        {\r\n            templateUrl: \"taskboard/taskboard.html\",\r\n            loader: true,\r\n            section: \"backlog\"\r\n        }\r\n    )\r\n\r\n    # User stories\r\n    $routeProvider.when(\"/project/:pslug/us/:usref\",\r\n        {\r\n            templateUrl: \"us/us-detail.html\",\r\n            loader: true,\r\n            section: \"backlog-kanban\"\r\n        }\r\n    )\r\n\r\n    # Tasks\r\n    $routeProvider.when(\"/project/:pslug/task/:taskref\",\r\n        {\r\n            templateUrl: \"task/task-detail.html\",\r\n            loader: true,\r\n            section: \"backlog-kanban\"\r\n        }\r\n    )\r\n\r\n    # Wiki\r\n    $routeProvider.when(\"/project/:pslug/wiki\",\r\n        {redirectTo: (params) -> \"/project/#{params.pslug}/wiki/home\"}, )\r\n    $routeProvider.when(\"/project/:pslug/wiki-list\",\r\n        {\r\n            templateUrl: \"wiki/wiki-list.html\",\r\n            loader: true,\r\n            section: \"wiki\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\",\r\n        {\r\n            templateUrl: \"wiki/wiki.html\",\r\n            loader: true,\r\n            section: \"wiki\"\r\n        }\r\n    )\r\n\r\n    # Team\r\n    $routeProvider.when(\"/project/:pslug/team\",\r\n        {\r\n            templateUrl: \"team/team.html\",\r\n            loader: true,\r\n            section: \"team\"\r\n        }\r\n    )\r\n\r\n    # Issues\r\n    $routeProvider.when(\"/project/:pslug/issues\",\r\n        {\r\n            templateUrl: \"issue/issues.html\",\r\n            loader: true,\r\n            section: \"issues\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\",\r\n        {\r\n            templateUrl: \"issue/issues-detail.html\",\r\n            loader: true,\r\n            section: \"issues\"\r\n        }\r\n    )\r\n\r\n    # Admin - Project Profile\r\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\",\r\n        {\r\n            templateUrl: \"admin/admin-project-profile.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\",\r\n        {\r\n            templateUrl: \"admin/admin-project-default-values.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\",\r\n        {\r\n            templateUrl: \"admin/admin-project-modules.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\",\r\n        {\r\n            templateUrl: \"admin/admin-project-export.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\",\r\n        {\r\n            templateUrl: \"admin/admin-project-reports.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-status.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-points.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-priorities.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-severities.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-types.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-custom-fields.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-tags.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-due-dates.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/project-values/kanban-power-ups\",\r\n        {\r\n            templateUrl: \"admin/admin-project-values-kanban-power-ups.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/memberships\",\r\n        {\r\n            templateUrl: \"admin/admin-memberships.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    # Admin - Roles\r\n    $routeProvider.when(\"/project/:pslug/admin/roles\",\r\n        {\r\n            templateUrl: \"admin/admin-roles.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n\r\n    # Admin - Third Parties\r\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\",\r\n        {\r\n            templateUrl: \"admin/admin-third-parties-webhooks.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\",\r\n        {\r\n            templateUrl: \"admin/admin-third-parties-github.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\",\r\n        {\r\n            templateUrl: \"admin/admin-third-parties-gitlab.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\",\r\n        {\r\n            templateUrl: \"admin/admin-third-parties-bitbucket.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\",\r\n        {\r\n            templateUrl: \"admin/admin-third-parties-gogs.html\",\r\n            section: \"admin\"\r\n        }\r\n    )\r\n    # Admin - Contrib Plugins\r\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\",\r\n        {templateUrl: \"contrib/main.html\"})\r\n\r\n    # Transfer project\r\n    $routeProvider.when(\"/project/:pslug/transfer/:token\",\r\n        {\r\n            templateUrl: \"projects/transfer/transfer-page.html\",\r\n            loader: true,\r\n            controller: \"Project\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    # User settings\r\n    $routeProvider.when(\"/user-settings/user-profile\",\r\n        {templateUrl: \"user/user-profile.html\"})\r\n    $routeProvider.when(\"/user-settings/user-change-password\",\r\n        {templateUrl: \"user/user-change-password.html\"})\r\n    $routeProvider.when(\"/user-settings/user-project-settings\",\r\n        {templateUrl: \"user/user-project-settings.html\"})\r\n    $routeProvider.when(\"/user-settings/mail-notifications\",\r\n        {templateUrl: \"user/mail-notifications.html\"})\r\n    $routeProvider.when(\"/user-settings/live-notifications\",\r\n        {templateUrl: \"user/live-notifications.html\"})\r\n    $routeProvider.when(\"/user-settings/web-notifications\",\r\n        {templateUrl: \"user/web-notifications.html\"})\r\n    $routeProvider.when(\"/change-email/:email_token\",\r\n        {templateUrl: \"user/change-email.html\"})\r\n    $routeProvider.when(\"/verify-email/:email_token\",\r\n        {templateUrl: \"user/verify-email.html\"})\r\n    $routeProvider.when(\"/cancel-account/:cancel_token\",\r\n        {templateUrl: \"user/cancel-account.html\"})\r\n\r\n    # UserSettings - Contrib Plugins\r\n    $routeProvider.when(\"/user-settings/contrib/:plugin\",\r\n        {templateUrl: \"contrib/user-settings.html\"})\r\n\r\n    # User profile\r\n    $routeProvider.when(\"/profile\",\r\n        {\r\n            templateUrl: \"profile/profile.html\",\r\n            loader: true,\r\n            access: {\r\n                requiresLogin: true\r\n            },\r\n            controller: \"Profile\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    # Notifications\r\n    $routeProvider.when(\"/notifications\",\r\n        {\r\n            templateUrl: \"notifications/notifications.html\",\r\n            loader: true,\r\n            access: {\r\n                requiresLogin: true\r\n            },\r\n            controller: \"Notifications\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    $routeProvider.when(\"/profile/:slug\",\r\n        {\r\n            templateUrl: \"profile/profile.html\",\r\n            loader: true,\r\n            controller: \"Profile\",\r\n            controllerAs: \"vm\"\r\n        }\r\n    )\r\n\r\n    # Auth\r\n    $routeProvider.when(\"/login\",\r\n        {\r\n            templateUrl: \"auth/login.html\",\r\n            title: \"LOGIN.PAGE_TITLE\",\r\n            description: \"LOGIN.PAGE_DESCRIPTION\",\r\n            disableHeader: true,\r\n            controller: \"LoginPage\",\r\n        }\r\n    )\r\n    if window.taigaConfig.publicRegisterEnabled\r\n        $routeProvider.when(\"/register\",\r\n            {\r\n                templateUrl: \"auth/register.html\",\r\n                title: \"REGISTER.PAGE_TITLE\",\r\n                description: \"REGISTER.PAGE_DESCRIPTION\",\r\n                disableHeader: true\r\n            }\r\n        )\r\n    $routeProvider.when(\"/forgot-password\",\r\n        {\r\n            templateUrl: \"auth/forgot-password.html\",\r\n            title: \"FORGOT_PASSWORD.PAGE_TITLE\",\r\n            description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\r\n            disableHeader: true\r\n        }\r\n    )\r\n    $routeProvider.when(\"/change-password/:token\",\r\n        {\r\n            templateUrl: \"auth/change-password-from-recovery.html\",\r\n            title: \"CHANGE_PASSWORD.PAGE_TITLE\",\r\n            description: \"CHANGE_PASSWORD.PAGE_TITLE\",\r\n            disableHeader: true\r\n        }\r\n    )\r\n    $routeProvider.when(\"/invitation/:token\",\r\n        {\r\n            templateUrl: \"auth/invitation.html\",\r\n            title: \"INVITATION.PAGE_TITLE\",\r\n            description: \"INVITATION.PAGE_DESCRIPTION\",\r\n            disableHeader: true\r\n        }\r\n    )\r\n    $routeProvider.when(\"/external-apps\",\r\n        {\r\n            templateUrl: \"external-apps/external-app.html\",\r\n            title: \"EXTERNAL_APP.PAGE_TITLE\",\r\n            description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\r\n            controller: \"ExternalApp\",\r\n            controllerAs: \"vm\",\r\n            disableHeader: true,\r\n            mobileViewport: true\r\n        }\r\n    )\r\n\r\n    # Errors/Exceptions\r\n    $routeProvider.when(\"/blocked-project/:pslug/\",\r\n        {\r\n            templateUrl: \"projects/project/blocked-project.html\",\r\n            loader: true,\r\n        }\r\n    )\r\n    $routeProvider.when(\"/error\",\r\n        {templateUrl: \"error/error.html\"})\r\n    $routeProvider.when(\"/not-found\",\r\n        {templateUrl: \"error/not-found.html\"})\r\n    $routeProvider.when(\"/permission-denied\",\r\n        {templateUrl: \"error/permission-denied.html\"})\r\n\r\n    $routeProvider.otherwise({templateUrl: \"error/not-found.html\"})\r\n    $locationProvider.html5Mode({enabled: true, requireBase: true})\r\n\r\n    defaultHeaders = {\r\n        \"Content-Type\": \"application/json\"\r\n        \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\"\r\n        \"X-Session-Id\": taiga.sessionId\r\n    }\r\n\r\n    $httpProvider.defaults.headers.delete = defaultHeaders\r\n    $httpProvider.defaults.headers.patch = defaultHeaders\r\n    $httpProvider.defaults.headers.post = defaultHeaders\r\n    $httpProvider.defaults.headers.put = defaultHeaders\r\n    $httpProvider.defaults.headers.get = {\r\n        \"X-Session-Id\": taiga.sessionId\r\n    }\r\n\r\n    $httpProvider.useApplyAsync(true)\r\n\r\n    $tgEventsProvider.setSessionId(taiga.sessionId)\r\n\r\n    # Add next param when user try to access to a secction need auth permissions.\r\n    authHttpIntercept = ($q, $location, $navUrls, $lightboxService, errorHandlingService, $injector, urls, storage) ->\r\n        retry = {\r\n            inProgress: false,\r\n            promise: null\r\n        }\r\n\r\n        httpResponseError = (response) ->\r\n            if response.config.url.includes('/auth/refresh')\r\n                return $q.reject(response)\r\n\r\n            if response.status == 0 || (response.status == -1 && !response.config.cancelable)\r\n                $lightboxService.closeAll()\r\n\r\n                errorHandlingService.error()\r\n            else if response.status == 401 and $location.url().indexOf('/login') == -1\r\n                return new Promise (resolve, reject) =>\r\n                    $http = $injector.get('$http')\r\n\r\n                    removeUser = () =>\r\n                        storage.remove(\"token\")\r\n                        storage.remove(\"userInfo\")\r\n\r\n                    refreshTokenReponse = (responseRefresh) =>\r\n                        storage.set(\"token\", responseRefresh.data.auth_token)\r\n                        storage.set(\"refresh\", responseRefresh.data.refresh)\r\n\r\n                        response.config.headers.Authorization = \"Bearer #{responseRefresh.data.auth_token}\"\r\n                        return $http(response.config).then (result) =>\r\n                            resolve(result)\r\n\r\n                    errorToken = () =>\r\n                        nextUrl = $location.url()\r\n                        search = $location.search()\r\n                        storage.remove(\"refresh\")\r\n                        removeUser()\r\n\r\n                        if search.force_next\r\n                            window.location.href = $navUrls.resolve(\"login\") + '?force_next=' +  search.force_next\r\n                        else\r\n                            window.location.href = $navUrls.resolve(\"login\") + '?unauthorized=true&next=' + nextUrl\r\n\r\n                    if retry.inProgress\r\n                        retry.promise\r\n                            .then (responseRefresh) =>\r\n                                return refreshTokenReponse(responseRefresh)\r\n                                .catch (err) =>\r\n                                    # original request error\r\n                                    reject(err)\r\n                            .catch (err) =>\r\n                                # refresh token error\r\n                                errorToken()\r\n                                reject(err)\r\n                    else\r\n                        retry.inProgress = true\r\n\r\n                        apiUrl = urls.resolve('refresh')\r\n                        refreshToken = storage.get(\"refresh\")\r\n\r\n                        if refreshToken\r\n                            request = $http.post(apiUrl, {refresh: refreshToken})\r\n                            retry.promise = request\r\n\r\n                            request.then (responseRefresh) =>\r\n                                retry.inProgress = false\r\n                                return refreshTokenReponse(responseRefresh)\r\n                                .catch (err) =>\r\n                                    # original request error\r\n                                    reject(err)\r\n\r\n                            request.catch (err) =>\r\n                                retry.inProgress = false\r\n                                # refresh token error\r\n                                errorToken()\r\n                                reject(err)\r\n\r\n                        else\r\n                            window.location.href = $navUrls.resolve(\"login\") + '?force_login'\r\n\r\n                            nextUrl = $location.url()\r\n                            search = $location.search()\r\n                            removeUser()\r\n\r\n                            if search.force_next\r\n                                window.location.href = $navUrls.resolve(\"login\") + '?force_next=' +  search.force_next\r\n                            else\r\n                                window.location.href = $navUrls.resolve(\"login\") + '?unauthorized=true&next=' + nextUrl\r\n\r\n                            reject(response)\r\n\r\n                            return\r\n            return $q.reject(response)\r\n\r\n        return {\r\n            responseError: httpResponseError\r\n        }\r\n\r\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\", \"tgErrorHandlingService\", \"$injector\", \"$tgUrls\", \"$tgStorage\", authHttpIntercept])\r\n\r\n    $httpProvider.interceptors.push(\"authHttpIntercept\")\r\n\r\n\r\n    loaderIntercept = ($q, loaderService) ->\r\n        return {\r\n            request: (config) ->\r\n                loaderService.logRequest()\r\n\r\n                return config\r\n\r\n            requestError: (rejection) ->\r\n                loaderService.logResponse()\r\n\r\n                return $q.reject(rejection)\r\n\r\n            responseError: (rejection) ->\r\n                loaderService.logResponse()\r\n\r\n                return $q.reject(rejection)\r\n\r\n            response: (response) ->\r\n                loaderService.logResponse()\r\n\r\n                return response\r\n        }\r\n\r\n\r\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept])\r\n\r\n    $httpProvider.interceptors.push(\"loaderIntercept\")\r\n\r\n    # If there is an error in the version throw a notify error.\r\n    # IMPROVEiMENT: Move this version error handler to USs, issues and tasks repository\r\n    versionCheckHttpIntercept = ($q) ->\r\n        httpResponseError = (response) ->\r\n            if response.status == 400 && response.data.version\r\n                # HACK: to prevent circular dependencies with [$tgConfirm, $translate]\r\n                $injector = angular.element(\"body\").injector()\r\n                $injector.invoke([\"$tgConfirm\", \"$translate\", ($confirm, $translate) =>\r\n                    versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\")\r\n                    $confirm.notify(\"error\", versionErrorMsg, null, 10000)\r\n                ])\r\n\r\n            return $q.reject(response)\r\n\r\n        return {responseError: httpResponseError}\r\n\r\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept])\r\n\r\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\")\r\n\r\n\r\n    blockingIntercept = ($q, errorHandlingService) ->\r\n        # API calls can return blocked elements and in that situation the user will be redirected\r\n        # to the blocked project page\r\n        # This can happens in two scenarios\r\n        # - An ok response containing a blocked_code in the data\r\n        # - An error reponse when updating/creating/deleting including a 451 error code\r\n        redirectToBlockedPage = ->\r\n            errorHandlingService.block()\r\n\r\n        responseOk = (response) ->\r\n            if response.data.blocked_code\r\n                redirectToBlockedPage()\r\n\r\n            return response\r\n\r\n        responseError = (response) ->\r\n            if response.status == 451\r\n                redirectToBlockedPage()\r\n\r\n            return $q.reject(response)\r\n\r\n        return {\r\n            response: responseOk\r\n            responseError: responseError\r\n        }\r\n\r\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept])\r\n\r\n    $httpProvider.interceptors.push(\"blockingIntercept\")\r\n\r\n\r\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false)\r\n\r\n    if localStorage.userInfo\r\n        userInfo = JSON.parse(localStorage.userInfo)\r\n\r\n    # i18n\r\n    preferedLangCode = userInfo?.lang || window.taigaConfig.defaultLanguage || \"en\"\r\n\r\n    $translatePartialLoaderProvider.addPart('taiga')\r\n    $translateProvider\r\n        .useLoader('$translatePartialLoader', {\r\n            urlTemplate: window._version + '/locales/{part}/locale-{lang}.json'\r\n        })\r\n        .useSanitizeValueStrategy('escapeParameters')\r\n        .addInterpolation('$translateMessageFormatInterpolation')\r\n        .preferredLanguage(preferedLangCode)\r\n        .useMissingTranslationHandlerLog()\r\n\r\n    $translateProvider.fallbackLanguage(\"en\")\r\n\r\n    # decoratos plugins\r\n    decorators = window.getDecorators()\r\n\r\n    _.each decorators, (decorator) ->\r\n        $provide.decorator decorator.provider, decorator.decorator\r\n\r\n    # Enable or disable debug log messages\r\n    $logProvider.debugEnabled(window.taigaConfig.debug)\r\n    if window.taigaConfig.debug\r\n        console.info(\"Debug mode is enable\")\r\n\r\n    ## debug-events\r\n    ##\r\n    ## NOTE: This code is useful to debug Angular events, overwrite $rootScope methos\r\n    ##       $broadcast and $emit to log info in the browser console. Uncomment this for\r\n    ##       debug purpose.\r\n    ##\r\n    # $provide.decorator '$rootScope', ($delegate) ->\r\n    #     ignore_events = [\r\n    #         \"$routeChangeStart\",\r\n    #         \"$routeChangeSuccess\",\r\n    #         \"$locationChangeStart\",\r\n    #         \"$locationChangeSuccess\",\r\n    #         \"$translateChangeStart\",\r\n    #         \"$translateChangeEnd\",\r\n    #         \"$translateChangeSuccess\",\r\n    #         \"$translateLoadingStart\",\r\n    #         \"$translateLoadingEnd\",\r\n    #         \"$translateLoadingSuccess\",\r\n    #         \"$viewContentLoaded\",\r\n    #         \"$destroy\",\r\n    #     ]\r\n    #     Scope = $delegate.constructor\r\n    #     origBroadcast = Scope.prototype.$broadcast\r\n    #     origEmit = Scope.prototype.$emit\r\n    #     Scope.prototype.$broadcast = ($scope) ->\r\n    #         if arguments[0] not in ignore_events\r\n    #             console.log(\">> $BROADCAST:\", arguments[0], arguments)\r\n    #         return origBroadcast.apply(this, arguments)\r\n    #     Scope.prototype.$emit = ($scope) ->\r\n    #         if arguments[0] not in ignore_events\r\n    #             console.log(\">> $EMIT:\", arguments[0], arguments)\r\n    #         return origEmit.apply(this, arguments)\r\n    #     return $delegate\r\n    ## end debug-events\r\n\r\ni18nInit = (lang, $translate) ->\r\n    # i18n - moment.js\r\n    moment.locale(lang)\r\n    document.querySelector('html').setAttribute('lang', lang)\r\n\r\n    if (lang != 'en') # en is the default, the file doesn't exist\r\n        ljs.load \"/#{window._version}/locales/moment-locales/\" + lang + \".js\"\r\n\r\n    # i18n - checksley.js\r\n    messages = {\r\n        defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\")\r\n        type: {\r\n            email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\")\r\n            url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\")\r\n            urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\")\r\n            number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\")\r\n            digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\")\r\n            dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\")\r\n            alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\")\r\n            phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\r\n        }\r\n        notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\")\r\n        notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\")\r\n        required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\")\r\n        regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\")\r\n        min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\")\r\n        max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\")\r\n        range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\")\r\n        minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\")\r\n        maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\")\r\n        rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\")\r\n        mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\")\r\n        maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\")\r\n        rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\")\r\n        equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\")\r\n        linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\") # Extra validator\r\n        pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\") # Extra validator\r\n    }\r\n    checksley.updateMessages('default', messages)\r\n\r\n\r\ninit = ($log, $rootscope, $auth, $events, $analytics, $tagManager, $userPilot, $translate, $location, $navUrls, appMetaService,\r\n        loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig,\r\n        projectService) ->\r\n    $log.debug(\"Initialize application\")\r\n\r\n    $rootscope.$on '$translatePartialLoaderStructureChanged', () ->\r\n        $translate.refresh()\r\n\r\n    # Checksley - Extra validators\r\n    validators = {\r\n        linewidth: (val, width) ->\r\n            lines = taiga.nl2br(val).split(\"<br />\")\r\n\r\n            valid = _.every lines, (line) ->\r\n                line.length < width\r\n\r\n            return valid\r\n        pikaday: (val) ->\r\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n            return moment(val, prettyDate).isValid()\r\n        url: (val) ->\r\n            re_weburl = new RegExp(\r\n                \"^\" +\r\n                    # protocol identifier\r\n                    \"(?:(?:https?|ftp)://)\" +\r\n                    # user:pass authentication\r\n                    \"(?:\\\\S+(?::\\\\S*)?@)?\" +\r\n                    \"(?:\" +\r\n                    # IP address exclusion\r\n                    # private & local networks\r\n                    \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\r\n                    \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\r\n                    \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +\r\n                    # IP address dotted notation octets\r\n                    # excludes loopback network 0.0.0.0\r\n                    # excludes reserved space >= 224.0.0.0\r\n                    # excludes network & broacast addresses\r\n                    # (first & last IP address of each class)\r\n                    \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\r\n                    \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\r\n                    \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\r\n                \"|\" +\r\n                    # host name\r\n                    \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\r\n                    # domain name\r\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\r\n                    # TLD identifier\r\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\r\n                    # TLD may end with dot\r\n                    \"\\\\.?\" +\r\n                    \")\" +\r\n                    # port number\r\n                    \"(?::\\\\d{2,5})?\" +\r\n                    # resource path\r\n                    \"(?:[/?#]\\\\S*)?\" +\r\n                \"$\", \"i\"\r\n            )\r\n            return re_weburl.test(val)\r\n\r\n    }\r\n    checksley.updateValidators(validators)\r\n\r\n    # Taiga Plugins\r\n    $rootscope.contribPlugins = @.taigaContribPlugins\r\n    $rootscope.adminPlugins = _.filter(@.taigaContribPlugins, {\"type\": \"admin\"})\r\n    $rootscope.authPlugins = _.filter(@.taigaContribPlugins, {\"type\": \"auth\"})\r\n    $rootscope.userSettingsPlugins = _.filter(@.taigaContribPlugins, {\"type\": \"userSettings\"})\r\n\r\n    lang = null\r\n\r\n    $rootscope.$on \"$translateChangeEnd\", (e, ctx) ->\r\n        if lang != ctx.language\r\n            lang = ctx.language\r\n            i18nInit(lang, $translate)\r\n            # RTL\r\n            rtlLanguages = $tgConfig.get(\"rtlLanguages\", [])\r\n            $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1\r\n\r\n            legacy = document.querySelector('tg-legacy')\r\n            legacy.translations = {\r\n                translationTable: $translate.getTranslationTable(lang),\r\n                lan: lang\r\n            }\r\n\r\n    $events.setupConnection()\r\n\r\n    # Load user\r\n    if $auth.isAuthenticated()\r\n        user = $auth.getUser()\r\n\r\n    # Analytics\r\n    $analytics.initialize()\r\n\r\n    # Tag Manager\r\n    $tagManager.initialize()\r\n\r\n    # UserPilot\r\n    $userPilot.initialize()\r\n    $userPilot.identify()\r\n\r\n    # Initialize error handling service when location change start\r\n    $rootscope.$on '$locationChangeStart',  (event) ->\r\n        errorHandlingService.init()\r\n\r\n        if lightboxService.getLightboxOpen().length\r\n            event.preventDefault()\r\n\r\n            lightboxService.closeAll()\r\n\r\n    # On the first page load the loader is painted in `$routeChangeSuccess`\r\n    # because we need to hide the tg-navigation-bar.\r\n    # In the other cases the loader is in `$routeChangeSuccess`\r\n    # because `location.noreload` prevent to execute this event.\r\n    un = $rootscope.$on '$routeChangeStart',  (event, next) ->\r\n        if next.loader\r\n            loaderService.start(true)\r\n\r\n        un()\r\n\r\n    $rootscope.$on '$routeChangeSuccess', (event, next) ->\r\n        if projectService.project?.get('blocked_code')\r\n            errorHandlingService.block()\r\n\r\n        if next.loader\r\n            loaderService.start(true)\r\n\r\n        if next.access && next.access.requiresLogin\r\n            if !$auth.isAuthenticated()\r\n                $location.path($navUrls.resolve(\"login\"))\r\n\r\n        if next.title or next.description\r\n            title = $translate.instant(next.title or \"\")\r\n            description = $translate.instant(next.description or \"\")\r\n            appMetaService.setAll(title, description)\r\n\r\n        if next.mobileViewport\r\n            appMetaService.addMobileViewport()\r\n        else\r\n            appMetaService.removeMobileViewport()\r\n\r\n        if next.disableHeader\r\n            navigationBarService.disableHeader()\r\n        else\r\n            navigationBarService.enableHeader()\r\n\r\n# Config for infinite scroll\r\nangular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500)\r\n\r\n# Load modules\r\npluginsWithModule = _.filter(@.taigaContribPlugins, (plugin) -> plugin.module)\r\npluginsModules = _.map(pluginsWithModule, (plugin) -> plugin.module)\r\n\r\nmodules = [\r\n    # Main Global Modules\r\n    \"taigaBase\",\r\n    \"taigaCommon\",\r\n    \"taigaResources\",\r\n    \"taigaResources2\",\r\n    \"taigaAuth\",\r\n    \"taigaEvents\",\r\n\r\n    # Specific Modules\r\n    \"taigaHome\",\r\n    \"taigaNavigationBar\",\r\n    \"taigaProjects\",\r\n    \"taigaRelatedTasks\",\r\n    \"taigaBacklog\",\r\n    \"taigaTaskboard\",\r\n    \"taigaKanban\",\r\n    \"taigaIssues\",\r\n    \"taigaUserStories\",\r\n    \"taigaTasks\",\r\n    \"taigaTeam\",\r\n    \"taigaWiki\",\r\n    \"taigaSearch\",\r\n    \"taigaAdmin\",\r\n    \"taigaProject\",\r\n    \"taigaUserSettings\",\r\n    \"taigaFeedback\",\r\n    \"taigaPlugins\",\r\n    \"taigaIntegrations\",\r\n    \"taigaComponents\",\r\n\r\n    # new modules\r\n    \"taigaProfile\",\r\n    \"taigaHome\",\r\n    \"taigaUserTimeline\",\r\n    \"taigaExternalApps\",\r\n    \"taigaDiscover\",\r\n    \"taigaHistory\",\r\n    \"taigaNotifications\",\r\n    \"taigaWikiHistory\",\r\n    \"taigaEpics\",\r\n    \"taigaUtils\"\r\n\r\n    # template cache\r\n    \"templates\",\r\n\r\n    # Vendor modules\r\n    \"ngSanitize\",\r\n    \"ngRoute\",\r\n    \"ngAnimate\",\r\n    \"ngAria\",\r\n    \"pascalprecht.translate\",\r\n    \"infinite-scroll\",\r\n    \"tgRepeat\",\r\n].concat(pluginsModules)\r\n\r\n# Main module definition\r\nmodule = angular.module(\"taiga\", modules)\r\n\r\nmodule.config([\r\n    \"$routeProvider\",\r\n    \"$locationProvider\",\r\n    \"$httpProvider\",\r\n    \"$provide\",\r\n    \"$tgEventsProvider\",\r\n    \"$compileProvider\",\r\n    \"$translateProvider\",\r\n    \"$translatePartialLoaderProvider\",\r\n    \"$animateProvider\",\r\n    \"$logProvider\"\r\n    configure\r\n])\r\n\r\nmodule.run([\r\n    \"$log\",\r\n    \"$rootScope\",\r\n    \"$tgAuth\",\r\n    \"$tgEvents\",\r\n    \"$tgAnalytics\",\r\n    \"$tgTagManager\",\r\n    \"$tgUserPilot\",\r\n    \"$translate\",\r\n    \"$tgLocation\",\r\n    \"$tgNavUrls\",\r\n    \"tgAppMetaService\",\r\n    \"tgLoader\",\r\n    \"tgNavigationBarService\",\r\n    \"tgErrorHandlingService\",\r\n    \"lightboxService\",\r\n    \"$tgConfig\",\r\n    \"tgProjectService\",\r\n    init\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass TaigaBase\r\nclass TaigaService extends TaigaBase\r\nclass TaigaController extends TaigaBase\r\n    onInitialDataError: (xhr) =>\r\n        if xhr\r\n            if xhr.status == 404\r\n                @errorHandlingService.notfound()\r\n            else if xhr.status == 403\r\n                @errorHandlingService.permissionDenied()\r\n\r\n        return @q.reject(xhr)\r\n\r\n@.taiga.Base = TaigaBase\r\n@.taiga.Service = TaigaService\r\n@.taiga.Controller = TaigaController\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\naddClass = (el, className) ->\r\n    if (el.classList)\r\n        el.classList.add(className)\r\n    else\r\n        el.className += ' ' + className\r\n\r\n\r\nnl2br = (str) =>\r\n    breakTag = '<br />'\r\n    return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2')\r\n\r\n\r\nbindMethods = (object) =>\r\n    dependencies = _.keys(object)\r\n\r\n    methods = []\r\n\r\n    _.forIn object, (value, key) =>\r\n        if key not in dependencies && _.isFunction(value)\r\n            methods.push(key)\r\n\r\n    _.bindAll(object, methods)\r\n\r\n\r\nbindOnce = (scope, attr, continuation) =>\r\n    val = scope.$eval(attr)\r\n    if val != undefined\r\n        return continuation(val)\r\n\r\n    delBind = null\r\n    delBind = scope.$watch attr, (val) ->\r\n        return if val is undefined\r\n        continuation(val)\r\n        delBind() if delBind\r\n\r\n\r\nmixOf = (base, mixins...) ->\r\n    class Mixed extends base\r\n\r\n    for mixin in mixins by -1 #earlier mixins override later ones\r\n        for name, method of mixin::\r\n            Mixed::[name] = method\r\n    Mixed\r\n\r\n\r\ntrim = (data, char) ->\r\n    return _.trim(data, char)\r\n\r\n\r\nslugify = (data) ->\r\n    return data.toString().toLowerCase().trim()\r\n        .replace(/\\s+/g, '-')\r\n        .replace(/&/g, '-and-')\r\n        .replace(/[^\\w\\-]+/g, '')\r\n        .replace(/\\-\\-+/g, '-')\r\n\r\n\r\nunslugify = (data) ->\r\n    if data\r\n        return _.capitalize(data.replace(/-/g, ' '))\r\n    return data\r\n\r\n\r\ntoggleText = (element, texts) ->\r\n    nextTextPosition = element.data('nextTextPosition')\r\n    nextTextPosition = 0 if not nextTextPosition? or nextTextPosition >= texts.length\r\n    text = texts[nextTextPosition]\r\n    element.data('nextTextPosition', nextTextPosition + 1)\r\n    element.text(text)\r\n\r\n\r\ngroupBy = (coll, pred) ->\r\n    result = {}\r\n    for item in coll\r\n        result[pred(item)] = item\r\n\r\n    return result\r\n\r\n\r\ntimeout = (wait, continuation) ->\r\n    return window.setTimeout(continuation, wait)\r\n\r\n\r\ncancelTimeout = (timeoutVar) ->\r\n    window.clearTimeout(timeoutVar)\r\n\r\n\r\nscopeDefer = (scope, func) ->\r\n    _.defer =>\r\n        scope.$apply(func)\r\n\r\n\r\ntoString = (value) ->\r\n    if _.isNumber(value)\r\n        return value + \"\"\r\n    else if _.isString(value)\r\n        return value\r\n    else if _.isPlainObject(value)\r\n        return JSON.stringify(value)\r\n    else if _.isUndefined(value)\r\n        return \"\"\r\n    return value.toString()\r\n\r\n\r\njoinStr = (str, coll) ->\r\n    return coll.join(str)\r\n\r\n\r\ndebounce = (wait, func) ->\r\n    return _.debounce(func, wait, {leading: true, trailing: false})\r\n\r\n\r\ndebounceLeading = (wait, func) ->\r\n    return _.debounce(func, wait, {leading: false, trailing: true})\r\n\r\n\r\nstartswith = (str1, str2) ->\r\n    return _.startsWith(str1, str2)\r\n\r\n\r\ntruncate = (str, maxLength, suffix=\"...\") ->\r\n    return str if (typeof str != \"string\") and not (str instanceof String)\r\n\r\n    out = str.slice(0)\r\n\r\n    if out.length > maxLength\r\n        out = out.substring(0, maxLength + 1)\r\n        out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")))\r\n        out = out + suffix\r\n\r\n    return out\r\n\r\n\r\nsizeFormat = (input, precision=1) ->\r\n    if isNaN(parseFloat(input)) or not isFinite(input)\r\n        return \"-\"\r\n\r\n    if input == 0\r\n        return \"0 bytes\"\r\n\r\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"]\r\n    number = Math.floor(Math.log(input) / Math.log(1024))\r\n    if number > 5\r\n        number = 5\r\n    size = (input / Math.pow(1024, number)).toFixed(precision)\r\n    return  \"#{size} #{units[number]}\"\r\n\r\n\r\nstripTags = (str, exception) ->\r\n    if exception\r\n        pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi')\r\n        return String(str).replace(pattern, '')\r\n    else\r\n        return String(str).replace(/<\\/?[^>]+>/g, '')\r\n\r\n\r\nreplaceTags = (str, tags, replace) ->\r\n    # open tag\r\n    pattern = new RegExp('<(' + tags + ')>', 'gi')\r\n    str = str.replace(pattern, '<' + replace + '>')\r\n\r\n    # close tag\r\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi')\r\n    str = str.replace(pattern, '</' + replace + '>')\r\n\r\n    return str\r\n\r\n\r\ndefineImmutableProperty = (obj, name, fn) =>\r\n    Object.defineProperty obj, name, {\r\n        get: () =>\r\n            if !_.isFunction(fn)\r\n                throw \"defineImmutableProperty third param must be a function\"\r\n\r\n            fn_result = fn()\r\n            if fn_result && _.isObject(fn_result)\r\n                if fn_result.size == undefined\r\n                    throw \"defineImmutableProperty must return immutable data\"\r\n\r\n            return fn_result\r\n    }\r\n\r\n\r\n_.mixin\r\n    removeKeys: (obj, keys) ->\r\n        _.chain([keys]).flatten().reduce(\r\n            (obj, key) ->\r\n                delete obj[key]; obj\r\n            , obj).value()\r\n\r\n    cartesianProduct: ->\r\n        _.reduceRight(\r\n            arguments, (a,b) ->\r\n                _.flatten(_.map(a, (x) -> _.map b, (y) -> [y].concat(x)), true)\r\n            , [ [] ])\r\n\r\n\r\nisImage = (name) ->\r\n    return name.match(/\\.(jpe?g|png|gif|gifv|svg|psd|webp)/i) != null\r\n\r\nisEmail = (name) ->\r\n    return name? and name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) != null\r\n\r\nisPdf = (name) ->\r\n    return name.match(/\\.(pdf)/i) != null\r\n\r\n\r\npatch = (oldImmutable, newImmutable) ->\r\n    pathObj = {}\r\n\r\n    newImmutable.forEach (newValue, key) ->\r\n        if newValue != oldImmutable.get(key)\r\n            if newValue.toJS\r\n                pathObj[key] = newValue.toJS()\r\n            else\r\n                pathObj[key] = newValue\r\n\r\n    return pathObj\r\n\r\nDEFAULT_COLOR_LIST = [\r\n    '#D35163', '#D351CF', '#AC51D3', '#8151D3', '#5551D3', '#5178D3', '#78D351',\r\n    '#51D355', '#51D381', '#51D3AC', '#51CFD3', '#51A3D3', '#A3D350', '#CFD350',\r\n    '#D3AC50', '#D38050', '#D35450', '#E44057', '#4C566A', '#70728F', '#A9AABC'\r\n]\r\n\r\ngetRandomDefaultColor = () ->\r\n    return _.sample(DEFAULT_COLOR_LIST)\r\n\r\ngetDefaulColorList = () ->\r\n    return _.clone(DEFAULT_COLOR_LIST)\r\n\r\ngetMatches = (string, regex, index) ->\r\n    index || (index = 1)\r\n    matches = []\r\n    match = null\r\n\r\n    while match = regex.exec(string)\r\n        if index == -1\r\n            matches.push(match)\r\n        else\r\n            matches.push(match[index])\r\n\r\n    return matches\r\n\r\nrandomInt = (start, end) ->\r\n    interval = end - start\r\n    return start + Math.floor(Math.random()*(interval+1))\r\n\r\nnormalizeString = (string) ->\r\n    normalizedString = string\r\n    normalizedString = normalizedString.replace(\"\", \"A\").replace(\"\", \"A\").replace(\"\", \"A\")\r\n    normalizedString = normalizedString.replace(\"\", \"E\").replace(\"\", \"E\").replace(\"\", \"E\")\r\n    normalizedString = normalizedString.replace(\"\", \"I\").replace(\"\", \"I\").replace(\"\", \"I\")\r\n    normalizedString = normalizedString.replace(\"\", \"O\").replace(\"\", \"O\").replace(\"\", \"O\")\r\n    normalizedString = normalizedString.replace(\"\", \"U\").replace(\"\", \"U\").replace(\"\", \"U\")\r\n    return normalizedString\r\n\r\nfindScope = ($scope, condition) ->\r\n    result = condition($scope)\r\n    if result\r\n        return result\r\n\r\n    if $scope\r\n        return findScope($scope.$parent, condition)\r\n\r\n    return null\r\n\r\ntaiga = @.taiga\r\ntaiga.addClass = addClass\r\ntaiga.nl2br = nl2br\r\ntaiga.bindMethods = bindMethods\r\ntaiga.bindOnce = bindOnce\r\ntaiga.mixOf = mixOf\r\ntaiga.trim = trim\r\ntaiga.slugify = slugify\r\ntaiga.unslugify = unslugify\r\ntaiga.toggleText = toggleText\r\ntaiga.groupBy = groupBy\r\ntaiga.timeout = timeout\r\ntaiga.cancelTimeout = cancelTimeout\r\ntaiga.scopeDefer = scopeDefer\r\ntaiga.toString = toString\r\ntaiga.joinStr = joinStr\r\ntaiga.truncate = truncate\r\ntaiga.debounce = debounce\r\ntaiga.debounceLeading = debounceLeading\r\ntaiga.startswith = startswith\r\ntaiga.sizeFormat = sizeFormat\r\ntaiga.stripTags = stripTags\r\ntaiga.replaceTags = replaceTags\r\ntaiga.defineImmutableProperty = defineImmutableProperty\r\ntaiga.isImage = isImage\r\ntaiga.isEmail = isEmail\r\ntaiga.isPdf = isPdf\r\ntaiga.patch = patch\r\ntaiga.getRandomDefaultColor = getRandomDefaultColor\r\ntaiga.getDefaulColorList = getDefaulColorList\r\ntaiga.getMatches = getMatches\r\ntaiga.randomInt = randomInt\r\ntaiga.normalizeString = normalizeString\r\ntaiga.findScope = findScope\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngroupBy = @.taiga.groupBy\r\njoinStr = @.taiga.joinStr\r\ntrim = @.taiga.trim\r\ntoString = @.taiga.toString\r\n\r\n\r\n#############################################################################\r\n## Page Mixin\r\n#############################################################################\r\n\r\nclass PageMixin\r\n    fillUsersAndRoles: (users, roles) ->\r\n        activeUsers = _.filter(users, (user) => user.is_active)\r\n        @scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\")\r\n        @scope.activeUsersById = groupBy(@scope.activeUsers, (e) -> e.id)\r\n\r\n        @scope.users = _.sortBy(users, \"full_name_display\")\r\n        @scope.usersById = groupBy(users, (e) -> e.id)\r\n\r\n        @scope.roles = _.sortBy(roles, \"order\")\r\n        computableRoles = _(@scope.project.members).map(\"role\").uniq().value()\r\n        @scope.computableRoles = _(roles).filter(\"computable\")\r\n                                         .filter((x) -> _.includes(computableRoles, x.id))\r\n                                         .value()\r\n    loadUsersAndRoles: ->\r\n        promise = @q.all([\r\n            @rs.projects.usersList(@scope.projectId),\r\n            @rs.projects.rolesList(@scope.projectId)\r\n        ])\r\n\r\n        return promise.then (results) =>\r\n            [users, roles] = results\r\n            @.fillUsersAndRoles(users, roles)\r\n            return results\r\n\r\ntaiga.PageMixin = PageMixin\r\n\r\n\r\n#############################################################################\r\n## Filters Mixin\r\n#############################################################################\r\n# This mixin requires @location ($tgLocation), and @scope\r\n\r\nclass FiltersMixin\r\n    excludePrefix: \"exclude_\"\r\n\r\n    selectFilter: (name, value, load=false, mode=\"include\") ->\r\n        params = @location.search()\r\n\r\n        if mode == \"exclude\"\r\n            name = @.excludePrefix.concat(name)\r\n\r\n        if params[name] != undefined and name != \"page\"\r\n            existing = _.map(taiga.toString(params[name]).split(\",\"), (x) -> trim(x))\r\n            existing.push(taiga.toString(value))\r\n            existing = _.compact(existing)\r\n            value = joinStr(\",\", _.uniq(existing))\r\n\r\n        if !@location.isInCurrentRouteParams(name, value)\r\n            location = if load then @location else @location.noreload(@scope)\r\n            location.search(name, value)\r\n\r\n    replaceFilter: (name, value, load=false) ->\r\n        if !@location.isInCurrentRouteParams(name, value)\r\n            location = if load then @location else @location.noreload(@scope)\r\n            location.search(name, value)\r\n\r\n    replaceAllFilters: (filters, load=false) ->\r\n        location = if load then @location else @location.noreload(@scope)\r\n        location.search(filters)\r\n\r\n    unselectFilter: (name, value, load=false, mode='include') ->\r\n        params = @location.search()\r\n\r\n        if mode == \"exclude\"\r\n            name = @.excludePrefix.concat(name)\r\n\r\n        if params[name] is undefined\r\n            return\r\n\r\n        if value is undefined or value is null\r\n            delete params[name]\r\n\r\n        parsedValues = _.map(taiga.toString(params[name]).split(\",\"), (x) -> trim(x))\r\n        newValues = _.reject(parsedValues, (x) -> x == taiga.toString(value))\r\n        newValues = _.compact(newValues)\r\n\r\n        if _.isEmpty(newValues)\r\n            value = null\r\n        else\r\n            value = joinStr(\",\", _.uniq(newValues))\r\n\r\n        location = if load then @location else @location.noreload(@scope)\r\n        location.search(name, value)\r\n\r\n    applyStoredFilters: (projectSlug, key, validKeys) ->\r\n        if _.isEmpty(@location.search())\r\n            filters = @.getFilters(projectSlug, key)\r\n            if validKeys\r\n                filters = _.pick(filters, validKeys)\r\n\r\n            if Object.keys(filters).length\r\n                @location.search(filters)\r\n                @location.replace()\r\n\r\n                return true\r\n\r\n        return false\r\n\r\n    storeFilters: (projectSlug, params, filtersHashSuffix) ->\r\n        ns = \"#{projectSlug}:#{filtersHashSuffix}\"\r\n        hash = taiga.generateHash([projectSlug, ns])\r\n        @storage.set(hash, params)\r\n\r\n    getFilters: (projectSlug, filtersHashSuffix) ->\r\n        ns = \"#{projectSlug}:#{filtersHashSuffix}\"\r\n        hash = taiga.generateHash([projectSlug, ns])\r\n\r\n        data = @storage.get(hash) or {}\r\n\r\n        delete data.q\r\n\r\n        return data\r\n\r\n    formatSelectedFilters: (type, list, urlIds, mode=\"include\") ->\r\n        selectedIds = urlIds.split(',')\r\n        selectedFilters = _.filter list, (it) ->\r\n            selectedIds.indexOf(_.toString(it.id)) != -1\r\n\r\n        invalidTags = _.filter selectedIds, (it) ->\r\n            return !_.find selectedFilters, (sit) -> _.toString(sit.id) == it\r\n\r\n        invalidAppliedTags =  _.map invalidTags, (it) ->\r\n            return {\r\n                id: it\r\n                key: type + \":\" + it\r\n                dataType: type,\r\n                name: it\r\n                mode: mode\r\n            }\r\n\r\n        validAppliedTags = _.map selectedFilters, (it) ->\r\n            return {\r\n                id: it.id\r\n                key: type + \":\" + it.id\r\n                dataType: type,\r\n                name: it.name\r\n                color: it.color\r\n                mode: mode\r\n            }\r\n\r\n        return invalidAppliedTags.concat(validAppliedTags)\r\n\r\ntaiga.FiltersMixin = FiltersMixin\r\n\r\n#############################################################################\r\n## Us Filters Mixin\r\n#############################################################################\r\n\r\nclass UsFiltersMixin\r\n    excludePrefix: \"exclude_\"\r\n    filterCategories: [\r\n        \"tags\",\r\n        \"status\",\r\n        \"assigned_users\",\r\n        \"assigned_to\",\r\n        \"owner\",\r\n        \"epic\",\r\n        \"role\",\r\n    ]\r\n    excludeFilters: []\r\n\r\n    changeQ: (q) ->\r\n        @.filterQ = q\r\n        @.filtersReloadContent()\r\n\r\n    removeFilter: (filter) ->\r\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\r\n        @.filtersReloadContent()\r\n        @.generateFilters()\r\n\r\n    addFilter: (newFilter) ->\r\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\r\n        @.filtersReloadContent()\r\n        @.generateFilters()\r\n\r\n    selectCustomFilter: (customFilter) ->\r\n        @.replaceAllFilters(customFilter.filter)\r\n        @.filtersReloadContent()\r\n        @.generateFilters()\r\n\r\n    saveCustomFilter: (name) ->\r\n        filters = {}\r\n        urlfilters = @location.search()\r\n\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            filters[key] = urlfilters[key]\r\n            filters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName).then (userFilters) =>\r\n            userFilters[name] = filters\r\n\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.storeCustomFiltersName).then(@.generateFilters)\r\n\r\n    removeCustomFilter: (customFilter) ->\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName).then (userFilters) =>\r\n            delete userFilters[customFilter.id]\r\n\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.storeCustomFiltersName).then(@.generateFilters)\r\n            @.generateFilters()\r\n\r\n    isFilterDataTypeSelected: (filterDataType) ->\r\n        for filter in @.selectedFilters\r\n            if (filter['dataType'] == filterDataType)\r\n                return true\r\n        return false\r\n\r\n    generateFilters: (milestone) ->\r\n        @.storeFilters(@params.pslug, @location.search(), @.storeFiltersName)\r\n\r\n        urlfilters = @location.search()\r\n\r\n        loadFilters = {}\r\n        loadFilters.project = @scope.projectId\r\n\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            loadFilters[key] = urlfilters[key]\r\n            loadFilters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        if milestone\r\n            loadFilters.milestone = milestone\r\n\r\n        return @q.all([\r\n            @rs.userstories.filtersData(loadFilters),\r\n            @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName)\r\n        ]).then (result) =>\r\n            data = result[0]\r\n            customFiltersRaw = result[1]\r\n            dataCollection = {}\r\n\r\n            dataCollection.status = _.map data.statuses, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.tags = _.map data.tags, (it) ->\r\n                it.id = it.name\r\n\r\n                return it\r\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\r\n                return tag.count > 0\r\n            dataCollection.assigned_users = _.map data.assigned_users, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.full_name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.full_name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.role = _.map data.roles, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.owner = _.map data.owners, (it) ->\r\n                it.id = it.id.toString()\r\n                it.name = it.full_name\r\n\r\n                return it\r\n            dataCollection.epic = _.map data.epics, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                    it.name = \"##{it.ref} #{it.subject}\"\r\n                else\r\n                    it.id = \"null\"\r\n                    it.name = \"Not in an epic\"\r\n\r\n                return it\r\n\r\n            @.selectedFilters = []\r\n\r\n            for key in @.filterCategories\r\n                excludeKey = @.excludePrefix.concat(key)\r\n                if loadFilters[key]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n                if loadFilters[excludeKey]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n\r\n            @.filters = []\r\n\r\n            if !@.excludeFilters.includes('status')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\r\n                    dataType: \"status\",\r\n                    content: dataCollection.status\r\n                })\r\n\r\n            if !@.excludeFilters.includes('tags')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\r\n                    dataType: \"tags\",\r\n                    content: dataCollection.tags,\r\n                    hideEmpty: true,\r\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\r\n                })\r\n\r\n            if !@.excludeFilters.includes('assigned_to')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\r\n                    dataType: \"assigned_users\",\r\n                    content: dataCollection.assigned_users\r\n                })\r\n\r\n            if !@.excludeFilters.includes('role')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\r\n                    dataType: \"role\",\r\n                    content: dataCollection.role\r\n                })\r\n\r\n            if !@.excludeFilters.includes('created_by')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\r\n                    dataType: \"owner\",\r\n                    content: dataCollection.owner\r\n                })\r\n\r\n            if !@.excludeFilters.includes('epic')\r\n                @.filters.push({\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\r\n                    dataType: \"epic\",\r\n                    content: dataCollection.epic\r\n                })\r\n\r\n            @.customFilters = []\r\n            _.forOwn customFiltersRaw, (value, key) =>\r\n                @.customFilters.push({id: key, name: key, filter: value})\r\n\r\n\r\ntaiga.UsFiltersMixin = UsFiltersMixin\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaAdmin\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n$translateMissingTranslationHandlerLog = ($log) ->\r\n  (translationId) ->\r\n    # $log.warn 'Translation for ' + translationId + ' doesn\\'t exist'\r\n    return\r\n\r\n$translateMissingTranslationHandlerLog.$inject = [ '$log' ]\r\n\r\nangular.module('pascalprecht.translate').factory '$translateMissingTranslationHandlerLog', $translateMissingTranslationHandlerLog\r\n\r\n$translateMissingTranslationHandlerLog.displayName = '$translateMissingTranslationHandlerLog'\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaAuth\", [\"taigaResources\"])\r\n\r\nclass LoginPage\r\n    @.$inject = [\r\n        'tgCurrentUserService',\r\n        '$location',\r\n        '$tgNavUrls',\r\n        '$routeParams',\r\n        '$tgAuth'\r\n    ]\r\n\r\n    constructor: (currentUserService, $location, $navUrls, $routeParams, $auth) ->\r\n        if currentUserService.isAuthenticated()\r\n            if not $routeParams['force_login']\r\n                url = $navUrls.resolve(\"home\")\r\n                if $routeParams['next']\r\n                    url = decodeURIComponent($routeParams['next'])\r\n                    $location.search('next', null)\r\n\r\n                if $routeParams['unauthorized']\r\n                    $auth.clear()\r\n                    $auth.removeToken()\r\n                else\r\n                    $location.url(url)\r\n\r\n\r\nmodule.controller('LoginPage', LoginPage)\r\n\r\n#############################################################################\r\n## Authentication Service\r\n#############################################################################\r\n\r\nclass AuthService extends taiga.Service\r\n    @.$inject = [\"$rootScope\",\r\n                 \"$tgStorage\",\r\n                 \"$tgModel\",\r\n                 \"$tgResources\",\r\n                 \"$tgHttp\",\r\n                 \"$tgUrls\",\r\n                 \"$tgConfig\",\r\n                 \"$tgUserPilot\",\r\n                 \"$translate\",\r\n                 \"tgCurrentUserService\",\r\n                 \"tgThemeService\",\r\n                 \"$tgAnalytics\"]\r\n\r\n    constructor: (@rootscope, @storage, @model, @rs, @http, @urls, @config, @userpilot, @translate, @currentUserService,\r\n                  @themeService, @analytics) ->\r\n        super()\r\n\r\n        userModel = @.getUser()\r\n        @._currentTheme = @._getUserTheme()\r\n\r\n        @.setUserdata(userModel)\r\n\r\n    setUserdata: (userModel) ->\r\n        if userModel\r\n            @.userData = Immutable.fromJS(userModel.getAttrs())\r\n            @currentUserService.setUser(@.userData)\r\n        else\r\n            @.userData = null\r\n        @analytics.setUserId()\r\n\r\n    _getUserTheme: ->\r\n        compiledThemes = window._taigaAvailableThemes\r\n        defaultTheme = @config.get(\"defaultTheme\") || \"taiga\"\r\n\r\n        if !_.includes(@config.get(\"themes\"), @rootscope.user?.theme) || !compiledThemes.includes(@rootscope.user?.theme)\r\n            return defaultTheme\r\n\r\n        return @rootscope.user?.theme\r\n\r\n    _setTheme: ->\r\n        newTheme = @._getUserTheme()\r\n\r\n        if @._currentTheme != newTheme\r\n            @._currentTheme = newTheme\r\n            @themeService.use(@._currentTheme)\r\n\r\n    _setLocales: ->\r\n        lang = @rootscope.user?.lang || @config.get(\"defaultLanguage\") || \"en\"\r\n        @translate.preferredLanguage(lang)  # Needed for calls to the api in the correct language\r\n        @translate.use(lang)                # Needed for change the interface in runtime\r\n\r\n    getUser: ->\r\n        if @rootscope.user\r\n            return @rootscope.user\r\n\r\n        userData = @storage.get(\"userInfo\")\r\n\r\n        if userData\r\n            user = @model.make_model(\"users\", userData)\r\n            @rootscope.user = user\r\n            @._setLocales()\r\n\r\n            @._setTheme()\r\n\r\n            return user\r\n        else\r\n            @._setTheme()\r\n\r\n        return null\r\n\r\n    setUser: (user) ->\r\n        @rootscope.auth = user\r\n        @storage.set(\"userInfo\", user.getAttrs())\r\n        @rootscope.user = user\r\n\r\n        @.setUserdata(user)\r\n\r\n        @._setLocales()\r\n        @._setTheme()\r\n\r\n    clear: ->\r\n        @rootscope.auth = null\r\n        @rootscope.user = null\r\n        @storage.remove(\"userInfo\")\r\n\r\n    setRefreshToken: (token) ->\r\n        @storage.set(\"refresh\", token)\r\n\r\n    getRefreshToken: ->\r\n        return @storage.get(\"refresh\")\r\n\r\n    setToken: (token) ->\r\n        @storage.set(\"token\", token)\r\n\r\n    getToken: ->\r\n        return @storage.get(\"token\")\r\n\r\n    removeToken: ->\r\n        @storage.remove(\"token\")\r\n        @storage.remove(\"refresh\")\r\n\r\n    isAuthenticated: ->\r\n        if @.getUser() != null\r\n            return true\r\n        return false\r\n\r\n    ## Http interface\r\n    refresh: () ->\r\n        url = @urls.resolve(\"user-me\")\r\n\r\n        return @http.get(url).then (data, status) =>\r\n            user = data.data\r\n            user.token = @.getUser().auth_token\r\n\r\n            user = @model.make_model(\"users\", user)\r\n\r\n            @.setUser(user)\r\n            @rootscope.$broadcast(\"auth:refresh\", user)\r\n            return user\r\n\r\n    login: (data, type) ->\r\n        url = @urls.resolve(\"auth\")\r\n\r\n        data = _.clone(data, false)\r\n        data.type = if type then type else \"normal\"\r\n\r\n        @.removeToken()\r\n\r\n        return @http.post(url, data).then (data, status) =>\r\n            user = @model.make_model(\"users\", data.data)\r\n            @.setToken(user.auth_token)\r\n            @.setRefreshToken(user.refresh)\r\n            @.setUser(user)\r\n            @rootscope.$broadcast(\"auth:login\", user)\r\n            return user\r\n\r\n    logout: ->\r\n        @.removeToken()\r\n        @.clear()\r\n        @currentUserService.removeUser()\r\n\r\n        @._setTheme()\r\n        @._setLocales()\r\n        @rootscope.$broadcast(\"auth:logout\")\r\n        @analytics.setUserId()\r\n\r\n    register: (data, type, existing) ->\r\n        url = @urls.resolve(\"auth-register\")\r\n\r\n        data = _.clone(data, false)\r\n        data.type = if type then type else \"public\"\r\n        if type == \"private\"\r\n            data.existing = if existing then existing else false\r\n\r\n        @.removeToken()\r\n\r\n        return @http.post(url, data).then (response) =>\r\n            user = @model.make_model(\"users\", response.data)\r\n            @.setToken(user.auth_token)\r\n            @.setUser(user)\r\n            @rootscope.$broadcast(\"auth:register\", user)\r\n            return user\r\n\r\n    getInvitation: (token) ->\r\n        return @rs.invitations.get(token)\r\n\r\n    acceptInvitiationWithNewUser: (data) ->\r\n        return @.register(data, \"private\", false)\r\n\r\n    forgotPassword: (data) ->\r\n        url = @urls.resolve(\"users-password-recovery\")\r\n        data = _.clone(data, false)\r\n        @.removeToken()\r\n        return @http.post(url, data)\r\n\r\n    changePasswordFromRecovery: (data) ->\r\n        url = @urls.resolve(\"users-change-password-from-recovery\")\r\n        data = _.clone(data, false)\r\n        @.removeToken()\r\n        return @http.post(url, data)\r\n\r\n    changeEmail: (data) ->\r\n        url = @urls.resolve(\"users-change-email\")\r\n        data = _.clone(data, false)\r\n        return @http.post(url, data)\r\n\r\n    cancelAccount: (data) ->\r\n        url = @urls.resolve(\"users-cancel-account\")\r\n        data = _.clone(data, false)\r\n        return @http.post(url, data)\r\n\r\n    exportProfile: () ->\r\n        url = @urls.resolve(\"users-export\")\r\n        return @http.post(url)\r\n\r\n    sendVerificationEmail: () ->\r\n        url = @urls.resolve(\"user-send-verification-email\")\r\n        return @http.post(url)\r\n\r\nmodule.service(\"$tgAuth\", AuthService)\r\n\r\n\r\n#############################################################################\r\n## Login Directive\r\n#############################################################################\r\n\r\n# Directive that manages the visualization of public register\r\n# message/link on login page.\r\n\r\nPublicRegisterMessageDirective = ($config, $navUrls, $routeParams, templates) ->\r\n    template = templates.get(\"auth/login-text.html\", true)\r\n\r\n    templateFn = ->\r\n        publicRegisterEnabled = $config.get(\"publicRegisterEnabled\")\r\n        if not publicRegisterEnabled\r\n            return \"\"\r\n\r\n        url = $navUrls.resolve(\"register\")\r\n\r\n        if $routeParams['force_next']\r\n            nextUrl = encodeURIComponent($routeParams['force_next'])\r\n            url += \"?next=#{nextUrl}\"\r\n\r\n        return template({url:url})\r\n\r\n    return {\r\n        restrict: \"AE\"\r\n        scope: {}\r\n        template: templateFn\r\n    }\r\n\r\nmodule.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\",\r\n                                             \"$tgTemplate\", PublicRegisterMessageDirective])\r\n\r\n\r\nLoginDirective = ($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = new checksley.Form($el.find(\"form.login-form\"))\r\n        $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true)\r\n\r\n        # ignore next param if is the login or discover page\r\n        if $routeParams['next'] and $routeParams['next']  != $navUrls.resolve(\"login\") and !$routeParams['next'].startsWith(\"%2Fdiscover\")\r\n            $scope.nextUrl = decodeURIComponent($routeParams['next'])\r\n        else\r\n            $scope.nextUrl = $navUrls.resolve(\"home\")\r\n\r\n        if $routeParams['force_next']\r\n            $scope.nextUrl = decodeURIComponent($routeParams['force_next'])\r\n\r\n        onSuccess = (response) ->\r\n            $events.setupConnection()\r\n            $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1)\r\n\r\n            if $scope.nextUrl.indexOf('http') == 0\r\n                $window.location.href = $scope.nextUrl\r\n            else\r\n                $location.url($scope.nextUrl)\r\n\r\n        onError = (response) ->\r\n            $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"))\r\n\r\n        $scope.onKeyUp = (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            value = target.val()\r\n            $scope.iscapsLockActivated = false\r\n            if value != value.toLowerCase()\r\n                $scope.iscapsLockActivated = true\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            data = {\r\n                \"username\": $el.find(\"form.login-form input[name=username]\").val(),\r\n                \"password\": $el.find(\"form.login-form input[name=password]\").val()\r\n            }\r\n\r\n            loginFormType = $config.get(\"loginFormType\", \"normal\")\r\n\r\n            promise = $auth.login(data, loginFormType)\r\n            return promise.then(onSuccess, onError)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        window.prerenderReady = true\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\",\r\n                             \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective])\r\n\r\n\r\n#############################################################################\r\n## Register Directive\r\n#############################################################################\r\n\r\nRegisterDirective = ($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        if not $config.get(\"publicRegisterEnabled\")\r\n            $location.path($navUrls.resolve(\"not-found\"))\r\n            $location.replace()\r\n\r\n        $scope.data = {}\r\n        form = $el.find(\"form\").checksley({onlyOneErrorElement: true})\r\n\r\n        if $routeParams['next'] and $routeParams['next'] != $navUrls.resolve(\"login\")\r\n            $scope.nextUrl = decodeURIComponent($routeParams['next'])\r\n        else\r\n            $scope.nextUrl = $navUrls.resolve(\"home\")\r\n\r\n        onSuccessSubmit = (response) ->\r\n            $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1)\r\n\r\n            if $scope.nextUrl.indexOf('http') == 0\r\n                $window.location.href = $scope.nextUrl\r\n            else\r\n                $location.url($scope.nextUrl)\r\n\r\n        onErrorSubmit = (response) ->\r\n            if response.data._error_message\r\n                text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\r\n                $confirm.notify(\"light-error\", text)\r\n\r\n            form.setErrors(response.data)\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.register($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        window.prerenderReady = true\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\",\r\n                                \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective])\r\n\r\n\r\n#############################################################################\r\n## Register Options Directive\r\n#############################################################################\r\n\r\nRegisterOptionsDirective = () ->\r\n    return { }\r\n\r\nmodule.directive(\"tgRegisterOptions\", [RegisterOptionsDirective])\r\n\r\n\r\n#############################################################################\r\n## Forgot Password Directive\r\n#############################################################################\r\n\r\nForgotPasswordDirective = ($auth, $confirm, $location, $navUrls, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.data = {}\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        onSuccessSubmit = (response) ->\r\n            $location.path($navUrls.resolve(\"login\"))\r\n\r\n            title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\")\r\n            message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\")\r\n\r\n            $confirm.success(title, message)\r\n\r\n        onErrorSubmit = (response) ->\r\n            text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\")\r\n\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.forgotPassword($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        window.prerenderReady = true\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\",\r\n                                      ForgotPasswordDirective])\r\n\r\n\r\n#############################################################################\r\n## Change Password from Recovery Directive\r\n#############################################################################\r\n\r\nChangePasswordFromRecoveryDirective = ($auth, $confirm, $location, $params, $navUrls, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.data = {}\r\n\r\n        if $params.token?\r\n            $scope.tokenInParams = true\r\n            $scope.data.token = $params.token\r\n        else\r\n            $location.path($navUrls.resolve(\"login\"))\r\n\r\n            text = ''\r\n            text = response.data.token.map((message) ->\r\n                return \"#{text} #{message}\"\r\n            )\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        onSuccessSubmit = (response) ->\r\n            $location.path($navUrls.resolve(\"login\"))\r\n\r\n            text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\")\r\n            $confirm.success(text)\r\n\r\n        onErrorSubmit = (response) ->\r\n            text = ''\r\n            text = response.data.password.map((message) ->\r\n                return \"#{text} #{message}\"\r\n            )\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.changePasswordFromRecovery($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\",\r\n                                                  \"$tgNavUrls\", \"$translate\",\r\n                                                  ChangePasswordFromRecoveryDirective])\r\n\r\n\r\n#############################################################################\r\n## Invitation\r\n#############################################################################\r\n\r\nInvitationDirective = ($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        token = $params.token\r\n\r\n        promise = $auth.getInvitation(token)\r\n        promise.then (invitation) ->\r\n            $scope.invitation = invitation\r\n            $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\")\r\n\r\n        promise.then null, (response) ->\r\n            $location.path($navUrls.resolve(\"login\"))\r\n\r\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\")\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        # Login form\r\n        $scope.dataLogin = {token: token}\r\n        loginForm = $el.find(\"form.login-form\").checksley({onlyOneErrorElement: true})\r\n\r\n        onSuccessSubmitLogin = (response) ->\r\n            $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1)\r\n            $location.path($navUrls.resolve(\"project\", {project: $scope.invitation.project_slug}))\r\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\r\n                \"project_name\": $scope.invitation.project_name\r\n            })\r\n\r\n            $confirm.notify(\"success\", text)\r\n\r\n        onErrorSubmitLogin = (response) ->\r\n            $confirm.notify(\"light-error\", response.data._error_message)\r\n\r\n        submitLogin = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not loginForm.validate()\r\n                return\r\n\r\n            loginFormType = $config.get(\"loginFormType\", \"normal\")\r\n            data = $scope.dataLogin\r\n\r\n            promise = $auth.login({\r\n                username: data.username,\r\n                password: data.password,\r\n                invitation_token: data.token\r\n            }, loginFormType)\r\n            promise.then(onSuccessSubmitLogin, onErrorSubmitLogin)\r\n\r\n        $el.on \"submit\", \"form.login-form\", submitLogin\r\n        $el.on \"click\", \".button-login\", submitLogin\r\n\r\n        # Register form\r\n        $scope.dataRegister = {token: token}\r\n        registerForm = $el.find(\"form.register-form\").checksley({onlyOneErrorElement: true})\r\n\r\n        onSuccessSubmitRegister = (response) ->\r\n            $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1)\r\n\r\n            $location.path($navUrls.resolve(\"project\", {project: $scope.invitation.project_slug}))\r\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\r\n                \"project_name\": $scope.invitation.project_name\r\n            })\r\n            $confirm.notify(\"success\", text)\r\n\r\n        onErrorSubmitRegister = (response) ->\r\n            if response.data._error_message\r\n                text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\r\n                $confirm.notify(\"light-error\", text)\r\n\r\n            registerForm.setErrors(response.data)\r\n\r\n        submitRegister = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not registerForm.validate()\r\n                return\r\n\r\n            promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister)\r\n            promise.then(onSuccessSubmitRegister, onErrorSubmitRegister)\r\n\r\n        $el.on \"submit\", \"form.register-form\", submitRegister\r\n        $el.on \"click\", \".button-register\", submitRegister\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\",\r\n                                  \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective])\r\n\r\n\r\n#############################################################################\r\n## Verify Email\r\n#############################################################################\r\n\r\nVerifyEmailDirective = ($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.data = {}\r\n        $scope.data.email_token = $params.email_token\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        onSuccessSubmit = (response) ->\r\n            if $auth.isAuthenticated()\r\n                $repo.queryOne(\"users\", $auth.getUser().id).then (data) =>\r\n                    $auth.setUser(data)\r\n                $location.url($navUrls.resolve(\"home\"))\r\n            else\r\n                $location.url($navUrls.resolve(\"login\"))\r\n\r\n            text = $translate.instant(\"VERIFY_EMAIL_FORM.SUCCESS\")\r\n            $confirm.success(text)\r\n\r\n        onErrorSubmit = (response) ->\r\n            text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\r\n\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        submit = ->\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.changeEmail($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $el.on \"click\", \"a.ng-submit-form\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgVerifyEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\",\r\n                                   \"$routeParams\", \"$tgNavUrls\", \"$translate\", VerifyEmailDirective])\r\n\r\n\r\n#############################################################################\r\n## Change Email\r\n#############################################################################\r\n\r\nChangeEmailDirective = ($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.data = {}\r\n        $scope.data.email_token = $params.email_token\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        onSuccessSubmit = (response) ->\r\n            if $auth.isAuthenticated()\r\n                $repo.queryOne(\"users\", $auth.getUser().id).then (data) =>\r\n                    $auth.setUser(data)\r\n                $location.url($navUrls.resolve(\"home\"))\r\n            else\r\n                $location.url($navUrls.resolve(\"login\"))\r\n\r\n            text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\")\r\n            $confirm.success(text)\r\n\r\n        onErrorSubmit = (response) ->\r\n            text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\r\n\r\n            $confirm.notify(\"light-error\", text)\r\n\r\n        submit = ->\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.changeEmail($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $el.on \"click\", \"a.ng-submit-form\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\",\r\n                                   \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective])\r\n\r\n\r\n#############################################################################\r\n## Cancel account\r\n#############################################################################\r\n\r\nCancelAccountDirective = ($repo, $model, $auth, $confirm, $location, $params, $navUrls) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.data = {}\r\n        $scope.data.cancel_token = $params.cancel_token\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        onSuccessSubmit = (response) ->\r\n            $auth.logout()\r\n            $location.path($navUrls.resolve(\"home\"))\r\n\r\n            text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\")\r\n\r\n            $confirm.success(text)\r\n\r\n        onErrorSubmit = (response) ->\r\n            text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\r\n\r\n            $confirm.notify(\"error\", text)\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            promise = $auth.cancelAccount($scope.data)\r\n            promise.then(onSuccessSubmit, onErrorSubmit)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\",\r\n                                     \"$routeParams\",\"$tgNavUrls\", CancelAccountDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaBacklog\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaBase\", [])\r\n\r\n#############################################################################\r\n## Main Directive\r\n#############################################################################\r\n\r\nTaigaMainDirective = ($rootscope, $window) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $window.onresize = () ->\r\n            $rootscope.$broadcast(\"resize\")\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective])\r\n\r\n#############################################################################\r\n## Navigation\r\n#############################################################################\r\n\r\nurls = {\r\n    \"home\": \"/\"\r\n    \"projects\": \"/projects\"\r\n    \"error\": \"/error\"\r\n    \"not-found\": \"/not-found\"\r\n    \"permission-denied\": \"/permission-denied\"\r\n\r\n    \"discover\": \"/discover\"\r\n    \"discover-search\": \"/discover/search\"\r\n\r\n    \"login\": \"/login\"\r\n    \"forgot-password\": \"/forgot-password\"\r\n    \"change-password\": \"/change-password/:token\"\r\n    \"change-email\": \"/change-email/:token\"\r\n    \"verified-email\": \"/change-email/:token\"\r\n    \"cancel-account\": \"/cancel-account/:token\"\r\n    \"register\": \"/register\"\r\n    \"invitation\": \"/invitation/:token\"\r\n    \"create-project\": \"/project/new\"\r\n    \"create-project-scrum\": \"/project/new/scrum\"\r\n    \"create-project-kanban\": \"/project/new/kanban\"\r\n    \"create-project-duplicate\": \"/project/new/duplicate\"\r\n    \"create-project-import\": \"/project/new/import\"\r\n    \"create-project-import-platform\": \"/project/new/import/:platform\"\r\n\r\n    \"profile\": \"/profile\"\r\n    \"user-profile\": \"/profile/:username\"\r\n\r\n    \"blocked-project\": \"/blocked-project/:project\"\r\n    \"project\": \"/project/:project\"\r\n    \"project-detail-ref\": \"/project/:project/t/:ref\"\r\n    \"project-backlog\": \"/project/:project/backlog\"\r\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\"\r\n    \"project-kanban\": \"/project/:project/kanban\"\r\n    \"project-issues\": \"/project/:project/issues\"\r\n    \"project-epics\": \"/project/:project/epics\"\r\n    \"project-search\": \"/project/:project/search\"\r\n    \"project-timeline\": \"/project/:project/timeline\"\r\n\r\n    \"project-epics-detail\": \"/project/:project/epic/:ref\"\r\n    \"project-userstories-detail\": \"/project/:project/us/:ref\"\r\n    \"project-tasks-detail\": \"/project/:project/task/:ref\"\r\n    \"project-issues-detail\": \"/project/:project/issue/:ref\"\r\n\r\n    \"project-wiki\": \"/project/:project/wiki\"\r\n    \"project-wiki-list\": \"/project/:project/wiki-list\"\r\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\"\r\n\r\n    # Team\r\n    \"project-team\": \"/project/:project/team\"\r\n\r\n    # Admin\r\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\"\r\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\"\r\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\"\r\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\"\r\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\"\r\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\"\r\n\r\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\"\r\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\"\r\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\"\r\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\"\r\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\"\r\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\"\r\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\"\r\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\"\r\n    \"project-admin-project-values-kanban-power-ups\": \"/project/:project/admin/project-values/kanban-power-ups\"\r\n\r\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\"\r\n    \"project-admin-roles\": \"/project/:project/admin/roles\"\r\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\"\r\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\"\r\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\"\r\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\"\r\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\"\r\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\"\r\n\r\n    # User settings\r\n    \"user-settings-user-profile\": \"/user-settings/user-profile\"\r\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\"\r\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\"\r\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\"\r\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\"\r\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\"\r\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\"\r\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\"\r\n\r\n    \"notifications\": \"/notifications\"\r\n}\r\n\r\ninit = ($log, $navurls) ->\r\n    $log.debug \"Initialize navigation urls\"\r\n    $navurls.update(urls)\r\n\r\nmodule.run([\"$log\", \"$tgNavUrls\", init])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmodule = angular.module(\"taigaCommon\", [])\r\n\r\n#############################################################################\r\n## Default datepicker config\r\n#############################################################################\r\nDataPickerConfig = ($translate, $config, $auth) ->\r\n    return {\r\n        get: () ->\r\n            user = $auth.getUser()\r\n            lang = user?.lang || $translate.preferredLanguage()\r\n            rtlLanguages = $config.get(\"rtlLanguages\", [])\r\n            isRTL = rtlLanguages.indexOf(lang) > -1\r\n            return {\r\n                i18n: {\r\n                    previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\r\n                    nextMonth:  $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\r\n                    months: [\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")\r\n                    ],\r\n                    weekdays: [\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")\r\n                    ],\r\n                    weekdaysShort: [\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"),\r\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")\r\n                    ]\r\n                },\r\n                isRTL: isRTL,\r\n                firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\r\n                format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n            }\r\n    }\r\n\r\nmodule.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig])\r\n\r\n#############################################################################\r\n## Get the selected text\r\n#############################################################################\r\nSelectedText = ($window, $document) ->\r\n    get = () ->\r\n        if $window.getSelection\r\n            return $window.getSelection().toString()\r\n        else if $document.selection\r\n            return $document.selection.createRange().text\r\n        return \"\"\r\n\r\n    return {get: get}\r\n\r\nmodule.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText])\r\n\r\n#############################################################################\r\n## Permission directive, hide elements when necessary\r\n#############################################################################\r\n\r\nCheckPermissionDirective = (projectService) ->\r\n    render = ($el, project, permission) ->\r\n        if project && permission\r\n            $el.removeClass('hidden') if project.get('my_permissions').indexOf(permission) > -1\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $el.addClass('hidden')\r\n        permission = $attrs.tgCheckPermission\r\n\r\n        unwatch = $scope.$watch () ->\r\n            return projectService.project\r\n        , () ->\r\n            return if !projectService.project\r\n\r\n            render($el, projectService.project, permission)\r\n            unwatch()\r\n\r\n        unObserve = $attrs.$observe \"tgCheckPermission\", (permission) ->\r\n            return if !permission\r\n\r\n            render($el, projectService.project, permission)\r\n            unObserve()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nCheckPermissionDirective.$inject = [\r\n    \"tgProjectService\"\r\n]\r\n\r\nmodule.directive(\"tgCheckPermission\", CheckPermissionDirective)\r\n\r\n#############################################################################\r\n## Add class based on permissions\r\n#############################################################################\r\n\r\nClassPermissionDirective = ->\r\n    name = \"tgClassPermission\"\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        checkPermissions = (project, className, permission) ->\r\n            negation = permission[0] == \"!\"\r\n\r\n            permission = permission.slice(1) if negation\r\n\r\n            if negation && project.my_permissions.indexOf(permission) == -1\r\n                $el.addClass(className)\r\n            else if !negation && project.my_permissions.indexOf(permission) != -1\r\n                $el.addClass(className)\r\n            else\r\n                $el.removeClass(className)\r\n\r\n        tgClassPermissionWatchAction = (project) ->\r\n            if project\r\n                unbindWatcher()\r\n\r\n                classes = $scope.$eval($attrs[name])\r\n\r\n                for className, permission of classes\r\n                    checkPermissions(project, className, permission)\r\n\r\n\r\n        unbindWatcher = $scope.$watch \"project\", tgClassPermissionWatchAction\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgClassPermission\", ClassPermissionDirective)\r\n\r\n#############################################################################\r\n## Animation frame service, apply css changes in the next render frame\r\n#############################################################################\r\nAnimationFrame = () ->\r\n    animationFrame =\r\n        window.requestAnimationFrame       ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame\r\n\r\n    performAnimation = (time) =>\r\n        fn = tail.shift()\r\n        fn()\r\n\r\n        if (tail.length)\r\n            animationFrame(performAnimation)\r\n\r\n    tail = []\r\n\r\n    add = () ->\r\n        for fn in arguments\r\n            tail.push(fn)\r\n\r\n            if tail.length == 1\r\n                animationFrame(performAnimation)\r\n\r\n    return {add: add}\r\n\r\nmodule.factory(\"animationFrame\", AnimationFrame)\r\n\r\n#############################################################################\r\n## Open/close comment\r\n#############################################################################\r\n\r\nToggleCommentDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $el.find(\"textarea\").on \"focus\", () ->\r\n            $el.addClass(\"active\")\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgToggleComment\", ToggleCommentDirective)\r\n\r\n\r\n#############################################################################\r\n## Get the appropiate section url for a project\r\n## according to his enabled modules and user permisions\r\n#############################################################################\r\n\r\nProjectUrl = ($navurls) ->\r\n    get = (project) ->\r\n        if project.toJS\r\n            project = project.toJS()\r\n\r\n        ctx = {project: project.slug}\r\n\r\n        if project.is_backlog_activated and project.my_permissions.indexOf(\"view_us\") > -1\r\n            return $navurls.resolve(\"project-backlog\", ctx)\r\n        if project.is_kanban_activated and project.my_permissions.indexOf(\"view_us\") > -1\r\n            return $navurls.resolve(\"project-kanban\", ctx)\r\n        if project.is_wiki_activated and project.my_permissions.indexOf(\"view_wiki_pages\") > -1\r\n            return $navurls.resolve(\"project-wiki\", ctx)\r\n        if project.is_issues_activated and project.my_permissions.indexOf(\"view_issues\") > -1\r\n            return $navurls.resolve(\"project-issues\", ctx)\r\n\r\n        return $navurls.resolve(\"project\", ctx)\r\n\r\n    return {get: get}\r\n\r\nmodule.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl])\r\n\r\n\r\n#############################################################################\r\n## Queue Q promises\r\n#############################################################################\r\n\r\nQqueue = ($q) ->\r\n    deferred = $q.defer()\r\n    deferred.resolve()\r\n\r\n    lastPromise = deferred.promise\r\n\r\n    qqueue = {\r\n        bindAdd: (fn) =>\r\n            return (args...) =>\r\n                lastPromise = lastPromise.then () => fn.apply(@, args)\r\n        add: (fn) =>\r\n            if !lastPromise\r\n                lastPromise = fn()\r\n            else\r\n                lastPromise = lastPromise.then(fn)\r\n\r\n            return qqueue\r\n    }\r\n\r\n    return qqueue\r\n\r\nmodule.factory(\"$tgQqueue\", [\"$q\", Qqueue])\r\n\r\n\r\n#############################################################################\r\n## Queue model transformation\r\n#############################################################################\r\n\r\nclass QueueModelTransformation extends taiga.Service\r\n    @.$inject = [\r\n        \"$tgQqueue\",\r\n        \"$tgRepo\",\r\n        \"$q\",\r\n        \"$tgModel\"\r\n    ]\r\n\r\n    constructor: (@qqueue, @repo, @q, @model) ->\r\n\r\n    setObject: (@scope, @prop) ->\r\n\r\n    clone: () ->\r\n        attrs = _.cloneDeep(@.scope[@.prop]._attrs)\r\n        model = @model.make_model(@.scope[@.prop]._name, attrs)\r\n\r\n        return model\r\n\r\n    getObj: () ->\r\n        return @.scope[@.prop]\r\n\r\n    save: (transformation) ->\r\n        defered = @q.defer()\r\n        @qqueue.add () =>\r\n            obj = @.getObj()\r\n            comment = obj.comment\r\n\r\n            obj.comment = ''\r\n\r\n            clone = @.clone()\r\n\r\n            modified = _.omit(obj._modifiedAttrs, ['version'])\r\n            clone = _.assign(clone, modified)\r\n\r\n            transformation(clone)\r\n\r\n            if comment.length\r\n                clone.comment = comment\r\n\r\n            success = () =>\r\n                @.scope[@.prop] = clone\r\n\r\n                defered.resolve.apply(null, arguments)\r\n\r\n            @repo.save(clone).then(success, defered.reject)\r\n\r\n        return defered.promise\r\n\r\nmodule.service(\"$tgQueueModelTransformation\", QueueModelTransformation)\r\n\r\n#############################################################################\r\n## Templates\r\n#############################################################################\r\n\r\nTemplate = ($templateCache) ->\r\n    return {\r\n        get: (name, lodash = false) =>\r\n            tmp = $templateCache.get(name)\r\n\r\n            if lodash\r\n                tmp = _.template(tmp)\r\n\r\n            return tmp\r\n    }\r\n\r\nmodule.factory(\"$tgTemplate\", [\"$templateCache\", Template])\r\n\r\n#############################################################################\r\n## Permission directive, hide elements when necessary\r\n#############################################################################\r\n\r\nCapslock = () ->\r\n    template = \"\"\"\r\n        <tg-svg class=\"capslock\" ng-if=\"capslockIcon && iscapsLockActivated\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\r\n    \"\"\"\r\n\r\n    return {\r\n        template: template\r\n    }\r\n\r\nmodule.directive(\"tgCapslock\", [Capslock])\r\n\r\nSvg = () ->\r\n    template = \"\"\"\r\n    <svg class=\"{{ 'icon ' + svgIcon }}\" style=\"fill: {{ svgFill }}\">\r\n        <use xlink:href=\"\" ng-attr-xlink:href=\"{{ '#' + svgIcon }}\" ng-attr-href=\"{{ '#' + svgIcon }}\">\r\n            <title ng-if=\"svgTitle\">{{svgTitle}}</title>\r\n            <title ng-if=\"svgTitleTranslate\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\r\n        </use>\r\n    </svg>\r\n    \"\"\"\r\n\r\n    return {\r\n        scope: {\r\n            svgIcon: \"@\",\r\n            svgTitle: \"@\",\r\n            svgTitleTranslate: \"@\",\r\n            svgTitleTranslateValues: \"=\",\r\n            svgFill: \"=\"\r\n        },\r\n        template: template\r\n    }\r\n\r\nmodule.directive(\"tgSvg\", [Svg])\r\n\r\nAutofocus = ($timeout, $parse, animationFrame) ->\r\n  return {\r\n    restrict: 'A',\r\n    link : ($scope, $element, attrs) ->\r\n        if attrs.ngShow\r\n            model = $parse(attrs.ngShow)\r\n\r\n            $scope.$watch model, (value) ->\r\n                if value == true\r\n                    $timeout () -> $element[0].focus()\r\n\r\n        else\r\n            $timeout () -> $element[0].focus()\r\n  }\r\n\r\nmodule.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus])\r\n\r\nmodule.directive 'tgPreloadImage', () ->\r\n    spinner = \"<img class='loading-spinner' src='\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\"\r\n\r\n    template = \"\"\"\r\n        <div>\r\n            <ng-transclude></ng-transclude>\r\n        </div>\r\n    \"\"\"\r\n\r\n    preload = (src, onLoad) ->\r\n        image = new Image()\r\n        image.onload = onLoad\r\n        image.src = src\r\n\r\n        return image\r\n\r\n    return {\r\n        template: template,\r\n        transclude: true,\r\n        replace: true,\r\n        link: (scope, el, attrs) ->\r\n            image = el.find('img:last')\r\n            timeout = null\r\n\r\n            onLoad = () ->\r\n                el.find('.loading-spinner').remove()\r\n                image.show()\r\n\r\n                if timeout\r\n                    clearTimeout(timeout)\r\n                    timeout = null\r\n\r\n            attrs.$observe 'preloadSrc', (src) ->\r\n                if timeout\r\n                    clearTimeout(timeout)\r\n\r\n                el.find('.loading-spinner').remove()\r\n\r\n                timeout = setTimeout () ->\r\n                    el.prepend(spinner)\r\n                , 200\r\n\r\n                image.hide()\r\n\r\n                preload(src, onLoad)\r\n    }\r\n\r\n\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nclass DetailController\r\n    @.$inject = [\r\n        '$routeParams',\r\n        '$tgRepo',\r\n        \"tgProjectService\",\r\n        \"$tgNavUrls\",\r\n        \"$location\"\r\n    ]\r\n\r\n    constructor: (@params, @repo, @projectService, @navurls, @location) ->\r\n        @repo.resolve({\r\n            pslug: @params.pslug,\r\n            ref: @params.ref\r\n        })\r\n        .then (result) =>\r\n            if result.issue\r\n                url = @navurls.resolve('project-issues-detail', {\r\n                    project: @projectService.project.get('slug'),\r\n                    ref: @params.ref\r\n                })\r\n            else if result.task\r\n                url = @navurls.resolve('project-tasks-detail', {\r\n                    project: @projectService.project.get('slug'),\r\n                    ref: @params.ref\r\n                })\r\n            else if result.us\r\n                url = @navurls.resolve('project-userstories-detail', {\r\n                    project: @projectService.project.get('slug'),\r\n                    ref: @params.ref\r\n                })\r\n            else if result.epic\r\n                url = @navurls.resolve('project-epics-detail', {\r\n                    project: @projectService.project.get('slug'),\r\n                    ref: @params.ref\r\n                })\r\n            else if result.wikipage\r\n                url = @navurls.resolve('project-wiki-page', {\r\n                    project: @projectService.project.get('slug'),\r\n                    slug: @params.ref\r\n                })\r\n\r\n            @location.path(url)\r\n\r\nmodule.controller(\"DetailController\", DetailController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaEpics\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nstartswith = @.taiga.startswith\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaEvents\", [])\r\n\r\n\r\nclass EventsService\r\n    constructor: (@win, @log, @config, @auth, @liveAnnouncementService, @rootScope) ->\r\n        bindMethods(@)\r\n\r\n    initialize: (sessionId) ->\r\n        @.sessionId = sessionId\r\n        @.subscriptions = {}\r\n        @.connected = false\r\n        @.error = false\r\n        @.pendingMessages = []\r\n        @.reconnectTryInterval = @config.get(\"eventsReconnectTryInterval\", 10000)\r\n        @.maxConnectionErrors = @config.get(\"eventsMaxConnectionErrors\", 5)\r\n        @.errors = 0\r\n\r\n        @.missedHeartbeats = 0\r\n        @.heartbeatInterval = null\r\n\r\n        if @win.WebSocket is undefined\r\n            @log.info \"WebSockets not supported on your browser\"\r\n\r\n    setupConnection: ->\r\n        @.stopExistingConnection()\r\n\r\n        url = @config.get(\"eventsUrl\")\r\n\r\n        # This allows disable events in case\r\n        # url is not found on the configuration.\r\n        return if not url\r\n\r\n        # This allows relative urls in configuration.\r\n        if not startswith(url, \"ws:\") and not startswith(url, \"wss:\")\r\n            loc = @win.location\r\n            scheme = if loc.protocol == \"https:\" then \"wss:\" else \"ws:\"\r\n            path = _.trimStart(url, \"/\")\r\n            url = \"#{scheme}//#{loc.host}/#{path}\"\r\n\r\n        @.error = false\r\n        @.ws = new @win.WebSocket(url)\r\n        @.ws.addEventListener(\"open\", @.onOpen)\r\n        @.ws.addEventListener(\"message\", @.onMessage)\r\n        @.ws.addEventListener(\"error\", @.onError)\r\n        @.ws.addEventListener(\"close\", @.onClose)\r\n\r\n    stopExistingConnection: ->\r\n        if @.ws is undefined\r\n            return\r\n\r\n        @.ws.removeEventListener(\"open\", @.onOpen)\r\n        @.ws.removeEventListener(\"close\", @.onClose)\r\n        @.ws.removeEventListener(\"error\", @.onError)\r\n        @.ws.removeEventListener(\"message\", @.onMessage)\r\n        @.stopHeartBeatMessages()\r\n        @.ws.close()\r\n\r\n        delete @.ws\r\n\r\n    notifications: ->\r\n        @.subscribe null, 'notifications', (data) =>\r\n            @liveAnnouncementService.show(data.title, data.desc)\r\n            @rootScope.$digest()\r\n\r\n    liveNotifications: ->\r\n        if not @.auth.userData?\r\n            return\r\n        userId = @.auth.userData.get('id')\r\n\r\n        subscribe = () =>\r\n            @.subscribe null, \"live_notifications.#{userId}\", (data) =>\r\n                notification = new Notification(data.title, {\r\n                    icon: \"/#{window._version}/images/favicon.png\",\r\n                    body: data.body,\r\n                    tag: data.id\r\n                })\r\n                notification.onshow = () =>\r\n                    if data.timeout and data.timeout > 0\r\n                        setTimeout =>\r\n                            notification.close()\r\n                        ,\r\n                            data.timeout\r\n\r\n                if data.url\r\n                    notification.onclick = () =>\r\n                        window.open data.url\r\n        if !(window.Notification)\r\n            @log.info(\"This browser does not support desktop notification\")\r\n        else if Notification.permission == \"granted\"\r\n            subscribe()\r\n        else if Notification.permission != 'denied'\r\n            Notification.requestPermission (permission) =>\r\n              if (permission == \"granted\")\r\n                  subscribe()\r\n\r\n    webNotifications: ->\r\n        if not @.auth.userData?\r\n            return\r\n        userId = @.auth.userData.get('id')\r\n\r\n        routingKey = \"web_notifications.#{userId}\"\r\n        randomTimeout = taiga.randomInt(700, 1000)\r\n        @.subscribe null, routingKey, (data) =>\r\n            @rootScope.$broadcast \"notifications:new\"\r\n\r\n    ###########################################\r\n    # Heartbeat (Ping - Pong)\r\n    ###########################################\r\n    # See  RFC https://tools.ietf.org/html/rfc6455#section-5.5.2\r\n    #      RFC https://tools.ietf.org/html/rfc6455#section-5.5.3\r\n    startHeartBeatMessages: ->\r\n        return if @.heartbeatInterval\r\n\r\n        maxMissedHeartbeats =  @config.get(\"eventsMaxMissedHeartbeats\", 5)\r\n        heartbeatIntervalTime = @config.get(\"eventsHeartbeatIntervalTime\", 60000)\r\n\r\n        @.missedHeartbeats = 0\r\n        @.heartbeatInterval = setInterval(() =>\r\n            try\r\n                if @.missedHeartbeats >= maxMissedHeartbeats\r\n                    throw new Error(\"Too many missed heartbeats PINGs.\")\r\n\r\n                @.missedHeartbeats++\r\n                @.sendMessage({cmd: \"ping\"})\r\n                @log.debug(\"HeartBeat send PING\")\r\n            catch e\r\n                @log.error(\"HeartBeat error: \" + e.message)\r\n                @.setupConnection()\r\n        , heartbeatIntervalTime)\r\n\r\n        @log.debug(\"HeartBeat enabled\")\r\n\r\n    stopHeartBeatMessages: ->\r\n        return if not @.heartbeatInterval\r\n\r\n        clearInterval(@.heartbeatInterval)\r\n        @.heartbeatInterval = null\r\n\r\n        @log.debug(\"HeartBeat disabled\")\r\n\r\n    processHeartBeatPongMessage: (data) ->\r\n        @.missedHeartbeats = 0\r\n        @log.debug(\"HeartBeat received PONG\")\r\n\r\n    ###########################################\r\n    # Messages\r\n    ###########################################\r\n    serialize: (message) ->\r\n        if _.isObject(message)\r\n            return JSON.stringify(message)\r\n        return message\r\n\r\n    sendMessage: (message) ->\r\n        @.pendingMessages.push(message)\r\n\r\n        if not @.connected\r\n            return\r\n\r\n        messages = _.map(@.pendingMessages, @.serialize)\r\n        @.pendingMessages = []\r\n\r\n        for msg in messages\r\n            @.ws.send(msg)\r\n\r\n    processMessage: (data) =>\r\n        routingKey = data.routing_key\r\n\r\n        if not @.subscriptions[routingKey]?\r\n            return\r\n\r\n        subscription = @.subscriptions[routingKey]\r\n\r\n        if subscription.scope\r\n            subscription.scope.$apply ->\r\n                subscription.callback(data.data)\r\n\r\n        else\r\n            subscription.callback(data.data)\r\n\r\n    ###########################################\r\n    # Subscribe and Unsubscribe\r\n    ###########################################\r\n    subscribe: (scope, routingKey, callback, options) ->\r\n        if @.error\r\n            return\r\n\r\n        @log.debug(\"Subscribe to: #{routingKey}\")\r\n        subscription = {\r\n            scope: scope,\r\n            routingKey: routingKey,\r\n            callback: callback\r\n        }\r\n\r\n        message = {\r\n            \"cmd\": \"subscribe\",\r\n            \"routing_key\": routingKey\r\n        }\r\n\r\n        if options\r\n            message.options = options\r\n\r\n        @.subscriptions[routingKey] = subscription\r\n        @.sendMessage(message)\r\n\r\n        scope.$on(\"$destroy\", => @.unsubscribe(routingKey)) if scope\r\n\r\n    unsubscribe: (routingKey) ->\r\n        if @.error\r\n            return\r\n\r\n        @log.debug(\"Unsubscribe from: #{routingKey}\")\r\n\r\n        message = {\r\n            \"cmd\": \"unsubscribe\",\r\n            \"routing_key\": routingKey\r\n        }\r\n\r\n        @.sendMessage(message)\r\n\r\n    ###########################################\r\n    # Event listeners\r\n    ###########################################\r\n    onOpen: ->\r\n        @.connected = true\r\n\r\n        @log.debug(\"WebSocket connection opened\")\r\n        token = @auth.getToken()\r\n\r\n        message = {\r\n            cmd: \"auth\"\r\n            data: {token: token, sessionId: @.sessionId}\r\n        }\r\n\r\n        @.sendMessage(message)\r\n        @.startHeartBeatMessages()\r\n        @.notifications()\r\n        @.liveNotifications()\r\n        @.webNotifications()\r\n\r\n    onMessage: (event) ->\r\n        @log.debug \"WebSocket message received: #{event.data}\"\r\n\r\n        data = JSON.parse(event.data)\r\n\r\n        if data.cmd == \"pong\"\r\n            @.processHeartBeatPongMessage(data)\r\n        else\r\n            @.processMessage(data)\r\n\r\n    onError: (error) ->\r\n        @log.error(\"WebSocket error: #{error}\")\r\n        @.error = true\r\n        @.errors++\r\n\r\n        if @.errors < @.maxConnectionErrors\r\n            setTimeout(@.setupConnection, @.randomTryInterval())\r\n        else\r\n            @log.error(\"Events are disabled: the maximum number of connection errors has been reached.\")\r\n\r\n    onClose: ->\r\n        @log.debug(\"WebSocket closed.\")\r\n        @.connected = false\r\n        @.stopHeartBeatMessages()\r\n\r\n        if !@.error\r\n            setTimeout(@.setupConnection, @.randomTryInterval())\r\n\r\n    randomTryInterval: ->\r\n        min = @.reconnectTryInterval / 2\r\n        max = @.reconnectTryInterval\r\n\r\n        return Math.floor(Math.random() * (max - min + 1)) + min\r\n\r\n\r\n\r\nclass EventsProvider\r\n    setSessionId: (sessionId) ->\r\n        @.sessionId = sessionId\r\n\r\n    $get: ($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) ->\r\n        service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope)\r\n        service.initialize(@.sessionId)\r\n        return service\r\n\r\n    @.prototype.$get.$inject = [\r\n        \"$window\",\r\n        \"$log\",\r\n        \"$tgConfig\",\r\n        \"$tgAuth\",\r\n        \"tgLiveAnnouncementService\",\r\n        \"$rootScope\"\r\n    ]\r\n\r\nmodule.provider(\"$tgEvents\", EventsProvider)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nmixOf = @.taiga.mixOf\r\ndebounce = @.taiga.debounce\r\ntrim = @.taiga.trim\r\n\r\nmodule = angular.module(\"taigaFeedback\", [])\r\n\r\nFeedbackDirective = ($lightboxService, $repo, $confirm, $loading, feedbackService)->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley()\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.create(\"feedback\", $scope.feedback)\r\n\r\n            promise.then (data) ->\r\n                currentLoading.finish()\r\n                $lightboxService.close($el)\r\n                $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\")\r\n\r\n            promise.then null, ->\r\n                currentLoading.finish()\r\n                $confirm.notify(\"error\")\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        openLightbox = ->\r\n            $scope.feedback = {}\r\n            $lightboxService.open($el)\r\n            $el.find(\"textarea\").focus()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        openLightbox()\r\n\r\n    directive = {\r\n        link: link,\r\n        templateUrl: \"common/lightbox-feedback.html\"\r\n        scope: {}\r\n    }\r\n\r\n    return directive\r\n\r\nmodule.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\",\r\n    \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaIntegrations\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaIssues\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaKanban\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaPlugins\", [\"ngRoute\"])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaProject\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntrim = @.taiga.trim\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaRelatedTasks\", [])\r\n\r\n\r\nRelatedTaskRowDirective = ($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) ->\r\n    templateView = $template.get(\"task/related-task-row.html\", true)\r\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        saveTask = debounce 2000, (task) ->\r\n            task.subject = $el.find('input').val()\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find('.task-name'))\r\n                .start()\r\n\r\n            promise = $repo.save(task)\r\n            promise.then =>\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n            promise.then null, =>\r\n                currentLoading.finish()\r\n                $el.find('input').val(task.subject)\r\n                $confirm.notify(\"error\")\r\n            return promise\r\n\r\n        renderEdit = (task) ->\r\n            if (@childScope)\r\n                @childScope.$destroy()\r\n            @childScope = $scope.$new()\r\n            $el.off()\r\n            $el.html($compile(templateEdit({task: task}))(childScope))\r\n\r\n            $el.find(\".task-name input\").val(task.subject)\r\n\r\n            $el.on \"keyup\", \"input\", (event) ->\r\n                if event.keyCode == 13\r\n                    saveTask($model.$modelValue).then ->\r\n                        renderView($model.$modelValue)\r\n                else if event.keyCode == 27\r\n                    renderView($model.$modelValue)\r\n\r\n            $el.on \"click\", \".save-task\", (event) ->\r\n                saveTask($model.$modelValue).then ->\r\n                    renderView($model.$modelValue)\r\n\r\n            $el.on \"click\", \".cancel-edit\", (event) ->\r\n                renderView($model.$modelValue)\r\n\r\n        renderView = (task) ->\r\n            perms = {\r\n                modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") != -1\r\n                delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") != -1\r\n            }\r\n\r\n            $el.html($compile(templateView({\r\n                task: task,\r\n                perms: perms,\r\n                emojify: (text) -> $emojis.replaceEmojiNameByHtmlImgs(_.escape(text))\r\n            }))($scope))\r\n\r\n            $el.on \"click\", \".edit-task\", ->\r\n                renderEdit($model.$modelValue)\r\n                $el.find('input').focus().select()\r\n\r\n            $el.on \"click\", \".delete-task\", (event) ->\r\n                title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\")\r\n                task = $model.$modelValue\r\n                message = task.subject\r\n\r\n                $confirm.askOnDelete(title, message).then (askResponse) ->\r\n                    promise = $repo.remove(task)\r\n                    promise.then ->\r\n                        askResponse.finish()\r\n                        $scope.$emit(\"related-tasks:delete\")\r\n\r\n                    promise.then null, ->\r\n                        askResponse.finish(false)\r\n                        $confirm.notify(\"error\")\r\n\r\n        $scope.$watch $attrs.ngModel, (val) ->\r\n            return if not val\r\n\r\n            $el.off()\r\n\r\n            renderView(val)\r\n\r\n        $scope.$on \"related-tasks:assigned-to-changed\", ->\r\n            $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n        $scope.$on \"related-tasks:status-changed\", ->\r\n            $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link, require:\"ngModel\"}\r\n\r\nmodule.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\",\r\n                                      \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective])\r\n\r\n\r\nRelatedTaskCreateFormDirective = ($repo, $compile, $confirm, $tgmodel, $loading, $analytics) ->\r\n    newTask = {\r\n        subject: \"\"\r\n        assigned_to: null\r\n    }\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        createTask = (task) ->\r\n            task.subject = $el.find('input').val()\r\n            task.assigned_to = $scope.newTask.assigned_to\r\n            task.status = $scope.newTask.status\r\n            $scope.newTask.status = $scope.project.default_task_status\r\n            $scope.newTask.assigned_to = null\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find('.task-name'))\r\n                .start()\r\n\r\n            promise = $repo.create(\"tasks\", task)\r\n            promise.then ->\r\n                $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1)\r\n                currentLoading.finish()\r\n                $scope.$emit(\"related-tasks:add\")\r\n\r\n            promise.then null, ->\r\n                $el.find('input').val(task.subject)\r\n                currentLoading.finish()\r\n                $confirm.notify(\"error\")\r\n\r\n            return promise\r\n\r\n        close = () ->\r\n            $el.off()\r\n\r\n            $scope.openNewRelatedTask = false\r\n\r\n        reset = () ->\r\n            newTask = {\r\n                subject: \"\"\r\n                assigned_to: null\r\n            }\r\n\r\n            newTask[\"status\"] = $scope.project.default_task_status\r\n            newTask[\"project\"] = $scope.project.id\r\n            newTask[\"user_story\"] = $scope.us.id\r\n\r\n            $scope.newTask = $tgmodel.make_model(\"tasks\", newTask)\r\n\r\n        render = ->\r\n            return if $scope.openNewRelatedTask\r\n\r\n            $scope.openNewRelatedTask = true\r\n\r\n            $el.on \"submit\", \"form\", (event)->\r\n                event.preventDefault()\r\n                createTask(newTask).then ->\r\n                    reset()\r\n                    $el.find('input').focus()\r\n\r\n            $el.on \"keyup\", \"input\", (event)->\r\n                if event.keyCode == 27\r\n                    $scope.$apply () -> close()\r\n\r\n        $scope.save = () ->\r\n            createTask(newTask).then ->\r\n                close()\r\n\r\n        taiga.bindOnce $scope, \"us\", reset\r\n\r\n        $scope.$on \"related-tasks:show-form\", ->\r\n            $scope.$apply(render)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        templateUrl: 'task/related-task-create-form.html'\r\n    }\r\n\r\nmodule.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\",\r\n                                             \"$tgAnalytics\", RelatedTaskCreateFormDirective])\r\n\r\n\r\nRelatedTaskCreateButtonDirective = ($repo, $compile, $confirm, $tgmodel, $template) ->\r\n    template = $template.get(\"common/components/add-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$watch \"project\", (val) ->\r\n            return if not val\r\n            $el.off()\r\n            if $scope.project.my_permissions.indexOf(\"add_task\") != -1\r\n                $el.html($compile(template())($scope))\r\n            else\r\n                $el.html(\"\")\r\n\r\n            $el.on \"click\", \".add-button\", (event)->\r\n                $scope.$emit(\"related-tasks:add-new-clicked\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\",\r\n                                               \"$tgTemplate\", RelatedTaskCreateButtonDirective])\r\n\r\n\r\nRelatedTasksDirective = ($rootscope) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        _isVisible = ->\r\n            if $scope.project\r\n                return $scope.project.my_permissions.indexOf(\"view_tasks\") != -1\r\n            return false\r\n\r\n        _isEditable = ->\r\n            if $scope.project\r\n                return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\r\n            return false\r\n\r\n        $scope.reorderTask = (task, newIndex) ->\r\n            $rootscope.$broadcast('task:reorder', task, newIndex)\r\n\r\n        $scope.showAddTaks = ->\r\n            if $scope.project\r\n                return $scope.project.my_permissions.indexOf(\"add_task\") != -1\r\n            return false\r\n\r\n        $scope.showRelatedTasks = ->\r\n            return _isVisible()\r\n\r\n        $scope.$on \"related-tasks:add\", ->\r\n            $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n        $scope.$on \"related-tasks:reordered\", ->\r\n            $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n        $scope.$on \"related-tasks:delete\", ->\r\n            $rootscope.$broadcast(\"related-tasks:update\")\r\n\r\n        $scope.$on \"related-tasks:add-new-clicked\", ->\r\n            $scope.$broadcast(\"related-tasks:show-form\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgRelatedTasks\", [\"$rootScope\", RelatedTasksDirective])\r\n\r\n\r\nRelatedTaskAssignedToInlineEditionDirective = ($repo, $rootscope, $translate, avatarService, $lightboxFactory) ->\r\n    template = _.template(\"\"\"\r\n    <img style=\"background-color: <%- bg %>\" src=\"<%- imgurl %>\" alt=\"<%- name %>\"/>\r\n    <figcaption><%- name %></figcaption>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        updateRelatedTask = (task) ->\r\n            ctx = {\r\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\r\n            }\r\n\r\n            member = $scope.usersById[task.assigned_to]\r\n\r\n            avatar = avatarService.getAvatar(member)\r\n            ctx.imgurl = avatar.url\r\n            ctx.bg = avatar.bg\r\n\r\n            if member\r\n                ctx.name = member.full_name_display\r\n\r\n            $el.find(\".avatar\").html(template(ctx))\r\n            $el.find(\".task-assignedto\").attr('title', ctx.name)\r\n\r\n        $ctrl = $el.controller()\r\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition)\r\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\r\n        autoSave = !notAutoSave\r\n\r\n        $scope.$watch $attrs.tgRelatedTaskAssignedToInlineEdition, () ->\r\n            task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition)\r\n            updateRelatedTask(task)\r\n\r\n        updateRelatedTask(task)\r\n\r\n        $el.on \"click\", \".task-assignedto\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n\r\n            onClose = (assignedUsers) =>\r\n                task.assigned_to = assignedUsers.pop() || null\r\n                if autoSave\r\n                    $repo.save(task).then ->\r\n                        $scope.$emit(\"related-tasks:assigned-to-changed\")\r\n                        updateRelatedTask(task)\r\n\r\n            $lightboxFactory.create(\r\n                'tg-lb-select-user',\r\n                {\r\n                    \"class\": \"lightbox lightbox-select-user\",\r\n                },\r\n                {\r\n                    \"currentUsers\": [task.assigned_to],\r\n                    \"activeUsers\": $scope.activeUsers,\r\n                    \"onClose\": onClose,\r\n                    \"single\": true,\r\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n                }\r\n            )\r\n\r\n        taiga.bindOnce $scope, \"project\", (project) ->\r\n            # If the user has not enough permissions the click events are unbinded\r\n            if project.my_permissions.indexOf(\"modify_task\") == -1\r\n                $el.unbind(\"click\")\r\n                $el.find(\"a\").addClass(\"not-clickable\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\",\r\n                                                          \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass ResourcesService extends taiga.Service\r\n\r\nurls = {\r\n    # Auth\r\n    \"auth\": \"/auth\"\r\n    \"auth-register\": \"/auth/register\"\r\n    \"invitations\": \"/invitations\"\r\n    \"refresh\": \"/auth/refresh\"\r\n\r\n    # User\r\n    \"users\": \"/users\"\r\n    \"by_username\": \"/users/by_username\"\r\n    \"users-password-recovery\": \"/users/password_recovery\"\r\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\"\r\n    \"users-change-password\": \"/users/change_password\"\r\n    \"users-change-email\": \"/users/change_email\"\r\n    \"users-cancel-account\": \"/users/cancel\"\r\n    \"users-export\": \"/users/export\"\r\n    \"user-stats\": \"/users/%s/stats\"\r\n    \"user-liked\": \"/users/%s/liked\"\r\n    \"user-voted\": \"/users/%s/voted\"\r\n    \"user-watched\": \"/users/%s/watched\"\r\n    \"user-contacts\": \"/users/%s/contacts\"\r\n    \"user-me\": \"/users/me\"\r\n    \"user-send-verification-email\": \"/users/send_verification_email\"\r\n\r\n    # User - Notification\r\n    \"permissions\": \"/permissions\"\r\n    \"notify-policies\": \"/notify-policies\"\r\n    \"notifications\": \"/web-notifications\"\r\n\r\n    # User Project Settings\r\n    \"user-project-settings\": \"/user-project-settings\"\r\n\r\n    # User - Storage\r\n    \"user-storage\": \"/user-storage\"\r\n\r\n    # Memberships\r\n    \"memberships\": \"/memberships\"\r\n    \"bulk-create-memberships\": \"/memberships/bulk_create\"\r\n\r\n    # Roles & Permissions\r\n    \"roles\": \"/roles\"\r\n    \"permissions\": \"/permissions\"\r\n\r\n    # Resolver\r\n    \"resolver\": \"/resolver\"\r\n\r\n    # Project\r\n    \"projects\": \"/projects\"\r\n    \"project-templates\": \"/project-templates\"\r\n    \"project-modules\": \"/projects/%s/modules\"\r\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\"\r\n    \"project-like\": \"/projects/%s/like\"\r\n    \"project-unlike\": \"/projects/%s/unlike\"\r\n    \"project-watch\": \"/projects/%s/watch\"\r\n    \"project-unwatch\": \"/projects/%s/unwatch\"\r\n    \"project-contact\": \"contact\"\r\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\"\r\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\"\r\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\"\r\n    \"project-transfer-request\": \"/projects/%s/transfer_request\"\r\n    \"project-transfer-start\": \"/projects/%s/transfer_start\"\r\n\r\n    # Project Values - Attributes\r\n    \"epic-statuses\": \"/epic-statuses\"\r\n    \"userstory-statuses\": \"/userstory-statuses\"\r\n    \"userstory-due-dates\": \"/userstory-due-dates\"\r\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\"\r\n    \"points\": \"/points\"\r\n    \"task-statuses\": \"/task-statuses\"\r\n    \"task-due-dates\": \"/task-due-dates\"\r\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\"\r\n    \"issue-statuses\": \"/issue-statuses\"\r\n    \"issue-due-dates\": \"/issue-due-dates\"\r\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\"\r\n    \"issue-types\": \"/issue-types\"\r\n    \"priorities\": \"/priorities\"\r\n    \"severities\": \"/severities\"\r\n\r\n    # Milestones/Sprints\r\n    \"milestones\": \"/milestones\"\r\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\"\r\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\"\r\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\"\r\n\r\n    # Epics\r\n    \"epics\": \"/epics\"\r\n    \"epic-upvote\": \"/epics/%s/upvote\"\r\n    \"epic-downvote\": \"/epics/%s/downvote\"\r\n    \"epic-watch\": \"/epics/%s/watch\"\r\n    \"epic-unwatch\": \"/epics/%s/unwatch\"\r\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\"\r\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\"\r\n\r\n    # User stories\r\n    \"userstories\": \"/userstories\"\r\n    \"bulk-create-us\": \"/userstories/bulk_create\"\r\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\"\r\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\"\r\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\"\r\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\"\r\n    \"userstories-filters\": \"/userstories/filters_data\"\r\n    \"userstory-upvote\": \"/userstories/%s/upvote\"\r\n    \"userstory-downvote\": \"/userstories/%s/downvote\"\r\n    \"userstory-watch\": \"/userstories/%s/watch\"\r\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\"\r\n\r\n    # Tasks\r\n    \"tasks\": \"/tasks\"\r\n    \"bulk-create-tasks\": \"/tasks/bulk_create\"\r\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\"\r\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\"\r\n    \"task-upvote\": \"/tasks/%s/upvote\"\r\n    \"task-downvote\": \"/tasks/%s/downvote\"\r\n    \"task-watch\": \"/tasks/%s/watch\"\r\n    \"task-unwatch\": \"/tasks/%s/unwatch\"\r\n    \"task-filters\": \"/tasks/filters_data\"\r\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\"\r\n\r\n    # Issues\r\n    \"issues\": \"/issues\"\r\n    \"bulk-create-issues\": \"/issues/bulk_create\"\r\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\"\r\n    \"issues-filters\": \"/issues/filters_data\"\r\n    \"issue-upvote\": \"/issues/%s/upvote\"\r\n    \"issue-downvote\": \"/issues/%s/downvote\"\r\n    \"issue-watch\": \"/issues/%s/watch\"\r\n    \"issue-unwatch\": \"/issues/%s/unwatch\"\r\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\"\r\n\r\n    # Swimlanes\r\n    \"swimlanes\": \"/swimlanes\"\r\n    \"swimlane-userstory-statuses\": \"/swimlane-userstory-statuses\"\r\n\r\n    # Wiki pages\r\n    \"wiki\": \"/wiki\"\r\n    \"wiki-restore\": \"/wiki/%s/restore\"\r\n    \"wiki-links\": \"/wiki-links\"\r\n\r\n    # History\r\n    \"history/epic\": \"/history/epic\"\r\n    \"history/us\": \"/history/userstory\"\r\n    \"history/issue\": \"/history/issue\"\r\n    \"history/task\": \"/history/task\"\r\n    \"history/wiki\": \"/history/wiki\"\r\n\r\n    # Attachments\r\n    \"attachments/epic\": \"/epics/attachments\"\r\n    \"attachments/us\": \"/userstories/attachments\"\r\n    \"attachments/issue\": \"/issues/attachments\"\r\n    \"attachments/task\": \"/tasks/attachments\"\r\n    \"attachments/wiki_page\": \"/wiki/attachments\"\r\n    \"attachments/wikipage\": \"/wiki/attachments\"\r\n    \"attachments/wiki\": \"/wiki/attachments\"\r\n\r\n    # Custom Attributess\r\n    \"custom-attributes/epic\": \"/epic-custom-attributes\"\r\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\"\r\n    \"custom-attributes/task\": \"/task-custom-attributes\"\r\n    \"custom-attributes/issue\": \"/issue-custom-attributes\"\r\n\r\n    # Custom Attributess - Values\r\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\"\r\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\"\r\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\"\r\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\"\r\n\r\n    # Webhooks\r\n    \"webhooks\": \"/webhooks\"\r\n    \"webhooks-test\": \"/webhooks/%s/test\"\r\n    \"webhooklogs\": \"/webhooklogs\"\r\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\"\r\n\r\n    # Reports - CSV\r\n    \"epics-csv\": \"/epics/csv?uuid=%s\"\r\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\"\r\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\"\r\n    \"issues-csv\": \"/issues/csv?uuid=%s\"\r\n\r\n    # Timeline\r\n    \"timeline-profile\": \"/timeline/profile\"\r\n    \"timeline-user\": \"/timeline/user\"\r\n    \"timeline-project\": \"/timeline/project\"\r\n\r\n    # Search\r\n    \"search\": \"/search\"\r\n\r\n    # Export/Import\r\n    \"exporter\": \"/exporter\"\r\n    \"importer\": \"/importer/load_dump\"\r\n\r\n    # Feedback\r\n    \"feedback\": \"/feedback\"\r\n\r\n    # locales\r\n    \"locales\": \"/locales\"\r\n\r\n    # Application tokens\r\n    \"applications\": \"/applications\"\r\n    \"application-tokens\": \"/application-tokens\"\r\n\r\n    # Stats\r\n    \"stats-discover\": \"/stats/discover\"\r\n\r\n    # Importers\r\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\"\r\n    \"importers-trello-authorize\": \"/importers/trello/authorize\"\r\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\"\r\n    \"importers-trello-list-users\": \"/importers/trello/list_users\"\r\n    \"importers-trello-import-project\": \"/importers/trello/import_project\"\r\n\r\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\"\r\n    \"importers-jira-authorize\": \"/importers/jira/authorize\"\r\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\"\r\n    \"importers-jira-list-users\": \"/importers/jira/list_users\"\r\n    \"importers-jira-import-project\": \"/importers/jira/import_project\"\r\n\r\n    \"importers-github-auth-url\": \"/importers/github/auth_url\"\r\n    \"importers-github-authorize\": \"/importers/github/authorize\"\r\n    \"importers-github-list-projects\": \"/importers/github/list_projects\"\r\n    \"importers-github-list-users\": \"/importers/github/list_users\"\r\n    \"importers-github-import-project\": \"/importers/github/import_project\"\r\n\r\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\"\r\n    \"importers-asana-authorize\": \"/importers/asana/authorize\"\r\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\"\r\n    \"importers-asana-list-users\": \"/importers/asana/list_users\"\r\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\r\n}\r\n\r\n# Initialize api urls service\r\ninitUrls = ($log, $urls) ->\r\n    $log.debug \"Initialize api urls\"\r\n    $urls.update(urls)\r\n\r\n# Initialize resources service populating it with methods\r\n# defined in separated files.\r\ninitResources = ($log, $rs) ->\r\n    $log.debug \"Initialize resources\"\r\n    providers = _.toArray(arguments).slice(2)\r\n\r\n    for provider in providers\r\n        provider($rs)\r\n\r\nmodule = angular.module(\"taigaResources\", [\"taigaBase\"])\r\nmodule.service(\"$tgResources\", ResourcesService)\r\n\r\n# Module entry point\r\nmodule.run([\"$log\", \"$tgUrls\", initUrls])\r\nmodule.run([\r\n    \"$log\",\r\n    \"$tgResources\",\r\n    \"$tgProjectsResourcesProvider\",\r\n    \"$tgCustomAttributesResourcesProvider\",\r\n    \"$tgCustomAttributesValuesResourcesProvider\",\r\n    \"$tgMembershipsResourcesProvider\",\r\n    \"$tgNotifyPoliciesResourcesProvider\",\r\n    \"$tgInvitationsResourcesProvider\",\r\n    \"$tgRolesResourcesProvider\",\r\n    \"$tgUserProjectSettingsResourcesProvider\",\r\n    \"$tgUserSettingsResourcesProvider\",\r\n    \"$tgSprintsResourcesProvider\",\r\n    \"$tgEpicsResourcesProvider\",\r\n    \"$tgUserstoriesResourcesProvider\",\r\n    \"$tgTasksResourcesProvider\",\r\n    \"$tgIssuesResourcesProvider\",\r\n    \"$tgSwimlanesResourcesProvider\",\r\n    \"$tgWikiResourcesProvider\",\r\n    \"$tgSearchResourcesProvider\",\r\n    \"$tgMdRenderResourcesProvider\",\r\n    \"$tgHistoryResourcesProvider\",\r\n    \"$tgKanbanResourcesProvider\",\r\n    \"$tgModulesResourcesProvider\",\r\n    \"$tgWebhooksResourcesProvider\",\r\n    \"$tgWebhookLogsResourcesProvider\",\r\n    \"$tgLocalesResourcesProvider\",\r\n    \"$tgUsersResourcesProvider\",\r\n    initResources\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nmixOf = @.taiga.mixOf\r\ndebounceLeading = @.taiga.debounceLeading\r\ntrim = @.taiga.trim\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaSearch\", [])\r\n\r\n\r\n#############################################################################\r\n## Search Controller\r\n#############################################################################\r\n\r\nclass SearchController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @q, @location, @appMetaService, @navUrls, @translate, @errorHandlingService, @projectService) ->\r\n        @scope.sectionName = \"Search\"\r\n\r\n        @.loadInitialData()\r\n\r\n        title = @translate.instant(\"SEARCH.PAGE_TITLE\", {projectName: @scope.project.name})\r\n        description = @translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\r\n            projectName: @scope.project.name,\r\n            projectDescription: @scope.project.description\r\n        })\r\n\r\n        @appMetaService.setAll(title, description)\r\n\r\n        # Search input watcher\r\n        @scope.searchTerm = null\r\n        loadSearchData = debounceLeading(100, (t) => @.loadSearchData(t))\r\n\r\n        bindOnce @scope, \"projectId\", (projectId) =>\r\n            if !@scope.searchResults && @scope.searchTerm\r\n                @.loadSearchData()\r\n\r\n        @scope.$watch \"searchTerm\", (term) =>\r\n            if term != undefined && @scope.projectId\r\n                @.loadSearchData(term)\r\n\r\n    loadFilters: ->\r\n        defered = @q.defer()\r\n        defered.resolve()\r\n        return defered.promise\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n\r\n        @scope.epicStatusById = groupBy(project.epic_statuses, (x) -> x.id)\r\n        @scope.issueStatusById = groupBy(project.issue_statuses, (x) -> x.id)\r\n        @scope.taskStatusById = groupBy(project.task_statuses, (x) -> x.id)\r\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\r\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\r\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\r\n        return project\r\n\r\n    loadSearchData: (term = \"\") ->\r\n        @scope.loading = true\r\n\r\n        @._loadSearchData(term).then (data) =>\r\n            @scope.searchResults = data\r\n            @scope.loading = false\r\n\r\n    _loadSearchData: (term = \"\") ->\r\n        @._promise.abort() if @._promise\r\n\r\n        @._promise = @rs.search.do(@scope.projectId, term)\r\n\r\n        return @._promise\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @scope.projectId = project.id\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n\r\nmodule.controller(\"SearchController\", SearchController)\r\n\r\n\r\n#############################################################################\r\n## Search box directive\r\n#############################################################################\r\n\r\nSearchBoxDirective = (projectService, $lightboxService, $navurls, $location, $route)->\r\n    link = ($scope, $el, $attrs) ->\r\n        project = null\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley()\r\n            if not form.validate()\r\n                return\r\n\r\n            text = $el.find(\"#search-text\").val()\r\n\r\n            url = $navurls.resolve(\"project-search\", {project: project.get(\"slug\")})\r\n\r\n            $scope.$apply ->\r\n                $lightboxService.close($el)\r\n\r\n                $location.path(url)\r\n                $location.search(\"text\", text).path(url)\r\n                $route.reload()\r\n\r\n\r\n        openLightbox = () ->\r\n            project = projectService.project\r\n\r\n            $lightboxService.open($el).then () ->\r\n                $el.find(\"#search-text\").focus()\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        openLightbox()\r\n\r\n    return {\r\n        templateUrl: \"search/lightbox-search.html\",\r\n        link:link\r\n    }\r\n\r\nSearchBoxDirective.$inject = [\r\n    \"tgProjectService\",\r\n    \"lightboxService\",\r\n    \"$tgNavUrls\",\r\n    \"$tgLocation\",\r\n    \"$route\"\r\n]\r\n\r\nmodule.directive(\"tgSearchBox\", SearchBoxDirective)\r\n\r\n\r\n#############################################################################\r\n## Search Directive\r\n#############################################################################\r\n\r\nSearchDirective = ($log, $compile, $templatecache, $routeparams, $location, $analytics) ->\r\n    linkTable = ($scope, $el, $attrs, $ctrl) ->\r\n        applyAutoTab = true\r\n        activeSectionName = \"userstories\"\r\n        tabsDom = $el.find(\".search-filter\")\r\n        currentSearchResults = null\r\n\r\n        getActiveSection = (data) ->\r\n            maxVal = 0\r\n            selectedSection = {}\r\n            selectedSection.name = \"userstories\"\r\n            selectedSection.value = []\r\n\r\n            if !applyAutoTab\r\n                selectedSection.name = activeSectionName\r\n                selectedSection.value = data[activeSectionName]\r\n\r\n                return selectedSection\r\n\r\n            if data\r\n                for name in [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"]\r\n                    value = data[name]\r\n\r\n                    if value.length > maxVal\r\n                        maxVal = value.length\r\n                        selectedSection.name = name\r\n                        selectedSection.value = value\r\n                        break\r\n\r\n            if maxVal == 0\r\n                return selectedSection\r\n\r\n            return selectedSection\r\n\r\n        renderFilterTabs = (data) ->\r\n            for name, value of data\r\n                tabsDom.find(\"li.#{name}\").show()\r\n                tabsDom.find(\"li.#{name} .num\").html(value.length)\r\n\r\n        markSectionTabActive = (section) ->\r\n            # Mark as active the item with max amount of results\r\n            tabsDom.find(\"a.active\").removeClass(\"active\")\r\n            tabsDom.find(\"li.#{section.name} a\").addClass(\"active\")\r\n\r\n            applyAutoTab = false\r\n            activeSectionName = section.name\r\n\r\n        templates = {\r\n            epics: $templatecache.get(\"search-epics\")\r\n            issues: $templatecache.get(\"search-issues\")\r\n            tasks: $templatecache.get(\"search-tasks\")\r\n            userstories: $templatecache.get(\"search-userstories\")\r\n            wikipages: $templatecache.get(\"search-wikipages\")\r\n        }\r\n\r\n        renderTableContent = (section) ->\r\n            oldElements = $el.find(\".search-result-table\").children()\r\n            oldScope = oldElements.scope()\r\n\r\n            if oldScope\r\n                oldScope.$destroy()\r\n                oldElements.remove()\r\n\r\n            scope = $scope.$new()\r\n            scope[section.name] = section.value\r\n\r\n            template = angular.element.parseHTML(trim(templates[section.name]))\r\n            element = $compile(template)(scope)\r\n            $el.find(\".search-result-table\").html(element)\r\n\r\n        $scope.$watch \"searchResults\", (data) ->\r\n            currentSearchResults = data\r\n\r\n            return if !currentSearchResults\r\n\r\n            activeSection = getActiveSection(data)\r\n\r\n            renderFilterTabs(data)\r\n\r\n            renderTableContent(activeSection)\r\n            markSectionTabActive(activeSection)\r\n\r\n        $scope.$watch \"searchTerm\", (searchTerm) ->\r\n            $location.search(\"text\", searchTerm) if searchTerm != undefined\r\n            $analytics.trackPage($location.url(), \"Search\")\r\n\r\n        $el.on \"click\", \".search-filter li > a\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n\r\n            sectionName = target.parent().data(\"name\")\r\n            sectionData = if !currentSearchResults then [] else currentSearchResults[sectionName]\r\n\r\n            section = {\r\n                name: sectionName,\r\n                value: sectionData\r\n            }\r\n\r\n            $scope.$apply ->\r\n                renderTableContent(section)\r\n                markSectionTabActive(section)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        linkTable($scope, $el, $attrs, $ctrl)\r\n\r\n        searchText = $routeparams.text\r\n        $scope.$watch \"projectId\", (projectId) ->\r\n            $scope.searchTerm =  searchText if projectId?\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\",\r\n                              SearchDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaTaskboard\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaTasks\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaTeam\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaUserSettings\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaUserStories\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaWiki\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n\r\nclass AnalyticsService extends taiga.Service\r\n    @.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"]\r\n\r\n    constructor: (@rootscope, @log, @config, @win, @doc, @location) ->\r\n        @.initialized = false\r\n\r\n        conf = @config.get(\"analytics\", {})\r\n\r\n        @.accountId = conf.accountId\r\n        @.pageEvent = conf.pageEvent or \"$routeChangeSuccess\"\r\n        @.trackRoutes = conf.trackRoutes or true\r\n        @.ignoreFirstPageLoad = conf.ignoreFirstPageLoad or false\r\n\r\n    initialize: ->\r\n        if not @.accountId\r\n            @log.debug \"Analytics: no account id provided. Disabling.\"\r\n            return\r\n\r\n        @.injectAnalytics()\r\n\r\n        @win.ga(\"create\", @.accountId, \"auto\")\r\n        @win.ga(\"require\", \"ec\")\r\n        @win.ga(\"require\", \"displayfeatures\")\r\n\r\n        if @.trackRoutes and (not @.ignoreFirstPageLoad)\r\n            @win.ga(\"send\", \"pageview\", @.getUrl())\r\n\r\n        # activates page tracking\r\n        if @.trackRoutes\r\n            @rootscope.$on @.pageEvent, =>\r\n                @.trackPage(@.getUrl(), \"Taiga\")\r\n\r\n        @.initialized = true\r\n        @.setUserId()\r\n\r\n    setUserId: ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n        @win.ga('set', 'userId', @rootscope?.user?.uuid)\r\n\r\n    getUrl: ->\r\n        return @location.path()\r\n\r\n    injectAnalytics: ->\r\n        fn = `(function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\r\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\r\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);})`\r\n        fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\")\r\n\r\n    trackPage: (url, title) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        title = title or @doc[0].title\r\n        @win.ga(\"send\", \"pageview\", {\r\n            \"page\": url,\r\n            \"title\": title\r\n        })\r\n\r\n    trackEvent: (category, action, label, value) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga(\"send\", \"event\", category, action, label, value)\r\n\r\n    ecViewPlan: (plan) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan.plan_id,\r\n            'name': plan.name,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n        @win.ga('ec:setAction','detail')\r\n        @.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id)\r\n\r\n    ecClickPlan: (plan) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan.plan_id,\r\n            'name': plan.name,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n        @win.ga('ec:setAction','click')\r\n        @.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id)\r\n\r\n    ecListPlans: ([plans], page) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        position = 1\r\n        for plan in plans\r\n            @win.ga('ec:addImpression', {\r\n               'id': plan.plan_id,\r\n               'name': plan.name,\r\n               'list': page,\r\n               'position': position,\r\n            })\r\n            position++\r\n        @.trackEvent(\"ecommerce\", \"list-plans\")\r\n\r\n    ecAddToCart: (plan_id, plan_name, plan_price) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan_id,\r\n            'name': plan_name,\r\n            'price': plan_price,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n        @win.ga('ec:setAction','add')\r\n        @.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null)\r\n\r\n    ecConfirmChange: (plan_id, plan_name, plan_price) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan_id,\r\n            'name': plan_name,\r\n            'price': plan_price,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n        @win.ga('ec:setAction','checkout', {'step': 1,})\r\n        @.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1)\r\n\r\n    ecPurchase: (plan_id, plan_name, plan_price) ->\r\n        return if not @.initialized\r\n        return if not @win.ga\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan_id,\r\n            'name': plan_name,\r\n            'price': plan_price,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n\r\n        @win.ga('ec:setAction','checkout', {'step': 2,})\r\n        @.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2)\r\n\r\n        @win.ga('ec:addProduct', {\r\n            'id': plan_id,\r\n            'name': plan_name,\r\n            'price': plan_price,\r\n            'category': \"plans\",\r\n            'quantity': 1,\r\n            'position': 1,\r\n        })\r\n        @win.ga('ec:setAction','purchase', {\r\n            'id': plan_id,\r\n            'revenue': plan_price,\r\n        })\r\n        @.trackEvent('ecommerce', 'checkout', 'Plan checkout', null)\r\n\r\nmodule.service(\"$tgAnalytics\", AnalyticsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nBindScope = (config) ->\r\n    if !config.debugInfo\r\n        jQuery.fn.scope = () -> this.data('scope')\r\n\r\n    link = ($scope, $el) ->\r\n        if !config.debugInfo\r\n            $el\r\n                .data('scope', $scope)\r\n                .addClass('tg-scope')\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBindScope\", [\"$tgConfig\", BindScope])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCompileHtmlDirective = ($compile) ->\r\n    link = (scope, element, attrs) ->\r\n        scope.$watch attrs.tgCompileHtml, (newValue, oldValue) ->\r\n            element.html(newValue)\r\n            $compile(element.contents())(scope)\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nCompileHtmlDirective.$inject = [\"$compile\"]\r\n\r\nangular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n\r\n#############################################################################\r\n## Date Range Directive (used mainly for sprint date range)\r\n#############################################################################\r\n\r\nDateRangeDirective = ($translate) ->\r\n    renderRange = ($el, first, second) ->\r\n        prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\")\r\n        startDate = moment(first).format(prettyDate)\r\n        endDate = moment(second).format(prettyDate)\r\n        $el.html(\r\n            $translate.instant(\"TASKBOARD.TITLE_DATE_RANGE\", { startDate: startDate, endDate: endDate})\r\n        )\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        [first, second] = $attrs.tgDateRange.split(\",\")\r\n\r\n        bindOnce $scope, first, (valFirst) ->\r\n            bindOnce $scope, second, (valSecond) ->\r\n                renderRange($el, valFirst, valSecond)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective])\r\n\r\n\r\n#############################################################################\r\n## Date Selector Directive (using pikaday)\r\n#############################################################################\r\n\r\nDateSelectorDirective = ($rootscope, datePickerConfigService) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        selectedDate = null\r\n\r\n        initialize = () ->\r\n            datePickerConfig = datePickerConfigService.get()\r\n\r\n            _.merge(datePickerConfig, {\r\n                field: $el[0]\r\n            })\r\n\r\n            $el.picker = new Pikaday(datePickerConfig)\r\n\r\n        unbind = $rootscope.$on \"$translateChangeEnd\", (ctx) =>\r\n            $el.picker.destroy() if $el.picker\r\n            initialize()\r\n\r\n        $attrs.$observe \"pickerValue\", (val) ->\r\n            $el.val(val)\r\n\r\n            if val?\r\n                $el.picker.destroy() if $el.picker\r\n                initialize()\r\n\r\n            $el.picker.setDate(val)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            unbind()\r\n            $el.picker.destroy()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective])\r\n\r\n\r\n#############################################################################\r\n## Sprint Progress Bar Directive\r\n#############################################################################\r\n\r\nSprintProgressBarDirective = ->\r\n    renderProgress = ($el, percentage, visual_percentage) ->\r\n        if $el.hasClass(\".current-progress\")\r\n            $el.css(\"width\", \"#{percentage}%\")\r\n        else\r\n            $el.find(\".current-progress\").css(\"width\", \"#{visual_percentage}%\")\r\n            $el.find(\".number\").html(\"#{percentage} %\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgSprintProgressbar, (sprint) ->\r\n            closedPoints = sprint.closed_points\r\n            totalPoints = sprint.total_points\r\n            percentage = 0\r\n            percentage = Math.round(100 * (closedPoints/totalPoints)) if totalPoints != 0\r\n            visual_percentage = 0\r\n            #Visual hack for .current-progress bar\r\n            visual_percentage = Math.round(98 * (closedPoints/totalPoints)) if totalPoints != 0\r\n\r\n            renderProgress($el, percentage, visual_percentage)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgSprintProgressbar\", SprintProgressBarDirective)\r\n\r\n\r\n#############################################################################\r\n## Created-by display directive\r\n#############################################################################\r\n\r\nCreatedByDisplayDirective = ($template, $compile, $translate, $navUrls, avatarService)->\r\n    # Display the owner information (full name and photo) and the date of\r\n    # creation of an object (like USs, tasks and issues).\r\n    #\r\n    # Example:\r\n    #     div.us-created-by(tg-created-by-display, ng-model=\"us\")\r\n    #\r\n    # Requirements:\r\n    #   - model object must have the attributes 'created_date' and\r\n    #     'owner'(ng-model)\r\n    #   - scope.usersById object is required.\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.ngModel, (model) ->\r\n            if model?\r\n\r\n                avatar = avatarService.getAvatar(model.owner_extra_info)\r\n                $scope.owner = model.owner_extra_info or {\r\n                    full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\r\n                }\r\n\r\n                $scope.owner.avatar = avatar.url\r\n                $scope.owner.bg = avatar.bg\r\n\r\n                $scope.url = if $scope.owner?.is_active then $navUrls.resolve(\"user-profile\", {username: $scope.owner.username}) else \"\"\r\n\r\n\r\n                $scope.date =  moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"))\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\",\r\n        scope: true,\r\n        templateUrl: \"common/components/created-by.html\"\r\n    }\r\n\r\nmodule.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\",\r\n                                        CreatedByDisplayDirective])\r\n\r\n\r\nUserDisplayDirective = ($template, $compile, $translate, $navUrls, avatarService)->\r\n    # Display the user information (full name and photo).\r\n    #\r\n    # Example:\r\n    #     div.creator(tg-user-display, tg-user-id=\"{{ user.id }}\")\r\n    #\r\n    # Requirements:\r\n    #   - scope.usersById object is required.\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        id = $attrs.tgUserId\r\n        $scope.user = $scope.usersById[id] or {\r\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\r\n        }\r\n\r\n        avatar = avatarService.getAvatar($scope.usersById[id] or null)\r\n\r\n        $scope.user.avatar = avatar.url\r\n        $scope.user.bg = avatar.bg\r\n\r\n        $scope.url = if $scope.user.is_active then $navUrls.resolve(\"user-profile\", {username: $scope.user.username}) else \"\"\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        scope: true,\r\n        templateUrl: \"common/components/user-display.html\"\r\n    }\r\n\r\nmodule.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\",\r\n                                   UserDisplayDirective])\r\n\r\n\r\n#############################################################################\r\n## Block Button directive\r\n#############################################################################\r\n\r\nBlockButtonDirective = ($rootscope, $loading, $template) ->\r\n    template = $template.get(\"common/components/block-button.html\")\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\r\n\r\n        $scope.$watch $attrs.ngModel, (item) ->\r\n            return if not item\r\n\r\n            $scope.item = item\r\n\r\n            if isEditable()\r\n                $el.find('.button-lock').addClass('editable')\r\n\r\n        $el.on \"click\", \".item-block\", (event) ->\r\n            event.preventDefault()\r\n            $rootscope.$broadcast(\"block\", $model.$modelValue)\r\n\r\n        $el.on \"click\", \".item-unblock\", (event) ->\r\n            event.preventDefault()\r\n            currentLoading = $loading()\r\n                .target($el.find(\".item-unblock\"))\r\n                .start()\r\n\r\n            finish = ->\r\n                currentLoading.finish()\r\n\r\n            $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n        template: template\r\n    }\r\n\r\nmodule.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective])\r\n\r\n\r\n#############################################################################\r\n## Delete Button directive\r\n#############################################################################\r\n\r\nDeleteButtonDirective = ($log, $repo, $confirm, $location, $template) ->\r\n    template = $template.get(\"common/components/delete-button.html\")\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        if not $attrs.onDeleteGoToUrl\r\n            return $log.error \"DeleteButtonDirective requires on-delete-go-to-url set in scope.\"\r\n        if not $attrs.onDeleteTitle\r\n            return $log.error \"DeleteButtonDirective requires on-delete-title set in scope.\"\r\n\r\n        $el.on \"click\", \".button-delete\", (event) ->\r\n            title = $attrs.onDeleteTitle\r\n            subtitle = $model.$modelValue.subject\r\n\r\n            $confirm.askOnDelete(title, subtitle).then (askResponse) =>\r\n                promise = $repo.remove($model.$modelValue)\r\n                promise.then =>\r\n                    askResponse.finish()\r\n                    url = $scope.$eval($attrs.onDeleteGoToUrl)\r\n                    $location.path(url)\r\n                promise.then null, =>\r\n                    askResponse.finish(false)\r\n                    $confirm.notify(\"error\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n        template: template\r\n    }\r\n\r\nmodule.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective])\r\n\r\n#############################################################################\r\n## Common list directives\r\n#############################################################################\r\n## NOTE: These directives are used in issues and search and are\r\n##       completely bindonce, they only serves for visualization of data.\r\n#############################################################################\r\n\r\nListItemEpicStatusDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        epic = $scope.$eval($attrs.tgListitemEpicStatus)\r\n        bindOnce $scope, \"epicStatusById\", (epicStatusById) ->\r\n            $el.text(epicStatusById[epic.status].name)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective)\r\n\r\nListItemUsStatusDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        us = $scope.$eval($attrs.tgListitemUsStatus)\r\n        bindOnce $scope, \"usStatusById\", (usStatusById) ->\r\n            $el.text(usStatusById[us.status].name)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective)\r\n\r\n\r\nListItemTaskStatusDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        task = $scope.$eval($attrs.tgListitemTaskStatus)\r\n        bindOnce $scope, \"taskStatusById\", (taskStatusById) ->\r\n            $el.text(taskStatusById[task.status].name)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective)\r\n\r\n\r\nListItemAssignedtoDirective = ($template, $translate, avatarService) ->\r\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, \"usersById\", (usersById) ->\r\n            item = $scope.$eval($attrs.tgListitemAssignedto)\r\n            ctx = {\r\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\r\n            }\r\n\r\n            member = usersById[item.assigned_to]\r\n            avatar = avatarService.getAvatar(member)\r\n\r\n            ctx.imgurl = avatar.url\r\n            ctx.bg = avatar.bg\r\n\r\n            if member\r\n                ctx.name = member.full_name_display\r\n\r\n            $el.html(template(ctx))\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective])\r\n\r\n\r\nListItemIssueStatusDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        issue = $scope.$eval($attrs.tgListitemIssueStatus)\r\n        bindOnce $scope, \"issueStatusById\", (issueStatusById) ->\r\n            $el.text(issueStatusById[issue.status].name)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective)\r\n\r\n\r\nListItemTypeDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (issueTypeById, issue) ->\r\n            type = issueTypeById[issue.type]\r\n            domNode = $el.find(\".level\")\r\n            domNode.css(\"background-color\", type.color)\r\n            domNode.attr(\"title\", type.name)\r\n\r\n        bindOnce $scope, \"issueTypeById\", (issueTypeById) ->\r\n            issue = $scope.$eval($attrs.tgListitemType)\r\n            render(issueTypeById, issue)\r\n\r\n        $scope.$watch $attrs.tgListitemType, (issue) ->\r\n            render($scope.issueTypeById, issue)\r\n\r\n    return {\r\n        link: link\r\n        templateUrl: \"common/components/level.html\"\r\n    }\r\n\r\nmodule.directive(\"tgListitemType\", ListItemTypeDirective)\r\n\r\n\r\nListItemPriorityDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (priorityById, issue) ->\r\n            priority = priorityById[issue.priority]\r\n            domNode = $el.find(\".level\")\r\n            domNode.css(\"background-color\", priority.color)\r\n            domNode.attr(\"title\", priority.name)\r\n\r\n        bindOnce $scope, \"priorityById\", (priorityById) ->\r\n            issue = $scope.$eval($attrs.tgListitemPriority)\r\n            render(priorityById, issue)\r\n\r\n        $scope.$watch $attrs.tgListitemPriority, (issue) ->\r\n            render($scope.priorityById, issue)\r\n\r\n    return {\r\n        link: link\r\n        templateUrl: \"common/components/level.html\"\r\n    }\r\n\r\nmodule.directive(\"tgListitemPriority\", ListItemPriorityDirective)\r\n\r\n\r\nListItemSeverityDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (severityById, issue) ->\r\n            severity = severityById[issue.severity]\r\n            domNode = $el.find(\".level\")\r\n            domNode.css(\"background-color\", severity.color)\r\n            domNode.attr(\"title\", severity.name)\r\n\r\n        bindOnce $scope, \"severityById\", (severityById) ->\r\n            issue = $scope.$eval($attrs.tgListitemSeverity)\r\n            render(severityById, issue)\r\n\r\n        $scope.$watch $attrs.tgListitemSeverity, (issue) ->\r\n            render($scope.severityById, issue)\r\n\r\n    return {\r\n        link: link\r\n        templateUrl: \"common/components/level.html\"\r\n    }\r\n\r\nmodule.directive(\"tgListitemSeverity\", ListItemSeverityDirective)\r\n\r\n\r\n#############################################################################\r\n## Progress bar directive\r\n#############################################################################\r\n\r\nTgProgressBarDirective = ($template) ->\r\n    template = $template.get(\"common/components/progress-bar.html\", true)\r\n\r\n    render = (el, percentage) ->\r\n        el.html(template({percentage: percentage}))\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        element = angular.element($el)\r\n\r\n        $scope.$watch $attrs.tgProgressBar, (percentage) ->\r\n            percentage = _.max([0 , percentage])\r\n            percentage = _.min([100, percentage])\r\n            render($el, percentage)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective])\r\n\r\n\r\n#############################################################################\r\n## Main title directive\r\n#############################################################################\r\n\r\nTgMainTitleDirective = ($translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $attrs.$observe \"i18nSectionName\", (i18nSectionName) ->\r\n            $scope.sectionName = i18nSectionName\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        templateUrl: \"common/components/main-title.html\"\r\n    }\r\n\r\nmodule.directive(\"tgMainTitle\", [\"$translate\",  TgMainTitleDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntimeout = @.taiga.timeout\r\ncancelTimeout = @.taiga.cancelTimeout\r\ndebounce = @.taiga.debounce\r\nbindMethods = @.taiga.bindMethods\r\n\r\nNOTIFICATION_MSG = {\r\n    \"success\":\r\n        title: \"NOTIFICATION.OK\"\r\n        message: \"NOTIFICATION.SAVED\"\r\n    \"error\":\r\n        title: \"NOTIFICATION.WARNING\"\r\n        message: \"NOTIFICATION.WARNING_TEXT\"\r\n    \"light-error\":\r\n        title: \"NOTIFICATION.WARNING\"\r\n        message: \"NOTIFICATION.WARNING_TEXT\"\r\n}\r\n\r\n\r\nclass ConfirmService extends taiga.Service\r\n    @.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"]\r\n\r\n    constructor: (@q, @lightboxService, @loading, @translate, @filter) ->\r\n        bindMethods(@)\r\n\r\n    hide: (el)->\r\n        if el\r\n            @lightboxService.close(el)\r\n\r\n            el.off(\".confirm-dialog\")\r\n\r\n    ask: (title, subtitle, message, lightboxSelector=\".lightbox-generic-ask\") ->\r\n        defered = @q.defer()\r\n\r\n        el = angular.element(lightboxSelector)\r\n\r\n        # Render content\r\n        el.find(\".title\").text(title || '')\r\n        el.find(\".subtitle\").text(subtitle || '')\r\n        if message\r\n            message = @filter('textToHTML')(message)\r\n        el.find(\".message\").html(message || '')\r\n\r\n        # Assign event handlers\r\n        el.on \"click.confirm-dialog\", \".js-confirm\", debounce 2000, (event) =>\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            currentWidth = target.width()\r\n            target.width(currentWidth)\r\n            currentLoading = @loading()\r\n                .target(target)\r\n                .start()\r\n            defered.resolve {\r\n                finish: (ok=true) =>\r\n                    target.css(\"width\", \"\");\r\n                    currentLoading.finish()\r\n                    if ok\r\n                        @.hide(el)\r\n            }\r\n\r\n        el.on \"click.confirm-dialog\", \".js-cancel\", (event) =>\r\n            event.preventDefault()\r\n            defered.reject()\r\n            @.hide(el)\r\n\r\n        onEsc = () =>\r\n            @.hide(el)\r\n\r\n        @lightboxService.open(el, null, onEsc)\r\n\r\n        return defered.promise\r\n\r\n    askDelete: (title, subtitle, message, lightboxSelector=\".lightbox-generic-delete\") ->\r\n        defered = @q.defer()\r\n\r\n        lightbox = angular.element(lightboxSelector)\r\n\r\n        # Render content\r\n        lightbox.find(\".title\").text(title || '')\r\n        lightbox.find(\".subtitle\").text(subtitle || '')\r\n        if message\r\n            message = @filter('textToHTML')(message)\r\n        lightbox.find(\".message\").html(message || '')\r\n\r\n        # Assign event handlers\r\n        lightbox.on \"click.confirm-dialog\", \".js-confirm\", debounce 2000, (event) =>\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            currentWidth = target.width()\r\n            target.width(currentWidth)\r\n            currentLoading = @loading()\r\n                .target(target)\r\n                .start()\r\n            defered.resolve {\r\n                finish: (ok=true) =>\r\n                    target.css(\"width\", \"\");\r\n                    currentLoading.finish()\r\n                    if ok\r\n                        @.hide(lightbox)\r\n            }\r\n\r\n        lightbox.on \"click.confirm-dialog\", \".js-cancel\", (event) =>\r\n            event.preventDefault()\r\n            defered.reject()\r\n            @.hide(lightbox)\r\n\r\n        onEsc = () =>\r\n            @.hide(lightbox)\r\n\r\n        @lightboxService.open(lightbox, null, onEsc)\r\n\r\n        return defered.promise\r\n\r\n    askOnDelete: (title, message, subtitle) ->\r\n        if not subtitle?\r\n            subtitle = @translate.instant(\"NOTIFICATION.ASK_DELETE\")\r\n        return @.askDelete(title, subtitle, message)\r\n\r\n    askChoice: (title, subtitle, choices, replacement, warning, lightboxSelector=\".lightbox-ask-choice\") ->\r\n        defered = @q.defer()\r\n\r\n        el = angular.element(lightboxSelector)\r\n\r\n        # Render content\r\n        el.find(\".title\").text(title)\r\n        el.find(\".subtitle\").text(subtitle)\r\n\r\n        if replacement\r\n            el.find(\".replacement\").text(replacement)\r\n        else\r\n            el.find(\".replacement\").remove()\r\n\r\n        if warning\r\n            el.find(\".warning\").text(warning)\r\n        else\r\n            el.find(\".warning\").remove()\r\n\r\n        choicesField = el.find(\".choices\")\r\n        choicesField.html('')\r\n        _.each choices, (value, key) ->\r\n            value = _.escape(value)\r\n            choicesField.append(angular.element(\"<option value='#{key}'>#{value}</option>\"))\r\n\r\n        # Assign event handlers\r\n        el.on \"click.confirm-dialog\", \".js-confirm-ask\", debounce 2000, (event) =>\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            currentLoading = @loading()\r\n                .target(target)\r\n                .start()\r\n            defered.resolve {\r\n                selected: choicesField.val()\r\n                finish: (ok=true) =>\r\n                    currentLoading.finish()\r\n                    if ok\r\n                        @.hide(el)\r\n            }\r\n\r\n        el.on \"click.confirm-dialog\", \".js-cancel-ask\", (event) =>\r\n            event.preventDefault()\r\n            defered.reject()\r\n            @.hide(el)\r\n\r\n        @lightboxService.open(el)\r\n\r\n        return defered.promise\r\n\r\n    error: (message) ->\r\n        defered = @q.defer()\r\n\r\n        el = angular.element(\".lightbox-generic-error\")\r\n\r\n        # Render content\r\n        el.find(\".title\").html(message)\r\n\r\n        # Assign event handlers\r\n        el.on \"click.confirm-dialog\", \".button-green\", (event) =>\r\n            event.preventDefault()\r\n            defered.resolve()\r\n            @.hide(el)\r\n\r\n        el.on \"click.confirm-dialog\", \".close\", (event) =>\r\n            event.preventDefault()\r\n            defered.resolve()\r\n            @.hide(el)\r\n\r\n        @lightboxService.open(el)\r\n\r\n        return defered.promise\r\n\r\n    success: (title, message, icon, action) ->\r\n        defered = @q.defer()\r\n\r\n        el = angular.element(\".lightbox-generic-success\")\r\n\r\n        el.find(\"img\").remove()\r\n        el.find(\"svg\").remove()\r\n\r\n        if icon\r\n            if icon.type == \"img\"\r\n                detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name)\r\n            else if icon.type == \"svg\"\r\n                detailImage = document.createElement(\"div\")\r\n                taiga.addClass(detailImage, \"icon\")\r\n                taiga.addClass(detailImage, icon.name)\r\n                taiga.addClass(detailImage, \"lb-icon\")\r\n\r\n                svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\")\r\n\r\n                useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use')\r\n                useSVG.setAttributeNS('http://www.w3.org/1999/xlink','href', '#' + icon.name)\r\n\r\n                detailImage.appendChild(svgContainer).appendChild(useSVG)\r\n\r\n            if detailImage\r\n                el.find('section').prepend(detailImage)\r\n\r\n        # Render content\r\n        el.find(\".title\").html(title) if title\r\n        el.find(\".message\").html(message) if message\r\n        if action\r\n            el.find(\".js-confirm\").html(action)\r\n            el.find(\".js-confirm\").attr('title', action)\r\n\r\n        # Assign event handlers\r\n        el.on \"click.confirm-dialog\", \".js-confirm\", (event) =>\r\n            event.preventDefault()\r\n            defered.resolve()\r\n            @.hide(el)\r\n\r\n        el.on \"click.confirm-dialog\", \".close\", (event) =>\r\n            event.preventDefault()\r\n            defered.resolve()\r\n            @.hide(el)\r\n\r\n        @lightboxService.open(el)\r\n\r\n        return defered.promise\r\n\r\n    loader: (title, message, spin=false) ->\r\n        el = angular.element(\".lightbox-generic-loading\")\r\n\r\n        # Render content\r\n        el.find(\".title\").html(title) if title\r\n        el.find(\".message\").html(message) if message\r\n\r\n        if spin\r\n            el.find(\".spin\").removeClass(\"hidden\")\r\n\r\n        return {\r\n            start: => @lightboxService.open(el)\r\n            stop: => @lightboxService.close(el)\r\n            update: (status, title, message, percent) =>\r\n                el.find(\".title\").html(title) if title\r\n                el.find(\".message\").html(message) if message\r\n\r\n                if percent\r\n                    el.find(\".spin\").addClass(\"hidden\")\r\n                    el.find(\".progress-bar-wrapper\").removeClass(\"hidden\")\r\n                    el.find(\".progress-bar-wrapper > .bar\").width(percent + '%')\r\n                    el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%' )\r\n                else\r\n                    el.find(\".spin\").removeClass(\"hidden\")\r\n                    el.find(\".progress-bar-wrapper\").addClass(\"hidden\")\r\n        }\r\n\r\n    notify: (type, message, title, time) ->\r\n        # NOTE: Typesi are: error, success, light-error\r\n        #       See partials/components/notification-message.jade)\r\n        #       Add default texts to NOTIFICATION_MSG for new notification types\r\n\r\n        selector = \".notification-message-#{type}\"\r\n        el = angular.element(selector)\r\n\r\n        return if el.hasClass(\"active\")\r\n\r\n        if title\r\n            el.find(\"h4\").html(title)\r\n        else\r\n            el.find(\"h4\").html(@translate.instant(NOTIFICATION_MSG[type].title))\r\n\r\n        if message\r\n            el.find(\"p\").html(message)\r\n        else\r\n            el.find(\"p\").html(@translate.instant(NOTIFICATION_MSG[type].message))\r\n\r\n        body = angular.element(\"body\")\r\n        body.find(\".notification-message .notification-light\")\r\n            .removeClass('active')\r\n            .addClass('inactive')\r\n\r\n        body.find(selector)\r\n            .removeClass('inactive')\r\n            .addClass('active')\r\n\r\n        if @.tsem\r\n            cancelTimeout(@.tsem)\r\n\r\n        if !time\r\n            time = if type == 'error' or type == 'light-error' then 3500 else 1500\r\n\r\n        @.tsem = timeout time, =>\r\n            body.find(selector)\r\n                .removeClass('active')\r\n                .addClass('inactive')\r\n                .one 'animationend', () -> $(this).removeClass('inactive')\r\n\r\n            delete @.tsem\r\n\r\n        el.on \"click\", \".icon-close, .close\", (event) =>\r\n            body.find(selector)\r\n                .removeClass('active')\r\n                .addClass('inactive')\r\n\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\nmodule.service(\"$tgConfirm\", ConfirmService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindMethods = @.taiga.bindMethods\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\ngenerateHash = taiga.generateHash\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n# Custom attributes types (see taiga-back/taiga/projects/custom_attributes/choices.py)\r\nTEXT_TYPE = \"text\"\r\nRICHTEXT_TYPE = \"url\"\r\nMULTILINE_TYPE = \"multiline\"\r\nDATE_TYPE = \"date\"\r\nURL_TYPE = \"url\"\r\nDROPDOWN_TYPE = \"dropdown\"\r\nCHECKBOX_TYPE = \"checkbox\"\r\nNUMBER_TYPE = \"number\"\r\n\r\n\r\nTYPE_CHOICES = [\r\n    {\r\n        key: TEXT_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\r\n    },\r\n    {\r\n        key: MULTILINE_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\r\n    },\r\n    {\r\n        key: DATE_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\r\n    },\r\n    {\r\n        key: URL_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\r\n    },\r\n    {\r\n        key: RICHTEXT_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\r\n    },\r\n    {\r\n        key: DROPDOWN_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\r\n    },\r\n    {\r\n        key: CHECKBOX_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\r\n    },\r\n    {\r\n        key: NUMBER_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\r\n    }\r\n]\r\n\r\n\r\n\r\nclass CustomAttributesValuesController extends taiga.Controller\r\n    @.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @rs, @confirm, @q) ->\r\n        bindMethods(@)\r\n        @.type = null\r\n        @.objectId = null\r\n        @.projectId = null\r\n        @.customAttributes = []\r\n        @.customAttributesValues = null\r\n\r\n    initialize: (type, objectId) ->\r\n        @.project = @scope.project\r\n        @.type = type\r\n        @.objectId = objectId\r\n        @.projectId = @scope.projectId\r\n\r\n    loadCustomAttributesValues: ->\r\n        return @.customAttributesValues if not @.objectId\r\n        return @rs.customAttributesValues[@.type].get(@.objectId).then (customAttributesValues) =>\r\n            @.customAttributes = @.project[\"#{@.type}_custom_attributes\"]\r\n            @.customAttributesValues = customAttributesValues\r\n            return customAttributesValues\r\n\r\n    getAttributeValue: (attribute) ->\r\n        attributeValue = _.clone(attribute, false)\r\n        attributeValue.value = @.customAttributesValues.attributes_values[attribute.id]\r\n        return attributeValue\r\n\r\n    updateAttributeValue: (attributeValue) ->\r\n        onSuccess = =>\r\n            @rootscope.$broadcast(\"custom-attributes-values:edit\")\r\n\r\n        onError = (response) =>\r\n            @confirm.notify(\"error\")\r\n            return @q.reject()\r\n\r\n        # We need to update the full array so angular understand the model is modified\r\n        attributesValues = _.clone(@.customAttributesValues.attributes_values, true)\r\n        attributesValues[attributeValue.id] = attributeValue.value\r\n        @.customAttributesValues.attributes_values = attributesValues\r\n        @.customAttributesValues.id = @.objectId\r\n        return @repo.save(@.customAttributesValues).then(onSuccess, onError)\r\n\r\n\r\nCustomAttributesValuesDirective = ($templates, $storage) ->\r\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true)\r\n\r\n    collapsedHash = (type) ->\r\n        return generateHash([\"custom-attributes-collapsed\", type])\r\n\r\n    link = ($scope, $el, $attrs, $ctrls) ->\r\n        $ctrl = $ctrls[0]\r\n        $model = $ctrls[1]\r\n        hash = collapsedHash($attrs.type)\r\n        $scope.collapsed = $storage.get(hash) or false\r\n\r\n        bindOnce $scope, $attrs.ngModel, (value) ->\r\n            $ctrl.initialize($attrs.type, value.id)\r\n            $ctrl.loadCustomAttributesValues()\r\n\r\n        $scope.toggleCollapse = () ->\r\n            $scope.collapsed = !$scope.collapsed\r\n            $storage.set(hash, $scope.collapsed)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    templateFn = ($el, $attrs) ->\r\n        return template({\r\n            requiredEditionPerm: $attrs.requiredEditionPerm\r\n        })\r\n\r\n    return {\r\n        require: [\"tgCustomAttributesValues\", \"ngModel\"]\r\n        controller: CustomAttributesValuesController\r\n        controllerAs: \"ctrl\"\r\n        restrict: \"AE\"\r\n        scope: true\r\n        link: link\r\n        template: templateFn\r\n    }\r\n\r\nmodule.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\",\r\n                                              CustomAttributesValuesDirective])\r\n\r\n\r\nCustomAttributeValueDirective = ($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) ->\r\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true)\r\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n\r\n        render = (attributeValue, edit=false) ->\r\n            if attributeValue.type is DATE_TYPE and attributeValue.value\r\n                value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate)\r\n            if attributeValue.type is NUMBER_TYPE and attributeValue.value\r\n                value = parseFloat(attributeValue.value)\r\n            else\r\n                value = attributeValue.value\r\n\r\n            editable = isEditable()\r\n\r\n            ctx = {\r\n                id: attributeValue.id\r\n                name: attributeValue.name\r\n                description: attributeValue.description\r\n                value: value\r\n                type: attributeValue.type\r\n                isEditable: editable\r\n            }\r\n\r\n            scope = $scope.$new()\r\n            scope.attributeHtml = wysiwygService.getHTML(\"#{value}\")  # value could be a number\r\n            scope.extra = attributeValue.extra\r\n            scope.model = value\r\n            scope.project = $scope.project\r\n\r\n            if editable and (edit or not value)\r\n                html = templateEdit(ctx)\r\n\r\n                html = $compile(html)(scope)\r\n                $el.html(html)\r\n\r\n                if attributeValue.type == DATE_TYPE\r\n                    datePickerConfig = datePickerConfigService.get()\r\n                    _.merge(datePickerConfig, {\r\n                        field: $el.find(\"input[name=value]\")[0]\r\n                        onSelect: (date) =>\r\n                            selectedDate = date\r\n                        onOpen: =>\r\n                            $el.picker.setDate(selectedDate) if selectedDate?\r\n                    })\r\n                    $el.picker = new Pikaday(datePickerConfig)\r\n            else\r\n                html = template(ctx)\r\n                html = $compile(html)(scope)\r\n                $el.html(html)\r\n\r\n        isEditable = ->\r\n            permissions = $scope.project.my_permissions\r\n            requiredEditionPerm = $attrs.requiredEditionPerm\r\n            return permissions.indexOf(requiredEditionPerm) > -1\r\n\r\n        $scope.saveCustomRichText = (markdown, callback) =>\r\n            attributeValue.value = markdown\r\n            $ctrl.updateAttributeValue(attributeValue).then ->\r\n                callback()\r\n                render(attributeValue, false)\r\n\r\n        $scope.cancelCustomRichText= () =>\r\n            render(attributeValue, false)\r\n\r\n            return null\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley()\r\n            return if not form.validate()\r\n\r\n            if attributeValue.type is DROPDOWN_TYPE\r\n                formControl = $el.find(\"select[name='value']\")\r\n                attributeValue.value = formControl.val()\r\n            else if attributeValue.type is CHECKBOX_TYPE\r\n                formControl = $el.find(\"input[name=value]\")\r\n                attributeValue.value = formControl[0].checked\r\n            else\r\n                formControl = $el.find(\"input[name=value], textarea[name='value']\")\r\n                attributeValue.value = formControl.val()\r\n                if attributeValue.type is DATE_TYPE and moment(attributeValue.value, prettyDate).isValid()\r\n                    attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\")\r\n                if attributeValue.type is NUMBER_TYPE\r\n                    attributeValue.value = parseFloat(attributeValue.value)\r\n\r\n            $scope.$apply ->\r\n                $ctrl.updateAttributeValue(attributeValue).then ->\r\n                    render(attributeValue, false)\r\n\r\n        setFocusAndSelectOnInputField = ->\r\n            $el.find(\"input[name='value'], textarea[name='value']\").focus().select()\r\n\r\n        # Bootstrap\r\n        attributeValue = $scope.$eval($attrs.tgCustomAttributeValue)\r\n        if attributeValue.value == null or attributeValue.value == undefined\r\n            attributeValue.value = \"\"\r\n        $scope.customAttributeValue = attributeValue\r\n        render(attributeValue)\r\n\r\n        ## Actions (on view mode)\r\n\r\n        $el.on \"click\", \".js-value-view-mode span a\", (event) ->\r\n            event.stopPropagation()\r\n\r\n        $el.on \"click\", \".js-value-view-mode\", ->\r\n            return if not isEditable()\r\n            return if $selectedText.get().length\r\n            render(attributeValue, true)\r\n            setFocusAndSelectOnInputField()\r\n\r\n        $el.on \"click\", \".js-edit-description\", (event) ->\r\n            event.preventDefault()\r\n            render(attributeValue, true)\r\n            setFocusAndSelectOnInputField()\r\n\r\n        ## Actions (on edit mode)\r\n        $el.on \"keyup\", \"input[name=value], textarea[name='value']\", (event) ->\r\n            if event.keyCode is 13 and event.currentTarget.type isnt \"textarea\"\r\n                submit(event)\r\n            else if event.keyCode == 27\r\n                render(attributeValue, false)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $el.on \"click\", \".js-save-description\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        require: \"^tgCustomAttributesValues\"\r\n        restrict: \"AE\"\r\n    }\r\n\r\nmodule.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\",\r\n                                            \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n\r\nclass EmojisService extends taiga.Service\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n        @.emojis = _.map taiga.emojis, (it) ->\r\n            it.image = \"/#{window._version}/emojis/\" + it.image\r\n\r\n            return it\r\n        @.emojisById = _.keyBy(@.emojis, 'id')\r\n        @.emojisByName = _.keyBy(@.emojis, 'name')\r\n\r\n\r\n    searchByName: (name) =>\r\n        return _.filter @.emojis, (it) -> it.name.indexOf(name) != -1\r\n\r\n    getEmojiById: (id) =>\r\n        return @.emojisById[id]\r\n\r\n    getEmojiByName: (name) =>\r\n        return @.emojisByName[name]\r\n\r\n    replaceImgsByEmojiName: (html) =>\r\n        emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi)\r\n\r\n        for emojiId in emojiIds\r\n            regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g')\r\n            emoji = @.getEmojiById(emojiId)\r\n            html = html.replace(regexImgs, ':' + emoji.name + ':')\r\n\r\n        return html\r\n\r\n    replaceEmojiNameByImgs: (text) =>\r\n        emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g)\r\n\r\n        for emojiId in emojiIds\r\n            regexImgs = new RegExp(':' + emojiId + ':', 'g')\r\n            emoji = @.getEmojiByName(emojiId)\r\n\r\n            if emoji\r\n                text = text.replace(regexImgs, '![alt](' + emoji.image + ')')\r\n\r\n        return text\r\n\r\n    replaceEmojiNameByHtmlImgs: (text) =>\r\n        emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g)\r\n\r\n        for emojiId in emojiIds\r\n            regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g')\r\n            emoji = @.getEmojiByName(emojiId)\r\n\r\n            if emoji\r\n                text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />')\r\n\r\n        return text\r\n\r\nmodule.service(\"$tgEmojis\", EmojisService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ngroupBy = @.taiga.groupBy\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n#############################################################################\r\n## User story estimation directive (for Lightboxes)\r\n#############################################################################\r\n\r\nLbUsEstimationDirective = ($tgEstimationsService, $rootScope, $repo, $template, $compile) ->\r\n    # Display the points of a US and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-lb-us-estimation-progress-bar(ng-model=\"us\")\r\n    #\r\n    # Requirements:\r\n    #   - Us object (ng-model)\r\n    #   - scope.project object\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        $scope.$watch $attrs.ngModel, (us) ->\r\n            if us\r\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\r\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\r\n                    us.points = points\r\n                    estimationProcess.render()\r\n\r\n                    $scope.$apply ->\r\n                        $model.$setViewValue(us)\r\n\r\n                estimationProcess.render = () ->\r\n                    ctx = {\r\n                        totalPoints: @calculateTotalPoints()\r\n                        roles: @calculateRoles()\r\n                        editable: @isEditable\r\n                        loading: false\r\n                    }\r\n                    mainTemplate = \"common/estimation/us-estimation-points-per-role.html\"\r\n                    template = $template.get(mainTemplate, true)\r\n                    html = template(ctx)\r\n                    html = $compile(html)($scope)\r\n                    @$el.html(html)\r\n\r\n                estimationProcess.render()\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\",\r\n                                      \"$compile\", LbUsEstimationDirective])\r\n\r\n\r\n#############################################################################\r\n## User story estimation directive\r\n#############################################################################\r\n\r\nUsEstimationDirective = ($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) ->\r\n    # Display the points of a US and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-us-estimation-progress-bar(ng-model=\"us\")\r\n    #\r\n    # Requirements:\r\n    #   - Us object (ng-model)\r\n    #   - scope.project object\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        save = (points) ->\r\n            transform = $modelTransform.save (us) =>\r\n                us.points = points\r\n\r\n                return us\r\n\r\n            onError = =>\r\n                $confirm.notify(\"error\")\r\n\r\n            return transform.then(null, onError)\r\n\r\n        $scope.$watchCollection () ->\r\n            return $model.$modelValue && $model.$modelValue.points\r\n        , () ->\r\n            us = $model.$modelValue\r\n            if us\r\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\r\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\r\n                    estimationProcess.loading = roleId\r\n                    estimationProcess.render()\r\n                    save(points).then () ->\r\n                        estimationProcess.loading = false\r\n                        $rootScope.$broadcast(\"object:updated\")\r\n                        estimationProcess.render()\r\n\r\n                estimationProcess.render = () ->\r\n                    ctx = {\r\n                        totalPoints: @calculateTotalPoints()\r\n                        roles: @calculateRoles()\r\n                        editable: @isEditable\r\n                        loading: estimationProcess.loading\r\n                    }\r\n                    mainTemplate = \"common/estimation/us-estimation-points-per-role.html\"\r\n                    template = $template.get(mainTemplate, true)\r\n                    html = template(ctx)\r\n                    html = $compile(html)($scope)\r\n                    @$el.html(html)\r\n\r\n                estimationProcess.render()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\",\r\n                                    \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\",\r\n                                    \"$tgConfirm\", UsEstimationDirective])\r\n\r\n\r\n#############################################################################\r\n## Estimations service\r\n#############################################################################\r\n\r\nEstimationsService = ($template, $repo, $confirm, $q, $qqueue) ->\r\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true)\r\n\r\n    class EstimationProcess\r\n        constructor: (@$el, @us, @project) ->\r\n            @isEditable = @project.my_permissions.indexOf(\"modify_us\") != -1\r\n            @roles = @project.roles\r\n            @points = @project.points\r\n            @loading = false\r\n            @pointsById = groupBy(@points, (x) -> x.id)\r\n            @onSelectedPointForRole =  (roleId, pointId) ->\r\n            @render = () ->\r\n\r\n        save: (roleId, pointId) ->\r\n            deferred = $q.defer()\r\n            $qqueue.add () =>\r\n                onSuccess = =>\r\n                    deferred.resolve()\r\n                    @render()\r\n\r\n                onError = =>\r\n                    $confirm.notify(\"error\")\r\n                    @us.revert()\r\n                    @render()\r\n                    deferred.reject()\r\n\r\n                $repo.save(@us).then(onSuccess, onError)\r\n\r\n            return deferred.promise\r\n\r\n        calculateTotalPoints: () ->\r\n            values = _.map(@us.points, (v, k) => @pointsById[v]?.value)\r\n\r\n            if values.length == 0\r\n                return \"?\"\r\n\r\n            notNullValues = _.filter(values, (v) -> v?)\r\n            if notNullValues.length == 0\r\n                return \"?\"\r\n\r\n            return _.reduce(notNullValues, (acc, num) -> acc + num)\r\n\r\n        calculateRoles: () ->\r\n            computableRoles = _.filter(@project.roles, \"computable\")\r\n            roles = _.map computableRoles, (role) =>\r\n                pointId = @us.points[role.id]\r\n                pointObj = @pointsById[pointId]\r\n                role = _.clone(role, true)\r\n                role.points = if pointObj? and pointObj.name? then pointObj.name else \"?\"\r\n                return role\r\n\r\n            return roles\r\n\r\n        bindClickEvents: =>\r\n            @$el.on \"click\", \".total.clickable\", (event) =>\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                target = angular.element(event.currentTarget)\r\n                roleId = target.data(\"role-id\")\r\n                @renderPointsSelector(roleId, target)\r\n                target.siblings().removeClass('active')\r\n                target.addClass('active')\r\n\r\n            @$el.on \"click\", \".point\", (event) =>\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                target = angular.element(event.currentTarget)\r\n                roleId = target.data(\"role-id\")\r\n                pointId = target.data(\"point-id\")\r\n                @$el.find(\".popover\").popover().close()\r\n\r\n                points = _.clone(@us.points, true)\r\n                points[roleId] = pointId\r\n\r\n                @onSelectedPointForRole(roleId, pointId, points)\r\n\r\n        renderPointsSelector: (roleId, target) ->\r\n            points = _.map @points, (point) =>\r\n                point = _.clone(point, true)\r\n                point.selected = if @us.points[roleId] == point.id then false else true\r\n                return point\r\n\r\n            maxPointLength = 5\r\n            horizontalList =  _.some points, (point) => point.name.length > maxPointLength\r\n\r\n            html = pointsTemplate({\"points\": points, roleId: roleId, horizontal: horizontalList})\r\n            # Remove any previous state\r\n            @$el.find(\".popover\").popover().close()\r\n            @$el.find(\".pop-points-open\").remove()\r\n            # Render into DOM and show the new created element\r\n            if target?\r\n                @$el.find(target).append(html)\r\n            else\r\n                @$el.append(html)\r\n\r\n            @$el.find(\".pop-points-open\").popover().open ->\r\n                $(this)\r\n                    .removeClass(\"active\")\r\n                    .closest(\"li\").removeClass(\"active\")\r\n\r\n            @$el.find(\".pop-points-open\").show()\r\n\r\n            pop = @$el.find(\".pop-points-open\")\r\n            if pop.offset().top + pop.height() > document.body.clientHeight\r\n                pop.addClass('pop-bottom')\r\n\r\n    create = ($el, us, project) ->\r\n        $el.unbind(\"click\")\r\n\r\n        estimationProcess = new EstimationProcess($el, us, project)\r\n\r\n        if estimationProcess.isEditable\r\n            estimationProcess.bindClickEvents()\r\n\r\n        return estimationProcess\r\n\r\n    return {\r\n        create: create\r\n    }\r\n\r\nmodule.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\",\r\n                                         \"$q\", \"$tgQqueue\", EstimationsService])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n\r\ndefaultFilter = ->\r\n    return (value, defaultValue) ->\r\n        if value is [null, undefined]\r\n            return defaultValue\r\n        return value\r\n\r\nmodule.filter(\"default\", defaultFilter)\r\n\r\n\r\nyesNoFilter = ($translate) ->\r\n    return (value) ->\r\n        if value\r\n            return $translate.instant(\"COMMON.YES\")\r\n\r\n        return $translate.instant(\"COMMON.NO\")\r\n\r\nmodule.filter(\"yesNo\", [\"$translate\", yesNoFilter])\r\n\r\n\r\nunslugify = ->\r\n    return taiga.unslugify\r\n\r\nmodule.filter(\"unslugify\", unslugify)\r\n\r\n\r\nmomentFormat = ->\r\n    return (input, format) ->\r\n        if input\r\n            return moment(input).format(format)\r\n        return \"\"\r\n\r\nmodule.filter(\"momentFormat\", momentFormat)\r\n\r\n\r\nmomentFromNow = ->\r\n    return (input, without_suffix) ->\r\n        if input\r\n            return moment(input).fromNow(without_suffix or false)\r\n        return \"\"\r\n\r\nmodule.filter(\"momentFromNow\", momentFromNow)\r\n\r\n\r\nsizeFormat = =>\r\n    return @.taiga.sizeFormat\r\n\r\nmodule.filter(\"sizeFormat\", sizeFormat)\r\n\r\ntoMutableFilter =  ->\r\n    toMutable = (js) ->\r\n      return js.toJS()\r\n\r\n    memoizedMutable = _.memoize(toMutable)\r\n\r\n    return (input) ->\r\n      if input instanceof Immutable.List\r\n        return memoizedMutable(input)\r\n\r\n      return input\r\n\r\nmodule.filter(\"toMutable\", toMutableFilter)\r\n\r\n\r\nbyRefFilter = ($filterFilter)->\r\n    return (userstories, filter) ->\r\n        if filter?.startsWith(\"#\")\r\n            cleanRef= filter.substr(1)\r\n            return _.filter(userstories, (us) => String(us.ref).startsWith(cleanRef))\r\n\r\n        return $filterFilter(userstories, filter)\r\n\r\nmodule.filter(\"byRef\", [\"filterFilter\", byRefFilter])\r\n\r\n\r\ndarkerFilter = ->\r\n    return (color, luminosity) ->\r\n        if !color\r\n            return 'transparent'\r\n\r\n        # validate hex string\r\n        color = new String(color).replace(/[^0-9a-f]/gi, '')\r\n        if color.length < 6\r\n            color = color[0]+ color[0]+ color[1]+ color[1]+ color[2]+ color[2];\r\n\r\n        luminosity = luminosity || 0\r\n\r\n        # convert to decimal and change luminosity\r\n        newColor = \"#\"\r\n        c = 0\r\n        i = 0\r\n        black = 0\r\n        white = 255\r\n        # for (i = 0; i < 3; i++)\r\n        for i in [0, 1, 2]\r\n            c = parseInt(color.substr(i*2,2), 16)\r\n            c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16)\r\n            newColor += (\"00\"+c).substr(c.length)\r\n\r\n        return newColor\r\n\r\n\r\nmodule.filter(\"darker\", darkerFilter)\r\n\r\nmarkdownToHTML = (wysiwigService) ->\r\n    return (input) ->\r\n        if input\r\n            return wysiwigService.getHTML(input)\r\n\r\n        return \"\"\r\n\r\nmodule.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML])\r\n\r\ninArray = ($filter) ->\r\n    return (list, arrayFilter, element) ->\r\n        if arrayFilter\r\n            filter = $filter(\"filter\")\r\n            return filter list, (listItem) ->\r\n                return arrayFilter.indexOf(listItem[element]) != -1\r\nmodule.filter(\"inArray\", [\"$filter\", inArray])\r\n\r\nemojify = ($emojis) ->\r\n    return (input) ->\r\n        if input\r\n            return _.unescape($emojis.replaceEmojiNameByHtmlImgs(_.escape(input)))\r\n\r\n        return \"\"\r\n\r\nmodule.filter(\"emojify\", [\"$tgEmojis\", emojify])\r\n\r\ntextToHTML = ($filter) ->\r\n    return (input) ->\r\n        if input\r\n            return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\")\r\n\r\n        return \"\"\r\n\r\nmodule.filter(\"textToHTML\", [\"$filter\", textToHTML])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nbindOnce = @.taiga.bindOnce\r\ntimeout = @.taiga.timeout\r\ndebounce = @.taiga.debounce\r\nsizeFormat = @.taiga.sizeFormat\r\ntrim = @.taiga.trim\r\nnormalizeString = @.taiga.normalizeString\r\n\r\n#############################################################################\r\n## Common Lightbox Services\r\n#############################################################################\r\n\r\n# the lightboxContent hide/show doesn't have sense because is an IE hack\r\nclass LightboxService extends taiga.Service\r\n    constructor: (@animationFrame, @q, @rootScope) ->\r\n\r\n    open: ($el, onClose, onEsc, ignoreEsc) ->\r\n        @.onClose = onClose\r\n\r\n        if _.isString($el)\r\n            $el = $($el)\r\n        defered = @q.defer()\r\n\r\n        lightboxContent = $el.children().not(\".close\")\r\n        lightboxContent.hide()\r\n\r\n        @animationFrame.add ->\r\n            $el.css('display', 'flex')\r\n\r\n        @animationFrame.add ->\r\n            $el.addClass(\"open\")\r\n            $el.one \"transitionend\", =>\r\n                firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first()\r\n\r\n                if firstField.length\r\n                    firstField.focus()\r\n                else if document.activeElement\r\n                    $(document.activeElement).blur()\r\n\r\n        @animationFrame.add =>\r\n            lightboxContent.show()\r\n            defered.resolve()\r\n\r\n        if !ignoreEsc\r\n            docEl = angular.element(document)\r\n            docEl.on \"keydown.lightbox\", (e) =>\r\n                code = if e.keyCode then e.keyCode else e.which\r\n                if code == 27\r\n                    if onEsc\r\n                        @rootScope.$applyAsync(onEsc)\r\n                    else\r\n                        @.close($el)\r\n\r\n\r\n        @rootScope.$broadcast(\"lightbox:opened\")\r\n        return defered.promise\r\n\r\n    close: ($el) ->\r\n        return @q (resolve) =>\r\n            if _.isString($el)\r\n                $el = $($el)\r\n            docEl = angular.element(document)\r\n            docEl.off(\".lightbox\")\r\n            docEl.off(\".keyboard-navigation\") # Hack: to fix problems in the WYSIWYG textareas when press ENTER\r\n\r\n            $el.addClass('close-started') # don't attach animations\r\n\r\n            @animationFrame.add =>\r\n                $el.addClass('close')\r\n\r\n                $el.one \"transitionend\", =>\r\n                    $el.removeAttr('style')\r\n                    $el\r\n                        .removeClass(\"open\")\r\n                        .removeClass('close')\r\n                        .removeClass('close-started')\r\n\r\n                    if @.onClose\r\n                        @rootScope.$apply(@.onClose)\r\n\r\n                    resolve()\r\n\r\n            if $el.hasClass(\"remove-on-close\")\r\n                scope = $el.data(\"scope\")\r\n                scope.$destroy() if scope\r\n                $el.remove()\r\n\r\n            @rootScope.$broadcast(\"lightbox:closed\")\r\n\r\n\r\n    getLightboxOpen: ->\r\n        return $(\".lightbox.open:not(.close-started)\")\r\n\r\n    closeAll: ->\r\n        docEl = angular.element(document)\r\n        for lightboxEl in docEl.find(\".lightbox.open\")\r\n            @.close($(lightboxEl))\r\n\r\n\r\nmodule.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService])\r\n\r\n\r\nclass LightboxKeyboardNavigationService extends taiga.Service\r\n    stop: ->\r\n        docEl = angular.element(document)\r\n        docEl.off(\".keyboard-navigation\")\r\n\r\n    dispatch: ($el, code) ->\r\n        activeElement = $el.find(\".selected\")\r\n\r\n        # Key: enter\r\n        if code == 13\r\n            if $el.find(\".user-list-single\").length == 1\r\n                $el.find('.user-list-single:first').trigger(\"click\")\r\n            else\r\n                activeElement.trigger(\"click\")\r\n\r\n        # Key: down\r\n        else if code == 40\r\n            if not activeElement.length\r\n                $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected')\r\n            else\r\n                next = activeElement.next('.user-list-single')\r\n                if next.length\r\n                    activeElement.removeClass('selected')\r\n                    next.addClass('selected')\r\n        # Key: up\r\n        else if code == 38\r\n            if not activeElement.length\r\n                $el.find('.user-list-single:last').addClass('selected')\r\n            else\r\n                prev = activeElement.prev('.user-list-single:not(\".is-active\")')\r\n\r\n                if prev.length\r\n                    activeElement.removeClass('selected')\r\n                    prev.addClass('selected')\r\n\r\n    init: ($el) ->\r\n        @stop()\r\n        docEl = angular.element(document)\r\n        docEl.on \"keydown.keyboard-navigation\", (event) =>\r\n            code = if event.keyCode then event.keyCode else event.which\r\n            if code == 40 || code == 38 || code == 13\r\n                event.preventDefault()\r\n                @.dispatch($el, code)\r\n\r\nmodule.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService)\r\n\r\n\r\n#############################################################################\r\n## Generic Lighthbox Directive\r\n#############################################################################\r\n\r\n# This adds generic behavior to all blocks with lightbox class like\r\n# close button event handlers.\r\n\r\nLightboxDirective = (lightboxService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n\r\n        if !$attrs.$attr.visible\r\n            $el.on \"click\", \".close\", (event) ->\r\n                event.preventDefault()\r\n                lightboxService.close($el)\r\n\r\n    return {restrict: \"C\", link: link}\r\n\r\nmodule.directive(\"lightbox\", [\"lightboxService\", LightboxDirective])\r\n\r\n\r\n#############################################################################\r\n## Lightbox Close Directive\r\n#############################################################################\r\n\r\nLightboxClose = () ->\r\n    template = \"\"\"\r\n        <a class=\"close\" ng-click=\"onClose()\" href=\"\" title=\"{{'COMMON.CLOSE' | translate}}\">\r\n            <tg-svg svg-icon=\"icon-close\"></tg-svg>\r\n        </a>\r\n    \"\"\"\r\n\r\n    link = (scope, elm, attrs) ->\r\n\r\n    return {\r\n        scope: {\r\n            onClose: '&'\r\n        },\r\n        link: link,\r\n        template: template\r\n    }\r\n\r\nmodule.directive(\"tgLightboxClose\", [LightboxClose])\r\n\r\n\r\n#############################################################################\r\n## Block Lightbox Directive\r\n#############################################################################\r\n\r\n# Issue/Userstory blocking message lightbox directive.\r\n\r\nBlockLightboxDirective = ($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        title = $translate.instant($attrs.title)\r\n        $el.find(\"h2.title\").text(title)\r\n\r\n        unblock = (finishCallback) =>\r\n            transform = $modelTransform.save (item) ->\r\n                item.is_blocked = false\r\n                item.blocked_note = \"\"\r\n\r\n                return item\r\n\r\n            transform.then ->\r\n                $confirm.notify(\"success\")\r\n                $rootscope.$broadcast(\"object:updated\")\r\n                finishCallback()\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n                item.revert()\r\n\r\n            transform.finally ->\r\n                finishCallback()\r\n\r\n            return transform\r\n\r\n        block = () ->\r\n            currentLoading = $loading()\r\n                .target($el.find(\".js-block-item\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (item) ->\r\n                item.is_blocked = true\r\n                item.blocked_note = $el.find(\".reason\").val()\r\n\r\n                return item\r\n\r\n            transform.then ->\r\n                $confirm.notify(\"success\")\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n            transform.finally ->\r\n                currentLoading.finish()\r\n                lightboxService.close($el)\r\n\r\n        $scope.$on \"block\", ->\r\n            $el.find(\".reason\").val($model.$modelValue.blocked_note)\r\n            lightboxService.open($el)\r\n\r\n        $scope.$on \"unblock\", (event, model, finishCallback) =>\r\n            unblock(finishCallback)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $el.on \"click\", \".js-block-item\", (event) ->\r\n            event.preventDefault()\r\n\r\n            block()\r\n\r\n    return {\r\n        templateUrl: \"common/lightbox/lightbox-block.html\"\r\n        link: link\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective])\r\n\r\n\r\n#############################################################################\r\n## Generic Lightbox Blocking-Message Input Directive\r\n#############################################################################\r\n\r\nBlockingMessageInputDirective = ($log, $template, $compile) ->\r\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        if not $attrs.watch\r\n            return $log.error \"No watch attribute on tg-blocking-message-input directive\"\r\n\r\n        $scope.$watch $attrs.watch, (value) ->\r\n            if value is not undefined and value == true\r\n                $el.find(\".blocked-note\").removeClass(\"hidden\")\r\n            else\r\n                $el.find(\".blocked-note\").addClass(\"hidden\")\r\n\r\n    templateFn = ($el, $attrs) ->\r\n        return template({ngmodel: $attrs.ngModel})\r\n\r\n    return {\r\n        template: templateFn\r\n        link: link\r\n        require: \"ngModel\"\r\n        restrict: \"EA\"\r\n    }\r\n\r\nmodule.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective])\r\n\r\n\r\n#############################################################################\r\n## Creare Bulk Userstories Lightbox Directive\r\n#############################################################################\r\n\r\nCreateBulkUserstoriesDirective = ($repo, $rs, $rootscope, lightboxService, $loading, $model, $timeout, $confirm, $translate) ->\r\n    link = ($scope, $el, attrs) ->\r\n        form = null\r\n        $scope.displayStatusSelector = false\r\n\r\n        getCurrentStatus = () =>\r\n            $scope.currentStatus = $scope.project.us_statuses.filter((status) ->\r\n                status.id == $scope.new.statusId\r\n            ).pop()\r\n\r\n        $scope.toggleStatus = () ->\r\n            $scope.displayStatusSelector = !$scope.displayStatusSelector\r\n\r\n        $scope.displayStatus = () ->\r\n            $scope.displayStatusSelector = true\r\n\r\n        $scope.hideStatus = () ->\r\n            $scope.displayStatusSelector = false\r\n            $scope.$apply()\r\n\r\n        $scope.setStatus = (status) =>\r\n            $scope.new.statusId = status.id\r\n            getCurrentStatus()\r\n            $scope.displayStatusSelector = false\r\n\r\n        $scope.$on \"usform:bulk\", (ctx, projectId, status, swimlaneId) ->\r\n            form.reset() if form\r\n\r\n            $scope.new = {\r\n                projectId: projectId\r\n                statusId: status\r\n                bulk: \"\"\r\n                swimlaneId: swimlaneId\r\n                us_position: 'bottom'\r\n            }\r\n            getCurrentStatus()\r\n            lightboxService.open($el)\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley({onlyOneErrorElement: true})\r\n            if not form.validate()\r\n                return\r\n\r\n            swimlaneId = null\r\n            if $scope.project.is_kanban_activated\r\n                swimlaneId = $scope.new.swimlane\r\n\r\n                if swimlaneId == undefined\r\n                    swimlaneId = $scope.project.default_swimlane\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $rs.userstories.bulkCreate($scope.new.projectId, $scope.new.statusId, $scope.new.bulk, swimlaneId)\r\n            promise.then (result) ->\r\n                result =  _.map(result.data, (x) => $model.make_model('userstories', x))\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"usform:bulk:success\", result, $scope.new.us_position)\r\n                lightboxService.close($el)\r\n\r\n            promise.then null, (response) ->\r\n                currentLoading.finish()\r\n                form.setErrors(response)\r\n                if response.data.status\r\n                    text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\")\r\n                    $confirm.notify(\"error\", text)\r\n                if response.data.swimlane_id\r\n                    text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\")\r\n                    $confirm.notify(\"error\", text)\r\n                if response._error_message\r\n                    $confirm.notify(\"error\", response._error_message)\r\n\r\n        submitButton = $el.find(\".js-submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $el.on \"click\", (event) =>\r\n            target = angular.element(event.target)\r\n\r\n            parentNodes = _.filter(target.parents(), (parent) ->\r\n                return parent.className == \"bulk-status-selector-wrapper\"\r\n            )\r\n\r\n            if (!parentNodes.length)\r\n                $scope.hideStatus()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgLbCreateBulkUserstories\", [\r\n    \"$tgRepo\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"lightboxService\",\r\n    \"$tgLoading\",\r\n    \"$tgModel\",\r\n    \"$timeout\",\r\n    \"$tgConfirm\",\r\n    \"$translate\",\r\n    CreateBulkUserstoriesDirective\r\n])\r\n\r\n\r\nLightboxLeaveProjectWarningDirective = (lightboxService, $template, $compile) ->\r\n    link = ($scope, $el, attrs) ->\r\n        lightboxService.open($el)\r\n\r\n    return {\r\n        templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective])\r\n\r\n\r\n#############################################################################\r\n## Set Due Date Lightbox Directive\r\n#############################################################################\r\n\r\nSetDueDateDirective = ($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) ->\r\n    link = ($scope, $el, attrs) ->\r\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n        lightboxService.open($el)\r\n\r\n        if ($scope.object.due_date)\r\n            $scope.new_due_date = moment($scope.object.due_date).format(prettyDate)\r\n\r\n        $el.on \"click\", \".suggestion\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            quantity = target.data('quantity')\r\n            unit = target.data('unit')\r\n            value = moment().add(quantity, unit).format(prettyDate)\r\n            $el.find(\".due-date\").val(value)\r\n\r\n        save = ->\r\n            currentLoading = $loading()\r\n                .target($el.find(\".submit-button\"))\r\n                .start()\r\n\r\n            if $scope.notAutoSave\r\n                new_due_date = $('.due-date').val()\r\n                $scope.object.due_date = if (new_due_date) \\\r\n                    then moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") \\\r\n                    else null\r\n\r\n                $scope.$apply()\r\n                currentLoading.finish()\r\n                lightboxService.close($el)\r\n                return\r\n\r\n            transform = $modelTransform.save (object) ->\r\n                new_due_date = $('.due-date').val()\r\n                object.due_date = if (new_due_date) \\\r\n                    then moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") \\\r\n                    else null\r\n                return object\r\n\r\n            transform.then ->\r\n                $confirm.notify(\"success\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n            transform.finally ->\r\n                currentLoading.finish()\r\n                lightboxService.close($el)\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n        $el.on \"click\", \".submit-button\", (event) ->\r\n            event.preventDefault()\r\n            save()\r\n\r\n        remove = ->\r\n            title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\")\r\n            subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\")\r\n            message = moment($scope.object.due_date).format(prettyDate)\r\n\r\n            $confirm.askOnDelete(title, message, subtitle).then (askResponse) ->\r\n                askResponse.finish()\r\n                $('.due-date').val(null)\r\n                $scope.object.due_date_reason = null\r\n                if $scope.notAutoSave\r\n                    $scope.object.due_date = null\r\n                    lightboxService.close($el)\r\n                else\r\n                    save()\r\n\r\n        $el.on \"click\", \".delete-due-date\", (event) ->\r\n            event.preventDefault()\r\n            remove()\r\n\r\n    return {\r\n        templateUrl: 'common/lightbox/lightbox-due-date.html',\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\"\r\n                                    \"$tgQueueModelTransformation\", SetDueDateDirective])\r\n\r\n\r\n\r\n#############################################################################\r\n## Create/Edit Lightbox Directive\r\n#############################################################################\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nCreateEditDirective = (\r\n$log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate,\r\n$confirm, $q, attachmentsService, $template, $compile) ->\r\n    link = ($scope, $el, attrs) ->\r\n        schema = null\r\n        objType = null\r\n        form = null\r\n\r\n        attachmentsToAdd = Immutable.List()\r\n        attachmentsToDelete = Immutable.List()\r\n\r\n        schemas = {\r\n            us: {\r\n                objName: 'User Story',\r\n                model: 'userstories',\r\n                params: { include_attachments: true, include_tasks: true },\r\n                data: (project) ->\r\n                    return {\r\n                        translationID: 'US'\r\n                        translationIDPlural: 'US'\r\n                        statusList: _.sortBy(project.us_statuses, \"order\")\r\n                    }\r\n                initialData: (data) ->\r\n                    return {\r\n                        project: data.project.id\r\n                        subject: \"\"\r\n                        description: \"\"\r\n                        tags: []\r\n                        points : {}\r\n                        swimlane: if data.project.is_kanban_activated then data.project.default_swimlane else null\r\n                        status: if data.statusId then data.statusId else data.project.default_us_status\r\n                        is_archived: false\r\n                    }\r\n            }\r\n            task: {\r\n                objName: 'Task',\r\n                model: 'tasks',\r\n                params: { include_attachments: true },\r\n                data: (project) ->\r\n                    return {\r\n                        translationID: 'TASK'\r\n                        translationIDPlural: 'TASKS'\r\n                        statusList: _.sortBy(project.task_statuses, \"order\")\r\n                    }\r\n                initialData: (data) ->\r\n                    return {\r\n                        project: data.project.id\r\n                        subject: \"\"\r\n                        description: \"\"\r\n                        assigned_to: null\r\n                        tags: []\r\n                        milestone: data.sprintId\r\n                        status: data.project.default_task_status\r\n                        user_story: data.usId\r\n                        is_archived: false\r\n                    }\r\n            },\r\n            issue: {\r\n                objName: 'Issue',\r\n                model: 'issues',\r\n                params: { include_attachments: true },\r\n                data: (project) ->\r\n                    return {\r\n                        translationID: 'ISSUE'\r\n                        translationIDPlural: 'ISSUES'\r\n                        project: project\r\n                        statusList: _.sortBy(project.issue_statuses, \"order\")\r\n                        typeById: groupBy(project.issue_types, (x) -> x.id)\r\n                        typeList: _.sortBy(project.issue_types, \"order\")\r\n                        severityById: groupBy(project.severities, (x) -> x.id)\r\n                        severityList: _.sortBy(project.severities, \"order\")\r\n                        priorityById: groupBy(project.priorities, (x) -> x.id)\r\n                        priorityList: _.sortBy(project.priorities, \"order\")\r\n                        milestonesById: groupBy(project.milestones, (x) -> x.id)\r\n                    }\r\n                initialData: (data) ->\r\n                    return {\r\n                        assigned_to: null\r\n                        milestone: data.sprintId\r\n                        priority: data.project.default_priority\r\n                        project: data.project.id\r\n                        severity: data.project.default_severity\r\n                        status: data.project.default_issue_status\r\n                        subject: \"\"\r\n                        tags: []\r\n                        type: data.project.default_issue_type\r\n                    }\r\n            }\r\n        }\r\n\r\n        $scope.setMode = (value) ->\r\n            $scope.mode = value\r\n\r\n        $scope.$on \"genericform:new\", (ctx, params) ->\r\n            getSchema(params)\r\n            $scope.mode = 'new'\r\n            $scope.getOrCreate = false\r\n            mount(params)\r\n\r\n        $scope.$on \"genericform:new-or-existing\", (ctx, params) ->\r\n            getSchema(params)\r\n            $scope.mode = 'add-existing'\r\n            $scope.getOrCreate = true\r\n            $scope.existingFilterText = ''\r\n\r\n            $rs[schema.model].listInAllProjects({ project: $scope.project.id }, true).then (data) ->\r\n                $scope.existingItems = angular.copy(data)\r\n            mount(params)\r\n\r\n        $scope.$on \"genericform:edit\", (ctx, params) ->\r\n            getSchema(params)\r\n            $scope.mode = 'edit'\r\n            $scope.getOrCreate = false\r\n            mount(params)\r\n\r\n        getSchema = (params) ->\r\n            _.map params, (value, key) ->\r\n                $scope[key] = value\r\n\r\n            if !$scope.objType || !schemas[$scope.objType]\r\n                return $log.error(\"Invalid objType `#{$scope.objType}` for `genericform` event\")\r\n            schema = schemas[$scope.objType]\r\n\r\n        mount = (params) ->\r\n            $scope.objName = schema.objName\r\n            if $scope.mode == 'edit'\r\n                $scope.obj = params.obj\r\n                $scope.attachments = Immutable.fromJS(params.attachments)\r\n            else\r\n                $scope.obj = $model.make_model(schema.model, schema.initialData(params))\r\n                $scope.attachments = Immutable.List()\r\n\r\n            _.map schema.data($scope.project), (value, key) ->\r\n                $scope[key] = value\r\n\r\n            if params.objType == 'us'\r\n                $scope.obj.us_position = 'bottom'\r\n\r\n            form.reset() if form\r\n            resetAttachments()\r\n            setStatus($scope.obj.status)\r\n            render()\r\n            $scope.lightboxOpen = true\r\n            lightboxService.open($el, null, null, true)\r\n\r\n        resetAttachments = () ->\r\n            attachmentsToAdd = Immutable.List()\r\n            attachmentsToDelete = Immutable.List()\r\n\r\n        $scope.addAttachment = (attachment) ->\r\n            attachmentsToAdd = attachmentsToAdd.push(attachment)\r\n\r\n        $scope.deleteAttachment = (attachment) ->\r\n            attachmentsToAdd = attachmentsToAdd.filter (it) ->\r\n                return it.get('name') != attachment.get('name')\r\n\r\n            if attachment.get(\"id\")\r\n                attachmentsToDelete = attachmentsToDelete.push(attachment)\r\n\r\n        $scope.addTag = (tag, color) ->\r\n            value = trim(tag.toLowerCase())\r\n            tags = $scope.project.tags\r\n            projectTags = $scope.project.tags_colors\r\n\r\n            tags = [] if not tags?\r\n            projectTags = {} if not projectTags?\r\n\r\n            if value not in tags\r\n                tags.push(value)\r\n\r\n            projectTags[tag] = color || null\r\n            $scope.project.tags = tags\r\n\r\n            itemtags = _.clone($scope.obj.tags)\r\n            inserted = _.find itemtags, (it) -> it[0] == value\r\n\r\n            if !inserted\r\n                itemtags.push([value , color])\r\n                $scope.obj.tags = itemtags\r\n\r\n        $scope.deleteTag = (tag) ->\r\n            value = trim(tag[0].toLowerCase())\r\n            tags = $scope.project.tags\r\n            itemtags = _.clone($scope.obj.tags)\r\n\r\n            _.remove itemtags, (tag) -> tag[0] == value\r\n            $scope.obj.tags = itemtags\r\n            _.pull($scope.obj.tags, value)\r\n\r\n        createAttachments = (obj) ->\r\n            promises = _.map attachmentsToAdd.toJS(), (attachment) ->\r\n                attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType)\r\n            return $q.all(promises)\r\n\r\n        deleteAttachments = (obj) ->\r\n            promises = _.map attachmentsToDelete.toJS(), (attachment) ->\r\n                return attachmentsService.delete($scope.objType, attachment.id)\r\n            return $q.all(promises)\r\n\r\n        addExistingToSprint = (item) ->\r\n            currentLoading = $loading().target($el.find(\".add-existing-button\")).start()\r\n\r\n            if item.milestone\r\n                sprintChangeConfirmAndSave(item)\r\n            else\r\n                onSuccess = ->\r\n                    close()\r\n                    $rootScope.$broadcast(\"#{$scope.objType}form:add:success\", item)\r\n                onError = ->\r\n                    close()\r\n                saveItem(item, onSuccess, onError)\r\n\r\n        sprintChangeConfirmAndSave = (item) ->\r\n            oldSprintName = $scope.milestonesById[item.milestone].name\r\n            newSprintName = $scope.milestonesById[$scope.relatedObjectId].name\r\n            title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\")\r\n            message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\",\r\n                {issue: item.subject, oldSprintName: oldSprintName, newSprintName: newSprintName})\r\n\r\n            $confirm.ask(title, null, message).then (askResponse) ->\r\n                onSuccess = ->\r\n                    askResponse.finish()\r\n                    lightboxService.closeAll()\r\n                    $scope.lightboxOpen = false\r\n                    $rootScope.$broadcast(\"#{$scope.objType}form:add:success\", item)\r\n\r\n                onError = ->\r\n                    askResponse.finish(false)\r\n                    $confirm.notify(\"error\")\r\n                saveItem(item, onSuccess, onError)\r\n\r\n        saveItem = (item, onSuccess, onError) ->\r\n            item.setAttr($scope.relatedField, $scope.relatedObjectId)\r\n            $repo.save(item, true).then(onSuccess, onError)\r\n\r\n        isDisabledExisting = (item) ->\r\n            return item && item[$scope.relatedField] == $scope.relatedObjectId\r\n\r\n        $scope.isDisabledExisting = (selectedItem) ->\r\n            isDisabledExisting(selectedItem)\r\n\r\n        $scope.addExistingToSprint = (selectedItem) ->\r\n            addExistingToSprint(selectedItem)\r\n\r\n        submit = debounce 2000, (event) ->\r\n            form = $el.find(\"form\").checksley()\r\n            us_position = null\r\n            if not form.validate()\r\n                return\r\n\r\n            currentLoading = $loading().target($el.find(\"#submitButton\")).start()\r\n            if currentLoading.isLoading()\r\n                return\r\n\r\n            if $scope.mode == 'new'\r\n                us_position = $scope.obj.us_position\r\n                delete $scope.obj.us_position\r\n\r\n                promise = $repo.create(schema.model, $scope.obj)\r\n                broadcastEvent = \"#{$scope.objType}form:new:success\"\r\n            else\r\n                if ($scope.obj.due_date instanceof moment)\r\n                    prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n                    $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\")\r\n\r\n                promise = $repo.save($scope.obj, true)\r\n                broadcastEvent = \"#{$scope.objType}form:edit:success\"\r\n\r\n            promise.then (data) ->\r\n                deleteAttachments(data).then () ->\r\n                    createAttachments(data).then () ->\r\n                        currentLoading.finish()\r\n                        $confirm.notify(\"success\")\r\n                        close()\r\n                        if data.ref\r\n                            $rs[schema.model].getByRef(data.project, data.ref, schema.params).then (obj) ->\r\n                                $rootScope.$broadcast(broadcastEvent, obj, us_position)\r\n            promise.then null, (response) ->\r\n                currentLoading.finish()\r\n                form.setErrors(response)\r\n                if response.status\r\n                    text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\")\r\n                    $confirm.notify(\"error\", text)\r\n                if response.swimlane\r\n                    text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\")\r\n                    $confirm.notify(\"error\", text)\r\n                if response._error_message\r\n                    $confirm.notify(\"error\", response._error_message)\r\n\r\n        checkClose = () ->\r\n            if !$scope.obj.isModified()\r\n                close()\r\n                $scope.$apply ->\r\n                    $scope.obj.revert()\r\n            else\r\n                $confirm.ask(\r\n                    $translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\"))\r\n                    .then (result) ->\r\n                        result.finish()\r\n                        close()\r\n\r\n        close = () ->\r\n            lightboxService.closeAll()\r\n            $scope.lightboxOpen = false\r\n\r\n        docEl = angular.element(document)\r\n        docEl.on \"keydown.lightbox-create-edit\", (event) ->\r\n            if $scope.lightboxOpen\r\n                event.stopPropagation()\r\n                code = if event.keyCode then event.keyCode else event.which\r\n                if code == 27\r\n                    checkClose()\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $el.find('.close').on \"click\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            checkClose()\r\n\r\n        $el.on \"click\", \".status-dropdown\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            setStatus(angular.element(event.currentTarget).data(\"status-id\"))\r\n            $scope.$apply()\r\n            $scope.$broadcast(\"status:changed\", $scope.obj.status)\r\n            $el.find(\".pop-status\").popover().close()\r\n\r\n        $el.on \"click\", \".team-requirement\", (event) ->\r\n            $scope.obj.team_requirement = not $scope.obj.team_requirement\r\n            $scope.$apply()\r\n\r\n        $el.on \"click\", \".client-requirement\", (event) ->\r\n            $scope.obj.client_requirement = not $scope.obj.client_requirement\r\n            $scope.$apply()\r\n\r\n        $el.on \"click\", \".is-blocked\", (event) ->\r\n            $scope.obj.is_blocked = not $scope.obj.is_blocked\r\n            $scope.$apply()\r\n\r\n        $el.on \"click\", \".iocaine\", (event) ->\r\n            $scope.obj.is_iocaine = not $scope.obj.is_iocaine\r\n            $scope.$apply()\r\n            $scope.$broadcast(\"isiocaine:changed\", $scope.obj)\r\n\r\n        $scope.isTeamRequirement = () ->\r\n            return $scope.obj?.team_requirement\r\n\r\n        $scope.isClientRequirement = () ->\r\n            return $scope.obj?.client_requirement\r\n\r\n        setStatus = (id) ->\r\n            $scope.obj.status = id\r\n            $scope.selectedStatus = _.find $scope.statusList, (item) -> item.id == id\r\n            $scope.obj.is_closed = $scope.selectedStatus.is_closed\r\n\r\n        render = (sprint) ->\r\n            template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\")\r\n            templateScope = $scope.$new()\r\n            compiledTemplate = $compile(template)(templateScope)\r\n            $el.html(compiledTemplate)\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgLbCreateEdit\", [\r\n    \"$log\",\r\n    \"$tgRepo\",\r\n    \"$tgModel\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"lightboxService\",\r\n    \"$tgLoading\",\r\n    \"$translate\",\r\n    \"$tgConfirm\",\r\n    \"$q\",\r\n    \"tgAttachmentsService\",\r\n    \"$tgTemplate\",\r\n    \"$compile\",\r\n    CreateEditDirective\r\n])\r\n\r\n\r\n#############################################################################\r\n## RelateToEpic Lightbox Directive\r\n#############################################################################\r\n\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nRelateToEpicLightboxDirective = ($rootScope, $confirm, lightboxService, $tgCurrentUserService\r\ntgResources, $tgResources, $epicsService, tgAnalytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        us = null\r\n\r\n        $scope.projects = null\r\n        $scope.projectEpics = Immutable.List()\r\n        $scope.loading = false\r\n        $scope.selectedProject = $scope.project.id\r\n\r\n        newEpicForm = $el.find(\".new-epic-form\").checksley()\r\n        existingEpicForm = $el.find(\".existing-epic-form\").checksley()\r\n\r\n        loadProjects = ->\r\n            if $scope.projects == null\r\n                $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\")\r\n\r\n        filterEpics = (selectedProjectId, filterText) ->\r\n            tgResources.epics.listInAllProjects(\r\n                {\r\n                    is_epics_activated: true,\r\n                    project__blocked_code: 'null',\r\n                    project: selectedProjectId,\r\n                    q: filterText\r\n                }, true).then (data) ->\r\n                    excludeIds = []\r\n                    if (us.epics)\r\n                        excludeIds = us.epics.map((epic) -> epic.id)\r\n                    filteredData = data.filter((epic) -> excludeIds.indexOf(epic.get('id')) == -1)\r\n                    $scope.projectEpics = filteredData\r\n\r\n        selectProject = (selectedProjectId) ->\r\n            $scope.selectedEpic = null\r\n            $scope.searchEpic = \"\"\r\n            filterEpics(selectedProjectId, $scope.searchEpic)\r\n\r\n        $el.on \"click\", \".close\", (event) ->\r\n            event.preventDefault()\r\n            lightboxService.close($el)\r\n\r\n        $scope.$on \"relate-to-epic:add\", (ctx, item) ->\r\n            us = item\r\n            $scope.selectedEpic = null\r\n            $scope.searchEpic = \"\"\r\n            loadProjects()\r\n            filterEpics($scope.selectedProject, $scope.searchEpic).then () ->\r\n                lightboxService.open($el).then ->\r\n                    $el.find('input').focus\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $scope.selectProject = (selectedProjectId) ->\r\n            selectProject(selectedProjectId)\r\n\r\n        $scope.onUpdateSearchEpic = debounceLeading 300, () ->\r\n            $scope.selectedEpic = null\r\n            filterEpics($scope.selectedProject, $scope.searchEpic)\r\n\r\n        $scope.saveRelatedEpic = (selectedEpicId, onSavedRelatedEpic) ->\r\n            return if not existingEpicForm.validate()\r\n\r\n            $scope.loading = true\r\n\r\n            onError = (data) ->\r\n                $scope.loading = false\r\n                $confirm.notify(\"error\")\r\n                existingEpicForm.setErrors(data)\r\n\r\n            onSuccess = (data) ->\r\n                tgAnalytics.trackEvent(\r\n                    \"user story related epic\", \"create\", \"create related epic on user story\", 1)\r\n                $scope.loading = false\r\n                $rootScope.$broadcast(\"related-epics:changed\", us)\r\n                lightboxService.close($el)\r\n\r\n            usId = us.id\r\n            tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(\r\n                onSuccess, onError)\r\n\r\n        $scope.createEpic = (selectedProjectId, epicSubject) ->\r\n            return if not newEpicForm.validate()\r\n\r\n            @.loading = true\r\n\r\n            onError = (data)->\r\n                $scope.loading = false\r\n                $confirm.notify(\"error\")\r\n                newEpicForm.setErrors(errors)\r\n\r\n            onSuccess = () ->\r\n                tgAnalytics.trackEvent(\r\n                    \"user story related epic\", \"create\", \"create related epic on user story\", 1)\r\n                $scope.loading = false\r\n                $rootScope.$broadcast(\"related-epics:changed\", us)\r\n                lightboxService.close($el)\r\n\r\n            onCreateEpic = (epic) ->\r\n                epicId = epic.get('id')\r\n                usId = us.id\r\n                tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError)\r\n\r\n            $epicsService.createEpic(\r\n                {subject: epicSubject}, null, selectedProjectId).then(onCreateEpic, onError)\r\n\r\n    return {\r\n        templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\"\r\n        link:link\r\n    }\r\n\r\nmodule.directive(\"tgLbRelatetoepic\", [\r\n    \"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\",\r\n    \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective])\r\n\r\n\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n# This directive call a function when the html element has loaded\r\n\r\n# ```jade\r\n#     div(\r\n#         tg-loaded=\"callbackFn\"\r\n#     )\r\n# ```\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nLoaded = ($parse, $timeout) ->\r\n    return {\r\n        restrict: 'A',\r\n        compile: ($element, $attrs) ->\r\n            fn = $parse($attrs['tgLoaded'])\r\n\r\n            return ($scope, $element) ->\r\n                callback = () ->\r\n                    fn(\r\n                        $scope,\r\n                        {\r\n                            $event: {\r\n                                target: $element\r\n                            }\r\n                        }\r\n                    )\r\n\r\n                $timeout () -> callback()\r\n\r\n                return null\r\n    }\r\n\r\nmodule.directive(\"tgLoaded\", ['$parse', '$timeout', Loaded])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n# FIXME: this code not follows any style and any good practices on coffeescript\r\n# and it should be rewritten in coffeescript style classes.\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\ntimeout = @.taiga.timeout\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nLoaderDirective = (tgLoader, $rootscope) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        tgLoader.onStart () ->\r\n            $(document.body).addClass(\"loader-active\")\r\n            $el.addClass(\"active\")\r\n\r\n        tgLoader.onEnd () ->\r\n            $(document.body).removeClass(\"loader-active\")\r\n            $el.removeClass(\"active\")\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective])\r\n\r\nLoader = ($rootscope) ->\r\n    config = {\r\n        minTime: 300\r\n    }\r\n\r\n    open = false\r\n    startLoadTime = 0\r\n    requestCount = 0\r\n    lastResponseDate = 0\r\n\r\n    pageLoaded = (force = false) ->\r\n        if startLoadTime\r\n            timeoutValue = 0\r\n\r\n            if !force\r\n                endTime = new Date().getTime()\r\n                diff = endTime - startLoadTime\r\n\r\n                if diff < config.minTime\r\n                    timeoutValue = config.minTime - diff\r\n\r\n            timeout timeoutValue, ->\r\n                $rootscope.$broadcast(\"loader:end\")\r\n                open = false\r\n                window.prerenderReady = true # Needed by Prerender Server\r\n\r\n        startLoadTime = 0\r\n        requestCount = 0\r\n        lastResponseDate = 0\r\n\r\n    autoClose = () ->\r\n        intervalAuto = setInterval (() ->\r\n            if lastResponseDate && requestCount == 0\r\n                pageLoaded()\r\n\r\n                clearInterval(intervalAuto)\r\n        ), 50\r\n\r\n    start = () ->\r\n        startLoadTime = new Date().getTime()\r\n        $rootscope.$broadcast(\"loader:start\")\r\n        open = true\r\n\r\n    return {\r\n        pageLoaded: pageLoaded\r\n        open: () -> open\r\n        start: (auto=false) ->\r\n            if !open\r\n                start()\r\n                autoClose() if auto\r\n        onStart: (fn) ->\r\n            return $rootscope.$on(\"loader:start\", fn)\r\n\r\n        onEnd: (fn) ->\r\n            return $rootscope.$on(\"loader:end\", fn)\r\n\r\n        logRequest: () ->\r\n            requestCount++\r\n\r\n        logResponse: () ->\r\n            if requestCount > 0\r\n                requestCount--\r\n            lastResponseDate = new Date().getTime()\r\n    }\r\n\r\n\r\nLoader.$inject = [\"$rootScope\"]\r\n\r\nmodule.factory(\"tgLoader\", Loader)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nTgLoadingService = ($compile) ->\r\n    spinner = \"<img class='loading-spinner' src='\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\"\r\n\r\n    return () ->\r\n        service = {\r\n            settings: {\r\n                target: null,\r\n                scope: null,\r\n                classes: []\r\n                timeout: 0,\r\n                template: null\r\n            },\r\n            target: (target) ->\r\n                service.settings.target = target\r\n\r\n                return service\r\n            scope: (scope) ->\r\n                service.settings.scope = scope\r\n\r\n                return service\r\n            template: (template) ->\r\n                service.settings.template = template\r\n\r\n                return service\r\n            removeClasses: (classess...) ->\r\n                service.settings.classes = classess\r\n\r\n                return service\r\n            timeout: (timeout) ->\r\n                service.settings.timeout = timeout\r\n\r\n                return service\r\n\r\n            isLoading: ->\r\n                target = service.settings.target\r\n                return target.hasClass('loading')\r\n\r\n            start: ->\r\n                target = service.settings.target\r\n\r\n                service.settings.classes.map (className) -> target.removeClass(className)\r\n\r\n                if not target.hasClass('loading') && !service.settings.template\r\n                    service.settings.template = target.html()\r\n\r\n                # The loader is shown after that quantity of milliseconds\r\n                timeoutId = setTimeout (->\r\n                    if not target.hasClass('loading')\r\n                        target.addClass('loading')\r\n\r\n                        target.html(spinner)\r\n                    ), service.settings.timeout\r\n\r\n                service.settings.timeoutId = timeoutId\r\n\r\n                return service\r\n\r\n            finish: ->\r\n                target = service.settings.target\r\n                timeoutId = service.settings.timeoutId\r\n\r\n                if timeoutId\r\n                    clearTimeout(timeoutId)\r\n\r\n                    removeClasses = service.settings.classes\r\n                    removeClasses.map (className) -> service.settings.target.addClass(className)\r\n\r\n                    target.html(service.settings.template)\r\n                    target.removeClass('loading')\r\n\r\n                    if service.settings.scope\r\n                        $compile(target.contents())(service.settings.scope)\r\n\r\n                return service\r\n        }\r\n\r\n        return service\r\n\r\nTgLoadingService.$inject = [\r\n    \"$compile\"\r\n]\r\n\r\nmodule.factory(\"$tgLoading\", TgLoadingService)\r\n\r\nLoadingDirective = ($loading) ->\r\n    link = ($scope, $el, attr) ->\r\n        currentLoading = null\r\n        template = $el.html()\r\n\r\n        $scope.$watch attr.tgLoading, (showLoading) =>\r\n\r\n            if showLoading\r\n                currentLoading = $loading()\r\n                    .target($el)\r\n                    .timeout(100)\r\n                    .template(template)\r\n                    .scope($scope)\r\n                    .start()\r\n             else if currentLoading\r\n                 currentLoading.finish()\r\n\r\n    return {\r\n        priority: 99999,\r\n        link:link\r\n    }\r\n\r\nmodule.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n#############################################################################\r\n## UserStory status Directive (popover for change status)\r\n#############################################################################\r\n\r\nUsStatusDirective = ($repo, $template) ->\r\n    ###\r\n    Print the status of a US and a popover to change it.\r\n    - tg-us-status: The user story\r\n    - on-update: Method call after US is updated\r\n\r\n    Example:\r\n\r\n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\r\n        a.us-status(href=\"\", title=\"Status Name\")\r\n\r\n    NOTE: This directive need 'usStatusById' and 'project'.\r\n    ###\r\n    template = $template.get(\"common/popover/popover-us-status.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        render = (us) ->\r\n            usStatusDomParent = $el.find(\".us-status\")\r\n            usStatusDom = $el.find(\".us-status .us-status-bind\")\r\n            usStatusById = $scope.usStatusById\r\n\r\n            if usStatusById[us.status]\r\n                usStatusDom.text(usStatusById[us.status].name)\r\n                usStatusDomParent.css(\"color\", usStatusById[us.status].color)\r\n\r\n        $el.on \"click\", \".us-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".popover-status\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n\r\n            statusElement = $(event.currentTarget).find('#js-status-btn')\r\n\r\n            target = angular.element(statusElement)\r\n\r\n            us = $scope.$eval($attrs.tgUsStatus)\r\n            us.status = target.data(\"status-id\")\r\n            render(us)\r\n\r\n            $el.find(\".pop-status\").popover().close()\r\n\r\n            $scope.$apply () ->\r\n                $repo.save(us).then ->\r\n                    $scope.$eval($attrs.onUpdate)\r\n\r\n\r\n        $scope.$on(\"userstories:loaded\", -> render($scope.$eval($attrs.tgUsStatus)))\r\n        $scope.$on(\"$destroy\", -> $el.off())\r\n\r\n        # Bootstrap\r\n        us = $scope.$eval($attrs.tgUsStatus)\r\n        render(us)\r\n\r\n        bindOnce $scope, \"project\", (project) ->\r\n            html = template({\r\n                \"statuses\": project.us_statuses,\r\n                \"currentStatus\": us.status\r\n            })\r\n            $el.append(html)\r\n\r\n            # If the user has not enough permissions the click events are unbinded\r\n            if $scope.project.my_permissions.indexOf(\"modify_us\") == -1\r\n                $el.unbind(\"click\")\r\n                $el.find(\"a\").addClass(\"not-clickable\")\r\n\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective])\r\n\r\n#############################################################################\r\n## Related Task Status Directive\r\n#############################################################################\r\n\r\nRelatedTaskStatusDirective = ($repo, $template) ->\r\n    ###\r\n    Print the status of a related task and a popover to change it.\r\n    - tg-related-task-status: The related task\r\n    - on-update: Method call after US is updated\r\n\r\n    Example:\r\n\r\n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\r\n        a.task-status(href=\"\", title=\"Status Name\")\r\n\r\n    NOTE: This directive need 'taskStatusById' and 'project'.\r\n    ###\r\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true)\r\n\r\n    updateTaskStatus = ($el, task, taskStatusById) ->\r\n        taskStatusDomParent = $el.find(\".us-status\")\r\n        taskStatusDom = $el.find(\".task-status .task-status-bind\")\r\n\r\n        if taskStatusById[task.status]\r\n            taskStatusDom.text(taskStatusById[task.status].name)\r\n            taskStatusDomParent.css('color', taskStatusById[task.status].color)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        task = $scope.$eval($attrs.tgRelatedTaskStatus)\r\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\r\n        autoSave = !notAutoSave\r\n\r\n        $el.on \"click\", \".task-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n            # pop = $el.find(\".pop-status\")\r\n            # popoverService.open(pop)\r\n\r\n        $el.on \"click\", \".status\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            target = angular.element(event.currentTarget)\r\n            task.status = target.data(\"status-id\")\r\n            $el.find(\".pop-status\").popover().close()\r\n            updateTaskStatus($el, task, $scope.taskStatusById)\r\n\r\n            if autoSave\r\n                $scope.$apply () ->\r\n                    $repo.save(task).then ->\r\n                        $scope.$eval($attrs.onUpdate)\r\n                        $scope.$emit(\"related-tasks:status-changed\")\r\n\r\n        $scope.$watch $attrs.tgRelatedTaskStatus, () ->\r\n            task = $scope.$eval($attrs.tgRelatedTaskStatus)\r\n            updateTaskStatus($el, task, $scope.taskStatusById)\r\n\r\n        taiga.bindOnce $scope, \"project\", (project) ->\r\n            $el.append(selectionTemplate({ 'statuses':  project.task_statuses }))\r\n            updateTaskStatus($el, task, $scope.taskStatusById)\r\n\r\n            # If the user has not enough permissions the click events are unbinded\r\n            if project.my_permissions.indexOf(\"modify_task\") == -1\r\n                $el.unbind(\"click\")\r\n                $el.find(\"a\").addClass(\"not-clickable\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective])\r\n\r\n#############################################################################\r\n## jQuery plugin for Popover\r\n#############################################################################\r\n\r\n$.fn.popover = () ->\r\n    $el = @\r\n\r\n    isVisible = () =>\r\n        $el.css({\r\n            \"display\": \"block\",\r\n            \"visibility\": \"hidden\"\r\n        })\r\n\r\n        docViewTop = $(window).scrollTop()\r\n        docViewBottom = docViewTop + $(window).height()\r\n\r\n        docViewWidth = $(window).width()\r\n        docViewRight = docViewWidth\r\n        docViewLeft = 0\r\n\r\n        elemTop = $el.offset().top\r\n        elemBottom = elemTop + $el.height()\r\n\r\n        elemWidth = $el.width()\r\n        elemLeft = $el.offset().left\r\n        elemRight = $el.offset().left + elemWidth\r\n\r\n        $el.css({\r\n            \"display\": \"none\",\r\n            \"visibility\": \"visible\"\r\n        })\r\n\r\n        return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight))\r\n\r\n    closePopover = (onClose) =>\r\n        if onClose then onClose.call($el)\r\n\r\n        $el.fadeOut () =>\r\n            $el\r\n                .removeClass(\"active\")\r\n                .removeClass(\"fix\")\r\n\r\n        $el.off(\"popup:close\")\r\n\r\n\r\n    closeAll = () =>\r\n        $(\".popover.active\").each () ->\r\n            $(this).trigger(\"popup:close\")\r\n\r\n    open = (onClose) =>\r\n        if $el.hasClass(\"active\")\r\n            close()\r\n        else\r\n            closeAll()\r\n\r\n            if !isVisible()\r\n                $el.addClass(\"fix\")\r\n\r\n            $el.fadeIn () =>\r\n                $el.addClass(\"active\")\r\n                $(document.body).off(\"popover\")\r\n\r\n                $(document.body).one \"click.popover\", () =>\r\n                    closeAll()\r\n\r\n            $el.on \"popup:close\", (e) => closePopover(onClose)\r\n\r\n    close = () =>\r\n        $el.trigger(\"popup:close\")\r\n\r\n    return {open: open, close: close, closeAll: closeAll}\r\n\r\n# Example:\r\n#\r\n# taiga.globalPopover(el, [\r\n#     {\r\n#         text: 'Button text',\r\n#         event: () ->\r\n#             console.log('button clicked')\r\n#     }\r\n# ], {\r\n#     width: 170,\r\n#     paddingTop: 10,\r\n#     paddingLeft: 5\r\n# }, () -> onClosePopover())\r\n\r\ntaiga.globalPopover = (target, list, options = {}, cb) ->\r\n    wrapper = document.createElement('div')\r\n    wrapper.classList.add('popover', 'global-popover')\r\n    ul = document.createElement('ul')\r\n\r\n    createSvg = (icon) ->\r\n        tgSvg = document.createElement('tg-svg')\r\n        svg = document.createElement('svg')\r\n        use = document.createElement('use')\r\n\r\n        xlink = document.createAttribute('xlink:href')\r\n        xlink.value = '#' + icon\r\n\r\n        attrHref = document.createAttribute('attr-href')\r\n        attrHref.value = '#' + icon\r\n\r\n        use.setAttributeNode(xlink)\r\n        use.setAttributeNode(attrHref)\r\n\r\n        svg.classList.add('icon')\r\n        svg.appendChild(use)\r\n        tgSvg.appendChild(svg)\r\n\r\n        return tgSvg\r\n\r\n    close = () ->\r\n        $(wrapper).popover().close()\r\n        $(wrapper).remove()\r\n\r\n    followElement = () ->\r\n        elementPosition()\r\n        requestAnimationFrame(followElement)\r\n\r\n    elementPosition = () ->\r\n        rect = target.getBoundingClientRect()\r\n        top = rect.top + rect.height\r\n        width = options.width || 170\r\n        left = rect.right - width\r\n\r\n        if options.paddingTop\r\n            top = top + options.paddingTop\r\n\r\n        if options.paddingLeft\r\n            left = left + options.paddingLeft\r\n\r\n        wrapper.style.top = top + 'px'\r\n        wrapper.style.left = left + 'px'\r\n        wrapper.style.width = width + 'px'\r\n\r\n    elementPosition()\r\n    followElement()\r\n\r\n    document.addEventListener('scroll', close, true)\r\n\r\n    list.forEach (option) ->\r\n        li = document.createElement('li')\r\n        button = document.createElement('button')\r\n        button.addEventListener('click', option.event)\r\n\r\n        if option.icon\r\n            button.innerHTML = createSvg(option.icon).innerHTML\r\n\r\n        button.appendChild(document.createTextNode(option.text))\r\n        li.appendChild(button)\r\n        ul.appendChild(li)\r\n\r\n    wrapper.appendChild(ul)\r\n    document.body.appendChild(wrapper)\r\n\r\n    $(wrapper).popover().open () ->\r\n        document.removeEventListener('scroll', close)\r\n\r\n        cb()\r\n\r\n        if wrapper\r\n            setTimeout () ->\r\n                $(wrapper).remove()\r\n            , 2000\r\n\r\n    return () =>\r\n        $(wrapper).popover().close()\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nExceptionHandlerFactory = ($log, @config) ->\r\n    ravenConfig = @config.get(\"ravenConfig\", null)\r\n    if ravenConfig\r\n      $log.debug \"Using the RavenJS exception handler.\"\r\n      Raven.config(ravenConfig).install()\r\n      return (exception, cause) ->\r\n        $log.error.apply($log, arguments)\r\n        Raven.captureException(exception)\r\n\r\n    else\r\n      $log.debug \"Using the default logging exception handler.\"\r\n      return (exception, cause) ->\r\n          $log.error.apply($log, arguments)\r\n\r\nmodule.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nclass SectionsService extends taiga.Service\r\n    @.$inject = [\"$translate\", \"tgCurrentUserService\"]\r\n\r\n    SECTIONS = {\r\n        1: {id: 1, title: 'TIMELINE', path:'timeline', enabled: ''}\r\n        2: {id: 2, title: 'EPICS', path:'epics', enabled: 'is_epics_activated'}\r\n        3: {id: 3, title: 'BACKLOG', path:'backlog', enabled: 'is_backlog_activated'}\r\n        4: {id: 4, title: 'KANBAN', path:'kanban', enabled: 'is_kanban_activated'}\r\n        5: {id: 5, title: 'ISSUES', path:'issues', enabled: 'is_issues_activated'}\r\n        6: {id: 6, title: 'WIKI', path:'wiki', enabled: 'is_wiki_activated'}\r\n    }\r\n\r\n    constructor: (@translate, @currentUserService) ->\r\n        super()\r\n        _.map(SECTIONS, (x) => x.title = @translate.instant(\"PROJECT.SECTION.#{x.title}\"))\r\n    list: () ->\r\n        return SECTIONS\r\n    getPath: (projectSlug, sectionId) ->\r\n        defaultHomePage = \"timeline\"\r\n\r\n        projects = @currentUserService.projects?.get(\"all\")\r\n        if not projects\r\n            return defaultHomePage\r\n\r\n        project = projects.find (p) -> return p.get('slug') == projectSlug\r\n        if not project\r\n            return defaultHomePage\r\n\r\n        if not sectionId\r\n            sectionId = project.get('my_homepage')\r\n\r\n        section = _.find(SECTIONS, {\"id\": sectionId})\r\n        if !section or project?.get(section.enabled) is not true\r\n            return defaultHomePage\r\n\r\n        return section.path\r\n\r\nmodule.service(\"$tgSections\", SectionsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n\r\nclass TagManagerService extends taiga.Service\r\n    @.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"]\r\n\r\n    constructor: (@rootscope, @log, @config, @win, @doc, @location) ->\r\n        @.initialized = false\r\n\r\n        conf = @config.get(\"tagManager\", {})\r\n\r\n        @.accountId = conf.accountId\r\n\r\n\r\n    initialize: ->\r\n        if not @.accountId\r\n            @log.debug \"Tag Manager: no account id provided. Disabling.\"\r\n            return\r\n\r\n        @.injectTagManager()\r\n        @.initialized = true\r\n\r\n    injectTagManager: ->\r\n        fn = `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\r\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\r\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\r\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\r\n              f.parentNode.insertBefore(j,f);})`\r\n        fn(window, document, \"script\", \"dataLayer\", @.accountId)\r\n\r\n\r\nmodule.service(\"$tgTagManager\", TagManagerService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntrim = @.taiga.trim\r\nbindOnce = @.taiga.bindOnce\r\n\r\n\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\n# Directive that parses/format tags inputfield.\r\n\r\nTagsDirective = ->\r\n    formatter = (v) ->\r\n        if _.isArray(v)\r\n            return v.join(\", \")\r\n        return \"\"\r\n\r\n    parser = (v) ->\r\n        return [] if not v\r\n        result = _(v.split(\",\")).map((x) -> _.trim(x))\r\n\r\n        return result.value()\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        $ctrl.$formatters.push(formatter)\r\n        $ctrl.$parsers.push(parser)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        require: \"ngModel\"\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgTags\", TagsDirective)\r\n\r\n\r\nColorizeTagsBacklogDirective = ($emojis) ->\r\n    template = _.template(\"\"\"\r\n        <% _.each(tags, function(tag) { %>\r\n            <% if (tag[1] !== null) { %>\r\n            <div class=\"tag\" style=\"background: <%- tag[1] %>\">\r\n                <%= emojify(tag[0]) %>\r\n            </div>\r\n            <% } %>\r\n        <% }) %>\r\n        <% _.each(tags, function(tag) { %>\r\n            <% if (tag[1] === null) { %>\r\n            <div class=\"tag\">\r\n                <%= emojify(tag[0]) %>\r\n            </div>\r\n            <% } %>\r\n        <% }) %>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        render = (tags) ->\r\n            html = template({tags: tags, emojify: (text) -> $emojis.replaceEmojiNameByHtmlImgs(_.escape(text))})\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.tgColorizeBacklogTags, (tags) ->\r\n            render(tags) if tags?\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective])\r\n\r\n\r\n#############################################################################\r\n## TagLine  Directive (for Lightboxes)\r\n#############################################################################\r\n\r\nLbTagLineDirective = ($rs, $template, $compile) ->\r\n    ENTER_KEY = 13\r\n    COMMA_KEY = 188\r\n\r\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true)\r\n\r\n    autocomplete = null\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        withoutColors = _.has($attrs, \"withoutColors\")\r\n\r\n        ## Render\r\n        renderTags = (tags, tagsColors = []) ->\r\n            color = if not withoutColors then tagsColors[t] else null\r\n\r\n            ctx = {\r\n                tags: _.map(tags, (t) -> {\r\n                    name: t,\r\n                    style: if color then \"border-left: 5px solid #{color}\" else \"\"\r\n                })\r\n            }\r\n\r\n            html = $compile(templateTags(ctx))($scope)\r\n            $el.find(\".tags-container\").html(html)\r\n\r\n        showSaveButton = ->\r\n            $el.find(\".save\").removeClass(\"hidden\")\r\n\r\n        hideSaveButton = ->\r\n            $el.find(\".save\").addClass(\"hidden\")\r\n\r\n        resetInput = ->\r\n            $el.find(\"input\").val(\"\")\r\n            autocomplete.close()\r\n\r\n        ## Aux methods\r\n        addValue = (value) ->\r\n            value = trim(value.toLowerCase())\r\n            return if value.length == 0\r\n\r\n            tags = _.clone($model.$modelValue, false)\r\n            tags = [] if not tags?\r\n            tags.push(value) if value not in tags\r\n\r\n            $scope.$apply ->\r\n                $model.$setViewValue(tags)\r\n\r\n            hideSaveButton()\r\n\r\n        deleteValue = (value) ->\r\n            value = trim(value.toLowerCase())\r\n            return if value.length == 0\r\n\r\n            tags = _.clone($model.$modelValue, false)\r\n            tags = _.pull(tags, value)\r\n\r\n            $scope.$apply ->\r\n                $model.$setViewValue(tags)\r\n\r\n        saveInputTag = () ->\r\n            value = $el.find(\"input\").val()\r\n\r\n            addValue(value)\r\n            resetInput()\r\n\r\n        ## Events\r\n        $el.on \"keypress\", \"input\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n\r\n            if event.keyCode == ENTER_KEY\r\n                event.preventDefault()\r\n                saveInputTag()\r\n            else if String.fromCharCode(event.keyCode) == ','\r\n                event.preventDefault()\r\n                saveInputTag()\r\n            else\r\n                if target.val().length\r\n                    showSaveButton()\r\n                else\r\n                    hideSaveButton()\r\n\r\n        $el.on \"click\", \".save\", (event) ->\r\n            event.preventDefault()\r\n            saveInputTag()\r\n\r\n        $el.on \"click\", \".remove-tag\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n\r\n            value = target.siblings(\".tag-name\").text()\r\n            deleteValue(value)\r\n\r\n        bindOnce $scope, \"project\", (project) ->\r\n            input = $el.find(\"input\")\r\n\r\n            autocomplete = new Awesomplete(input[0], {\r\n                list: _.keys(project.tags_colors)\r\n            })\r\n\r\n            input.on \"awesomplete-selectcomplete\", () ->\r\n                addValue(input.val())\r\n                input.val(\"\")\r\n\r\n        $scope.$watch $attrs.ngModel, (tags) ->\r\n            tagsColors = $scope.project?.tags_colors or []\r\n            renderTags(tags, tagsColors)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link:link,\r\n        require:\"ngModel\"\r\n        templateUrl: \"common/tag/lb-tag-line.html\"\r\n    }\r\n\r\nmodule.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmodule = angular.module(\"taigaCommon\")\r\n\r\nclass UserPilotService extends taiga.Service\r\n    @.$inject = [\"$rootScope\", \"$window\"]\r\n    JOINED_LIMIT_DAYS = 42\r\n\r\n    constructor: (@rootScope, @win) ->\r\n        @.initialized = false\r\n\r\n    initialize: ->\r\n        if @.initialized\r\n            return\r\n\r\n        @rootScope.$on '$locationChangeSuccess', =>\r\n            if (@win.userpilot)\r\n                @win.userpilot.reload()\r\n\r\n        @rootScope.$on \"auth:refresh\", (ctx, user) =>\r\n            @.identify()\r\n\r\n        @rootScope.$on \"auth:register\", (ctx, user) =>\r\n            @.identify()\r\n\r\n        @rootScope.$on \"auth:login\", (ctx, user) =>\r\n            @.identify()\r\n\r\n        @rootScope.$on \"auth:logout\", (ctx, user) =>\r\n            @.identify()\r\n\r\n        @.initialized = true\r\n\r\n    checkZendeskConditions: (userData) ->\r\n        hasPaidPlan = @.hasPaidPlan(userData)\r\n        joined = new Date(userData[\"date_joined\"])\r\n        is_new_user = joined > @.getJoinedLimit()\r\n        return hasPaidPlan and is_new_user\r\n\r\n    identify: () ->\r\n        userInfo = @win.localStorage.getItem(\"userInfo\") or \"{}\"\r\n        userData = JSON.parse(userInfo)\r\n\r\n        if @win.userpilot\r\n            userPilotId = @.calculateUserPilotId(userData)\r\n            userPilotCustomer = @.prepareUserPilotCustomer(userData)\r\n            @win.userpilot.identify(\r\n                userPilotId,\r\n                userPilotCustomer\r\n            )\r\n\r\n        if @win.zE\r\n            if @.checkZendeskConditions(userData)\r\n                @.setZendeskWidgetStatus({enabled: true})\r\n            else\r\n                @.setZendeskWidgetStatus({enabled: false})\r\n\r\n    prepareUserPilotCustomer: (data) ->\r\n        if not data[\"id\"]\r\n            return {\r\n                created_at: Date.now(),\r\n            }\r\n\r\n        return {\r\n            name: data[\"full_name_display\"],\r\n            email: data[\"email\"],\r\n            created_at: Date.now(),\r\n            taiga_id: data[\"id\"],\r\n            taiga_username: data[\"username\"],\r\n            taiga_date_joined: data[\"date_joined\"],\r\n            taiga_lang: data[\"lang\"],\r\n            taiga_max_private_projects: data[\"max_private_projects\"],\r\n            taiga_max_memberships_private_projects: data[\"max_memberships_private_projects\"],\r\n            taiga_verified_email: data[\"verified_email\"],\r\n            taiga_total_private_projects: data[\"total_private_projects\"],\r\n            taiga_total_public_projects: data[\"total_public_projects\"],\r\n            taiga_roles: data[\"roles\"] && data[\"roles\"].toString()\r\n        }\r\n\r\n    hasPaidPlan: (data) ->\r\n        maxPrivateProjects = data[\"max_private_projects\"]\r\n        return maxPrivateProjects != undefined and maxPrivateProjects != 1\r\n\r\n    calculateUserPilotId: (data) ->\r\n        if not data[\"id\"]\r\n            return 2\r\n\r\n        joined = new Date(data[\"date_joined\"])\r\n\r\n        if (joined > @.getJoinedLimit()) or @.hasPaidPlan(data)\r\n            return data[\"id\"]\r\n\r\n        return 1\r\n\r\n    getJoinedLimit: ->\r\n        limit = new Date\r\n        limit.setDate(limit.getDate() - JOINED_LIMIT_DAYS)\r\n        return limit\r\n\r\n    setZendeskWidgetStatus: (config={enabled: false}) ->\r\n        supress = !config.enabled\r\n\r\n        @win.zE('webWidget', 'updateSettings', {\r\n            webWidget: {\r\n                chat: {\r\n                    suppress: supress\r\n                },\r\n                contactForm: {\r\n                    suppress: supress\r\n                },\r\n                helpCenter: {\r\n                    suppress: supress\r\n                },\r\n                talk: {\r\n                    suppress: supress\r\n                },\r\n                answerBot: {\r\n                    suppress: supress\r\n                }\r\n            }\r\n        })\r\n\r\n\r\nmodule.service(\"$tgUserPilot\", UserPilotService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaBacklog\")\r\n\r\n#############################################################################\r\n## Creare/Edit Sprint Lightbox Directive\r\n#############################################################################\r\n\r\nCreateEditSprint = ($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate, projectService, $timeout) ->\r\n    link = ($scope, $el, attrs) ->\r\n        hasErrors = false\r\n        createSprint = true\r\n        form = null\r\n        $scope.newSprint = {}\r\n        ussToAdd = null\r\n        $scope.createEditOpen = false\r\n\r\n        resetSprint = () ->\r\n            form.reset() if form\r\n\r\n            $scope.newSprint = {\r\n                project: null\r\n                name: null\r\n                estimated_start: null\r\n                estimated_finish: null\r\n            }\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n\r\n            submitButton = $el.find(\".submit-button\")\r\n            form = $el.find(\"form\").checksley()\r\n\r\n            if not form.validate()\r\n                hasErrors = true\r\n                $el.find(\".last-sprint-name\").addClass(\"disappear\")\r\n                return\r\n\r\n            hasErrors = false\r\n            broadcastEvent = null\r\n\r\n            estimated_start = $('.date-start').val()\r\n            estimated_end = $('.date-end').val()\r\n\r\n            if createSprint\r\n                newSprint = angular.copy($scope.newSprint)\r\n                newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\")\r\n                newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\")\r\n\r\n                promise = $repo.create(\"milestones\", newSprint)\r\n                broadcastEvent = \"sprintform:create:success\"\r\n            else\r\n                newSprint = $scope.newSprint.realClone()\r\n                newSprint.estimated_start =  moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\")\r\n                newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\")\r\n\r\n                promise = $repo.save(newSprint)\r\n                broadcastEvent = \"sprintform:edit:success\"\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise.then (data) ->\r\n                currentLoading.finish()\r\n                $scope.sprintsCounter += 1 if createSprint\r\n\r\n                $scope.sprints = _.map $scope.sprints, (it) ->\r\n                    if it.id == data.id\r\n                        return data\r\n                    else\r\n                        return it\r\n\r\n                if broadcastEvent == \"sprintform:create:success\" && ussToAdd\r\n                    $rootscope.$broadcast(broadcastEvent, data, ussToAdd)\r\n                else\r\n                    $rootscope.$broadcast(broadcastEvent, data)\r\n\r\n                lightboxService.close($el)\r\n                $scope.createEditOpen = false\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"light-error\", data._error_message)\r\n                else if data.__all__\r\n                    $confirm.notify(\"light-error\", data.__all__[0])\r\n\r\n        remove = ->\r\n            title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\")\r\n            message = $scope.newSprint.name\r\n\r\n            $confirm.askOnDelete(title, message).then (askResponse) =>\r\n                onSuccess = ->\r\n                    askResponse.finish()\r\n                    $scope.milestonesCounter -= 1\r\n                    lightboxService.close($el)\r\n                    $scope.createEditOpen = false\r\n                    $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint)\r\n\r\n                onError = ->\r\n                    askResponse.finish(false)\r\n                    $confirm.notify(\"error\")\r\n                $repo.remove($scope.newSprint).then(onSuccess, onError)\r\n\r\n        getLastSprint = ->\r\n            openSprints = _.filter $scope.sprints, (sprint) ->\r\n                return !sprint.closed\r\n\r\n            sortedSprints = _.sortBy openSprints, (sprint) ->\r\n                return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X')\r\n\r\n            return sortedSprints[sortedSprints.length - 1]\r\n\r\n        # wait to ensure that scope.createEditOpen has been updated in the html\r\n        openFn = (cb) ->\r\n            $scope.$applyAsync () ->\r\n                $timeout () ->\r\n                    cb()\r\n                , 0\r\n\r\n         $scope.$on \"sprintform:create\", (event, projectId, uss) ->\r\n            $scope.createEditOpen = true\r\n\r\n            openFn () ->\r\n                ussToAdd = uss\r\n                resetSprint()\r\n\r\n                form = $el.find(\"form\").checksley()\r\n                form.reset()\r\n\r\n                createSprint = true\r\n                prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n                $scope.newSprint.project = projectId\r\n                $scope.newSprint.name = null\r\n                $scope.newSprint.slug = null\r\n\r\n                lastSprint = getLastSprint()\r\n\r\n                estimatedStart = moment()\r\n\r\n                if lastSprint\r\n                    estimatedStart = moment(lastSprint.estimated_finish)\r\n                else if $scope.newSprint.estimated_start\r\n                    estimatedStart = moment($scope.newSprint.estimated_start)\r\n\r\n                $scope.newSprint.estimated_start = estimatedStart.format(prettyDate)\r\n\r\n                estimatedFinish = moment().add(2, \"weeks\")\r\n\r\n                if lastSprint\r\n                    estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\")\r\n                else if $scope.newSprint.estimated_finish\r\n                    estimatedFinish = moment($scope.newSprint.estimated_finish)\r\n\r\n                $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate)\r\n\r\n                lastSprintNameDom = $el.find(\".last-sprint-name\")\r\n                if lastSprint?.name?\r\n                    text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\r\n                                lastSprint: lastSprint.name})\r\n                    lastSprintNameDom.html(text)\r\n\r\n                $el.find(\".delete-sprint\").addClass(\"hidden\")\r\n\r\n                text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\")\r\n                $el.find(\".title\").text(text)\r\n\r\n                text = $translate.instant(\"COMMON.CREATE\")\r\n                $el.find(\".button-green\").text(text)\r\n\r\n                lightboxService.open($el)\r\n                $el.find(\".sprint-name\").focus()\r\n                $el.find(\".last-sprint-name\").removeClass(\"disappear\")\r\n\r\n        $scope.$on \"sprintform:edit\", (ctx, sprint) ->\r\n            $scope.createEditOpen = true\r\n\r\n            openFn () ->\r\n                resetSprint()\r\n\r\n                createSprint = false\r\n                prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n\r\n                $scope.$apply () ->\r\n                    $scope.newSprint = sprint.realClone()\r\n                    $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate)\r\n                    $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate)\r\n\r\n                if projectService.project.get('my_permissions').indexOf('delete_milestone') > -1\r\n                    $el.find(\".delete-sprint\").removeClass(\"hidden\")\r\n\r\n                editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\")\r\n                $el.find(\".title\").text(editSprint)\r\n\r\n                save = $translate.instant(\"COMMON.SAVE\")\r\n                $el.find(\".button-green\").text(save)\r\n\r\n                lightboxService.open($el)\r\n                $el.find(\".sprint-name\").focus().select()\r\n                $el.find(\".last-sprint-name\").addClass(\"disappear\")\r\n\r\n        $el.on \"keyup\", \".sprint-name\", (event) ->\r\n            if $el.find(\".sprint-name\").val().length > 0 or hasErrors\r\n                $el.find(\".last-sprint-name\").addClass(\"disappear\")\r\n            else\r\n                $el.find(\".last-sprint-name\").removeClass(\"disappear\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $el.on \"click\", \".delete-sprint\", (event) ->\r\n            event.preventDefault()\r\n            remove()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        resetSprint()\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgLbCreateEditSprint\", [\r\n    \"$tgRepo\",\r\n    \"$tgConfirm\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"lightboxService\"\r\n    \"$tgLoading\",\r\n    \"$translate\",\r\n    \"tgProjectService\",\r\n    \"$timeout\",\r\n    CreateEditSprint\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\nscopeDefer = @.taiga.scopeDefer\r\nbindOnce = @.taiga.bindOnce\r\ngroupBy = @.taiga.groupBy\r\ntimeout = @.taiga.timeout\r\nbindMethods = @.taiga.bindMethods\r\ngenerateHash = @.taiga.generateHash\r\n\r\nmodule = angular.module(\"taigaBacklog\")\r\n\r\n#############################################################################\r\n## Backlog Controller\r\n#############################################################################\r\n\r\nclass BacklogController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgEvents\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"$tgLoading\",\r\n        \"tgResources\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"tgErrorHandlingService\",\r\n        \"$tgStorage\",\r\n        \"tgFilterRemoteStorageService\",\r\n        \"tgProjectService\",\r\n        \"tgLoader\"\r\n    ]\r\n\r\n    storeCustomFiltersName: 'backlog-custom-filters'\r\n    storeFiltersName: 'backlog-filters'\r\n    backlogOrder: {}\r\n    milestonesOrder: {}\r\n    newUs: []\r\n    validQueryParams: [\r\n        'exclude_status',\r\n        'status',\r\n        'exclude_tags',\r\n        'tags',\r\n        'exclude_assigned_users',\r\n        'assigned_users',\r\n        'exclude_role',\r\n        'role',\r\n        'exclude_epic',\r\n        'epic',\r\n        'exclude_owner',\r\n        'owner'\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @appMetaService, @navUrls,\r\n                  @events, @analytics, @translate, @loading, @rs2, @modelTransform, @errorHandlingService,\r\n                  @storage, @filterRemoteStorageService, @projectService, @tgLoader) ->\r\n        bindMethods(@)\r\n\r\n        @.backlogOrder = {}\r\n        @.milestonesOrder = {}\r\n\r\n        @.page = 1\r\n        @.disablePagination = false\r\n        @.firstLoadComplete = false\r\n        @.translationData = {q: @.filterQ}\r\n        @scope.userstories = []\r\n        @.totalUserStories = 0\r\n        @.pendingDrag = []\r\n        @scope.noSwimlaneUserStories = false\r\n        @scope.swimlanesList = Immutable.List()\r\n\r\n        return if @.applyStoredFilters(@params.pslug, \"backlog-filters\", @.validQueryParams)\r\n\r\n        @scope.sectionName = @translate.instant(\"BACKLOG.SECTION_NAME\")\r\n        @showTags = true\r\n        @activeFilters = false\r\n        @scope.showGraphPlaceholder = null\r\n        @displayVelocity = false\r\n\r\n        @.initializeEventHandlers()\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            @.loadSwimlanes()\r\n            @.firstLoadComplete = true\r\n\r\n            title = @translate.instant(\"BACKLOG.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\r\n                projectName: @scope.project.name,\r\n                projectDescription: @scope.project.description\r\n            })\r\n            @appMetaService.setAll(title, description)\r\n\r\n            if @rs.userstories.getShowTags(@scope.projectId)\r\n                @showTags = true\r\n\r\n                @scope.$broadcast(\"showTags\", @showTags)\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    preloadUsIds: () ->\r\n        page = 1\r\n        usIds = []\r\n\r\n        loadNextPage = () =>\r\n            lastLoadUserstoriesParams = Object.assign({}, @.lastLoadUserstoriesParams)\r\n\r\n            params = Object.assign(lastLoadUserstoriesParams, {\r\n                page: page\r\n                only_ref: true\r\n            })\r\n\r\n            promise = @rs.userstories.listUnassigned(@scope.projectId, params, 100, false)\r\n            promise.then (result) =>\r\n                userstories = result[0]\r\n                header = result[1]\r\n                usIds = usIds.concat(userstories.map (us) => us.ref)\r\n                @rs.userstories.storeBacklog(@scope.projectId, usIds)\r\n\r\n                if header('x-pagination-next')\r\n                    page++\r\n                    loadNextPage()\r\n\r\n        if @.disablePagination\r\n            usIds = @scope.userstories.map (us) -> us.ref\r\n            @rs.userstories.storeBacklog(@scope.projectId, usIds)\r\n        else\r\n            loadNextPage()\r\n\r\n    filtersReloadContent: () ->\r\n        @.loadUserstories(true)\r\n\r\n    initializeEventHandlers: ->\r\n        load = () =>\r\n            @.loadUserstories(true)\r\n            @.loadProjectStats()\r\n            @rootscope.$broadcast(\"filters:update\")\r\n\r\n        @scope.$on \"usform:bulk:success\", (event, els, position = 'bottom') =>\r\n            @.newUs = _.map els, (it) ->\r\n                return it.id\r\n\r\n            if position == 'top'\r\n                @.moveUsToTopOfBacklog(els).then () =>\r\n                    load()\r\n            else\r\n                load()\r\n\r\n            @analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1)\r\n\r\n        @scope.$on \"sprintform:create:success\", (e, data, ussToMove) =>\r\n            @.loadSprints().then () =>\r\n                @scope.$broadcast(\"sprintform:create:success:callback\", ussToMove)\r\n\r\n            @.loadProjectStats()\r\n            @confirm.notify(\"success\")\r\n            @analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1)\r\n\r\n        @scope.$on \"usform:new:success\", (event, el, position = 'bottom') =>\r\n            @.newUs = [el.id]\r\n\r\n            if position == 'top'\r\n                @.moveUsToTopOfBacklog(el).then () =>\r\n                    load()\r\n            else\r\n                load()\r\n\r\n            @analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1)\r\n\r\n        @scope.$on \"sprintform:edit:success\", =>\r\n            @.loadProjectStats()\r\n\r\n        @scope.$on \"sprintform:remove:success\", (event, sprint) =>\r\n            if @.displayVelocity\r\n                @toggleVelocityForecasting()\r\n\r\n            @.loadSprints()\r\n            @.loadProjectStats()\r\n            @.loadUserstories(true)\r\n\r\n            if sprint.closed\r\n                @.loadClosedSprints()\r\n\r\n            @rootscope.$broadcast(\"filters:update\")\r\n\r\n        @scope.$on \"usform:edit:success\", (event, data) =>\r\n            index = _.findIndex @scope.userstories, (us) ->\r\n                return us.id == data.id\r\n\r\n            @scope.userstories[index] = data\r\n\r\n            @rootscope.$broadcast(\"filters:update\")\r\n\r\n        @scope.$on \"filters:update\", () => @.generateFilters(milestone = \"null\")\r\n\r\n        @scope.$on(\"sprint:us:move\", @.moveUs)\r\n        @scope.$on \"sprint:us:moved\", () =>\r\n            @.resetFirstStoryIndicator()\r\n            @rootscope.$broadcast(\"filters:update\")\r\n\r\n        @scope.$on(\"backlog:load-closed-sprints\", @.loadClosedSprints)\r\n        @scope.$on(\"backlog:unload-closed-sprints\", @.unloadClosedSprints)\r\n\r\n    initializeSubscription: ->\r\n        routingKey1 = \"changes.project.#{@scope.projectId}.userstories\"\r\n        @events.subscribe @scope, routingKey1, (message) =>\r\n            @.loadAllPaginatedUserstories()\r\n            @.loadSprints()\r\n\r\n        routingKey2 = \"changes.project.#{@scope.projectId}.milestones\"\r\n        @events.subscribe @scope, routingKey2, (message) =>\r\n            @.loadSprints()\r\n            @.loadClosedSprints()\r\n            @.loadProjectStats()\r\n        , { selfNotification: true }\r\n\r\n    toggleShowTags: ->\r\n        @scope.$apply =>\r\n            @showTags = !@showTags\r\n            @rs.userstories.storeShowTags(@scope.projectId, @showTags)\r\n\r\n    toggleActiveFilters: ->\r\n        @activeFilters = !@activeFilters\r\n\r\n    toggleVelocityForecasting: ->\r\n        @displayVelocity = !@displayVelocity\r\n        if !@displayVelocity\r\n            @scope.visibleUserStories = _.map @scope.userstories, (it) ->\r\n                return it.ref\r\n        else\r\n            @.calculateForecasting()\r\n            @scope.visibleUserStories = _.map @.forecastedStories, (it) ->\r\n                return it.ref\r\n        scopeDefer @scope, =>\r\n            @scope.$broadcast(\"userstories:loaded\")\r\n\r\n    loadProjectStats: ->\r\n        return @rs.projects.stats(@scope.projectId).then (stats) =>\r\n            @scope.stats = stats\r\n            totalPoints = if stats.total_points then stats.total_points else stats.defined_points\r\n\r\n            if totalPoints\r\n                @scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints)\r\n            else\r\n                @scope.stats.completedPercentage = 0\r\n\r\n            @scope.showGraphPlaceholder = !(stats.total_points? && stats.total_milestones?)\r\n            @.calculateForecasting()\r\n            return stats\r\n\r\n    setMilestonesOrder: (sprints) ->\r\n        for sprint in sprints\r\n            @.milestonesOrder[sprint.id] = {}\r\n            for it in sprint.user_stories\r\n                @.milestonesOrder[sprint.id][it.id] = it.sprint_order\r\n\r\n    unloadClosedSprints: ->\r\n        @scope.$apply =>\r\n            @scope.closedSprints =  []\r\n            @rootscope.$broadcast(\"closed-sprints:reloaded\", [])\r\n\r\n    loadClosedSprints: ->\r\n        params = {closed: true}\r\n        return @rs.sprints.list(@scope.projectId, params).then (result) =>\r\n            sprints = result.milestones\r\n\r\n            @.setMilestonesOrder(sprints)\r\n\r\n            @scope.totalClosedMilestones = result.closed\r\n\r\n            # NOTE: Fix order of USs because the filter orderBy does not work propertly in partials files\r\n            for sprint in sprints\r\n                sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\")\r\n            @scope.closedSprints =  sprints\r\n            @scope.closedSprintsById = groupBy(sprints, (x) -> x.id)\r\n            @rootscope.$broadcast(\"closed-sprints:reloaded\", sprints)\r\n            return sprints\r\n\r\n    loadSwimlanes: ->\r\n        if (@scope.project.swimlanes)\r\n            @scope.project.swimlanes.forEach (swimlane) =>\r\n                if (!@scope.swimlanesList.includes(swimlane))\r\n                    @scope.swimlanesList = @scope.swimlanesList.push(swimlane)\r\n\r\n    loadSprints: ->\r\n        params = {closed: false}\r\n        return @rs.sprints.list(@scope.projectId, params).then (result) =>\r\n            sprints = result.milestones\r\n\r\n            @.setMilestonesOrder(sprints)\r\n\r\n            @scope.totalMilestones = sprints\r\n            @scope.totalClosedMilestones = result.closed\r\n            @scope.totalOpenMilestones = result.open\r\n            @scope.totalMilestones = @scope.totalOpenMilestones + @scope.totalClosedMilestones\r\n\r\n            # NOTE: Fix order of USs because the filter orderBy does not work propertly in partials files\r\n            for sprint in sprints\r\n                sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\")\r\n\r\n            @scope.sprints = sprints\r\n\r\n            @scope.closedSprints =  [] if !@scope.closedSprints\r\n\r\n            @scope.sprintsCounter = sprints.length\r\n            @scope.sprintsById = groupBy(sprints, (x) -> x.id)\r\n            @rootscope.$broadcast(\"sprints:loaded\", sprints)\r\n\r\n            @scope.currentSprint = @.findCurrentSprint()\r\n\r\n            return sprints\r\n\r\n    openSprints: ->\r\n        return _.filter(@scope.sprints, (sprint) => not sprint.closed)\r\n\r\n    loadAllPaginatedUserstories: () ->\r\n        page = @.page\r\n\r\n        @.loadUserstories(true, @scope.userstories.length).then () =>\r\n          @.page = page\r\n\r\n    loadUserstories: (resetPagination = false, pageSize) ->\r\n        return null if !@scope.projectId\r\n\r\n        @.loadingUserstories = true\r\n        @.disablePagination = true\r\n        params = _.pick(_.clone(@location.search()), @.validQueryParams)\r\n        @rs.userstories.storeQueryParams(@scope.projectId, params)\r\n\r\n        if resetPagination\r\n            @.page = 1\r\n\r\n        params.page = @.page\r\n        params.q = @.filterQ\r\n\r\n        @.lastLoadUserstoriesParams = params\r\n\r\n        @.translationData.q = params.q\r\n\r\n        promise = @rs.userstories.listUnassigned(@scope.projectId, params, pageSize)\r\n\r\n        return promise.then (result) =>\r\n            userstories = result[0]\r\n            header = result[1]\r\n\r\n            if resetPagination\r\n                @scope.userstories = []\r\n\r\n            uss = @.parseLoadUserstoriesResponse(userstories, header)\r\n\r\n            if @.page <= 2\r\n                @.preloadUsIds()\r\n\r\n            return uss\r\n\r\n    parseLoadUserstoriesResponse: (userstories, header) ->\r\n        # NOTE: Fix order of USs because the filter orderBy does not work propertly in the partials files\r\n        @scope.userstories = @scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"))\r\n        @.resetFirstStoryIndicator()\r\n        @scope.visibleUserStories = _.map @scope.userstories, (it) ->\r\n            return it.ref\r\n\r\n        for it in @scope.userstories\r\n            if @.newUs.includes(it.id)\r\n                it.new = true\r\n\r\n            @.backlogOrder[it.id] = it.backlog_order\r\n\r\n        @.loadingUserstories = false\r\n\r\n        if header('x-pagination-next')\r\n            @.disablePagination = false\r\n            @.page++\r\n\r\n        if header('Taiga-Info-Backlog-Total-Userstories')\r\n            @.totalUserStories = header('Taiga-Info-Backlog-Total-Userstories')\r\n\r\n        if header('Taiga-Info-Userstories-Without-Swimlane')\r\n            @scope.noSwimlaneUserStories = header('Taiga-Info-Userstories-Without-Swimlane')\r\n\r\n        @rootscope.$broadcast(\"backlog:userstories:loaded\")\r\n\r\n        # The broadcast must be executed when the DOM has been fully reloaded.\r\n        # We can't assure when this exactly happens so we need a defer\r\n        scopeDefer @scope, =>\r\n            @scope.$broadcast(\"userstories:loaded\")\r\n            @tgLoader.pageLoaded()\r\n\r\n        return userstories\r\n\r\n    loadBacklog: ->\r\n        return @q.all([\r\n            @.loadProjectStats(),\r\n            @.loadSprints(),\r\n            @.loadUserstories()\r\n        ]).then(@.calculateForecasting)\r\n\r\n    getLinkParams: () ->\r\n        lastLoadUserstoriesParams = @.lastLoadUserstoriesParams\r\n\r\n        if lastLoadUserstoriesParams\r\n            delete lastLoadUserstoriesParams['page']\r\n\r\n            lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity)\r\n\r\n            ParsedLastLoadUserstoriesParams = {}\r\n            Object.keys(lastLoadUserstoriesParams).forEach (key) ->\r\n                ParsedLastLoadUserstoriesParams['backlog-' + key] = lastLoadUserstoriesParams[key]\r\n\r\n            ParsedLastLoadUserstoriesParams['no-milestone'] = 1\r\n\r\n            return ParsedLastLoadUserstoriesParams\r\n        else\r\n            return {}\r\n\r\n    sprintTotalPoints: (sprint) ->\r\n        points = 0\r\n\r\n        for us in sprint.user_stories\r\n            if us.milestone == sprint.id\r\n                points += us.total_points\r\n\r\n        return points\r\n\r\n    calculateForecasting: ->\r\n        stats = @scope.stats\r\n        total_points = stats.total_points\r\n        current_sum = stats.assigned_points\r\n        backlog_points_sum = 0\r\n        @forecastedStories = []\r\n        @scope.forecastNewSprint = true\r\n\r\n        if @scope.sprints && @scope.sprints.length\r\n            backlog_points_sum = @.sprintTotalPoints(@scope.sprints[0])\r\n\r\n            # set 0 bacause we're going to create a new sprint\r\n            if stats.speed > 0 && backlog_points_sum > stats.speed\r\n                backlog_points_sum = 0\r\n            else\r\n                @scope.forecastNewSprint = false\r\n\r\n        for us in @scope.userstories\r\n            current_sum += us.total_points\r\n            backlog_points_sum += us.total_points\r\n            @forecastedStories.push(us)\r\n\r\n            if stats.speed > 0 && backlog_points_sum > stats.speed\r\n                break\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.is_backlog_activated\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.closedMilestones = !!project.total_closed_milestones\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.points = _.sortBy(project.points, \"order\")\r\n        @scope.pointsById = groupBy(project.points, (x) -> x.id)\r\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\r\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"id\")\r\n\r\n        @.resetFirstStoryIndicator()\r\n\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.initializeSubscription()\r\n\r\n        if @rs.userstories.getShowTags(@scope.projectId) == false\r\n            @showTags = false\r\n\r\n        return @.loadBacklog()\r\n            .then(=> @.generateFilters(milestone = \"null\"))\r\n            .then(=> @scope.$emit(\"backlog:loaded\"))\r\n\r\n    toggleTags: () ->\r\n        @rs.userstories.storeShowTags(@scope.projectId, @showTags)\r\n\r\n    prepareBulkUpdateData: (uses, field=\"backlog_order\") ->\r\n         return _.map(uses, (x) -> {\"us_id\": x.id, \"order\": x[field]})\r\n\r\n    resetFirstStoryIndicator: () ->\r\n      if @scope.userstories.length > 0\r\n        @scope.first_us_in_backlog = @scope.userstories[0].id\r\n\r\n    moveUsToTopOfBacklog: (uss) ->\r\n        if !Array.isArray(uss)\r\n            uss = [uss]\r\n\r\n        us = uss[0]\r\n\r\n        if @scope.userstories.length\r\n            nextUs = @scope.userstories[0].id\r\n            return @.moveUs(\"sprint:us:move\", uss, 0, null, null, nextUs)\r\n\r\n        return Promise.resolve()\r\n\r\n    moveUs: (ctx, usList, newUsIndex, newSprintId, previousUs, nextUs) ->\r\n        oldSprintId = usList[0].milestone\r\n        project = usList[0].project\r\n\r\n        if oldSprintId\r\n            sprint = @scope.sprintsById[oldSprintId] || @scope.closedSprintsById[oldSprintId]\r\n\r\n        if newSprintId\r\n            newSprint = @scope.sprintsById[newSprintId] || @scope.closedSprintsById[newSprintId]\r\n\r\n        currentSprintId = if newSprintId != oldSprintId then newSprintId else oldSprintId\r\n\r\n        bulkUserstories = _.map(usList, (it) ->\r\n            return it.id\r\n        )\r\n\r\n        if ctx\r\n            @.pendingDrag.push({\r\n                usList: usList,\r\n                newUsIndex: newUsIndex,\r\n                newSprintId: newSprintId,\r\n                previousUs: previousUs,\r\n                nextUs: nextUs\r\n            })\r\n\r\n            if newSprintId != oldSprintId\r\n                if sprint\r\n                    usList.forEach (us, index) =>\r\n                        _.remove sprint.user_stories, (it) ->\r\n                            return it.id == us.id\r\n\r\n                if newSprintId == null # From sprint to backlog\r\n                    for us, key in usList # delete from sprint userstories\r\n                        _.remove sprint.user_stories, (it) -> it.id == us.id\r\n\r\n                    usList.forEach (us, index) =>\r\n                        @scope.userstories.splice(newUsIndex + index, 0, us)\r\n                else\r\n                    for us in usList # delete from backlog userstories\r\n                        _.remove @scope.userstories, (it) -> it.id == us.id\r\n\r\n                    usList.forEach (us, index) =>\r\n                        us.milestone = newSprintId\r\n                        newSprint.user_stories.splice(newUsIndex, 0, us)\r\n\r\n                        newSprint = Object.assign(\r\n                            newSprint,\r\n                            {\r\n                                user_stories: newSprint.user_stories.slice()\r\n                            }\r\n                        )\r\n\r\n                        @scope.sprints = @scope.sprints.map (sprint) ->\r\n                            return Object.assign(sprint)\r\n            else\r\n                if newSprintId # reorder in sprint\r\n                    targetList = newSprint.user_stories\r\n                else # reorder backlog\r\n                    targetList = @scope.userstories\r\n\r\n                for us in usList # delete from backlog userstories\r\n                    _.remove targetList, (it) -> it.id == us.id\r\n\r\n                position = 0\r\n\r\n                if previousUs\r\n                    position = targetList.findIndex (us) -> us.id == previousUs\r\n                else if nextUs\r\n                    position = targetList.findIndex (us) -> us.id == previousUs\r\n\r\n                position++\r\n                usList.forEach (us, index) =>\r\n                    targetList.splice(position + index, 0, us)\r\n\r\n            @scope.visibleUserStories = _.map @scope.userstories, (it) ->\r\n                return it.ref\r\n\r\n        if ctx && @.pendingDrag.length > 1\r\n            return\r\n\r\n        promise = @rs.userstories.bulkUpdateBacklogOrder(\r\n            project,\r\n            currentSprintId,\r\n            previousUs,\r\n            nextUs,\r\n            bulkUserstories\r\n        )\r\n\r\n        promise.then (result) =>\r\n            for updatedUs in result.data\r\n                usList.forEach (us, index) =>\r\n                    if us.id == updatedUs.id\r\n                        us.milestone = updatedUs.milestone\r\n                        us.backlog_order = updatedUs.backlog_order\r\n\r\n            @.pendingDrag.shift()\r\n\r\n            if @.pendingDrag.length\r\n                @scope.$applyAsync () =>\r\n                    @.moveUs(\r\n                        null\r\n                        @.pendingDrag[0].usList,\r\n                        @.pendingDrag[0].newUsIndex,\r\n                        @.pendingDrag[0].newSprintId,\r\n                        @.pendingDrag[0].previousUs,\r\n                        @.pendingDrag[0].nextUs,\r\n                    )\r\n            else\r\n                @rootscope.$broadcast(\"sprint:us:moved\")\r\n\r\n                # taiga events will refresh the backlog if it's available\r\n                if !@events.connected\r\n                    @.loadSprints()\r\n                    @.loadClosedSprints()\r\n                    @.loadProjectStats()\r\n\r\n                if @scope.closedSprintsById && @scope.closedSprintsById[oldSprintId]\r\n                    @rootscope.$broadcast(\"backlog:load-closed-sprints\")\r\n\r\n        return promise\r\n\r\n    ## Template actions\r\n\r\n    updateUserStoryStatus: () ->\r\n        @.generateFilters().then () =>\r\n            @rootscope.$broadcast(\"filters:update\")\r\n            @.loadProjectStats()\r\n            if @.isFilterDataTypeSelected('status')\r\n                @.filtersReloadContent()\r\n\r\n    editUserStory: (projectId, ref, $event) ->\r\n        return @rs.userstories.getByRef(projectId, ref).then (us) =>\r\n            @rs2.attachments.list(\"us\", us.id, projectId).then (attachments) =>\r\n                @rootscope.$broadcast(\"genericform:edit\", {\r\n                    'objType': 'us',\r\n                    'obj': us,\r\n                    'attachments': attachments.toJS()\r\n                })\r\n\r\n    deleteUserStory: (us) ->\r\n        title = @translate.instant(\"US.TITLE_DELETE_ACTION\",  {projectName: @scope.project.name})\r\n\r\n        message = @translate.instant(\"US.TITLE_DELETE_MESSAGE\",  {subject: us.subject})\r\n\r\n        @confirm.askOnDelete(title, message, '').then (askResponse) =>\r\n            # We modify the userstories in scope so the user doesn't see the removed US for a while\r\n            @scope.userstories = _.without(@scope.userstories, us)\r\n            promise = @.repo.remove(us)\r\n            promise.then =>\r\n                askResponse.finish()\r\n\r\n                @q.all([\r\n                    @.loadProjectStats(),\r\n                    @.loadSprints(),\r\n                    @.resetFirstStoryIndicator()\r\n                ])\r\n            promise.then null, =>\r\n                askResponse.finish(false)\r\n                @confirm.notify(\"error\")\r\n\r\n    addNewUs: (type) ->\r\n        switch type\r\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new\",\r\n                {\r\n                    'objType': 'us',\r\n                    'project': @scope.project\r\n                })\r\n            when \"bulk\" then @rootscope.$broadcast(\"usform:bulk\", @scope.projectId,\r\n                                                   @scope.project.default_us_status)\r\n\r\n    addNewSprint: () ->\r\n        @rootscope.$broadcast(\"sprintform:create\", @scope.projectId)\r\n\r\n    findCurrentSprint: () ->\r\n        currentDate = new Date().getTime()\r\n\r\n        return  _.find @scope.sprints, (sprint) ->\r\n            start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x')\r\n            end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x')\r\n\r\n            return currentDate >= start && currentDate <= end\r\n\r\n    addFilterBacklog: (newFilter) ->\r\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\r\n        @.filtersReloadContent()\r\n        @.generateFilters('null')\r\n\r\n    removeFilterBacklog: (filter) ->\r\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\r\n        @.filtersReloadContent()\r\n        @.generateFilters('null')\r\n\r\nmodule.controller(\"BacklogController\", BacklogController)\r\n\r\n#############################################################################\r\n## Backlog Directive\r\n#############################################################################\r\n\r\nBacklogDirective = ($repo, $rootscope, $translate, $rs) ->\r\n    ## Doom line Link\r\n    doomLineTemplate = _.template(\"\"\"\r\n    <div class=\"doom-line\"><span><%- text %></span></div>\r\n    \"\"\")\r\n\r\n    linkDoomLine = ($scope, $el, $attrs, $ctrl) ->\r\n        reloadDoomLine = ->\r\n            if $scope.displayVelocity\r\n                removeDoomlineDom()\r\n\r\n            if $scope.stats? and $scope.stats.total_points? and $scope.stats.total_points != 0 and !$scope.displayVelocity?\r\n                removeDoomlineDom()\r\n\r\n                stats = $scope.stats\r\n                total_points = stats.total_points\r\n                current_sum = stats.assigned_points\r\n\r\n                return if not $scope.userstories\r\n\r\n                for us, i in $scope.userstories\r\n                    current_sum += us.total_points\r\n\r\n                    if current_sum > total_points\r\n                        domElement = $el.find('.backlog-table-body .us-item-row')[i]\r\n                        addDoomLineDom(domElement)\r\n\r\n                        break\r\n\r\n        removeDoomlineDom = ->\r\n            $el.find(\".doom-line\").remove()\r\n\r\n        addDoomLineDom = (element) ->\r\n            text = $translate.instant(\"BACKLOG.DOOMLINE\")\r\n            $(element).before(doomLineTemplate({\"text\": text}))\r\n\r\n        getUsItems = ->\r\n            rowElements = $el.find('.backlog-table-body .us-item-row')\r\n            return _.map(rowElements, (x) -> angular.element(x))\r\n\r\n        $scope.$on(\"userstories:loaded\", reloadDoomLine)\r\n        $scope.$on(\"userstories:forecast\", removeDoomlineDom)\r\n        $scope.$on(\"sprint:us:moved\", reloadDoomLine)\r\n        $scope.$watch(\"stats\", reloadDoomLine)\r\n\r\n    ## Move to current sprint link\r\n\r\n    linkToolbar = ($scope, $el, $attrs, $ctrl) ->\r\n        getUsToMove = () ->\r\n            # Calculating the us's to be modified\r\n            ussDom = $el.find(\".backlog-table-body input:checkbox:checked\")\r\n\r\n            return _.map ussDom, (item) ->\r\n                item =  $(item).closest('.tg-scope')\r\n                itemScope = item.scope()\r\n                itemScope.us.milestone = $scope.sprints[0].id\r\n                return itemScope.us\r\n\r\n        moveUssToSprint = (selectedUss, sprint) ->\r\n            ussCurrent = _($scope.userstories)\r\n\r\n            # Remove them from backlog\r\n            $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value()\r\n\r\n            extraPoints = _.map(selectedUss, (v, k) -> v.total_points)\r\n            totalExtraPoints =  _.reduce(extraPoints, (acc, num) -> acc + num)\r\n\r\n            # Add them to current sprint\r\n            sprint.user_stories = _.union(sprint.user_stories, selectedUss)\r\n\r\n            # Update the total of points\r\n            sprint.total_points += totalExtraPoints\r\n\r\n            data = _.map selectedUss, (us) ->\r\n                return {\r\n                    us_id: us.id\r\n                    order: us.sprint_order\r\n                }\r\n            $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then =>\r\n                $ctrl.loadSprints()\r\n                $ctrl.loadProjectStats()\r\n                $ctrl.toggleVelocityForecasting()\r\n                $ctrl.calculateForecasting()\r\n\r\n            $el.find(\".move-to-sprint\").hide()\r\n\r\n        moveToCurrentSprint = (selectedUss) ->\r\n            sprint = if $scope.currentSprint then $scope.currentSprint else $scope.sprints[0]\r\n\r\n            moveUssToSprint(selectedUss, sprint)\r\n\r\n        moveToLatestSprint = (selectedUss) ->\r\n            moveUssToSprint(selectedUss, $scope.sprints[0])\r\n\r\n        $scope.$on \"sprintform:create:success:callback\", (e, ussToMove) ->\r\n            if ussToMove\r\n                _.partial(moveToCurrentSprint, ussToMove)()\r\n\r\n        shiftPressed = false\r\n        lastChecked = null\r\n\r\n        checkSelected = (target) ->\r\n            lastChecked = target.closest(\".us-item-row\")\r\n            target.closest('.us-item-row').toggleClass('ui-multisortable-multiple')\r\n            moveToSprintDom = $el.find(\".move-to-sprint\")\r\n            selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\")\r\n\r\n            if selectedUsDom.length > 0 and $scope.sprints.length > 0\r\n                moveToSprintDom.css('display', 'flex')\r\n            else\r\n                moveToSprintDom.hide()\r\n\r\n\r\n        $(window).on \"keydown.shift-pressed keyup.shift-pressed\", (event) ->\r\n            shiftPressed = !!event.shiftKey\r\n\r\n            return true\r\n\r\n        # Enable move to current sprint only when there are selected us's\r\n        $el.on \"change\", \".backlog-table-body input:checkbox\", (event) ->\r\n            # check elements between the last two if shift is pressed\r\n            if lastChecked && shiftPressed\r\n                elements = []\r\n                current = $(event.currentTarget).closest(\".us-item-row\")\r\n                nextAll = lastChecked.nextAll()\r\n                prevAll = lastChecked.prevAll()\r\n\r\n                if _.some(nextAll, (next) -> next == current[0])\r\n                    elements = lastChecked.nextUntil(current)\r\n                else if _.some(prevAll, (prev) -> prev == current[0])\r\n                    elements = lastChecked.prevUntil(current)\r\n\r\n                _.map elements, (elm) ->\r\n                    input = $(elm).find(\"input:checkbox\")\r\n                    input.prop('checked', true)\r\n                    checkSelected(input)\r\n\r\n            target = angular.element(event.currentTarget)\r\n            target.closest(\".us-item-row\").toggleClass('is-checked')\r\n            checkSelected(target)\r\n\r\n        $el.on \"click\", \"#move-to-latest-sprint\", (event) =>\r\n            ussToMove = getUsToMove()\r\n\r\n            $scope.$apply(_.partial(moveToLatestSprint, ussToMove))\r\n\r\n        $el.on \"click\", \"#move-to-current-sprint\", (event) =>\r\n            ussToMove = getUsToMove()\r\n\r\n            $scope.$apply(_.partial(moveToCurrentSprint, ussToMove))\r\n\r\n        $el.on \"change\", \"#show-tags > input\", (event) ->\r\n            event.preventDefault()\r\n\r\n            $ctrl.toggleShowTags()\r\n\r\n            showHideTags($ctrl)\r\n\r\n        $el.on \"click\", \".forecasting-add-sprint\", (event) ->\r\n            ussToMoveList = $ctrl.forecastedStories\r\n\r\n            if !$scope.forecastNewSprint\r\n                ussToMove = _.map ussToMoveList, (us, index) ->\r\n                    us.milestone = $scope.sprints[0].id\r\n                    us.order = index\r\n                    return us\r\n\r\n                $scope.$apply(_.partial(moveToCurrentSprint, ussToMove))\r\n            else\r\n                ussToMove = _.map ussToMoveList, (us, index) ->\r\n                    us.order = index\r\n                    return us\r\n\r\n                $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove)\r\n\r\n    showHideTags = ($ctrl) ->\r\n        elm = angular.element(\"#show-tags\")\r\n\r\n        if $ctrl.showTags\r\n            elm.addClass(\"active\")\r\n\r\n            # text = $translate.instant(\"BACKLOG.TAGS.HIDE\")\r\n            # elm.text(text)\r\n        else\r\n            elm.removeClass(\"active\")\r\n\r\n            # text = $translate.instant(\"BACKLOG.TAGS.SHOW\")\r\n            # elm.text(text)\r\n\r\n    openFilterInit = ($scope, $el, $ctrl) ->\r\n        sidebar = $el.find(\".backlog-filter\")\r\n\r\n        sidebar.addClass(\"active\")\r\n\r\n        $ctrl.activeFilters = true\r\n\r\n    showHideFilter = ($scope, $el, $ctrl) ->\r\n        filter = $el.find(\".backlog-filter\")\r\n\r\n        target = angular.element(\"#show-filters-button\")\r\n\r\n        filter.toggleClass(\"active\")\r\n        target.toggleClass(\"active\")\r\n\r\n        $ctrl.toggleActiveFilters()\r\n\r\n    ## Filters Link\r\n\r\n    linkFilters = ($scope, $el, $attrs, $ctrl) ->\r\n        $scope.filtersSearch = {}\r\n        $el.on \"click\", \"#show-filters-button\", (event) ->\r\n            event.preventDefault()\r\n            $scope.$apply ->\r\n                showHideFilter($scope, $el, $ctrl)\r\n\r\n    link = ($scope, $el, $attrs, $rootscope) ->\r\n        $ctrl = $el.controller()\r\n\r\n        linkToolbar($scope, $el, $attrs, $ctrl)\r\n        linkFilters($scope, $el, $attrs, $ctrl)\r\n        linkDoomLine($scope, $el, $attrs, $ctrl)\r\n\r\n        filters = $ctrl.location.search()\r\n        if filters.status ||\r\n           filters.tags ||\r\n           filters.assigned_to ||\r\n           filters.owner\r\n            openFilterInit($scope, $el, $ctrl)\r\n\r\n        $scope.$on \"showTags\", () ->\r\n            showHideTags($ctrl)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            $(window).off(\".shift-pressed\")\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective])\r\n\r\n#############################################################################\r\n## User story edit directive\r\n#############################################################################\r\n\r\nUsEditSelector = ($rootscope, $tgTemplate, $compile, $translate) ->\r\n    mainTemplate = $tgTemplate.get(\"backlog/us-edit-popover.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        removePopupOpenState = () ->\r\n            $el.find(\".js-popup-button\").removeClass('popover-open')\r\n            $(this).remove()\r\n\r\n        $el.on \"click\", (event) ->\r\n            html = $compile(mainTemplate())($scope)\r\n            $el.find(\".js-popup-button\").addClass('popover-open')\r\n            $el.append(html)\r\n            $el.find(\".us-option-popup\").popover().open(() -> removePopupOpenState())\r\n            if event.target.parentNode.classList.contains('first')\r\n              $el.find(\".us-option-popup\").addClass('first')\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgUsEditSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsEditSelector])\r\n\r\n#############################################################################\r\n## User story points directive\r\n#############################################################################\r\n\r\nUsRolePointsSelectorDirective = ($rootscope, $template, $compile, $translate) ->\r\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        removePopupOpenState = () ->\r\n            $el.removeClass('popover-open')\r\n\r\n        # Watchers\r\n        bindOnce $scope, \"project\", (project) ->\r\n            roles = _.filter(project.roles, \"computable\")\r\n            numberOfRoles = _.size(roles)\r\n\r\n            if numberOfRoles > 1\r\n                $el.append($compile(selectionTemplate({\"roles\": roles}))($scope))\r\n            else\r\n                $el.find(\".icon-arrow-down\").remove()\r\n                $el.find(\".header-points\").addClass(\"not-clickable\")\r\n\r\n        $scope.$on \"uspoints:select\", (ctx, roleId, roleName) ->\r\n            $el.find(\".popover\").popover().close()\r\n            $el.find(\".header-points\").html(\"#{roleName}\")\r\n\r\n        $scope.$on \"uspoints:clear-selection\", (ctx, roleId) ->\r\n            $el.find(\".popover\").popover().close()\r\n\r\n            text = $translate.instant(\"COMMON.FIELDS.POINTS\")\r\n            $el.find(\".header-points\").text(text)\r\n\r\n        # Dom Event Handlers\r\n        $el.on \"click\", (event) ->\r\n            target = angular.element(event.target)\r\n\r\n            if target.is(\"span\") or target.is(\"div\")\r\n                event.stopPropagation()\r\n\r\n            $el.addClass('popover-open')\r\n            $el.find(\".popover\").popover().open(() -> removePopupOpenState())\r\n\r\n        $el.on \"click\", \".clear-selection\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $rootscope.$broadcast(\"uspoints:clear-selection\")\r\n            $el.find('.active-popover').removeClass('active-popover')\r\n            target.addClass('active-popover')\r\n\r\n        $el.on \"click\", \".role\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            target = angular.element(event.currentTarget)\r\n            $el.find('.active-popover').removeClass('active-popover')\r\n            target.addClass('active-popover')\r\n            rolScope = target.scope()\r\n            $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text())\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective])\r\n\r\n\r\nUsPointsDirective = ($tgEstimationsService, $repo, $tgTemplate) ->\r\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        updatingSelectedRoleId = null\r\n        selectedRoleId = null\r\n        filteringRoleId = null\r\n        estimationProcess = null\r\n\r\n        $scope.$on \"uspoints:select\", (ctx, roleId, roleName) ->\r\n            us = $scope.$eval($attrs.tgBacklogUsPoints)\r\n            selectedRoleId = roleId\r\n            estimationProcess.render()\r\n\r\n        $scope.$on \"uspoints:clear-selection\", (ctx) ->\r\n            us = $scope.$eval($attrs.tgBacklogUsPoints)\r\n            selectedRoleId = null\r\n            estimationProcess.render()\r\n\r\n        $scope.$watch $attrs.tgBacklogUsPoints, (us) ->\r\n            if us\r\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\r\n\r\n                # Update roles\r\n                roles = estimationProcess.calculateRoles()\r\n                if roles.length == 0\r\n                    $el.find(\".icon-arrow-bottom\").remove()\r\n                    $el.find(\"a.us-points\").addClass(\"not-clickable\")\r\n\r\n                else if roles.length == 1\r\n                    # Preselect the role if we have only one\r\n                    selectedRoleId = _.keys(us.points)[0]\r\n\r\n                if estimationProcess.isEditable\r\n                    bindClickElements()\r\n\r\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\r\n                    us.points = points\r\n                    estimationProcess.render()\r\n\r\n                    @save(roleId, pointId).then ->\r\n                        $ctrl.loadProjectStats()\r\n\r\n                estimationProcess.render = () ->\r\n                    totalPoints = @calculateTotalPoints()\r\n                    if not selectedRoleId? or roles.length == 1\r\n                        text = totalPoints\r\n                        title = totalPoints\r\n                    else\r\n                        pointId = @us.points[selectedRoleId]\r\n                        pointObj = @pointsById[pointId]\r\n                        text = \"#{pointObj.name} / <span>#{totalPoints}</span>\"\r\n                        title = \"#{pointObj.name} / #{totalPoints}\"\r\n\r\n                    ctx = {\r\n                        totalPoints: totalPoints\r\n                        roles: @calculateRoles()\r\n                        editable: @isEditable\r\n                        text:  text\r\n                        title: title\r\n                    }\r\n                    mainTemplate = \"common/estimation/us-estimation-total.html\"\r\n                    template = $tgTemplate.get(mainTemplate, true)\r\n                    html = template(ctx)\r\n                    @$el.html(html)\r\n\r\n                estimationProcess.render()\r\n\r\n        renderRolesSelector = () ->\r\n            roles = estimationProcess.calculateRoles()\r\n            html = rolesTemplate({\"roles\": roles})\r\n            # Render into DOM and show the new created element\r\n            $el.append(html)\r\n            $el.find(\".pop-role\").popover().open(() -> $(this).remove())\r\n\r\n        bindClickElements = () ->\r\n            $el.on \"click\", \".us-points\", (event) ->\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                us = $scope.$eval($attrs.tgBacklogUsPoints)\r\n                updatingSelectedRoleId = selectedRoleId\r\n                if selectedRoleId?\r\n                    estimationProcess.renderPointsSelector(selectedRoleId)\r\n                else\r\n                    renderRolesSelector()\r\n\r\n            $el.on \"click\", \".role\", (event) ->\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                target = angular.element(event.currentTarget)\r\n                us = $scope.$eval($attrs.tgBacklogUsPoints)\r\n                updatingSelectedRoleId = target.data(\"role-id\")\r\n                popRolesDom = $el.find(\".pop-role\")\r\n                popRolesDom.find(\"a\").removeClass(\"active\")\r\n                popRolesDom.find(\"a[data-role-id='#{updatingSelectedRoleId}']\").addClass(\"active\")\r\n                estimationProcess.renderPointsSelector(updatingSelectedRoleId)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective])\r\n\r\n\r\n#############################################################################\r\n## Burndown graph directive\r\n#############################################################################\r\nToggleBurndownVisibility = ($storage) ->\r\n    hide = () ->\r\n        $(\".js-burndown-graph\").removeClass(\"shown\")\r\n        $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\")\r\n        $(\".js-burndown-graph\").removeClass(\"open\")\r\n\r\n    show = (firstLoad) ->\r\n        $(\".js-toggle-burndown-visibility-button\").addClass(\"active\")\r\n\r\n        if firstLoad\r\n            $(\".js-burndown-graph\").addClass(\"shown\")\r\n        else\r\n            $(\".js-burndown-graph\").addClass(\"open\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        firstLoad = true\r\n        hash = generateHash([\"is-burndown-grpahs-collapsed\"])\r\n        $scope.isBurndownGraphCollapsed = $storage.get(hash) or false\r\n\r\n        toggleGraph = ->\r\n            if $scope.isBurndownGraphCollapsed\r\n                hide(firstLoad)\r\n            else\r\n                show(firstLoad)\r\n\r\n            firstLoad = false\r\n\r\n        $scope.$watch \"showGraphPlaceholder\", () ->\r\n            if $scope.showGraphPlaceholder?\r\n                $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder\r\n                toggleGraph()\r\n\r\n        $el.on \"click\", \".js-toggle-burndown-visibility-button\", ->\r\n            $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed\r\n            $storage.set(hash, $scope.isBurndownGraphCollapsed)\r\n            toggleGraph()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility])\r\n\r\n\r\n#############################################################################\r\n## Burndown graph directive\r\n#############################################################################\r\n\r\nBurndownBacklogGraphDirective = ($translate) ->\r\n    redrawChart = (element, dataToDraw) ->\r\n        width = element.width()\r\n        element.height(width/6)\r\n        milestonesRange = [0..(dataToDraw.milestones.length - 1)]\r\n        data = []\r\n        zero_line = _.map(dataToDraw.milestones, (ml) -> 0)\r\n        data.push({\r\n            data: _.zip(milestonesRange, zero_line)\r\n            lines:\r\n                fillColor : \"rgba(0,0,0,0)\"\r\n            points:\r\n                show: false\r\n        })\r\n        optimal_line = _.map(dataToDraw.milestones, (ml) -> ml.optimal)\r\n        data.push({\r\n            data: _.zip(milestonesRange, optimal_line)\r\n            lines:\r\n                fillColor : \"rgba(200,201,196,0.2)\"\r\n        })\r\n        evolution_line = _.filter(_.map(dataToDraw.milestones, (ml) -> ml.evolution), (evolution) -> evolution?)\r\n        data.push({\r\n            data: _.zip(milestonesRange, evolution_line)\r\n            lines:\r\n                fillColor : \"rgba(147,196,0,0.2)\"\r\n        })\r\n        client_increment_line = _.map dataToDraw.milestones, (ml) ->\r\n            -ml[\"team-increment\"] - ml[\"client-increment\"]\r\n        data.push({\r\n            data: _.zip(milestonesRange, client_increment_line)\r\n            lines:\r\n                fillColor : \"rgba(200,201,196,0.2)\"\r\n        })\r\n        team_increment_line = _.map(dataToDraw.milestones, (ml) -> -ml[\"team-increment\"])\r\n        data.push({\r\n            data: _.zip(milestonesRange, team_increment_line)\r\n            lines:\r\n                fillColor : \"rgba(255,160,160,0.2)\"\r\n        })\r\n        colors = [\r\n            \"rgba(200,201,196,0.2)\"\r\n            \"rgba(216,222,233,1)\"\r\n            \"rgba(168,228,64,1)\"\r\n            \"rgba(216,222,233,1)\"\r\n            \"rgba(255,160,160,1)\"\r\n        ]\r\n\r\n        options = {\r\n            grid: {\r\n                borderWidth: { top: 0, right: 1, left:0, bottom: 0 }\r\n                borderColor: \"#D8DEE9\"\r\n                color: \"#D8DEE9\"\r\n                hoverable: true\r\n                margin: { top: 0, right: 20, left: 5, bottom: 0 }\r\n            }\r\n            xaxis: {\r\n                ticks: dataToDraw.milestones.length\r\n                axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\r\n                axisLabelUseCanvas: true\r\n                axisLabelFontSizePixels: 12\r\n                axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\"\r\n                axisLabelPadding: 5\r\n                tickFormatter: (val, axis) -> \"\"\r\n            }\r\n            yaxis: {\r\n                axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\r\n                axisLabelUseCanvas: true\r\n                axisLabelFontSizePixels: 12\r\n                axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\"\r\n                axisLabelPadding: 5\r\n            }\r\n            series: {\r\n                shadowSize: 0\r\n                lines: {\r\n                    show: true\r\n                    fill: true\r\n                }\r\n                points: {\r\n                    show: true\r\n                    fill: true\r\n                    radius: 4\r\n                    lineWidth: 2\r\n                }\r\n            }\r\n            colors: colors\r\n            tooltip: true\r\n            tooltipOpts: {\r\n                content: (label, xval, yval, flotItem) ->\r\n                    if flotItem.seriesIndex == 1\r\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval * 10) / 10}\r\n                        return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx)\r\n                    else if flotItem.seriesIndex == 2\r\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval * 10) / 10}\r\n                        return $translate.instant(\"BACKLOG.CHART.REAL\", ctx)\r\n                    else if flotItem.seriesIndex == 3\r\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval * 10) / 10}\r\n                        return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx)\r\n                    else\r\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval * 10) / 10}\r\n                        return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx)\r\n            }\r\n        }\r\n\r\n        element.empty()\r\n        element.plot(data, options).data(\"plot\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        element = angular.element($el)\r\n\r\n        $scope.$watch \"stats\", (value) ->\r\n            if $scope.stats?\r\n                redrawChart(element, $scope.stats)\r\n\r\n                $scope.$on \"resize\", ->\r\n                    redrawChart(element, $scope.stats)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective])\r\n\r\n\r\n#############################################################################\r\n## Backlog progress bar directive\r\n#############################################################################\r\n\r\nTgBacklogProgressBarDirective = ($template, $compile) ->\r\n    template = $template.get(\"backlog/progress-bar.html\", true)\r\n\r\n    render = (scope, el, projectPointsPercentaje, closedPointsPercentaje) ->\r\n        html = template({\r\n            projectPointsPercentaje: projectPointsPercentaje,\r\n            closedPointsPercentaje:closedPointsPercentaje\r\n        })\r\n        html = $compile(html)(scope)\r\n        el.html(html)\r\n\r\n    adjustPercentaje = (percentage) ->\r\n        adjusted = _.max([0 , percentage])\r\n        adjusted = _.min([100, adjusted])\r\n        return Math.round(adjusted)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        element = angular.element($el)\r\n\r\n        $scope.$watch $attrs.tgBacklogProgressBar, (stats) ->\r\n            if stats?\r\n                totalPoints = if stats.total_points then stats.total_points else stats.defined_points\r\n                definedPoints = stats.defined_points\r\n                closedPoints = stats.closed_points\r\n                if definedPoints > totalPoints\r\n                    projectPointsPercentaje = totalPoints * 100 / definedPoints\r\n                    closedPointsPercentaje = closedPoints * 100 / definedPoints\r\n                else\r\n                    projectPointsPercentaje = 100\r\n                    closedPointsPercentaje = closedPoints * 100 / totalPoints\r\n\r\n                projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3)\r\n                closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3)\r\n                render($scope, $el, projectPointsPercentaje, closedPointsPercentaje)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaBacklog\")\r\n\r\n#############################################################################\r\n## Sortable Directive\r\n#############################################################################\r\n\r\ndeleteElement = (el) ->\r\n    $(el).scope().$destroy()\r\n    $(el).off()\r\n    $(el).remove()\r\n\r\nBacklogSortableDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        if !$scope.ctrl\r\n            console.error('BacklogSortableDirective must have access to to BacklogCtrl')\r\n\r\n        bindOnce $scope, \"project\", (project) ->\r\n            # If the user has not enough permissions we don't enable the sortable\r\n            if not (project.my_permissions.indexOf(\"modify_us\") > -1)\r\n                return\r\n\r\n            initIsBacklog = false\r\n            emptyBacklog = $('.js-empty-backlog')\r\n            previousUs = null\r\n            nextUs = null\r\n            oldIndex = null\r\n\r\n            drake = dragula([$el[0], emptyBacklog[0], emptyBacklog[1]], {\r\n                copySortSource: false,\r\n                copy: false,\r\n                isContainer: (el) -> return el.classList.contains('sprint-table'),\r\n                moves: (item) ->\r\n                    if !$(item).hasClass('row')\r\n                        return false\r\n\r\n                    return true\r\n            })\r\n\r\n            drake.on 'drop', (item, target, source, sibling) ->\r\n                previousUs = null\r\n                nextUs = null\r\n\r\n                prev = $(item).prevAll('.row:not(.gu-transit)')\r\n                next = $(item).nextAll('.row:not(.gu-transit)')\r\n\r\n                previousUs = null\r\n                if prev.length && prev[0].dataset.id\r\n                    previousUs = Number(prev[0].dataset.id)\r\n\r\n                nextUs = null\r\n                if !previousUs && next.length && next[0].dataset.id\r\n                    nextUs = Number(next[0].dataset.id)\r\n\r\n            drake.on 'drag', (item, container) ->\r\n                if $scope.ctrl.displayVelocity\r\n                    $scope.ctrl.toggleVelocityForecasting()\r\n\r\n                # it doesn't move is the filter is open\r\n                parent = $(item).parent()\r\n                initIsBacklog = parent.hasClass('backlog-table-body')\r\n\r\n                $(document.body).addClass(\"drag-active\")\r\n\r\n                isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\")\r\n\r\n                window.dragMultiple.start(item, container)\r\n\r\n                dragMultipleItems = window.dragMultiple.getElements()\r\n\r\n                firstElement = if dragMultipleItems.length then dragMultipleItems[0] else item\r\n\r\n                parentEl = item.parentNode\r\n                oldIndex = $(parentEl).find('tg-card').index(firstElement)\r\n\r\n                if initIsBacklog\r\n                    oldIndex = $(firstElement).index(\".backlog-table-body .row\")\r\n                else\r\n                    oldIndex = $(firstElement).index()\r\n\r\n            drake.on 'cloned', (item) ->\r\n                $(item).addClass('multiple-drag-mirror')\r\n\r\n            drake.on 'dragend', (item) ->\r\n                $('.doom-line').remove()\r\n\r\n                parent = $(item).parent()\r\n\r\n                isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog')\r\n\r\n                if initIsBacklog || isBacklog\r\n                    sameContainer = (initIsBacklog == isBacklog)\r\n                else\r\n                    sameContainer = parent && $(item).scope().sprint.id == parent.scope().sprint.id\r\n\r\n                dragMultipleItems = window.dragMultiple.stop()\r\n\r\n                $(document.body).removeClass(\"drag-active\")\r\n\r\n                sprint = null\r\n\r\n                firstElement = if dragMultipleItems.length then dragMultipleItems[0] else item\r\n\r\n                if isBacklog\r\n                    index = $(firstElement).index(\".backlog-table-body .row\")\r\n                else\r\n                    index = $(firstElement).index()\r\n                    sprint = parent.scope()?.sprint.id\r\n\r\n                if index == oldIndex && sameContainer\r\n                    return\r\n\r\n                if !sameContainer\r\n                    if dragMultipleItems.length\r\n                        usList = _.map dragMultipleItems, (item) ->\r\n                            return item = $(item).scope().us\r\n                    else if $(item).scope()\r\n                        usList = [$(item).scope().us]\r\n\r\n                    if (dragMultipleItems.length)\r\n                        _.each dragMultipleItems, (item) ->\r\n                            deleteElement(item)\r\n                    else\r\n                        deleteElement(item)\r\n                else\r\n                    if dragMultipleItems.length\r\n                        usList = _.map dragMultipleItems, (item) ->\r\n                            return item = $(item).scope().us\r\n                    else if $(item).scope()\r\n                        usList = [$(item).scope().us]\r\n\r\n                $scope.$applyAsync () =>\r\n                    $scope.ctrl.moveUs(\"sprint:us:move\", usList, index, sprint, previousUs, nextUs)\r\n\r\n            scroll = autoScroll([window], {\r\n                margin: 20,\r\n                pixels: 30,\r\n                scrollWhenOutside: true,\r\n                autoScroll: () ->\r\n                    return this.down && drake.dragging\r\n            })\r\n\r\n            $scope.$on \"$destroy\", ->\r\n                $el.off()\r\n                drake.destroy()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBacklogSortable\", BacklogSortableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmodule = angular.module(\"taigaBacklog\")\r\n\r\n\r\n#############################################################################\r\n## Sprint Actions Directive\r\n#############################################################################\r\n\r\nBacklogSprintDirective = ($repo, $rootscope) ->\r\n    sprintTableMinHeight = 50\r\n    slideOptions = {\r\n        duration: 500,\r\n        easing: 'linear'\r\n    }\r\n\r\n    toggleSprint = ($el) =>\r\n        sprintTable = $el.find(\".sprint-table\")\r\n        sprintArrow = $el.find(\".compact-sprint\")\r\n\r\n        sprintArrow.toggleClass('active')\r\n        sprintTable.toggleClass('open')\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$watch $attrs.tgBacklogSprint, (sprint) ->\r\n            sprint = $scope.$eval($attrs.tgBacklogSprint)\r\n\r\n            if sprint.closed\r\n                $el.addClass(\"sprint-closed\")\r\n            else\r\n                toggleSprint($el)\r\n\r\n        # Event Handlers\r\n        $el.on \"click\", \".sprint-name > .compact-sprint\", (event) ->\r\n            event.preventDefault()\r\n\r\n            toggleSprint($el)\r\n\r\n            $el.find(\".sprint-table\").slideToggle(slideOptions)\r\n\r\n        $el.on \"click\", \".edit-sprint\", (event) ->\r\n            event.preventDefault()\r\n\r\n            sprint = $scope.$eval($attrs.tgBacklogSprint)\r\n            $rootscope.$broadcast(\"sprintform:edit\", sprint)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective])\r\n\r\n\r\n#############################################################################\r\n## Sprint Header Directive\r\n#############################################################################\r\n\r\nBacklogSprintHeaderDirective = ($navUrls, $template, $compile, $translate) ->\r\n    template = $template.get(\"backlog/sprint-header.html\")\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\")\r\n\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_milestone\") != -1\r\n\r\n        isVisible = ->\r\n            return $scope.project.my_permissions.indexOf(\"view_milestones\") != -1\r\n\r\n        render = (sprint) ->\r\n            taskboardUrl = $navUrls.resolve(\"project-taskboard\",\r\n                                            {project: $scope.project.slug, sprint: sprint.slug})\r\n\r\n            start = moment(sprint.estimated_start).format(prettyDate)\r\n            finish = moment(sprint.estimated_finish).format(prettyDate)\r\n\r\n            estimatedDateRange = \"#{start}-#{finish}\"\r\n\r\n            ctx = {\r\n                name: sprint.name\r\n                taskboardUrl: taskboardUrl\r\n                estimatedDateRange: estimatedDateRange\r\n                closedPoints: sprint.closed_points or 0\r\n                totalPoints: sprint.total_points or 0\r\n                isVisible: isVisible()\r\n                isEditable: isEditable()\r\n            }\r\n\r\n            templateScope = $scope.$new()\r\n\r\n            _.assign(templateScope, ctx)\r\n\r\n            compiledTemplate = $compile(template)(templateScope)\r\n            $el.html(compiledTemplate)\r\n\r\n        $scope.$watch \"sprint\", (sprint) ->\r\n            render(sprint)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n    }\r\n\r\nmodule.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\"\r\n                                           BacklogSprintHeaderDirective])\r\n\r\n\r\n#############################################################################\r\n## Toggle Closed Sprints Directive\r\n#############################################################################\r\n\r\nToggleExcludeClosedSprintsVisualization = ($rootscope, $loading, $translate) ->\r\n    excludeClosedSprints = true\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        # insert loading wrapper\r\n        loadingElm = $(\"<div>\")\r\n        $el.after(loadingElm)\r\n\r\n        currentLoading = null\r\n\r\n        # Event Handlers\r\n        $el.on \"click\", (event) ->\r\n            event.preventDefault()\r\n            excludeClosedSprints  = not excludeClosedSprints\r\n\r\n            currentLoading = $loading()\r\n                .target(loadingElm)\r\n                .start()\r\n\r\n            if excludeClosedSprints\r\n                $rootscope.$broadcast(\"backlog:unload-closed-sprints\")\r\n            else\r\n                $rootscope.$broadcast(\"backlog:load-closed-sprints\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $scope.$on \"closed-sprints:reloaded\", (ctx, sprints) ->\r\n            if currentLoading\r\n                currentLoading.finish()\r\n\r\n            if sprints.length > 0\r\n                key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\"\r\n            else\r\n                key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\"\r\n\r\n            text = $translate.instant(key)\r\n\r\n            $el.find(\".text\").text(text)\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\",\r\n                                                               ToggleExcludeClosedSprintsVisualization])\r\n\r\nSprintDirective = (avatarService) ->\r\n    return {\r\n        templateUrl: 'backlog/sprint.html'\r\n        scope: {\r\n            sprint: '=',\r\n            project: '=',\r\n        }\r\n    }\r\n\r\nSprintDirective.$inject = []\r\n\r\nmodule.directive(\"tgSprint\", SprintDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoggleText = @.taiga.toggleText\r\nscopeDefer = @.taiga.scopeDefer\r\nbindOnce = @.taiga.bindOnce\r\ngroupBy = @.taiga.groupBy\r\ntimeout = @.taiga.timeout\r\n\r\nmodule = angular.module(\"taigaTaskboard\")\r\n\r\n#############################################################################\r\n## Sprint burndown chart directive\r\n#############################################################################\r\n\r\nSprintChartDirective = ($translate)->\r\n    redrawChart = (element, dataToDraw) ->\r\n        width = element.width()\r\n        element.height(240)\r\n\r\n        days = _.map(dataToDraw, (x) -> moment.utc(x.day))\r\n\r\n        data = []\r\n        data.unshift({\r\n            data: _.zip(days, _.map(dataToDraw, (d) -> d.open_points))\r\n            lines:\r\n                fillColor : \"rgba(147,196,0,0.2)\"\r\n        })\r\n        data.unshift({\r\n            data: _.zip(days, _.map(dataToDraw, (d) -> d.optimal_points))\r\n            lines:\r\n                fillColor : \"rgba(200,201,196,0.2)\"\r\n        })\r\n\r\n        options =\r\n            grid:\r\n                borderWidth: { top: 0, right: 1, left:0, bottom: 0 }\r\n                borderColor: \"#D8DEE9\"\r\n                color: \"#D8DEE9\"\r\n                hoverable: true\r\n                margin: { top: 0, right: 30, left: 5, bottom: 5 }\r\n            xaxis:\r\n                tickSize: [1, \"day\"]\r\n                min: days[0]\r\n                max: _.last(days)\r\n                mode: \"time\"\r\n                daysNames: days\r\n                axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\")\r\n                axisLabelUseCanvas: true\r\n                axisLabelFontSizePixels: 12\r\n                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif'\r\n                axisLabelPadding: 5\r\n            yaxis:\r\n                min: 0\r\n                axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\")\r\n                axisLabelUseCanvas: true\r\n                axisLabelFontSizePixels: 12\r\n                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif'\r\n                axisLabelPadding: 5\r\n            series:\r\n                shadowSize: 0\r\n                lines:\r\n                    show: true\r\n                    fill: true\r\n                points:\r\n                    show: true\r\n                    fill: true\r\n                    radius: 4\r\n                    lineWidth: 2\r\n            colors: [\r\n                \"rgba(216,222,233,1)\"\r\n                \"rgba(168,228,64,1)\"\r\n            ]\r\n            tooltip: true\r\n            tooltipOpts:\r\n                content: (label, xval, yval, flotItem) ->\r\n                    formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"))\r\n                    roundedValue = Math.round(yval * 10) / 10\r\n\r\n                    if flotItem.seriesIndex == 1\r\n                        return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\r\n                            formattedDate: formattedDate,\r\n                            roundedValue: roundedValue\r\n                        })\r\n\r\n                    else\r\n                        return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\r\n                            formattedDate: formattedDate,\r\n                            roundedValue: roundedValue\r\n                        })\r\n\r\n        element.empty()\r\n        element.plot(data, options).data(\"plot\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        element = angular.element($el)\r\n\r\n        $scope.$on \"resize\", ->\r\n            redrawChart(element, $scope.stats.days) if $scope.stats\r\n\r\n        $scope.$on \"taskboard:graph:toggle-visibility\", ->\r\n            $el.parent().toggleClass('open')\r\n\r\n            # fix chart overflow\r\n            timeout(100, ->\r\n                redrawChart(element, $scope.stats.days) if $scope.stats\r\n            )\r\n\r\n        $scope.$watch 'stats', (value) ->\r\n            if not $scope.stats?\r\n                return\r\n            redrawChart(element, $scope.stats.days)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgSprintChart\", [\"$translate\", SprintChartDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\ntrim = @.taiga.trim\r\n\r\n\r\nmodule = angular.module(\"taigaTaskboard\")\r\n\r\n\r\nCreateBulkTasksDirective = ($repo, $rs, $rootscope, $loading, lightboxService, $model) ->\r\n    link = ($scope, $el, attrs) ->\r\n        $scope.form = {data: \"\", usId: null}\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley()\r\n            if not form.validate()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            data = $scope.form.data\r\n            projectId = $scope.projectId\r\n            sprintId = $scope.form.sprintId\r\n            usId = $scope.form.usId\r\n\r\n            promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data)\r\n            promise.then (result) ->\r\n                result =  _.map(result, (x) => $model.make_model('tasks', x))\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"taskform:bulk:success\", result)\r\n                lightboxService.close($el)\r\n\r\n            # TODO: error handling\r\n            promise.then null, ->\r\n                currentLoading.finish()\r\n\r\n        $scope.$on \"taskform:bulk\", (ctx, sprintId, usId)->\r\n            lightboxService.open($el)\r\n            $scope.form = {data: \"\", sprintId: sprintId, usId: usId}\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgLbCreateBulkTasks\", [\r\n    \"$tgRepo\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"$tgLoading\",\r\n    \"lightboxService\",\r\n    \"$tgModel\",\r\n    CreateBulkTasksDirective\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntoggleText = @.taiga.toggleText\r\nmixOf = @.taiga.mixOf\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nscopeDefer = @.taiga.scopeDefer\r\ntimeout = @.taiga.timeout\r\nbindMethods = @.taiga.bindMethods\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nmodule = angular.module(\"taigaTaskboard\")\r\n\r\n\r\n#############################################################################\r\n## Taskboard Controller\r\n#############################################################################\r\n\r\nclass TaskboardController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"tgResources\"\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"tgAppMetaService\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\"\r\n        \"$tgEvents\"\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgTaskboardTasks\",\r\n        \"tgTaskboardIssues\",\r\n        \"$tgStorage\",\r\n        \"tgFilterRemoteStorageService\",\r\n        \"tgLightboxFactory\",\r\n        \"$timeout\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    excludePrefix: \"exclude_\"\r\n    filterCategories: [\r\n        \"status\",\r\n        \"assigned_to\",\r\n        \"owner\",\r\n        \"role\",\r\n        \"tags\"\r\n    ]\r\n\r\n    validQueryParams: [\r\n        'exclude_status',\r\n        'status',\r\n        'exclude_assigned_to',\r\n        'assigned_to',\r\n        'exclude_role',\r\n        'role',\r\n        'exclude_owner',\r\n        'owner',\r\n        'order_by',\r\n        'tags'\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @appMetaService, @location, @navUrls,\r\n                  @events, @analytics, @translate, @errorHandlingService, @taskboardTasksService,\r\n                  @taskboardIssuesService, @storage, @filterRemoteStorageService, @lightboxFactory, @timeout, @projectService) ->\r\n        bindMethods(@)\r\n        @taskboardTasksService.reset()\r\n        @scope.userstories = []\r\n        @.openFilter = false\r\n        @.filterQ = ''\r\n        @.backToBacklogUrl = @navUrls.resolve('project-backlog', {\r\n            project: @projectService.project.get('slug'),\r\n            ref: @params.ref\r\n        })\r\n\r\n        return if @.applyStoredFilters(@params.pslug, \"tasks-filters\", @.validQueryParams)\r\n\r\n        @scope.sectionName = @translate.instant(\"TASKBOARD.SECTION_NAME\")\r\n        @.initializeEventHandlers()\r\n\r\n        taiga.defineImmutableProperty @.scope, \"usTasks\", () =>\r\n            return @taskboardTasksService.usTasks\r\n\r\n        taiga.defineImmutableProperty @.scope, \"taskMap\", () =>\r\n            return @taskboardTasksService.taskMap\r\n\r\n        taiga.defineImmutableProperty @.scope, \"milestoneIssues\", () =>\r\n            return @taskboardIssuesService.milestoneIssues\r\n\r\n        taiga.defineImmutableProperty @.scope, \"tasksByUs\", () =>\r\n            return @taskboardTasksService.tasksByUs\r\n\r\n        @scope.issues = []\r\n        @scope.showTags = true\r\n\r\n        @scope.$watch 'milestoneIssues', () =>\r\n            if @scope.milestoneIssues\r\n                @scope.issues = @scope.milestoneIssues.toJS().map (milestoneIssue) =>\r\n                    return @taskboardIssuesService.issuesRaw.find (rawIssue) => milestoneIssue.model.id == rawIssue.id\r\n            else\r\n                @scope.issues = []\r\n\r\n    getQueryParams: () ->\r\n        return _.pick(_.clone(@location.search()), @.validQueryParams)\r\n\r\n    firstLoad: () ->\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then => @._setMeta()\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    setZoom: (zoomLevel, zoom) ->\r\n        if @.zoomLevel == Number(zoomLevel)\r\n            return null\r\n\r\n        @.isFirstLoad = !@.zoomLevel\r\n\r\n        previousZoomLevel = @.zoomLevel\r\n\r\n        @.zoomLevel = zoomLevel\r\n        @.zoom = zoom\r\n\r\n        if @.isFirstLoad\r\n            @.firstLoad().then () =>\r\n                @.isFirstLoad = false\r\n                @taskboardTasksService.resetFolds()\r\n\r\n        else if @.zoomLevel > 1 && previousZoomLevel <= 1\r\n            @.zoomLoading = true\r\n            @q.all([@.loadTasks(), @.loadIssues()]).then () =>\r\n                @.zoomLoading = false\r\n                @taskboardTasksService.resetFolds()\r\n\r\n    changeQ: (q) ->\r\n        @.filterQ = q\r\n        @.loadTasks()\r\n        @.generateFilters()\r\n\r\n    removeFilter: (filter) ->\r\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\r\n        @.loadTasks()\r\n        @.generateFilters()\r\n\r\n    addFilter: (newFilter) ->\r\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\r\n        @.loadTasks()\r\n        @.generateFilters()\r\n\r\n    selectCustomFilter: (customFilter) ->\r\n        @.replaceAllFilters(customFilter.filter)\r\n        @.loadTasks()\r\n        @.generateFilters()\r\n\r\n    removeCustomFilter: (customFilter) ->\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters').then (userFilters) =>\r\n            delete userFilters[customFilter.id]\r\n\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, 'tasks-custom-filters').then(@.generateFilters)\r\n\r\n    isFilterDataTypeSelected: (filterDataType) ->\r\n        for filter in @.selectedFilters\r\n            if (filter['dataType'] == filterDataType)\r\n                return true\r\n        return false\r\n\r\n    saveCustomFilter: (name) ->\r\n        filters = {}\r\n        urlfilters = @.getQueryParams()\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            filters[key] = urlfilters[key]\r\n            filters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters').then (userFilters) =>\r\n            userFilters[name] = filters\r\n\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, 'tasks-custom-filters').then(@.generateFilters)\r\n\r\n    generateFilters: ->\r\n        urlfilters = @.getQueryParams()\r\n        @.storeFilters(@params.pslug, urlfilters, \"tasks-filters\")\r\n\r\n        loadFilters = {}\r\n        loadFilters.project = @scope.projectId\r\n        loadFilters.milestone = @scope.sprintId\r\n\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            loadFilters[key] = urlfilters[key]\r\n            loadFilters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        return @q.all([\r\n            @rs.tasks.filtersData(loadFilters),\r\n            @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters')\r\n        ]).then (result) =>\r\n            data = result[0]\r\n            customFiltersRaw = result[1]\r\n            dataCollection = {}\r\n\r\n            dataCollection.status = _.map data.statuses, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.tags = _.map data.tags, (it) ->\r\n                it.id = it.name\r\n\r\n                return it\r\n\r\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\r\n                return tag.count > 0\r\n\r\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.full_name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.role = _.map data.roles, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.owner = _.map data.owners, (it) ->\r\n                it.id = it.id.toString()\r\n                it.name = it.full_name\r\n\r\n                return it\r\n\r\n            @.selectedFilters = []\r\n\r\n            for key in @.filterCategories\r\n                excludeKey = @.excludePrefix.concat(key)\r\n                if loadFilters[key]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n                if loadFilters[excludeKey]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n\r\n            @.filters = [\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\r\n                    dataType: \"status\",\r\n                    content: dataCollection.status\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\r\n                    dataType: \"tags\",\r\n                    content: dataCollection.tags,\r\n                    hideEmpty: true,\r\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\r\n                    dataType: \"assigned_to\",\r\n                    content: dataCollection.assigned_to\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\r\n                    dataType: \"role\",\r\n                    content: dataCollection.role\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\r\n                    dataType: \"owner\",\r\n                    content: dataCollection.owner\r\n                }\r\n            ]\r\n\r\n            @.customFilters = []\r\n            _.forOwn customFiltersRaw, (value, key) =>\r\n                @.customFilters.push({id: key, name: key, filter: value})\r\n\r\n    _setMeta: ->\r\n        prettyDate = @translate.instant(\"BACKLOG.SPRINTS.DATE\")\r\n\r\n        title = @translate.instant(\"TASKBOARD.PAGE_TITLE\", {\r\n            projectName: @scope.project.name\r\n            sprintName: @scope.sprint.name\r\n        })\r\n        description =  @translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\r\n            projectName: @scope.project.name\r\n            sprintName: @scope.sprint.name\r\n            startDate: moment(@scope.sprint.estimated_start).format(prettyDate)\r\n            endDate: moment(@scope.sprint.estimated_finish).format(prettyDate)\r\n            completedPercentage: @scope.stats.completedPercentage or \"0\"\r\n            completedPoints: @scope.stats.completedPointsSum or \"--\"\r\n            totalPoints: @scope.stats.totalPointsSum or \"--\"\r\n            openTasks: @scope.stats.openTasks or \"--\"\r\n            totalTasks: @scope.stats.total_tasks or \"--\"\r\n        })\r\n\r\n        @appMetaService.setAll(title, description)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.$on \"taskform:bulk:success\", (event, tasks) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardTasksService.add(tasks)\r\n\r\n            @analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1)\r\n\r\n        @scope.$on \"taskform:new:success\", (event, task) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardTasksService.add(task)\r\n\r\n            @analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1)\r\n\r\n        @scope.$on \"taskform:edit:success\", (event, task) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardTasksService.replaceModel(task)\r\n\r\n        @scope.$on \"issueform:new:success\", (event, issue) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardIssuesService.add(issue)\r\n\r\n            @analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1)\r\n\r\n        @scope.$on \"issueform:add:success\", (event, issue) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardIssuesService.add(issue)\r\n\r\n        @scope.$on \"issueform:edit:success\", (event, issue) =>\r\n            @.refreshTagsColors().then () =>\r\n                @taskboardIssuesService.replaceModel(issue)\r\n\r\n        @scope.$on \"taskboard:task:deleted\", (event, task) =>\r\n            @.loadTasks()\r\n\r\n        @scope.$on \"taskboard:issue:deleted\", (event, issue) =>\r\n            @.loadIssues()\r\n\r\n        @scope.$on(\"taskboard:task:move\", @.taskMove)\r\n        @scope.$on(\"assigned-to:added\", @.onAssignedToChanged)\r\n\r\n        @scope.$on \"taskboard:items:move\", (event, itemsMoved) =>\r\n            if itemsMoved.uss\r\n                @.firstLoad()\r\n            else\r\n                @.loadTasks() if itemsMoved.tasks\r\n                @.loadIssues() if itemsMoved.issues\r\n\r\n    onAssignedToChanged: (ctx, userid, model) ->\r\n        if model.getName() == 'tasks'\r\n            model.assigned_to = userid\r\n            @taskboardTasksService.replaceModel(model)\r\n\r\n            @repo.save(model).then =>\r\n                @.generateFilters()\r\n                if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\r\n                    @.loadTasks()\r\n        if model.getName() == 'issues'\r\n            model.assigned_to = userid\r\n            @taskboardIssuesService.replaceModel(model)\r\n\r\n            @repo.save(model).then =>\r\n                @.generateFilters()\r\n                if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\r\n                    @.loadIssues()\r\n\r\n    initializeSubscription: ->\r\n        routingKey = \"changes.project.#{@scope.projectId}.tasks\"\r\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\r\n            @.loadTaskboard())\r\n\r\n        routingKey = \"changes.project.#{@scope.projectId}.issues\"\r\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\r\n            @.loadIssues())\r\n\r\n        routingKey1 = \"changes.project.#{@scope.projectId}.userstories\"\r\n        @events.subscribe @scope, routingKey1, (message) =>\r\n            @.refreshTagsColors()\r\n            @.loadSprintStats()\r\n            @.loadSprint()\r\n\r\n    loadProject: ->\r\n        return @rs.projects.get(@scope.projectId).then (project) =>\r\n            if not project.is_backlog_activated\r\n                @errorHandlingService.permissionDenied()\r\n\r\n            @scope.project = project\r\n            # Not used at this momment\r\n            @scope.pointsList = _.sortBy(project.points, \"order\")\r\n            @scope.pointsById = groupBy(project.points, (e) -> e.id)\r\n            @scope.roleById = groupBy(project.roles, (e) -> e.id)\r\n            @scope.taskStatusList = _.sortBy(project.task_statuses, \"order\")\r\n            @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\r\n            @scope.usStatusById = groupBy(project.us_statuses, (e) -> e.id)\r\n            @scope.issueStatusById = groupBy(project.issue_statuses, (e) -> e.id)\r\n\r\n            @scope.$emit('project:loaded', project)\r\n\r\n            @.fillUsersAndRoles(project.members, project.roles)\r\n\r\n            return project\r\n\r\n    loadSprintStats: ->\r\n        return @rs.sprints.stats(@scope.projectId, @scope.sprintId).then (stats) =>\r\n            totalPointsSum =_.reduce(_.values(stats.total_points), ((res, n) -> res + n), 0)\r\n            completedPointsSum = _.reduce(_.values(stats.completed_points), ((res, n) -> res + n), 0)\r\n            remainingPointsSum = totalPointsSum - completedPointsSum\r\n            remainingTasks = stats.total_tasks - stats.completed_tasks\r\n            @scope.stats = stats\r\n            @scope.stats.totalPointsSum = totalPointsSum\r\n            @scope.stats.completedPointsSum = completedPointsSum\r\n            @scope.stats.remainingPointsSum = remainingPointsSum\r\n            @scope.stats.remainingTasks = remainingTasks\r\n            if stats.totalPointsSum\r\n                @scope.stats.completedPercentage = Math.round(100*stats.completedPointsSum/stats.totalPointsSum)\r\n            else\r\n                @scope.stats.completedPercentage = 0\r\n\r\n            @scope.stats.openTasks = stats.total_tasks - stats.completed_tasks\r\n            return stats\r\n\r\n    refreshTagsColors: ->\r\n        return @rs.projects.tagsColors(@scope.projectId).then (tags_colors) =>\r\n            @scope.project.tags_colors = tags_colors._attrs\r\n\r\n    loadSprint: ->\r\n        return @rs.sprints.get(@scope.projectId, @scope.sprintId).then (sprint) =>\r\n            @scope.sprint = sprint\r\n            @scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\")\r\n\r\n            @taskboardTasksService.setUserstories(@scope.userstories)\r\n\r\n            @rootscope.$broadcast(\"taskboard:userstories:loaded\", @scope.userstories)\r\n            return sprint\r\n\r\n    loadIssues: ->\r\n        params = {}\r\n\r\n        if @.zoomLevel > 1\r\n            params.include_attachments = 1\r\n\r\n        locationParams = @.getQueryParams()\r\n        params = _.merge params, locationParams\r\n\r\n        return @rs.issues.listInProject(@scope.projectId, @scope.sprintId, params).then (issues) =>\r\n            @taskboardIssuesService.init(@scope.project, @scope.usersById, @scope.issueStatusById)\r\n            @taskboardIssuesService.set(issues)\r\n            @.initIssues = true\r\n\r\n    loadTasks: ->\r\n        params = {}\r\n\r\n        if @.zoomLevel > 1\r\n            params.include_attachments = 1\r\n\r\n        locationParams = @.getQueryParams()\r\n        params = _.merge params, locationParams\r\n        params.q = @.filterQ\r\n\r\n        return @rs.tasks.list(@scope.projectId, @scope.sprintId, null, params).then (tasks) =>\r\n            @.notFoundTasks = false\r\n\r\n            if !tasks.length && ((@.filterQ && @.filterQ.length) || Object.keys(locationParams).length)\r\n                @.notFoundTasks = true\r\n\r\n            @taskboardTasksService.init(@scope.project, @scope.usersById)\r\n            @taskboardTasksService.set(tasks)\r\n\r\n    loadTaskboard: ->\r\n        return @q.all([\r\n            @.refreshTagsColors(),\r\n            @.loadSprintStats(),\r\n            @.loadSprint().then(=>\r\n                @.loadTasks()\r\n                @.loadIssues()\r\n            )\r\n        ])\r\n\r\n    loadInitialData: ->\r\n        @.initialLoad = false\r\n        @.initIssues = false\r\n\r\n        params = {\r\n            pslug: @params.pslug\r\n            sslug: @params.sslug\r\n        }\r\n\r\n        promise = @repo.resolve(params).then (data) =>\r\n            @scope.projectId = data.project\r\n            @scope.sprintId = data.milestone\r\n            @.initializeSubscription()\r\n            return data\r\n\r\n        return promise.then(=> @.loadProject()).then =>\r\n            @.generateFilters()\r\n\r\n            if @rs.issues.getSprintShowTags(@scope.projectId) == false\r\n                @scope.showTags = false\r\n\r\n            return @.loadTaskboard().then () =>\r\n                @timeout () =>\r\n                    @.initialLoad = true\r\n                , 0, false\r\n                @.setRolePoints()\r\n\r\n    toggleTags: (tags) ->\r\n        @rs.issues.storeSprintShowTags(@scope.projectId, tags)\r\n\r\n    showPlaceHolder: (statusId, usId) ->\r\n        if !@taskboardTasksService.tasksRaw.length\r\n            if @scope.taskStatusList[0].id == statusId &&\r\n              (!@scope.userstories.length || @scope.userstories[0].id == usId)\r\n                return true\r\n\r\n        return false\r\n\r\n    editTask: (id) ->\r\n        task = @.taskboardTasksService.getTask(id)\r\n\r\n        task = task.set('loading-edit', true)\r\n        @taskboardTasksService.replace(task)\r\n\r\n        @rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref']))\r\n        .then (editingTask) =>\r\n            @rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project']))\r\n            .then (attachments) =>\r\n                @rootscope.$broadcast(\"genericform:edit\", {\r\n                    'objType': 'task',\r\n                    'obj': editingTask,\r\n                    'project': @scope.project,\r\n                    'sprintId': @scope.sprintId,\r\n                    'attachments': attachments.toJS()\r\n                })\r\n\r\n                task = task.set('loading-edit', false)\r\n                @taskboardTasksService.replace(task)\r\n\r\n    editIssue: (id) ->\r\n        issue = @.taskboardIssuesService.getIssue(id)\r\n        issue = issue.set('loading-edit', true)\r\n\r\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\r\n        .then (editingIssue) =>\r\n            @rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project']))\r\n            .then (attachments) =>\r\n                @rootscope.$broadcast(\"genericform:edit\", {\r\n                    'objType': 'issue',\r\n                    'obj': editingIssue,\r\n                    'project': @scope.project,\r\n                    'sprintId': @scope.sprintId,\r\n                    'attachments': attachments.toJS()\r\n                })\r\n                issue = issue.set('loading-edit', false)\r\n\r\n    deleteTask: (id) ->\r\n        task = @.taskboardTasksService.getTask(id)\r\n        task = task.set('loading-delete', true)\r\n\r\n        @rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref']))\r\n        .then (deletingTask) =>\r\n            task = task.set('loading-delete', false)\r\n            title = @translate.instant(\"TASK.TITLE_DELETE_ACTION\")\r\n            message = deletingTask.subject\r\n            @confirm.askOnDelete(title, message).then (askResponse) =>\r\n                promise = @repo.remove(deletingTask)\r\n                promise.then =>\r\n                    @scope.$broadcast(\"taskboard:task:deleted\")\r\n                    askResponse.finish()\r\n                promise.then null, ->\r\n                    askResponse.finish(false)\r\n                    @confirm.notify(\"error\")\r\n\r\n    deleteIssue: (id) ->\r\n        issue = @.taskboardIssuesService.getIssue(id)\r\n        issue = issue.set('loading-delete', true)\r\n\r\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\r\n        .then (deletingIssue) =>\r\n            issue = issue.set('loading-delete', false)\r\n            title = @translate.instant(\"ISSUES.ACTION_DELETE\")\r\n            message = deletingIssue.subject\r\n            @confirm.askOnDelete(title, message).then (askResponse) =>\r\n                promise = @repo.remove(deletingIssue)\r\n                promise.then =>\r\n                    @scope.$broadcast(\"taskboard:issue:deleted\")\r\n                    askResponse.finish()\r\n                promise.then null, ->\r\n                    askResponse.finish(false)\r\n                    @confirm.notify(\"error\")\r\n\r\n    removeIssueFromSprint: (id) ->\r\n        issue = @.taskboardIssuesService.getIssue(id)\r\n        issue = issue.set('loading-delete', true)\r\n\r\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\r\n        .then (removingIssue) =>\r\n            issue = issue.set('loading-delete', false)\r\n            title = @translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\")\r\n            message = @translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\")\r\n            message = @translate.instant(\r\n                \"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\",\r\n                {sprintName: @scope.sprint.name}\r\n            )\r\n\r\n            @confirm.ask(title, null, message).then (askResponse) =>\r\n                removingIssue.milestone = null\r\n                promise = @repo.save(removingIssue)\r\n                promise.then =>\r\n                    @.taskboardIssuesService.remove(removingIssue)\r\n                    askResponse.finish()\r\n                promise.then null, ->\r\n                    askResponse.finish(false)\r\n                    @confirm.notify(\"error\")\r\n\r\n    taskMove: (ctx, task, oldStatusId, usId, statusId, order) ->\r\n        @scope.movingTask = true\r\n        task = @taskboardTasksService.getTaskModel(task.get('id'))\r\n\r\n        moveUpdateData = @taskboardTasksService.move(task.id, usId, statusId, order)\r\n\r\n        params = {\r\n            status__is_archived: false,\r\n            include_attachments: true,\r\n        }\r\n\r\n        options = {\r\n            headers: {\r\n                \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\r\n            }\r\n        }\r\n\r\n        promise = @repo.save(task, true, params, options, true).then (result) =>\r\n            if result[0] and result[0].user_story\r\n                @.reloadUserStory(result[0].user_story)\r\n\r\n            @scope.movingTask = false\r\n            headers = result[1]\r\n\r\n            if headers && headers['taiga-info-order-updated']\r\n                order = JSON.parse(headers['taiga-info-order-updated'])\r\n                @taskboardTasksService.assignOrders(order)\r\n\r\n            @.loadSprintStats()\r\n            @.generateFilters()\r\n            if @.isFilterDataTypeSelected('status')\r\n                @.loadTasks()\r\n\r\n    reloadUserStory: (userStoryId) ->\r\n        @rs.userstories.get(@scope.project.id, userStoryId).then (us) =>\r\n            @scope.userstories = _.map(@scope.userstories, (x) -> if x.id == us.id then us else x)\r\n\r\n    ## Template actions\r\n    addNewTask: (type, us) ->\r\n        switch type\r\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new\",\r\n                {\r\n                    'objType': 'task',\r\n                    'project': @scope.project,\r\n                    'sprintId': @scope.sprintId,\r\n                    'usId': us?.id\r\n                })\r\n            when \"bulk\" then @rootscope.$broadcast(\"taskform:bulk\", @scope.sprintId, us?.id)\r\n\r\n    addNewIssue: (type, us) ->\r\n        switch type\r\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new-or-existing\",\r\n                {\r\n                    objType: 'issue',\r\n                    project: @scope.project,\r\n                    sprintId: @scope.sprintId,\r\n                    relatedField: 'milestone',\r\n                    relatedObjectId: @scope.sprintId,\r\n                    targetName: @scope.sprint.name,\r\n                })\r\n            when \"standard\" then @rootscope.$broadcast(\"taskform:new\", @scope.sprintId, us?.id)\r\n            when \"bulk\" then @rootscope.$broadcast(\"issueform:bulk\", @scope.projectId, @scope.sprintId)\r\n\r\n    toggleFold: (id,  modelName) ->\r\n        if modelName == 'issues'\r\n            @taskboardIssuesService.toggleFold(id)\r\n        else if modelName == 'tasks'\r\n            @taskboardTasksService.toggleFold(id)\r\n\r\n    openUsersSelection: (item) ->\r\n        onClose = (assignedUsers) =>\r\n            userId = assignedUsers.pop() || null\r\n\r\n            if item.getName() == 'tasks'\r\n                item.assigned_to = userId\r\n                @taskboardTasksService.replaceModel(item)\r\n\r\n                @repo.save(item).then =>\r\n                    @.generateFilters()\r\n                    if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\r\n                        @.loadTasks()\r\n\r\n            if item.getName() == 'issues'\r\n                item.assigned_to = userId\r\n                @taskboardIssuesService.replaceModel(item)\r\n\r\n                @repo.save(item).then =>\r\n                    @.generateFilters()\r\n                    if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\r\n                        @.loadIssues()\r\n\r\n        @lightboxFactory.create(\r\n            'tg-lb-select-user',\r\n            {\r\n                \"class\": \"lightbox lightbox-select-user\",\r\n            },\r\n            {\r\n                \"currentUsers\": [item.assigned_to],\r\n                \"activeUsers\": @scope.activeUsers,\r\n                \"onClose\": onClose,\r\n                \"single\": true,\r\n                \"lbTitle\": @translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n            }\r\n        )\r\n\r\n    changeTaskAssignedTo: (id) ->\r\n        task = @taskboardTasksService.getTaskModel(id)\r\n        @.openUsersSelection(task)\r\n\r\n    changeIssueAssignedTo: (id) ->\r\n        issue = @taskboardIssuesService.getIssueModel(id)\r\n        @.openUsersSelection(issue)\r\n\r\n    setRolePoints: () ->\r\n        computableRoles = _.filter(@scope.project.roles, \"computable\")\r\n\r\n        getRole = (roleId) =>\r\n            roleId = parseInt(roleId, 10)\r\n            return _.find computableRoles, (role) -> role.id == roleId\r\n\r\n        getPoint = (pointId) =>\r\n            poitnId = parseInt(pointId, 10)\r\n            return _.find @scope.project.points, (point) -> point.id == pointId\r\n\r\n        pointsByRole = _.reduce @scope.userstories, (result, us, key) =>\r\n            _.forOwn us.points, (pointId, roleId) ->\r\n                role = getRole(roleId)\r\n                point = getPoint(pointId) || { value: 0 }\r\n\r\n                if role\r\n                    if !result[role.id]\r\n                        result[role.id] = role\r\n                        result[role.id].points = 0\r\n\r\n                    result[role.id].points += point.value\r\n\r\n            return result\r\n        , {}\r\n\r\n        @scope.pointsByRole = Object.keys(pointsByRole).map (key) -> return pointsByRole[key]\r\n\r\n    getIssuesOrderBy: ->\r\n        if _.isString(@location.search().order_by)\r\n            return @location.search().order_by\r\n        else\r\n            return \"created_date\"\r\n\r\nmodule.controller(\"TaskboardController\", TaskboardController)\r\n\r\n\r\n#############################################################################\r\n## TaskboardDirective\r\n#############################################################################\r\n\r\nTaskboardDirective = ($rootscope) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $el.on \"click\", \".toggle-analytics-visibility\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            target.toggleClass('active')\r\n            $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\")\r\n\r\n        tableBodyDom = $el.find('[data-js=\"taskboard-table-hscroll\"]')\r\n        tableBodyDom.on \"scroll\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            tableHeaderDom = $el.find(\".taskboard-table-inner\")\r\n            tableHeaderDom.css(\"left\", -1 * target.scrollLeft())\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective])\r\n\r\n#############################################################################\r\n## Taskboard Squish Column Directive\r\n#############################################################################\r\n\r\nTaskboardSquishColumnDirective = (rs) ->\r\n    gridGap = 5\r\n    horizontalPadding = 32\r\n    avatarWidth = 30\r\n    maxColumnWidth = 292\r\n    zoom0ColumnWidth = 182\r\n    minWidth = avatarWidth + horizontalPadding\r\n    maxRows = 3\r\n    firstLoad = false\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$watch \"ctrl.zoom\", () =>\r\n            if firstLoad\r\n                recalculateTaskboardWidth()\r\n\r\n        $scope.$on \"sprint:task:moved\", () =>\r\n            recalculateTaskboardWidth()\r\n\r\n        $scope.$watch \"usTasks\", () ->\r\n            if $scope.project\r\n                $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id)\r\n                $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId)\r\n\r\n                recalculateTaskboardWidth()\r\n\r\n        $scope.foldStatus = (status) ->\r\n            $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id]\r\n            rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded)\r\n\r\n            recalculateTaskboardWidth()\r\n\r\n        $foldStatusArchived = (status) ->\r\n            $scope.foldStatus(status)\r\n\r\n        $scope.foldUs = (rowId) ->\r\n            $scope.usFolded[rowId] = !!!$scope.usFolded[rowId]\r\n            rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded)\r\n\r\n            recalculateTaskboardWidth()\r\n\r\n        getCeilWidth = (usId, statusId) =>\r\n            isStatusFolded = !!$scope.statusesFolded[statusId]\r\n            isUSFolded = !!$scope.usFolded[usId]\r\n\r\n            if usId\r\n                tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size\r\n            else\r\n                tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size\r\n\r\n            if tasks && (isUSFolded || isStatusFolded)\r\n                if isUSFolded\r\n                    columns = Math.ceil(tasks / maxRows)\r\n                    width = avatarWidth * columns + ((columns - 1) * gridGap) + horizontalPadding\r\n                else if isStatusFolded\r\n                    width = avatarWidth\r\n            else\r\n                width = 0\r\n\r\n            return width\r\n\r\n        setStatusColumnWidth = (statusId, width) =>\r\n            column = $el.find(\".squish-status-#{statusId}\")\r\n\r\n            if width < minWidth\r\n                width = minWidth\r\n\r\n            column.css('max-width', width)\r\n            return width\r\n\r\n        recalculateStatusColumnWidth = (statusId) =>\r\n            isStatusFolded = !!$scope.statusesFolded[statusId]\r\n            initialWidth = 0\r\n\r\n            if isStatusFolded\r\n                initialWidth = avatarWidth\r\n            else\r\n                initialWidth = maxColumnWidth\r\n\r\n                if Number($scope.ctrl.zoomLevel) == 0\r\n                    initialWidth = zoom0ColumnWidth\r\n\r\n            #unassigned ceil\r\n            folded = !!$scope.statusesFolded[statusId]\r\n            statusFoldedWidth = getCeilWidth(null, statusId)\r\n\r\n            if statusFoldedWidth < initialWidth\r\n                statusFoldedWidth = initialWidth\r\n\r\n            _.forEach $scope.userstories, (us) ->\r\n                isUSFolded = !!$scope.usFolded[us.id]\r\n                width = getCeilWidth(us.id, statusId)\r\n\r\n                statusFoldedWidth = width if width > statusFoldedWidth\r\n\r\n            return setStatusColumnWidth(statusId, statusFoldedWidth)\r\n\r\n        recalculateTaskboardWidth = () =>\r\n            total = _.reduce $scope.taskStatusList, (acc, status) ->\r\n                return acc + recalculateStatusColumnWidth(status.id) + 5\r\n            , 0\r\n\r\n            $el.find('.taskboard-table-inner').css(\"width\", maxColumnWidth + total)\r\n            if !firstLoad\r\n                requestAnimationFrame () ->\r\n                    $el.addClass('animations')\r\n\r\n            firstLoad = true\r\n\r\n            return\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoggleText = @.taiga.toggleText\r\nscopeDefer = @.taiga.scopeDefer\r\nbindOnce = @.taiga.bindOnce\r\ngroupBy = @.taiga.groupBy\r\n\r\nmodule = angular.module(\"taigaBacklog\")\r\n\r\n\r\n#############################################################################\r\n## Sortable Directive\r\n#############################################################################\r\n\r\nTaskboardSortableDirective = ($repo, $rs, $rootscope, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        unwatch = $scope.$watch \"usTasks\", (usTasks) ->\r\n            return if !usTasks || !usTasks.size\r\n\r\n            unwatch()\r\n\r\n            if not ($scope.project.my_permissions.indexOf(\"modify_task\") > -1)\r\n                return\r\n\r\n            oldParentScope = null\r\n            newParentScope = null\r\n            itemEl = null\r\n            tdom = $el\r\n\r\n            filterError = ->\r\n                text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\")\r\n                $tgConfirm.notify(\"error\", text)\r\n\r\n            deleteElement = (itemEl) ->\r\n                itemEl.off()\r\n                itemEl.remove()\r\n\r\n            containers = _.map $el.find('.taskboard-column'), (item) ->\r\n                return item\r\n\r\n            drake = dragula(containers, {\r\n                copySortSource: false,\r\n                copy: false,\r\n                accepts: (el, target) -> return !$(target).hasClass('taskboard-row-title-box')\r\n                moves: (item) ->\r\n                    return $(item).is('tg-card')\r\n            })\r\n\r\n            initialContainer = null\r\n\r\n            drake.on 'shadow', (item) ->\r\n                $(item).removeClass('folded-dragging')\r\n\r\n            drake.on 'over', (item, container) ->\r\n                if !initialContainer\r\n                    initialContainer = container\r\n                else if container != initialContainer\r\n                    $(container).addClass('target-drop')\r\n\r\n            drake.on 'out', (item, container) ->\r\n                if container != initialContainer\r\n                    $(container).removeClass('target-drop')\r\n\r\n            drake.on 'drag', (item) ->\r\n                oldParentScope = $(item).parent().scope()\r\n\r\n                if $(item).width() == 30\r\n                    $(item).addClass('folded-dragging')\r\n\r\n                if $el.hasClass(\"active-filters\")\r\n                    filterError()\r\n\r\n                    setTimeout (() ->\r\n                        drake.cancel(true)\r\n                    ), 0\r\n\r\n                    return false\r\n\r\n            drake.on 'dragend', (item) ->\r\n                parentEl = $(item).parent()\r\n                itemEl = $(item)\r\n                itemTask = $scope.taskMap.get(Number(item.dataset.id))\r\n                itemIndex = itemEl.index()\r\n                newParentScope = parentEl.scope()\r\n\r\n                oldUsId = if oldParentScope.us then oldParentScope.us.id else null\r\n                oldStatusId = oldParentScope.st.id\r\n                newUsId = if newParentScope.us then newParentScope.us.id else null\r\n                newStatusId = newParentScope.st.id\r\n\r\n                if initialContainer != parentEl\r\n                    $(parentEl).addClass('new')\r\n\r\n                    $(parentEl).one 'animationend', ()  ->\r\n                        $(parentEl).removeClass('new')\r\n\r\n                if newStatusId != oldStatusId or newUsId != oldUsId\r\n                    deleteElement(itemEl)\r\n\r\n                $scope.$apply ->\r\n                    # prevent fold/unfold animation\r\n                    tableBody = $('.taskboard-table-body')\r\n\r\n                    tableBody.addClass('moving')\r\n\r\n                    # wait animation end\r\n                    setTimeout () ->\r\n                        tableBody.removeClass('moving')\r\n                    , 1000\r\n\r\n                    $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex)\r\n\r\n\r\n            scroll = autoScroll([$('.taskboard-table-body')[0]], {\r\n                margin: 100,\r\n                pixels: 30,\r\n                scrollWhenOutside: true,\r\n                autoScroll: () ->\r\n                    return this.down && drake.dragging\r\n            })\r\n\r\n            $scope.$on \"$destroy\", ->\r\n                $el.off()\r\n                drake.destroy()\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgTaskboardSortable\", [\r\n    \"$tgRepo\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"$translate\",\r\n    TaskboardSortableDirective\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass TaskboardIssuesService extends taiga.Service\r\n    @.$inject = []\r\n    constructor: () ->\r\n        @.reset()\r\n\r\n    reset: () ->\r\n        @.foldStatusChanged = {}\r\n        @.issuesRaw = []\r\n\r\n    init: (project, usersById, issueStatusById) ->\r\n        @.issueStatusById = issueStatusById\r\n        @.project = project\r\n        @.usersById = usersById\r\n\r\n    resetFolds: () ->\r\n        @.foldStatusChanged = {}\r\n        @.refresh()\r\n\r\n    toggleFold: (issueId) ->\r\n        @.foldStatusChanged[issueId] = !@.foldStatusChanged[issueId]\r\n        @.refresh()\r\n\r\n    add: (issue) ->\r\n        @.issuesRaw = @.issuesRaw.concat(issue)\r\n        @.refresh()\r\n\r\n    remove: (issue) ->\r\n        for key, item of @.issuesRaw\r\n            if issue.id == item.id\r\n                @.issuesRaw.splice(key, 1)\r\n                @.refresh()\r\n                return\r\n\r\n    set: (issues) ->\r\n        @.issuesRaw = issues\r\n        @.refresh()\r\n\r\n    getIssue: (id) ->\r\n        return @.milestoneIssues.find (issue) -> return issue.get('id') == id\r\n\r\n    getIssueModel: (id) ->\r\n        return _.find @.issuesRaw, (issue) -> return issue.id == id\r\n\r\n    replaceModel: (issue) ->\r\n        @.issuesRaw = _.map @.issuesRaw, (item) ->\r\n            if issue.id == item.id\r\n                return issue\r\n            else\r\n                return item\r\n\r\n        @.refresh()\r\n\r\n    refresh: ->\r\n        issues = []\r\n        for issueModel in @.issuesRaw\r\n            issue = {}\r\n            issue.foldStatusChanged = @.foldStatusChanged[issueModel.id]\r\n            issue.model = issueModel.getAttrs()\r\n            issue.modelName = issueModel.getName()\r\n            issue.id = issueModel.id\r\n            issue.status = @.issueStatusById[issueModel.status]\r\n            issue.images = _.filter issue.model.attachments, (it) -> return !!it.thumbnail_card_url\r\n            issue.assigned_to = @.usersById[issueModel.assigned_to]\r\n            issue.colorized_tags = _.map issue.model.tags, (tag) ->\r\n                return {name: tag[0], color: tag[1]}\r\n\r\n            issues.push(issue)\r\n\r\n        @.milestoneIssues = Immutable.fromJS(issues)\r\n\r\nangular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass TaskboardTasksService extends taiga.Service\r\n    @.$inject = []\r\n    constructor: () ->\r\n        @.reset()\r\n\r\n    reset: () ->\r\n        @.tasksRaw = []\r\n        @.foldStatusChanged = {}\r\n        @.usTasks = Immutable.Map()\r\n        @.tasksByUs = Immutable.Map()\r\n        @.taskMap = Immutable.Map()\r\n\r\n    init: (project, usersById) ->\r\n        @.project = project\r\n        @.usersById = usersById\r\n\r\n    resetFolds: () ->\r\n        @.foldStatusChanged = {}\r\n        @.refresh()\r\n\r\n    toggleFold: (taskId) ->\r\n        @.foldStatusChanged[taskId] = !@.foldStatusChanged[taskId]\r\n        @.refresh()\r\n\r\n    add: (task) ->\r\n        @.tasksRaw = @.tasksRaw.concat(task)\r\n        @.refresh()\r\n\r\n    set: (tasks) ->\r\n        @.tasksRaw = tasks\r\n        @.refreshRawOrder()\r\n        @.refresh()\r\n\r\n    setUserstories: (userstories) ->\r\n        @.userstories = userstories\r\n\r\n    refreshRawOrder: () ->\r\n        @.order = {}\r\n\r\n        @.order[task.id] = task.taskboard_order for task in @.tasksRaw\r\n\r\n    assignOrders: (order) ->\r\n        order = _.invert(order)\r\n        @.order = _.assign(@.order, order)\r\n\r\n        @.refresh()\r\n\r\n    getTask: (id) ->\r\n        return @.taskMap.get(id)\r\n\r\n    replace: (task) ->\r\n        @.taskMap = @.taskMap.set(task.get('id'), task)\r\n\r\n    getTaskModel: (id) ->\r\n        return _.find @.tasksRaw, (task) -> return task.id == id\r\n\r\n    replaceModel: (task) ->\r\n        @.tasksRaw = _.map @.tasksRaw, (it) ->\r\n            if task.id == it.id\r\n                return task\r\n            else\r\n                return it\r\n\r\n        @.refresh()\r\n\r\n    move: (id, usId, statusId, index) ->\r\n        task = @.getTaskModel(id)\r\n\r\n        taskByUsStatus = _.filter @.tasksRaw, (task) =>\r\n            return task.status == statusId && task.user_story == usId\r\n\r\n        taskByUsStatus = _.sortBy taskByUsStatus, (it) => @.order[it.id]\r\n\r\n        taksWithoutMoved = _.filter taskByUsStatus, (it) => it.id != id\r\n        beforeDestination = _.slice(taksWithoutMoved, 0, index)\r\n        afterDestination = _.slice(taksWithoutMoved, index)\r\n\r\n        setOrders = {}\r\n\r\n        previous = beforeDestination[beforeDestination.length - 1]\r\n\r\n        previousWithTheSameOrder = _.filter beforeDestination, (it) =>\r\n            @.order[it.id] == @.order[previous.id]\r\n\r\n        if previousWithTheSameOrder.length > 1\r\n            for it in previousWithTheSameOrder\r\n                setOrders[it.id] = @.order[it.id]\r\n\r\n        if !previous\r\n            @.order[task.id] = 0\r\n        else if previous\r\n            @.order[task.id] = @.order[previous.id] + 1\r\n\r\n        for it, key in afterDestination\r\n            @.order[it.id] = @.order[task.id] + key + 1\r\n\r\n        task.status = statusId\r\n        task.user_story = usId\r\n        task.taskboard_order = @.order[task.id]\r\n\r\n        @.refresh()\r\n\r\n        return {\"task_id\": task.id, \"order\": @.order[task.id], \"set_orders\": setOrders}\r\n\r\n    refresh: ->\r\n        if !@.project\r\n            return\r\n\r\n        @.tasksRaw = _.sortBy @.tasksRaw, (it) => @.order[it.id]\r\n\r\n        tasks = @.tasksRaw\r\n        taskStatusList = _.sortBy(@.project.task_statuses, \"order\")\r\n\r\n        usTasks = {}\r\n\r\n        # Iterate over all userstories and\r\n        # null userstory for unassigned tasks\r\n        for us in _.union(@.userstories, [{id:null}])\r\n            usTasks[us.id] = {}\r\n            for status in taskStatusList\r\n                usTasks[us.id][status.id] = []\r\n\r\n        for taskModel in tasks\r\n            if usTasks[taskModel.user_story]? and usTasks[taskModel.user_story][taskModel.status]?\r\n                task = {}\r\n\r\n                if !@.tasksByUs.get(taskModel.user_story)\r\n                    @.tasksByUs = @.tasksByUs.set(taskModel.user_story, Immutable.fromJS([taskModel.id]))\r\n                else\r\n                    @.tasksByUs = @.tasksByUs.set(taskModel.user_story, @.tasksByUs.get(taskModel.user_story).push(taskModel.id))\r\n\r\n                model = taskModel.getAttrs()\r\n\r\n                task.foldStatusChanged = @.foldStatusChanged[taskModel.id]\r\n                task.model = model\r\n                task.images = _.filter model.attachments, (it) -> return !!it.thumbnail_card_url\r\n                task.id = taskModel.id\r\n                task.assigned_to = @.usersById[taskModel.assigned_to]\r\n                task.colorized_tags = _.map task.model.tags, (tag) =>\r\n                    return {name: tag[0], color: tag[1]}\r\n\r\n                @.taskMap = @.taskMap.set(task.id, Immutable.fromJS(task))\r\n                usTasks[taskModel.user_story][taskModel.status].push(task.id)\r\n\r\n        @.usTasks = Immutable.fromJS(usTasks)\r\n\r\nangular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass KanbanUserstoriesService extends taiga.Service\r\n    @.$inject = [\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@translate) ->\r\n        @.reset()\r\n\r\n    reset: (resetSwimlanesList = true, resetArchivedStatus = true, resetHideStatud = true) ->\r\n        @.userstoriesRaw = []\r\n        @.swimlanes = []\r\n        @.foldStatusChanged = {}\r\n        @.usByStatus = Immutable.Map()\r\n        @.usMap = Immutable.Map()\r\n        @.usByStatusSwimlanes = Immutable.Map()\r\n\r\n        if resetHideStatud\r\n            @.statusHide = []\r\n\r\n        if resetArchivedStatus\r\n            @.archivedStatus = []\r\n\r\n        if resetSwimlanesList\r\n            @.swimlanesList = Immutable.List()\r\n\r\n    init: (project, swimlanes, usersById) ->\r\n        @.project = project\r\n        @.swimlanes = swimlanes\r\n        @.usersById = usersById\r\n\r\n    resetFolds: () ->\r\n        @.foldStatusChanged = {}\r\n\r\n    toggleFold: (usId) ->\r\n        @.foldStatusChanged[usId] = !@.foldStatusChanged[usId]\r\n        @.refreshUserStory(usId)\r\n\r\n    set: (userstories) ->\r\n        @.userstoriesRaw = userstories\r\n        @.refreshRawOrder()\r\n        @.refresh()\r\n\r\n    initUsByStatusList: (userstories) ->\r\n        for key, usModel of userstories\r\n            status = String(usModel.status)\r\n\r\n            if (!@.usByStatus.has(status))\r\n                @.usByStatus = @.usByStatus.set(status, Immutable.List())\r\n\r\n    remove: (usModel) ->\r\n        @.userstoriesRaw = @.userstoriesRaw.filter (it) => it.id != usModel.id\r\n\r\n        delete @.order[usModel.id]\r\n\r\n        status = String(usModel.status)\r\n\r\n        @.usMap = @.usMap.delete(usModel.id)\r\n\r\n        @.usByStatus = @.usByStatus.set(\r\n            status,\r\n            @.usByStatus.get(status)\r\n            .filter((id) => id != usModel.id)\r\n        )\r\n\r\n        @.refreshSwimlanes()\r\n\r\n    # don't call refresh to prevent unnecessary mutations in every single us\r\n    add: (usList) ->\r\n        if !Array.isArray(usList)\r\n            usList = [usList]\r\n\r\n        usList = _.sortBy usList, ['kanban_order']\r\n\r\n        @.userstoriesRaw = @.userstoriesRaw.filter (us) =>\r\n            return !usList.find (it) => it.id == us.id\r\n        @.userstoriesRaw = @.userstoriesRaw.concat(usList)\r\n        @.userstoriesRaw = @.userstoriesRaw.map (us) =>\r\n            return us\r\n\r\n        @.refreshRawOrder()\r\n\r\n        @.userstoriesRaw = _.sortBy @.userstoriesRaw, [(it) => @.order[it.id]]\r\n\r\n        for key, usModel of usList\r\n            us = @.retrieveUserStoryData(usModel)\r\n            status = String(usModel.status)\r\n\r\n            if (!@.usByStatus.has(status))\r\n                @.usByStatus = @.usByStatus.set(status, Immutable.List())\r\n\r\n            if !@.usMap.get(usModel.id)\r\n                @.usMap = @.usMap.set(usModel.id, Immutable.fromJS(us))\r\n\r\n                @.usByStatus = @.usByStatus.set(\r\n                    status,\r\n                    @.usByStatus.get(status)\r\n                    .filter((id) => id != usModel.id)\r\n                    .push(usModel.id)\r\n                )\r\n\r\n        @.refreshSwimlanes()\r\n\r\n    addArchivedStatus: (statusId) ->\r\n        @.archivedStatus.push(statusId)\r\n\r\n    isUsInArchivedHiddenStatus: (usId) ->\r\n        # us = @.getUsModel(usId)\r\n        us = @.usMap.get(usId)\r\n        status = us?.getIn(['model', 'status'])\r\n        return @.archivedStatus.indexOf(status) != -1 &&\r\n            @.statusHide.indexOf(status) != -1\r\n\r\n    hideStatus: (statusId) ->\r\n        @.deleteStatus(statusId)\r\n        @.statusHide.push(statusId)\r\n\r\n    showStatus: (statusId) ->\r\n        _.remove @.statusHide, (it) -> return it == statusId\r\n\r\n    getStatus: (statusId, swimlaneId) ->\r\n        return _.filter @.userstoriesRaw, (it) =>\r\n            return it.status == statusId && (!swimlaneId || it.swimlane == swimlaneId)\r\n\r\n    deleteStatus: (statusId) ->\r\n        toDelete = _.filter @.userstoriesRaw, (us) -> return us.status == statusId\r\n        toDelete = _.map (it) -> return it.id\r\n\r\n        @.archived = _.difference(@.archived, toDelete)\r\n\r\n    refreshRawOrder: () ->\r\n        @.order = {}\r\n        if (@.userstoriesRaw)\r\n            @.order[it.id] = it.kanban_order for it in @.userstoriesRaw\r\n\r\n    assignOrders: (order) ->\r\n        @.order = _.assign(@.order, order)\r\n\r\n        @.refresh(false)\r\n\r\n    move: (usList, statusId, swimlaneId, index, previousCard, nextCard) ->\r\n        usByStatus = @.getStatus(statusId, swimlaneId)\r\n        usByStatus = _.sortBy usByStatus, [(it) => @.order[it.id]]\r\n\r\n        if previousCard\r\n            previousUsOrder = @.order[previousCard] + 1\r\n            previousUsIndex = (usByStatus.findIndex (it) => it.id == previousCard) + 1\r\n        else\r\n            previousUsOrder = 0\r\n            previousUsIndex = 0\r\n\r\n        usByStatusWithoutMoved = _.filter usByStatus, (listIt) ->\r\n            return !_.find usList, (moveIt) -> return listIt.id == moveIt\r\n\r\n        afterDestination = _.slice(usByStatusWithoutMoved, previousUsIndex)\r\n\r\n        initialLength = usList.length + 1\r\n\r\n        for usModel, key in afterDestination # increase position of the us after the dragged us's\r\n            @.order[usModel.id] = previousUsOrder + initialLength + key\r\n\r\n        for usId, key in usList\r\n            usModel = @.getUsModel(usId)\r\n            usModel.status = statusId\r\n\r\n            usModel.swimlane = swimlaneId\r\n\r\n            @.order[usModel.id] = previousUsOrder + key\r\n\r\n            us = @.retrieveUserStoryData(usModel)\r\n            @.usMap = @.usMap.set(us.id, Immutable.fromJS(us))\r\n\r\n        @.refresh(false)\r\n\r\n        return {\r\n            statusId: statusId,\r\n            swimlaneId: swimlaneId,\r\n            afterUserstoryId: previousCard,\r\n            beforeUserstoryId: nextCard,\r\n            bulkUserstories: usList,\r\n        }\r\n\r\n    moveToEnd: (id, statusId) ->\r\n        us = @.getUsModel(id)\r\n\r\n        @.order[us.id] = -1\r\n\r\n        us.status = statusId\r\n        us.kanban_order = @.order[us.id]\r\n\r\n        @.refresh(false)\r\n\r\n        return {\"us_id\": us.id, \"order\": -1}\r\n\r\n    replace: (us) ->\r\n        @.usMap = @.usMap.set(us.get('id'), us)\r\n\r\n    replaceModel: (usModel) ->\r\n        @.userstoriesRaw = _.map @.userstoriesRaw, (usItem) ->\r\n            if usModel.id == usItem.id\r\n                return usModel\r\n            else\r\n                return usItem\r\n\r\n        us = @.retrieveUserStoryData(usModel)\r\n        @.usMap = @.usMap.set(usModel.id, Immutable.fromJS(us))\r\n\r\n    getUs: (id) ->\r\n        return @.usMap.get(id)\r\n\r\n    getUsModel: (id) ->\r\n        return _.find @.userstoriesRaw, (us) -> return us.id == id\r\n\r\n    refreshUserStory: (usId) ->\r\n        usModel = @.getUsModel(usId)\r\n        us = @.retrieveUserStoryData(usModel)\r\n        @.usMap = @.usMap.set(usId, Immutable.fromJS(us))\r\n\r\n    retrieveUserStoryData: (usModel) ->\r\n        us = {}\r\n        model = usModel.getAttrs()\r\n\r\n        us.foldStatusChanged = @.foldStatusChanged[usModel.id]\r\n\r\n        us.model = model\r\n        us.images = _.filter model.attachments, (it) -> return !!it.thumbnail_card_url\r\n\r\n        us.id = usModel.id\r\n        us.swimlane = usModel.swimlane\r\n        us.assigned_to = @.usersById[usModel.assigned_to]\r\n        us.assigned_users = []\r\n\r\n        usModel.assigned_users.forEach (assignedUserId) =>\r\n            assignedUserData = @.usersById[assignedUserId]\r\n            if assignedUserData\r\n                us.assigned_users.push(assignedUserData)\r\n\r\n        us.assigned_users_preview = us.assigned_users.slice(0, 3)\r\n\r\n        us.colorized_tags = _.map us.model.tags, (tag) =>\r\n            return {name: tag[0], color: tag[1]}\r\n\r\n        return us\r\n\r\n    refresh: (refreshUsMap = true, refreshSwimlanes = true) ->\r\n        @.userstoriesRaw = _.sortBy @.userstoriesRaw, [(it) => @.order[it.id]]\r\n\r\n        collection = {}\r\n\r\n        for key, usModel of @.userstoriesRaw\r\n            us = @.retrieveUserStoryData(usModel)\r\n            if (!collection[usModel.status])\r\n                collection[usModel.status] = []\r\n\r\n            collection[usModel.status] = collection[usModel.status]\r\n            .filter((id) => id != usModel.id)\r\n\r\n            collection[usModel.status].push(usModel.id)\r\n\r\n            if refreshUsMap\r\n                @.usMap = @.usMap.set(usModel.id, Immutable.fromJS(us))\r\n\r\n        @.usByStatus = Immutable.fromJS(collection)\r\n\r\n        if refreshSwimlanes\r\n            @.refreshSwimlanes()\r\n\r\n    refreshSwimlanes: () ->\r\n        if !@.swimlanes || !@.swimlanes.length\r\n            return\r\n\r\n        @.swimlanesList = Immutable.List()\r\n        @.usByStatusSwimlanes = Immutable.Map()\r\n\r\n        userstoriesNoSwimlane = @.userstoriesRaw.filter (us) =>\r\n            return us.swimlane == null\r\n\r\n        emptySwimlaneExists = @.swimlanesList.filter (swimlane) =>\r\n            return swimlane.id == null\r\n\r\n        if userstoriesNoSwimlane.length && !emptySwimlaneExists.size\r\n            @.swimlanes.forEach (swimlane) =>\r\n                if (!@.swimlanesList.includes(swimlane))\r\n                    @.swimlanesList = @.swimlanesList.push(swimlane)\r\n\r\n            emptySwimlane = {\r\n                id: -1,\r\n                kanban_order: 1,\r\n                name: @translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\r\n            }\r\n            @.swimlanesList = @.swimlanesList.insert(0, emptySwimlane)\r\n\r\n        else\r\n            @.swimlanes.forEach (swimlane) =>\r\n                if (!@.swimlanesList.includes(swimlane))\r\n                    @.swimlanesList = @.swimlanesList.push(swimlane)\r\n\r\n        @.swimlanesList.forEach (swimlane) =>\r\n            swimlaneUsByStatus = Immutable.Map()\r\n            @.usByStatus.forEach (usList, statusId) =>\r\n                usListSwimlanes = usList.filter (usId) =>\r\n                    us = @.usMap.get(usId)\r\n                    swimlaneId = if swimlane.id == -1 then null else swimlane.id\r\n                    return us.getIn(['model', 'swimlane']) == swimlaneId\r\n\r\n                swimlaneUsByStatus = swimlaneUsByStatus.set(Number(statusId), usListSwimlanes)\r\n\r\n            @.usByStatusSwimlanes = @.usByStatusSwimlanes.set(swimlane.id, swimlaneUsByStatus)\r\n\r\nangular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoggleText = @.taiga.toggleText\r\nscopeDefer = @.taiga.scopeDefer\r\nbindOnce = @.taiga.bindOnce\r\ngroupBy = @.taiga.groupBy\r\ntimeout = @.taiga.timeout\r\nbindMethods = @.taiga.bindMethods\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nmodule = angular.module(\"taigaKanban\")\r\n\r\n#############################################################################\r\n## Kanban Controller\r\n#############################################################################\r\n\r\nclass KanbanController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin)\r\n    excludeFilters: [\r\n        \"status\"\r\n    ]\r\n\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgEvents\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"$tgModel\",\r\n        \"tgKanbanUserstories\",\r\n        \"$tgStorage\",\r\n        \"tgFilterRemoteStorageService\",\r\n        \"tgProjectService\",\r\n        \"tgLightboxFactory\",\r\n        \"tgLoader\",\r\n        \"$timeout\"\r\n    ]\r\n\r\n    storeCustomFiltersName: 'kanban-custom-filters'\r\n    storeFiltersName: 'kanban-filters'\r\n    validQueryParams: [\r\n        'exclude_tags',\r\n        'tags',\r\n        'exclude_assigned_users',\r\n        'assigned_users',\r\n        'exclude_role',\r\n        'role',\r\n        'exclude_epic',\r\n        'epic',\r\n        'exclude_owner',\r\n        'owner'\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @location,\r\n                  @appMetaService, @navUrls, @events, @analytics, @translate, @errorHandlingService,\r\n                  @model, @kanbanUserstoriesService, @storage, @filterRemoteStorageService,\r\n                  @projectService, @lightboxFactory, @tgLoader, @timeout) ->\r\n        bindMethods(@)\r\n        @kanbanUserstoriesService.reset()\r\n        @.openFilter = false\r\n        @.selectedUss = {}\r\n        @.movedUs = []\r\n        @.foldedSwimlane = Immutable.Map()\r\n        @.isFirstLoad = true\r\n        @.renderBatching = true\r\n\r\n        @.isLightboxOpened = false # True when a lighbox is open\r\n        @.isRefreshNeeded = false  # True if a lighbox is open and some event arrived\r\n\r\n        return if @.applyStoredFilters(@params.pslug, \"kanban-filters\", @.validQueryParams)\r\n\r\n        @scope.sectionName = @translate.instant(\"KANBAN.SECTION_NAME\")\r\n        @.initializeEventHandlers()\r\n\r\n        taiga.defineImmutableProperty @.scope, \"usByStatus\", () =>\r\n            return @kanbanUserstoriesService.usByStatus\r\n\r\n        taiga.defineImmutableProperty @.scope, \"usMap\", () =>\r\n            return @kanbanUserstoriesService.usMap\r\n\r\n        taiga.defineImmutableProperty @.scope, \"usByStatusSwimlanes\", () =>\r\n            return @kanbanUserstoriesService.usByStatusSwimlanes\r\n\r\n        taiga.defineImmutableProperty @.scope, \"swimlanesList\", () =>\r\n            return @kanbanUserstoriesService.swimlanesList\r\n\r\n    cleanSelectedUss: () ->\r\n        for key of @.selectedUss\r\n            @.selectedUss[key] = false\r\n\r\n    toggleSelectedUs: (usId) ->\r\n        @.selectedUss[usId] = !@.selectedUss[usId]\r\n\r\n    firstLoad: () ->\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            title = @translate.instant(\"KANBAN.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\r\n                projectName: @scope.project.name,\r\n                projectDescription: @scope.project.description\r\n            })\r\n            @appMetaService.setAll(title, description)\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    setZoom: (zoomLevel, zoom) ->\r\n        zoomLevel = Number(zoomLevel)\r\n        if @.zoomLevel == zoomLevel\r\n            return null\r\n\r\n        previousZoomLevel = @.zoomLevel\r\n\r\n        @.zoomLevel = zoomLevel\r\n        @.zoom = zoom\r\n\r\n        if @.isFirstLoad\r\n            @.firstLoad().then () =>\r\n                @.isFirstLoad = false\r\n                @kanbanUserstoriesService.resetFolds()\r\n\r\n        else if @.zoomLevel > 2 && previousZoomLevel <= 2\r\n            @.zoomLoading = true\r\n\r\n            @.loadUserstories().then () =>\r\n                @.zoomLoading = false\r\n                @kanbanUserstoriesService.resetFolds()\r\n\r\n    filtersReloadContent: debounceLeading 100, () ->\r\n        @.loadUserstories().then (result) =>\r\n            if !result\r\n                return\r\n\r\n            if @scope.swimlanesList.size && !result.length\r\n                @.foldedSwimlane = @.foldedSwimlane.set(@scope.swimlanesList.first().id.toString(), false)\r\n\r\n    moveToTopDropdown: (us) ->\r\n        @.moveUsToTop(us.toJS().model)\r\n\r\n    moveUsToTop: (uss) ->\r\n        if !Array.isArray(uss)\r\n            uss = [uss]\r\n\r\n        us = uss[0]\r\n        nextUsId = null\r\n        userstories = []\r\n        @.movedUs.push(us.id)\r\n        @timeout () =>\r\n            @.movedUs = []\r\n        , 1000, false\r\n\r\n        if us.swimlane\r\n            userstories = @scope.usByStatusSwimlanes.getIn([\r\n                us.swimlane,\r\n                us.status\r\n            ])\r\n        else\r\n            userstories = @scope.usByStatus.get(us.status.toString())\r\n\r\n        if userstories && userstories.size\r\n            nextUsId = userstories.get(0)\r\n\r\n        if nextUsId\r\n            @.moveUs(null, uss, us.status, us.swimlane, 0, null, nextUsId)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.$on \"usform:new:success\", (event, us, position = 'bottom') =>\r\n            @.refreshTagsColors().then () =>\r\n                @kanbanUserstoriesService.add(us)\r\n                @scope.$broadcast(\"redraw:wip\")\r\n\r\n                if position == 'top'\r\n                    @.moveUsToTop(us)\r\n\r\n            @analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1)\r\n\r\n        @scope.$on \"usform:bulk:success\", (event, uss, position = 'bottom') =>\r\n            @confirm.notify(\"success\")\r\n            @.refreshTagsColors().then () =>\r\n                @kanbanUserstoriesService.add(uss)\r\n                @scope.$broadcast(\"redraw:wip\")\r\n\r\n                if position == 'top'\r\n                    @.moveUsToTop(uss)\r\n\r\n            @analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1)\r\n\r\n        @scope.$on \"usform:edit:success\", (event, us) =>\r\n            @.refreshTagsColors().then () =>\r\n                oldStatus = @kanbanUserstoriesService.getUsModel(us.id).status\r\n                if oldStatus != us.status\r\n                    # the us has to move at the end of the status\r\n                    status = @scope.usByStatus.get(us.status.toString())\r\n                    if status\r\n                        lastUsId = status.last()\r\n                        newOrder = @scope.usMap.get(lastUsId).getIn(['model', 'kanban_order']) + 1\r\n                        us.kanban_order = newOrder\r\n\r\n                @kanbanUserstoriesService.replaceModel(us)\r\n                @kanbanUserstoriesService.refreshRawOrder()\r\n                @kanbanUserstoriesService.refresh(false)\r\n\r\n        @scope.$on \"kanban:us:deleted\", (event, us) =>\r\n            @kanbanUserstoriesService.remove(us)\r\n\r\n        @scope.$on(\"kanban:us:move\", @.moveUs)\r\n        @scope.$on(\"kanban:show-userstories-for-status\", @.loadUserStoriesForStatus)\r\n        @scope.$on(\"kanban:hide-userstories-for-status\", @.hideUserStoriesForStatus)\r\n\r\n        @scope.$on \"lightbox:opened\", () =>\r\n            @.isLightboxOpened = true\r\n\r\n        @scope.$on \"lightbox:closed\", () =>\r\n            @.isLightboxOpened = false\r\n            if @.isRefreshNeeded\r\n                @.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged()\r\n                @.isRefreshNeeded = false\r\n\r\n    refreshAfterSwimlanesOrUserstoryStatusesHaveChanged: ->\r\n        # User story statuses has changed\r\n        @tgLoader.start()\r\n        @projectService.fetchProject().then () =>\r\n            @.loadInitialData()\r\n\r\n    initializeSubscription: ->\r\n        randomTimeout = taiga.randomInt(700, 1000)\r\n\r\n        # For user stories events\r\n        routingKeyUserstories = \"changes.project.#{@scope.projectId}.userstories\"\r\n        @events.subscribe @scope, routingKeyUserstories, debounceLeading randomTimeout, (message) =>\r\n            @.eventsLoadUserstories(message)\r\n\r\n        # For project attributes (swimlanes, statuses,...) events\r\n        routingKeyProject = \"changes.project.#{@scope.projectId}.projects\"\r\n        @events.subscribe @scope, routingKeyProject, debounceLeading randomTimeout, (message) =>\r\n            if message.matches in [\r\n                \"projects.swimlane\"\r\n                \"projects.swimlaneuserstorystatus\"\r\n                \"projects.userstorystatus\"\r\n            ]\r\n                if @.isLightboxOpened\r\n                    @.isRefreshNeeded = true\r\n                else\r\n                    @.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged()\r\n\r\n    addNewUs: (type, statusId) ->\r\n        swimlane = null\r\n        switch type\r\n            when \"standard\" then  @rootscope.$broadcast(\"genericform:new\",\r\n                {\r\n                    'objType': 'us',\r\n                    'project': @scope.project,\r\n                    'statusId': statusId,\r\n                    'swimlane': swimlane\r\n                })\r\n            when \"bulk\" then @rootscope.$broadcast(\"usform:bulk\", @scope.projectId, statusId, swimlane)\r\n\r\n    editUs: (id) ->\r\n        us = @kanbanUserstoriesService.getUs(id)\r\n        us = us.set('loading-edit', true)\r\n        @kanbanUserstoriesService.replace(us)\r\n\r\n        @rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref']))\r\n        .then (editingUserStory) =>\r\n            @rs2.attachments.list(\r\n                \"us\", us.get('id'), us.getIn(['model', 'project'])).then (attachments) =>\r\n                    @rootscope.$broadcast(\"genericform:edit\", {\r\n                        'objType': 'us',\r\n                        'obj': editingUserStory,\r\n                        'statusList': @scope.usStatusList,\r\n                        'attachments': attachments.toJS()\r\n                    })\r\n\r\n                us = us.set('loading-edit', false)\r\n                @kanbanUserstoriesService.replace(us)\r\n\r\n    deleteUs: (id) ->\r\n        us = @kanbanUserstoriesService.getUs(id)\r\n        us = us.set('loading-delete', true)\r\n\r\n        @rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref']))\r\n        .then (deletingUserStory) =>\r\n            us = us.set('loading-delete', false)\r\n            title = @translate.instant(\"US.TITLE_DELETE_ACTION\")\r\n            message = deletingUserStory.subject\r\n            @confirm.askOnDelete(title, message).then (askResponse) =>\r\n                promise = @repo.remove(deletingUserStory)\r\n                promise.then =>\r\n                    model = us.toJS().model\r\n                    @scope.$broadcast(\"kanban:us:deleted\", model)\r\n                    askResponse.finish()\r\n                promise.then null, ->\r\n                    askResponse.finish(false)\r\n                    @confirm.notify(\"error\")\r\n\r\n    showPlaceHolder: (statusId, swimlaneId) ->\r\n        firstStatus = @scope.usStatusList[0].id == statusId && !@kanbanUserstoriesService.userstoriesRaw.length\r\n\r\n        if swimlaneId\r\n            firstSwimlane =  @scope.swimlanesList.first().id == swimlaneId\r\n            return firstStatus && firstSwimlane\r\n\r\n        return firstStatus\r\n\r\n    toggleFold: (id) ->\r\n        @kanbanUserstoriesService.toggleFold(id)\r\n\r\n    toggleSwimlane: (id) ->\r\n        @.foldedSwimlane = @.foldedSwimlane.set(id.toString(), !@.foldedSwimlane.get(id.toString()))\r\n        @rs.kanban.storeSwimlanesModes(@scope.projectId, @.foldedSwimlane.toJS())\r\n\r\n        @timeout () =>\r\n            @scope.$broadcast(\"redraw:wip\")\r\n        , 100, false\r\n\r\n    isUsInArchivedHiddenStatus: (usId) ->\r\n        return @kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId)\r\n\r\n    changeUsAssignedUsers: (id) =>\r\n        item = @kanbanUserstoriesService.getUsModel(id)\r\n\r\n        onClose = (assignedUsersIds) =>\r\n            item.assigned_users = assignedUsersIds\r\n            if item.assigned_to not in assignedUsersIds and assignedUsersIds.length > 0\r\n                item.assigned_to = assignedUsersIds[0]\r\n            if assignedUsersIds.length == 0\r\n                item.assigned_to = null\r\n            @kanbanUserstoriesService.replaceModel(item)\r\n\r\n            @repo.save(item).then =>\r\n                @.generateFilters()\r\n                if @.isFilterDataTypeSelected('assigned_users') || @.isFilterDataTypeSelected('role')\r\n                    @.filtersReloadContent()\r\n\r\n        @lightboxFactory.create(\r\n            'tg-lb-select-user',\r\n            {\r\n                \"class\": \"lightbox lightbox-select-user\",\r\n            },\r\n            {\r\n                \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\r\n                \"activeUsers\": @scope.activeUsers,\r\n                \"onClose\": onClose,\r\n                \"lbTitle\": @translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n            }\r\n        )\r\n\r\n    refreshTagsColors: ->\r\n        return @rs.projects.tagsColors(@scope.projectId).then (tags_colors) =>\r\n            @scope.project.tags_colors = tags_colors._attrs\r\n\r\n    renderBatch: (clean = false) ->\r\n        @.renderInProgress = true\r\n        newUs = _.take(@.queue, @.batchSize)\r\n        @.rendered = _.concat(@.rendered, newUs)\r\n        @.queue = _.drop(@.queue, @.batchSize)\r\n\r\n        if clean\r\n            @kanbanUserstoriesService.set(newUs)\r\n            @.batchTimings = [200, 100, 50]\r\n        else\r\n            @kanbanUserstoriesService.add(newUs)\r\n\r\n        if @.queue.length > 0\r\n            timeout = @.batchTimings.shift() || 20\r\n            @timeout(@.renderBatch, timeout)\r\n        else\r\n            scopeDefer @scope, =>\r\n                # The broadcast must be executed when the DOM has been fully reloaded.\r\n                # We can't assure when this exactly happens so we need a defer\r\n                @rootscope.$broadcast(\"kanban:userstories:loaded\", @.rendered)\r\n                @scope.$broadcast(\"userstories:loaded\", @.rendered)\r\n                @.renderInProgress = false\r\n\r\n                @timeout () =>\r\n                    @scope.$broadcast(\"redraw:wip\")\r\n                , 100, false\r\n\r\n    renderUserStories: (userstories) =>\r\n        userstories = _.sortBy(userstories, 'kanban_order')\r\n        # init before render is needed in KanbanSquishColumnDirective to\r\n        # render status columns if not we will see the column squash on load\r\n        @kanbanUserstoriesService.initUsByStatusList(userstories)\r\n\r\n        if @.renderBatching\r\n            userstoriesMap = _.groupBy(userstories, 'status')\r\n            @.rendered = []\r\n            @.queue = []\r\n            @.batchSize = 0\r\n\r\n            while (@.queue.length < userstories.length)\r\n                _.each @scope.project.us_statuses, (x) =>\r\n                    if (userstoriesMap[x.id]?.length > 0)\r\n                        @.queue = _.concat(@.queue, _.take(userstoriesMap[x.id], 10))\r\n                        userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 10)\r\n                if !@.batchSize\r\n                    @.batchSize = 100\r\n\r\n            @.renderBatch(true)\r\n        else\r\n            @kanbanUserstoriesService.set(userstories)\r\n\r\n    loadUserstoriesParams: () ->\r\n        params = {\r\n            status__is_archived: false\r\n        }\r\n\r\n        if @.zoomLevel >= 2\r\n            params.include_attachments = 1\r\n            params.include_tasks = 1\r\n\r\n        locationParams = _.pick(_.clone(@location.search()), @.validQueryParams)\r\n        params = _.merge params, locationParams\r\n        params.q = @.filterQ\r\n\r\n        return params\r\n\r\n    eventsLoadUserstories: (data) ->\r\n        eventUserstories = []\r\n\r\n        if !Array.isArray(data.pk)\r\n            eventUserstories = [data.pk]\r\n        else\r\n            eventUserstories = data.pk\r\n\r\n        modifiedUs = eventUserstories.filter (us) => !!@kanbanUserstoriesService.userstoriesRaw.find((raw) => raw.id == us)\r\n\r\n        params = @.loadUserstoriesParams()\r\n\r\n        @rs.userstories.listAll(@scope.projectId, params).then (userstories) =>\r\n            newUss = userstories.filter (us) => !@kanbanUserstoriesService.userstoriesRaw.find((raw) => raw.id == us.id)\r\n\r\n            userstories\r\n            .filter((us) => modifiedUs.includes(us.id))\r\n            .forEach (us) =>\r\n                @kanbanUserstoriesService.replaceModel(us)\r\n                @kanbanUserstoriesService.refreshRawOrder()\r\n\r\n            if newUss.length\r\n                @kanbanUserstoriesService.add(newUss)\r\n\r\n            @kanbanUserstoriesService.refresh(false)\r\n\r\n    loadUserstories: () ->\r\n        params = @.loadUserstoriesParams()\r\n\r\n        @.lastSearch = @.filterQ\r\n        lastSearch = @.filterQ\r\n        @.lastLoadUserstoriesParams = params\r\n\r\n        loadPromises = [\r\n            @rs.userstories.listAll(@scope.projectId, params),\r\n            @.loadSwimlanes()\r\n        ]\r\n\r\n        archivedPromises = []\r\n        openArchived = _.difference(@kanbanUserstoriesService.archivedStatus,\r\n                                    @kanbanUserstoriesService.statusHide)\r\n\r\n        if openArchived.length\r\n            archivedPromises = openArchived.map (archivedStatusId) =>\r\n                return @.loadUserStoriesForStatus({}, archivedStatusId)\r\n\r\n        loadPromises = loadPromises.concat(archivedPromises)\r\n\r\n        promise = @q.all(loadPromises).then (result) =>\r\n            if lastSearch != @.lastSearch\r\n                return\r\n\r\n            @kanbanUserstoriesService.reset(false, false, false)\r\n            userstories = result[0]\r\n            swimlanes = result[1]\r\n\r\n            if result.length > 2\r\n                result.slice(2).forEach (archivedRedult) =>\r\n                    userstories = userstories.concat(archivedRedult)\r\n\r\n            @.notFoundUserstories = false\r\n\r\n            if !userstories.length && ((@.filterQ && @.filterQ.length) || Object.keys(@location.search()).length)\r\n                @.notFoundUserstories = true\r\n\r\n            @kanbanUserstoriesService.init(@scope.project, swimlanes, @scope.usersById)\r\n            @tgLoader.pageLoaded()\r\n            @.renderUserStories(userstories)\r\n\r\n            return userstories\r\n\r\n        return promise\r\n\r\n    loadUserStoriesForStatus: (ctx, statusId) ->\r\n        filteredStatus = @location.search().status\r\n\r\n        # if there are filters applied the action doesn't end if the statusId is not in the url\r\n        if filteredStatus\r\n            filteredStatus = filteredStatus.split(\",\").map (it) -> parseInt(it, 10)\r\n\r\n            return if filteredStatus.indexOf(statusId) == -1\r\n\r\n        params = {\r\n            status: statusId\r\n            include_attachments: true,\r\n            include_tasks: true\r\n        }\r\n\r\n        if @.filterQ\r\n            params.q = @.filterQ\r\n\r\n        params = _.merge params, @location.search()\r\n\r\n        return @rs.userstories.listAll(@scope.projectId, params).then (userstories) =>\r\n            @.waitEmptyQuote () =>\r\n                @scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories)\r\n\r\n            return userstories\r\n\r\n    waitEmptyQuote: (cb) ->\r\n        if @.queue.length > 0\r\n            requestAnimationFrame () => @.waitEmptyQuote(cb)\r\n        else\r\n            scopeDefer @scope, => cb()\r\n\r\n    hideUserStoriesForStatus: (ctx, statusId) ->\r\n        @scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId)\r\n\r\n    loadKanban: ->\r\n        return @q.all([\r\n            @.refreshTagsColors(),\r\n            @.loadUserstories()\r\n        ])\r\n\r\n    loadSwimlanes: ->\r\n        return @rs.swimlanes.list(@scope.projectId).then (swimlanes) =>\r\n            @scope.swimlanes = swimlanes\r\n            @scope.swimlanesStatuses = {}\r\n\r\n            @scope.swimlanes.forEach (swimlane) =>\r\n                @scope.swimlanesStatuses[swimlane.id] = swimlane.statuses\r\n\r\n            @scope.swimlanesStatuses[-1] = @scope.project.us_statuses\r\n\r\n            return @scope.swimlanes\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.is_kanban_activated\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.projectId = project.id\r\n        @scope.points = _.sortBy(project.points, \"order\")\r\n        @scope.pointsById = groupBy(project.points, (x) -> x.id)\r\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\r\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\r\n        @scope.usCardVisibility = {}\r\n\r\n        @scope.$emit(\"project:loaded\", project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n        @.foldedSwimlane = Immutable.fromJS(@rs.kanban.getSwimlanesModes(project.id))\r\n        @.initialLoad = false\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.initializeSubscription()\r\n        @.loadKanban().then () =>\r\n            @timeout () =>\r\n                @.initialLoad = true\r\n            , 0, true\r\n\r\n        @.generateFilters()\r\n\r\n    moveUs: (ctx, usList, newStatusId, newSwimlaneId, index, previousCard, nextCard) ->\r\n        @.cleanSelectedUss()\r\n\r\n        usList = _.map usList, (us) =>\r\n            return @kanbanUserstoriesService.getUsModel(us.id)\r\n\r\n        @rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, newSwimlaneId, index)\r\n\r\n        apiNewSwimlaneId = newSwimlaneId\r\n\r\n        if newSwimlaneId == -1\r\n            apiNewSwimlaneId = null\r\n\r\n        data = @kanbanUserstoriesService.move(\r\n            usList.map((it) => it.id),\r\n            newStatusId,\r\n            apiNewSwimlaneId,\r\n            index,\r\n            previousCard,\r\n            nextCard\r\n        )\r\n\r\n        promise = @rs.userstories.bulkUpdateKanbanOrder(\r\n            @scope.projectId,\r\n            newStatusId,\r\n            apiNewSwimlaneId,\r\n            data.afterUserstoryId,\r\n            data.beforeUserstoryId,\r\n            data.bulkUserstories\r\n        )\r\n\r\n        promise.then () =>\r\n            @scope.$broadcast(\"redraw:wip\")\r\n\r\n            @.generateFilters()\r\n            if @.isFilterDataTypeSelected('status')\r\n                @.filtersReloadContent()\r\n\r\nmodule.controller(\"KanbanController\", KanbanController)\r\n\r\n#############################################################################\r\n## Kanban Directive\r\n#############################################################################\r\nKanbanDirective = ($repo, $rootscope) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        watchKanbanSize = () =>\r\n            columns = $el.find(\".task-colum-name\")\r\n            kanbanStyles = getComputedStyle($el[0])\r\n            columnMargin = Number(kanbanStyles.getPropertyValue('--kanban-column-margin')\r\n                .trim()\r\n                .replace('px', '')\r\n                .split(' ')[1])\r\n\r\n            resizeCb = (entries) =>\r\n                    width = columns.toArray().reduce (acc, column) =>\r\n                        if document.body.contains(column)\r\n                            return acc + column.offsetWidth + columnMargin\r\n\r\n                        resizeObserver.unobserve(column)\r\n                        return acc\r\n                    , 0\r\n\r\n                    if width > 0\r\n                        document.body.style.setProperty('--kanban-width', (width - columnMargin) + 'px')\r\n\r\n            resizeObserver = new ResizeObserver(resizeCb)\r\n\r\n            columns.each (index, column) =>\r\n                resizeObserver.observe(column)\r\n\r\n        board = initBoard()\r\n        board.events (event, entries) =>\r\n            # the card is visible in the scroll viewport\r\n            if event == 'SHOW_CARD'\r\n                visibleEntries = entries.filter (entry) => entry.visible && !$scope.usCardVisibility[entry.id]\r\n\r\n                if visibleEntries.length\r\n                    $scope.$evalAsync () =>\r\n                        visibleEntries.forEach (entry) =>\r\n                            $scope.usCardVisibility[entry.id] = true\r\n\r\n            return\r\n\r\n        $scope.taskColumnLoaded = (event, status, swimlane) ->\r\n            column = event.target[0]\r\n            board.addSwimlane(column, status, swimlane)\r\n\r\n        $scope.cardLoaded = (event, status, swimlane) ->\r\n            board.addCard(event.target[0], status, swimlane)\r\n\r\n        _tableBody = null\r\n\r\n        $scope.isTableLoaded = false\r\n\r\n        $scope.kanbanTableLoaded = (event, swimlaneId) ->\r\n            $scope.$evalAsync () =>\r\n                # we only want to track when the user open a new swimlane for d&d\r\n                if swimlaneId\r\n                    $scope.openSwimlane(swimlaneId)\r\n\r\n                $scope.isTableLoaded = true\r\n\r\n            tableBody = event.target\r\n            _tableBody = tableBody\r\n            tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\")\r\n\r\n            tableBody.on \"scroll\", (event) ->\r\n                scroll = -1 * event.currentTarget.scrollLeft\r\n                tableHeaderDom.css(\"transform\", \"translateX(#{scroll}px)\")\r\n\r\n            watchKanbanSize()\r\n\r\n            return\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            if _tableBody\r\n                _tableBody.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective])\r\n\r\n#############################################################################\r\n## Kanban Archived Show Status\r\n#############################################################################\r\n\r\nKanbanArchivedShowStatusHeaderDirective = ($rootscope, $translate, kanbanUserstoriesService) ->\r\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        unwatch = $scope.$watch 'ctrl.initialLoad', (initialLoad) =>\r\n            return if !initialLoad\r\n\r\n            unwatch()\r\n\r\n            status = $scope.$eval($attrs.tgKanbanArchivedShowStatusHeader)\r\n\r\n            kanbanUserstoriesService.addArchivedStatus(status.id)\r\n            kanbanUserstoriesService.hideStatus(status.id)\r\n\r\n            $el.on \"click\", (event) ->\r\n                $scope.$apply ->\r\n                    if kanbanUserstoriesService.statusHide.includes(status.id)\r\n                        $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id)\r\n                        kanbanUserstoriesService.showStatus(status.id)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgKanbanArchivedShowStatusHeader\", [ \"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedShowStatusHeaderDirective])\r\n\r\n#############################################################################\r\n## Kanban Archived Status Column Intro Directive\r\n#############################################################################\r\n\r\nKanbanArchivedStatusIntroDirective = ($translate, kanbanUserstoriesService) ->\r\n    userStories = []\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro)\r\n\r\n        $scope.$on \"kanban:shown-userstories-for-status\", (ctx, statusId, userStoriesLoaded) ->\r\n            if statusId == status.id\r\n                kanbanUserstoriesService.deleteStatus(statusId)\r\n                kanbanUserstoriesService.add(userStoriesLoaded)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective])\r\n\r\n#############################################################################\r\n## Kanban Squish Column Directive\r\n#############################################################################\r\n\r\nKanbanSquishColumnDirective = (rs, projectService, kanbanUserstoriesService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.foldStatus = (status) ->\r\n            if !$scope.folds\r\n                $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'))\r\n\r\n            $scope.unfold = null\r\n            $scope.folds[status.id] = !!!$scope.folds[status.id]\r\n\r\n            if !$scope.folds[status.id]\r\n                $scope.unfold = status.id\r\n\r\n            rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds)\r\n\r\n            if kanbanUserstoriesService.archivedStatus.includes(status.id) && !kanbanUserstoriesService.statusHide.includes(status.id)\r\n                kanbanUserstoriesService.hideStatus(status.id)\r\n\r\n            return\r\n\r\n        unwatch = $scope.$watch 'ctrl.initialLoad', (load) ->\r\n            if load && $scope.usByStatus?.size\r\n                $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'))\r\n\r\n                archivedFolds = $scope.usStatusList.filter (status) ->\r\n                    return status.is_archived\r\n\r\n                for status in archivedFolds\r\n                    $scope.folds[status.id] = true\r\n\r\n                unwatch()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", \"tgKanbanUserstories\",KanbanSquishColumnDirective])\r\n\r\n#############################################################################\r\n## Kanban WIP Limit Directive\r\n#############################################################################\r\n\r\nKanbanWipLimitDirective = ($timeout) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        status = $scope.$eval($attrs.tgKanbanWipLimit)\r\n\r\n        redrawWipLimit = =>\r\n            $timeout =>\r\n                cards = $el.find(\"tg-card\")\r\n\r\n                wipLimitClass = ''\r\n                element = null\r\n\r\n                if cards.length + 1 == status.wip_limit\r\n                    wipLimitClass = 'one-left'\r\n                    element = cards[cards.length - 1]\r\n                else if cards.length == status.wip_limit\r\n                    wipLimitClass = 'reached'\r\n                    element = cards[cards.length - 1]\r\n                else if cards.length > status.wip_limit\r\n                    wipLimitClass = 'exceeded'\r\n                    element = cards[status.wip_limit - 1]\r\n\r\n                $el.find(\".kanban-wip-limit\").remove()\r\n\r\n                if element\r\n                    angular.element(element).after(\"<div class='kanban-wip-limit #{wipLimitClass}'><span>WIP Limit</span></div>\")\r\n            , 0, false\r\n\r\n        if status and not status.is_archived\r\n            $scope.$on \"redraw:wip\", redrawWipLimit\r\n            $scope.$on \"kanban:us:move\", redrawWipLimit\r\n            $scope.$on \"usform:new:success\", redrawWipLimit\r\n            $scope.$on \"usform:bulk:success\", redrawWipLimit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective])\r\n\r\nCardSvgTemplate = \"\"\"\r\n    <tg-svg>\r\n        <svg class=\"icon <%- svgIcon %>\" style=\"fill: <%- svgFill %>\">\r\n            <use xlink:href=\"#<%- svgIcon %>\" attr-href=\"#<%- svgIcon %>\">\r\n                <% if(svgTitle) { %>\r\n                <title><%- svgTitle %></title>\r\n                <% } %>\r\n            </use>\r\n        </svg>\r\n    </tg-svg>\r\n    \"\"\"\r\n\r\nCardAssignedToDirective = ($template, $translate, avatarService, projectService) ->\r\n    template = $template.get(\"components/card/card-templates/card-assigned-to.html\", true)\r\n    svgTemplate  = _.template(CardSvgTemplate)\r\n\r\n    render = (vm) =>\r\n        avatars = {}\r\n        (vm.item.get('assigned_users') || [vm.item.get('assigned_to')]).forEach (user) =>\r\n            if user\r\n                avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar')\r\n\r\n        return template({\r\n            vm: vm,\r\n            avatars: avatars,\r\n            translate: (key, params) =>\r\n                return $translate.instant(key, params)\r\n            checkPermission: (permission) =>\r\n                return projectService.project.get('my_permissions').indexOf(permission) > -1\r\n            svg: (svgData) =>\r\n                return svgTemplate(Object.assign({\r\n                    svgTitle: '',\r\n                    svgFill: ''\r\n                }, svgData))\r\n            loading: \"\"\"\r\n                <img\r\n                    class='loading-spinner'\r\n                    src='#{window._version}/svg/spinner-circle.svg'\r\n                    alt='loading...'\r\n                />\r\n            \"\"\"\r\n        })\r\n\r\n    return {\r\n        scope: {\r\n            zoomLevel: '<',\r\n            item: '<',\r\n            vm: '<'\r\n        },\r\n        link: ($scope, $el) ->\r\n            initializeZoom = false\r\n\r\n            onChange = () =>\r\n                html = render($scope.vm)\r\n                $el.off()\r\n\r\n                $el.html(html)\r\n\r\n                $el.find('.card-user-avatar').on 'click', (event) =>\r\n                    if !event.ctrlKey && !event.metaKey\r\n                        $scope.vm.onClickAssignedTo({id: $scope.vm.item.get('id')})\r\n\r\n            $scope.$watch 'item', onChange\r\n            # ignore the first watch because is the same as item\r\n            $scope.$watch 'zoomLevel', () =>\r\n                if initializeZoom\r\n                    onChange()\r\n                else\r\n                    initializeZoom = true\r\n\r\n            $scope.$on \"$destroy\", ->\r\n                $el.off()\r\n    }\r\n\r\n\r\nmodule.directive(\"tgCardAssignedTo\", [\r\n    \"$tgTemplate\",\r\n    \"$translate\",\r\n    \"tgAvatarService\",\r\n    \"tgProjectService\",\r\n    CardAssignedToDirective])\r\n\r\nCardDataDirective = ($template, $translate, avatarService, projectService, dueDateService) ->\r\n    template = $template.get(\"components/card/card-templates/card-data.html\", true)\r\n    svgTemplate  = _.template(CardSvgTemplate)\r\n\r\n    render = (vm) =>\r\n        avatars = {}\r\n        (vm.item.get('assigned_users') || []).forEach (user) =>\r\n            if user\r\n                avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar')\r\n            else\r\n                console.error 'invalid assigned_users', vm.item.get('assigned_users').toJS()\r\n\r\n        return template({\r\n            vm: vm,\r\n            avatars: avatars,\r\n            emptyTask: () =>\r\n                tasks = vm.item.getIn(['model', 'tasks'])\r\n                return !tasks || !tasks.size\r\n            dueDateColor: () =>\r\n                dueDateService.color({\r\n                    dueDate: vm.item.getIn(['model', 'due_date']),\r\n                    isClosed: vm.item.getIn(['model', 'is_closed']),\r\n                    objType: vm.type\r\n                })\r\n            dueDateTitle: () =>\r\n                dueDateService.title({\r\n                    dueDate: vm.item.getIn(['model', 'due_date']),\r\n                    isClosed: vm.item.getIn(['model', 'is_closed']),\r\n                    objType: vm.type\r\n                })\r\n            totalAttachments: () =>\r\n                if vm.type == 'task'\r\n                    return vm.item.getIn(['model', 'attachments']).size\r\n                else\r\n                    return vm.item.getIn(['model', 'total_attachments'])\r\n\r\n            translate: (key, params) =>\r\n                return $translate.instant(key, params)\r\n            svg: (svgData) =>\r\n                return svgTemplate(Object.assign({\r\n                    svgTitle: '',\r\n                    svgFill: ''\r\n                }, svgData))\r\n        })\r\n\r\n    return {\r\n        scope: {\r\n            zoomLevel: '<',\r\n            item: '<',\r\n            vm: '<'\r\n        },\r\n        link: ($scope, $el) ->\r\n            initializeZoom = false\r\n\r\n            onChange = () =>\r\n                html = render($scope.vm)\r\n                $el.off()\r\n\r\n                $el.html(html)\r\n\r\n            $scope.$watch 'item', onChange\r\n            # ignore the first watch because is the same as item\r\n            $scope.$watch 'zoomLevel', () =>\r\n                if initializeZoom\r\n                    onChange()\r\n                else\r\n                    initializeZoom = true\r\n\r\n            $scope.$on \"$destroy\", ->\r\n                $el.off()\r\n    }\r\n\r\nmodule.directive(\"tgCardData\", [\r\n    \"$tgTemplate\",\r\n    \"$translate\",\r\n    \"tgAvatarService\",\r\n    \"tgProjectService\",\r\n    \"tgDueDateService\",\r\n    CardDataDirective])\r\n\r\n\r\nCardActionsDirective = ($template, $translate, projectService) ->\r\n    template = $template.get(\"components/card/card-templates/card-actions.html\", true)\r\n    svgTemplate  = _.template(CardSvgTemplate)\r\n\r\n    render = (vm) =>\r\n        return template({\r\n            vm: vm,\r\n            translate: (key, params) =>\r\n                return $translate.instant(key, params)\r\n            checkPermission: (permission) =>\r\n                return projectService.project.get('my_permissions').indexOf(permission) > -1\r\n            svg: (svgData) =>\r\n                return svgTemplate(Object.assign({\r\n                    svgTitle: '',\r\n                    svgFill: ''\r\n                }, svgData))\r\n        })\r\n\r\n    return {\r\n        scope: {\r\n            zoomLevel: '<',\r\n            item: '<',\r\n            vm: '<'\r\n        },\r\n        link: ($scope, $el) ->\r\n            initializeZoom = false\r\n            openPopup = false\r\n\r\n            removePopupOpenState = () ->\r\n                openPopup = false\r\n                $el.find(\".js-popup-button\").removeClass('popover-open')\r\n\r\n            onChange = () =>\r\n                html = render($scope.vm)\r\n                $el.off()\r\n\r\n                $el.html(html)\r\n                openPopup = false\r\n                $el.find('.js-popup-button').on 'click', (event) =>\r\n                    if openPopup\r\n                        return\r\n\r\n                    openPopup = true\r\n                    $(event.currentTarget).addClass('popover-open')\r\n\r\n                    actions = []\r\n\r\n                    if projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey())\r\n                        actions.push(\r\n                            {\r\n                                text: $translate.instant('COMMON.CARD.EDIT'),\r\n                                icon: 'icon-edit'\r\n                                event: () ->\r\n                                    $scope.vm.onClickEdit({id: $scope.vm.item.get('id')})\r\n                            },\r\n                            {\r\n                                text: $translate.instant('COMMON.CARD.ASSIGN_TO'),\r\n                                icon: 'icon-assign-to',\r\n                                event: () ->\r\n                                    $scope.vm.onClickAssignedTo({id: $scope.vm.item.get('id')})\r\n                            },\r\n                        )\r\n\r\n                    if projectService.project.get('my_permissions').includes($scope.vm.getDeletePermisionKey())\r\n                        actions.push(\r\n                            {\r\n                                text: $translate.instant('COMMON.CARD.DELETE'),\r\n                                icon: 'icon-trash',\r\n                                event: () ->\r\n                                    $scope.vm.onClickDelete({id: $scope.vm.item.get('id')})\r\n                            },\r\n                        )\r\n\r\n                    if projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey()) && !$scope.vm.isFirst\r\n                        actions.push(\r\n                            {\r\n                                text: $translate.instant('COMMON.CARD.MOVE_TO_TOP'),\r\n                                icon: 'icon-move-to-top',\r\n                                event: () ->\r\n                                    $scope.vm.onClickMoveToTop($scope.vm.item)\r\n                            },\r\n                        )\r\n\r\n                    taiga.globalPopover(\r\n                        event.currentTarget,actions,\r\n                        {},\r\n                        () ->\r\n                            removePopupOpenState()\r\n                    )\r\n\r\n            $scope.$watch 'item', onChange\r\n            # ignore the first watch because is the same as item\r\n            $scope.$watch 'zoomLevel', () =>\r\n                if initializeZoom\r\n                    onChange()\r\n                else\r\n                    initializeZoom = true\r\n\r\n            $scope.$on \"$destroy\", ->\r\n                $el.off()\r\n    }\r\n\r\n\r\nmodule.directive(\"tgCardActions\", [\r\n    \"$tgTemplate\",\r\n    \"$translate\",\r\n    \"tgProjectService\",\r\n    CardActionsDirective])\r\n\r\n#############################################################################\r\n## Kanban Swimlane Directive\r\n#############################################################################\r\nKanbanSwimlaneDirective = ($timeout) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        tableHeaderDom = []\r\n        addSwimlane = null\r\n        ctrl = $scope.$parent.ctrl\r\n\r\n        if !ctrl\r\n            throw new Error('KanbanSwimlaneDirective ctrl not found')\r\n\r\n        # sticky swimlane title\r\n        $el.on \"scroll\", (event) ->\r\n            if !tableHeaderDom.length\r\n                tableHeaderDom = $el.find(\".kanban-swimlane-title\")\r\n            if !addSwimlane\r\n                addSwimlane = $el.find(\".kanban-swimlane-add\")\r\n\r\n            scroll = event.currentTarget.scrollLeft\r\n            tableHeaderDom.css(\"transform\", \"translateX(#{scroll}px)\")\r\n            addSwimlane.css(\"transform\", \"translateX(#{scroll}px)\")\r\n\r\n        currentSwimlane = null\r\n        className = 'pending-to-open'\r\n\r\n        $scope.mouseleaveSwimlane = (event) =>\r\n            if currentSwimlane\r\n                $timeout.cancel(currentSwimlane.timeoutId)\r\n                currentSwimlane.el.classList.remove(className)\r\n                currentSwimlane = null\r\n\r\n        $scope.mouseoverSwimlane = (event, swimlaneId) =>\r\n            return if currentSwimlane && currentSwimlane.id == swimlaneId\r\n\r\n            if currentSwimlane\r\n                $timeout.cancel(currentSwimlane.timeoutId)\r\n                currentSwimlane.el.classList.remove(className)\r\n\r\n            swimlane = event.currentTarget\r\n\r\n            if swimlane.classList.contains('folded')\r\n                isDragging = !!document.querySelectorAll('tg-card.gu-mirror').length\r\n\r\n                return if !isDragging\r\n\r\n                swimlane.classList.add(className)\r\n\r\n                timeoutId = $timeout () ->\r\n                    swimlane.classList.remove(className)\r\n                    ctrl.toggleSwimlane(swimlaneId)\r\n                , 1000\r\n\r\n                currentSwimlane = {\r\n                    id: swimlaneId,\r\n                    timeoutId: timeoutId,\r\n                    el: swimlane\r\n                }\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgKanbanSwimlane\", ['$timeout', KanbanSwimlaneDirective])\r\n\r\n#############################################################################\r\n## Kanban Swimlane Taskboard Column Directive\r\n#############################################################################\r\nKanbanTaskboardColumnDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        # sticky num us counter\r\n        $el.on \"scroll\", (event) ->\r\n            scroll = event.currentTarget.scrollTop\r\n            taskCounterDom = $el.find(\".kanban-task-counter\")\r\n            taskCounterDom.css(\"transform\", \"translateY(#{scroll}px)\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgKanbanTaskboardColumn\", [KanbanTaskboardColumnDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoggleText = @.taiga.toggleText\r\nscopeDefer = @.taiga.scopeDefer\r\nbindOnce = @.taiga.bindOnce\r\ngroupBy = @.taiga.groupBy\r\ntimeout = @.taiga.timeout\r\n\r\nmodule = angular.module(\"taigaKanban\")\r\n\r\n\r\n#############################################################################\r\n## Sortable Directive\r\n#############################################################################\r\n\r\nKanbanSortableDirective = ($repo, $rs, $rootscope, kanbanUserstoriesService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        drake = null\r\n        oldIndex = null\r\n\r\n        $scope.openSwimlane = (id) =>\r\n            containers = _.map $('.kanban-swimlane[data-swimlane=\"' + id + '\"] .taskboard-column'), (item) ->\r\n                return item\r\n\r\n            init(containers)\r\n\r\n        init = (containers) =>\r\n            if not ($scope.project.my_permissions.indexOf(\"modify_us\") > -1)\r\n                return\r\n\r\n            if drake\r\n                containers.forEach (container) =>\r\n                    drake.containers.push(container)\r\n\r\n                return\r\n            newParentScope = null\r\n            itemEl = null\r\n            tdom = $el\r\n\r\n            deleteElement = (itemEl) ->\r\n                itemEl.off()\r\n                itemEl.remove()\r\n\r\n            drake = dragula(containers, {\r\n                copySortSource: false,\r\n                copy: false,\r\n                moves: (item) ->\r\n                    return $(item).is('tg-card')\r\n            })\r\n\r\n            initialContainer = null\r\n\r\n            drake.on 'over', (item, container) ->\r\n                if !initialContainer\r\n                    initialContainer = container\r\n                else if container != initialContainer\r\n                    $(container).addClass('target-drop')\r\n\r\n            drake.on 'out', (item, container) ->\r\n                if container != initialContainer\r\n                    $(container).removeClass('target-drop')\r\n\r\n            drake.on 'drag', (item) ->\r\n                dragMultipleItems = window.dragMultiple.getElements()\r\n\r\n                # if it is not drag multiple\r\n                if !dragMultipleItems.length\r\n                    dragMultipleItems = [item]\r\n\r\n                firstElement = dragMultipleItems[0]\r\n\r\n                parentEl = item.parentNode\r\n                oldIndex = $(parentEl).find('tg-card').index(firstElement)\r\n                initialContainer = null\r\n                window.dragMultiple.start(item, containers)\r\n\r\n            drake.on 'cloned', (item, dropTarget) ->\r\n                $(item).addClass('multiple-drag-mirror')\r\n\r\n            previousCard = null\r\n            nextCard = null\r\n\r\n            drake.on 'drop', (item, target, source, sibling) ->\r\n                previousCard = null\r\n                nextCard = null\r\n                prev = $(item).prevAll('tg-card:not(.gu-transit)')\r\n                next = $(item).nextAll('tg-card:not(.gu-transit)')\r\n\r\n                previousCard = null\r\n                if prev.length && prev[0].dataset.id\r\n                    previousCard = Number(prev[0].dataset.id)\r\n\r\n                nextCard = null\r\n                if !previousCard && next.length && next[0].dataset.id\r\n                    nextCard = Number(next[0].dataset.id)\r\n\r\n            drake.on 'dragend', (item, target, source, sibling) ->\r\n                parentEl = item.parentNode\r\n                dragMultipleItems = window.dragMultiple.stop()\r\n\r\n                # if it is not drag multiple\r\n                if !dragMultipleItems.length\r\n                    dragMultipleItems = [item]\r\n\r\n                firstElementId = dragMultipleItems[0].dataset.id\r\n                firstElement = dragMultipleItems[0]\r\n\r\n                index = $(parentEl).find('tg-card').index(firstElement)\r\n                newStatus = Number(parentEl.dataset.status)\r\n                newSwimlane = Number(parentEl.dataset.swimlane)\r\n\r\n                if index == oldIndex && initialContainer == parentEl\r\n                    return\r\n\r\n                if initialContainer != parentEl\r\n                    $(parentEl).addClass('new')\r\n\r\n                    $(parentEl).one 'animationend', ()  ->\r\n                        $(parentEl).removeClass('new')\r\n\r\n                usList = _.map dragMultipleItems, (item) ->\r\n                    return kanbanUserstoriesService.usMap.get(Number(item.dataset.id))\r\n\r\n                finalUsList = _.map usList, (item)  ->\r\n                    return {\r\n                        id: item.get('id'),\r\n                        oldStatusId: item.getIn(['model', 'status'])\r\n                        oldSwimlaneId: item.getIn(['model', 'swimlane'])\r\n                    }\r\n\r\n                $scope.$apply ->\r\n                    _.each usList, (item, key) =>\r\n                        oldStatus = item.getIn(['model', 'status'])\r\n                        oldSwimlaneId = item.getIn(['model', 'swimlane']) || -1\r\n                        sameContainer = newStatus == oldStatus && newSwimlane == oldSwimlaneId\r\n\r\n                        if !sameContainer\r\n                            itemEl = $(dragMultipleItems[key])\r\n                            deleteElement(itemEl)\r\n\r\n                    $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, newSwimlane, index, previousCard, nextCard)\r\n\r\n            scroll = autoScroll(containers, {\r\n                margin: 100,\r\n                scrollWhenOutside: true,\r\n                autoScroll: () ->\r\n                    return this.down && drake.dragging\r\n            })\r\n\r\n        unwatch = $scope.$watch \"isTableLoaded\", (tableLoaded) ->\r\n            return if !tableLoaded\r\n\r\n            isSwimlane = $('.swimlane').length\r\n\r\n            # in swimlanes we load every swimlane with kanbanTableLoaded\r\n            return if isSwimlane\r\n\r\n            unwatch()\r\n\r\n            containers = _.map $el.find('.taskboard-column'), (item) ->\r\n                return item\r\n\r\n            init(containers)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n            if drake\r\n                drake.destroy()\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgKanbanSortable\", [\r\n    \"$tgRepo\",\r\n    \"$tgResources\",\r\n    \"$rootScope\",\r\n    \"tgKanbanUserstories\",\r\n    KanbanSortableDirective\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaEpics\")\r\n\r\n#############################################################################\r\n## Epic Detail Controller\r\n#############################################################################\r\n\r\nclass EpicDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"tgResources\"\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$log\",\r\n        \"tgAppMetaService\",\r\n        \"$tgAnalytics\",\r\n        \"$tgNavUrls\",\r\n        \"$translate\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsFullService\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @location,\r\n                  @log, @appMetaService, @analytics, @navUrls, @translate, @modelTransform, @errorHandlingService, @projectService, @attachmentsFullService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.epicRef = @params.epicref\r\n        @scope.sectionName = @translate.instant(\"EPIC.SECTION_NAME\")\r\n        @scope.attachmentsReady = false\r\n        @scope.$on \"attachments:loaded\", () =>\r\n            @scope.attachmentsReady = true\r\n\r\n        @.initializeEventHandlers()\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            @._setMeta()\r\n            @.initializeOnDeleteGoToUrl()\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    _setMeta: ->\r\n        title = @translate.instant(\"EPIC.PAGE_TITLE\", {\r\n            epicRef: \"##{@scope.epic.ref}\"\r\n            epicSubject: @scope.epic.subject\r\n            projectName: @scope.project.name\r\n        })\r\n        description = @translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\r\n            epicStatus: @scope.statusById[@scope.epic.status]?.name or \"--\"\r\n            epicDescription: angular.element(@scope.epic.description_html or \"\").text()\r\n        })\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments('epic', @scope.epicId, @scope.projectId)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.$on \"attachment:create\", =>\r\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1)\r\n\r\n        @scope.$on \"comment:new\", =>\r\n            @.loadEpic()\r\n\r\n        @scope.$on \"custom-attributes-values:edit\", =>\r\n            @rootscope.$broadcast(\"object:updated\")\r\n\r\n    initializeOnDeleteGoToUrl: ->\r\n       ctx = {project: @scope.project.slug}\r\n       @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-epics\", ctx)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.immutableProject = @projectService.project\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.statusList = project.epic_statuses\r\n        @scope.statusById = groupBy(project.epic_statuses, (x) -> x.id)\r\n        return project\r\n\r\n    loadEpic: ->\r\n        return @rs.epics.getByRef(@scope.projectId, @params.epicref).then (epic) =>\r\n            @scope.epic = epic\r\n            @scope.immutableEpic = Immutable.fromJS(epic._attrs)\r\n            @scope.epicId = epic.id\r\n            @scope.commentModel = epic\r\n\r\n            @.loadAttachments()\r\n\r\n            @modelTransform.setObject(@scope, 'epic')\r\n\r\n            if @scope.epic.neighbors.previous?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.epic.neighbors.previous.ref\r\n                }\r\n                @scope.previousUrl = @navUrls.resolve(\"project-epics-detail\", ctx)\r\n\r\n            if @scope.epic.neighbors.next?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.epic.neighbors.next.ref\r\n                }\r\n                @scope.nextUrl = @navUrls.resolve(\"project-epics-detail\", ctx)\r\n\r\n    loadUserstories: ->\r\n          return @rs2.userstories.listInEpic(@scope.epicId).then (data) =>\r\n              @scope.userstories = data\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.loadEpic().then(=> @.loadUserstories())\r\n\r\n    ###\r\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\r\n    #       See app/modules/components/vote-button for more info\r\n    ###\r\n    onUpvote: ->\r\n        onSuccess = =>\r\n            @.loadEpic()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.epics.upvote(@scope.epicId).then(onSuccess, onError)\r\n\r\n    onDownvote: ->\r\n        onSuccess = =>\r\n            @.loadEpic()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.epics.downvote(@scope.epicId).then(onSuccess, onError)\r\n\r\n    ###\r\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\r\n    #       See app/modules/components/watch-button for more info\r\n    ###\r\n    onWatch: ->\r\n        onSuccess = =>\r\n            @.loadEpic()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.epics.watch(@scope.epicId).then(onSuccess, onError)\r\n\r\n    onUnwatch: ->\r\n        onSuccess = =>\r\n            @.loadEpic()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.epics.unwatch(@scope.epicId).then(onSuccess, onError)\r\n\r\n    onSelectColor: (color) ->\r\n        onSelectColorSuccess = () =>\r\n            @rootscope.$broadcast(\"object:updated\")\r\n            @confirm.notify('success')\r\n\r\n        onSelectColorError = () =>\r\n            @confirm.notify('error')\r\n\r\n        transform = @modelTransform.save (epic) ->\r\n            epic.color = color\r\n            return epic\r\n\r\n        return transform.then(onSelectColorSuccess, onSelectColorError)\r\n\r\nmodule.controller(\"EpicDetailController\", EpicDetailController)\r\n\r\n\r\n#############################################################################\r\n## Epic status display directive\r\n#############################################################################\r\n\r\nEpicStatusDisplayDirective = ($template, $compile) ->\r\n    # Display if an epic is open or closed and its status.\r\n    #\r\n    # Example:\r\n    #     tg-epic-status-display(ng-model=\"epic\")\r\n    #\r\n    # Requirements:\r\n    #   - Epic object (ng-model)\r\n    #   - scope.statusById object\r\n\r\n    template = $template.get(\"common/components/status-display.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (epic) ->\r\n            status =  $scope.statusById[epic.status]\r\n\r\n            html = template({\r\n                is_closed: status.is_closed\r\n                status: status\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.ngModel, (epic) ->\r\n            render(epic) if epic?\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective])\r\n\r\n\r\n#############################################################################\r\n## Epic status button directive\r\n#############################################################################\r\n\r\nEpicStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) ->\r\n    # Display the status of epic and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-epic-status-button(ng-model=\"epic\")\r\n    #\r\n    # Requirements:\r\n    #   - Epic object (ng-model)\r\n    #   - scope.statusById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"common/components/status-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_epic\") != -1\r\n\r\n        render = (epic) =>\r\n            status = $scope.statusById[epic.status]\r\n\r\n            html = $compile(template({\r\n                status: status\r\n                statuses: $scope.statusList\r\n                editable: isEditable()\r\n            }))($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (status) ->\r\n            currentLoading = $loading()\r\n                .target($el)\r\n                .start()\r\n\r\n            transform = $modelTransform.save (epic) ->\r\n                epic.status = status\r\n\r\n                return epic\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".js-edit-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n\r\n            $.fn.popover().closeAll()\r\n\r\n            save(target.data(\"status-id\"))\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.status\r\n        , () ->\r\n            epic = $model.$modelValue\r\n            render(epic) if epic\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\r\n                                        \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nbindMethods = @.taiga.bindMethods\r\nnormalizeString = @.taiga.normalizeString\r\n\r\nmodule = angular.module(\"taigaIssues\")\r\n\r\n#############################################################################\r\n## Issue Detail Controller\r\n#############################################################################\r\n\r\nclass IssueDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$log\",\r\n        \"tgAppMetaService\",\r\n        \"$tgAnalytics\",\r\n        \"$tgNavUrls\",\r\n        \"$translate\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsFullService\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\r\n                  @log, @appMetaService, @analytics, @navUrls, @translate, @modelTransform,\r\n                  @errorHandlingService, @projectService, @attachmentsFullService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.issueRef = @params.issueref\r\n        @scope.sectionName = @translate.instant(\"ISSUES.SECTION_NAME\")\r\n        @scope.attachmentsReady = false\r\n        @scope.$on \"attachments:loaded\", () =>\r\n            @scope.attachmentsReady = true\r\n        @.initializeEventHandlers()\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            @._setMeta()\r\n            @.initializeOnDeleteGoToUrl()\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    _setMeta: ->\r\n        title = @translate.instant(\"ISSUE.PAGE_TITLE\", {\r\n            issueRef: \"##{@scope.issue.ref}\"\r\n            issueSubject: @scope.issue.subject\r\n            projectName: @scope.project.name\r\n        })\r\n        description = @translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\r\n            issueStatus: @scope.statusById[@scope.issue.status]?.name or \"--\"\r\n            issueType: @scope.typeById[@scope.issue.type]?.name or \"--\"\r\n            issueSeverity: @scope.severityById[@scope.issue.severity]?.name or \"--\"\r\n            issuePriority: @scope.priorityById[@scope.issue.priority]?.name or \"--\"\r\n            issueDescription: angular.element(@scope.issue.description_html or \"\").text()\r\n        })\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments('issue', @scope.issueId, @scope.projectId)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.$on \"attachment:create\", =>\r\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1)\r\n\r\n        @scope.$on \"promote-issue-to-us:success\", =>\r\n            @analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1)\r\n            @rootscope.$broadcast(\"object:updated\")\r\n            @.loadIssue()\r\n\r\n        @scope.$on \"comment:new\", =>\r\n            @.loadIssue()\r\n\r\n        @scope.$on \"custom-attributes-values:edit\", =>\r\n            @rootscope.$broadcast(\"object:updated\")\r\n\r\n        @scope.$on \"assign-sprint-to-issue:success\", (ctx, milestoneId) =>\r\n            @scope.issue.milestone = milestoneId\r\n            @rootscope.$broadcast(\"object:updated\")\r\n            if milestoneId\r\n                @.loadSprint()\r\n            else\r\n                @scope.sprint = null\r\n\r\n    initializeOnDeleteGoToUrl: ->\r\n       ctx = {project: @scope.project.slug}\r\n       if @scope.project.is_issues_activated\r\n           @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-issues\", ctx)\r\n       else\r\n           @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.statusList = project.issue_statuses\r\n        @scope.statusById = groupBy(project.issue_statuses, (x) -> x.id)\r\n        @scope.typeById = groupBy(project.issue_types, (x) -> x.id)\r\n        @scope.typeList = _.sortBy(project.issue_types, \"order\")\r\n        @scope.severityList = project.severities\r\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\r\n        @scope.priorityList = project.priorities\r\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\r\n        return project\r\n\r\n    loadIssue: ->\r\n        return @rs.issues.getByRef(@scope.projectId, @params.issueref).then (issue) =>\r\n            @scope.issue = issue\r\n            @scope.issueId = issue.id\r\n            @scope.commentModel = issue\r\n\r\n            @.loadAttachments()\r\n\r\n            @modelTransform.setObject(@scope, 'issue')\r\n\r\n            if @scope.issue.neighbors.previous?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.issue.neighbors.previous.ref\r\n                }\r\n                @scope.previousUrl = @navUrls.resolve(\"project-issues-detail\", ctx)\r\n\r\n            if @scope.issue.neighbors.next?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.issue.neighbors.next.ref\r\n                }\r\n                @scope.nextUrl = @navUrls.resolve(\"project-issues-detail\", ctx)\r\n\r\n    loadSprint: ->\r\n        if @scope.issue.milestone\r\n            return @rs.sprints.get(@scope.issue.project, @scope.issue.milestone).then (sprint) =>\r\n                @scope.sprint = sprint\r\n                return sprint\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n\r\n        return @.loadIssue().then( =>\r\n            if @scope.project.my_permissions.indexOf(\"view_milestones\") != -1\r\n                @.loadSprint()\r\n        )\r\n\r\n    ###\r\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\r\n    #       See app/modules/components/vote-button for more info\r\n    ###\r\n    onUpvote: ->\r\n        onSuccess = =>\r\n            @.loadIssue()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.issues.upvote(@scope.issueId).then(onSuccess, onError)\r\n\r\n    onDownvote: ->\r\n        onSuccess = =>\r\n            @.loadIssue()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.issues.downvote(@scope.issueId).then(onSuccess, onError)\r\n\r\n    ###\r\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\r\n    #       See app/modules/components/watch-button for more info\r\n    ###\r\n    onWatch: ->\r\n        onSuccess = =>\r\n            @.loadIssue()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.issues.watch(@scope.issueId).then(onSuccess, onError)\r\n\r\n    onUnwatch: ->\r\n        onSuccess = =>\r\n            @.loadIssue()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.issues.unwatch(@scope.issueId).then(onSuccess, onError)\r\n\r\nmodule.controller(\"IssueDetailController\", IssueDetailController)\r\n\r\n\r\n#############################################################################\r\n## Issue status display directive\r\n#############################################################################\r\n\r\nIssueStatusDisplayDirective = ($template, $compile)->\r\n    # Display if a Issue is open or closed and its issueboard status.\r\n    #\r\n    # Example:\r\n    #     tg-issue-status-display(ng-model=\"issue\")\r\n    #\r\n    # Requirements:\r\n    #   - Issue object (ng-model)\r\n    #   - scope.statusById object\r\n\r\n    template = $template.get(\"common/components/status-display.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (issue) ->\r\n            status = $scope.statusById[issue.status]\r\n\r\n            html = template({\r\n                is_closed: status.is_closed\r\n                status: status\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.ngModel, (issue) ->\r\n            render(issue) if issue?\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective])\r\n\r\n\r\n#############################################################################\r\n## Issue status button directive\r\n#############################################################################\r\n\r\nIssueStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    # Display the status of Issue and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-issue-status-button(ng-model=\"issue\")\r\n    #\r\n    # Requirements:\r\n    #   - Issue object (ng-model)\r\n    #   - scope.statusById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"common/components/status-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\r\n\r\n        render = (issue) =>\r\n            status = $scope.statusById[issue.status]\r\n\r\n            html = template({\r\n                status: status\r\n                statuses: $scope.statusList\r\n                editable: isEditable()\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (statusId) ->\r\n            $.fn.popover().closeAll()\r\n\r\n            currentLoading = $loading()\r\n                .target($el)\r\n                .start()\r\n\r\n            transform = $modelTransform.save (issue) ->\r\n                issue.status = statusId\r\n\r\n                return issue\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".js-edit-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n\r\n            save(target.data(\"status-id\"))\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.status\r\n        , () ->\r\n            issue = $model.$modelValue\r\n            render(issue) if issue\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective])\r\n\r\n#############################################################################\r\n## Issue type button directive\r\n#############################################################################\r\n\r\nIssueTypeButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    # Display the type of Issue and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-issue-type-button(ng-model=\"issue\")\r\n    #\r\n    # Requirements:\r\n    #   - Issue object (ng-model)\r\n    #   - scope.typeById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"issue/issue-type-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\r\n\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\r\n\r\n        render = (issue) ->\r\n            type = $scope.typeById[issue.type]\r\n\r\n            html = template({\r\n                type: type\r\n                typees: $scope.typeList\r\n                editable: isEditable()\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (type) ->\r\n            $.fn.popover().closeAll()\r\n\r\n            if notAutoSave\r\n                $model.$modelValue.type = type\r\n                $scope.$apply()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find(\".level-name\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (issue) ->\r\n                issue.type = type\r\n\r\n                return issue\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".type-data\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-type\").popover().open()\r\n\r\n        $el.on \"click\", \".type\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n            type = target.data(\"type-id\")\r\n            save(type)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.type\r\n        , () ->\r\n            issue = $model.$modelValue\r\n            render(issue) if issue\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective])\r\n\r\n\r\n#############################################################################\r\n## Issue severity button directive\r\n#############################################################################\r\n\r\nIssueSeverityButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    # Display the severity of Issue and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-issue-severity-button(ng-model=\"issue\")\r\n    #\r\n    # Requirements:\r\n    #   - Issue object (ng-model)\r\n    #   - scope.severityById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"issue/issue-severity-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\r\n\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\r\n\r\n        render = (issue) ->\r\n            severity = $scope.severityById[issue.severity]\r\n\r\n            html = template({\r\n                severity: severity\r\n                severityes: $scope.severityList\r\n                editable: isEditable()\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (severity) ->\r\n            $.fn.popover().closeAll()\r\n\r\n            if notAutoSave\r\n                $model.$modelValue.severity = severity\r\n                $scope.$apply()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find(\".level-name\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (issue) ->\r\n                issue.severity = severity\r\n\r\n                return issue\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".severity-data\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-severity\").popover().open()\r\n\r\n        $el.on \"click\", \".severity\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n            severity = target.data(\"severity-id\")\r\n\r\n            save(severity)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.severity\r\n        , () ->\r\n            issue = $model.$modelValue\r\n            render(issue) if issue\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective])\r\n\r\n\r\n#############################################################################\r\n## Issue priority button directive\r\n#############################################################################\r\n\r\nIssuePriorityButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    # Display the priority of Issue and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-issue-priority-button(ng-model=\"issue\")\r\n    #\r\n    # Requirements:\r\n    #   - Issue object (ng-model)\r\n    #   - scope.priorityById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"issue/issue-priority-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\r\n\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\r\n\r\n        render = (issue) ->\r\n            priority = $scope.priorityById[issue.priority]\r\n\r\n            html = template({\r\n                priority: priority\r\n                priorityes: $scope.priorityList\r\n                editable: isEditable()\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (priority) ->\r\n            $.fn.popover().closeAll()\r\n\r\n            if notAutoSave\r\n                $model.$modelValue.priority = priority\r\n                $scope.$apply()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find(\".level-name\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (issue) ->\r\n                issue.priority = priority\r\n\r\n                return issue\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".priority-data\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-priority\").popover().open()\r\n\r\n        $el.on \"click\", \".priority\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n            priority = target.data(\"priority-id\")\r\n\r\n            save(priority)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.priority\r\n        , () ->\r\n            issue = $model.$modelValue\r\n            render(issue) if issue\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective])\r\n\r\n\r\n#############################################################################\r\n## Add Issue to Sprint button directive\r\n#############################################################################\r\n\r\nAssignSprintToIssueButtonDirective = ($rootscope, $rs, $repo, $loading, $translate,\r\nlightboxService, $modelTransform, $confirm) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        avaliableMilestones = []\r\n        issue = null\r\n\r\n        $scope.$watch $attrs.ngModel, (item) ->\r\n            return if not item\r\n            if item.milestone\r\n                $el.find('.assign-issue-button.button-unset').removeClass('is-active')\r\n                $el.find('.assign-issue-button.button-set').addClass('is-active')\r\n            else\r\n                $el.find('.assign-issue-button.button-set').removeClass('is-active')\r\n                $el.find('.assign-issue-button.button-unset').addClass('is-active')\r\n\r\n        $el.on \"click\", \".assign-issue-button.button-unset\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\")\r\n            issue = $model.$modelValue\r\n            $rs.sprints.list($scope.projectId, null).then (data) ->\r\n                $scope.milestones = data.milestones\r\n                $scope.selectedSprint = issue.milestone\r\n                avaliableMilestones = angular.copy($scope.milestones)\r\n                lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"))\r\n\r\n        $el.on \"click\", \".assign-issue-button.button-set\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            issue = $model.$modelValue\r\n            $rs.sprints.list($scope.projectId, null).then (data) ->\r\n                currentSprint = _.find(data.milestones, { \"id\": issue.milestone })\r\n\r\n                title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\")\r\n                message = $translate.instant(\r\n                    \"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\",\r\n                    {sprintName: currentSprint.name}\r\n                )\r\n\r\n                $confirm.ask(title, null, message).then (askResponse) ->\r\n                    onSuccess = ->\r\n                        $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null)\r\n                        askResponse.finish()\r\n                        lightboxService.close($el)\r\n\r\n\r\n                    onError = ->\r\n                        askResponse.finish(false)\r\n                        $confirm.notify(\"error\")\r\n\r\n                    transform = $modelTransform.save (issue) ->\r\n                        issue.setAttr('milestone', null)\r\n                        return issue\r\n                    transform.then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        existsMilestone = (needle, haystack) ->\r\n            haystack = normalizeString(haystack.toUpperCase())\r\n            needle = normalizeString(needle.toUpperCase())\r\n            return _.includes(haystack, needle)\r\n\r\n        $scope.filterMilestones = (filterText) ->\r\n            $scope.milestones = avaliableMilestones.filter((milestone) ->\r\n                existsMilestone(filterText, milestone.name)\r\n            )\r\n\r\n        $scope.saveIssueToSprint = (selectedSprint, event) ->\r\n            currentLoading = $loading().target($(event.currentTarget)).start()\r\n            issue.setAttr('milestone', selectedSprint.id)\r\n\r\n            transform = $modelTransform.save (item) ->\r\n                issue.setAttr('milestone', selectedSprint.id)\r\n                return item\r\n\r\n            transform.then ->\r\n                currentLoading.finish()\r\n                lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"))\r\n                $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id)\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n        templateUrl: \"issue/assign-sprint-to-issue-button.html\"\r\n\r\n    }\r\n\r\nmodule.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\",\r\n                \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\",\r\n                \"$tgConfirm\", AssignSprintToIssueButtonDirective] )\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\ntrim = @.taiga.trim\r\n\r\nmodule = angular.module(\"taigaIssues\")\r\n\r\n#############################################################################\r\n## Issue Bulk Create Lightbox Directive\r\n#############################################################################\r\n\r\nCreateBulkIssuesDirective = ($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) ->\r\n    link = ($scope, $el, attrs) ->\r\n        form = null\r\n\r\n        $scope.$on \"issueform:bulk\", (ctx, projectId, milestoneId, status)->\r\n            form.reset() if form\r\n\r\n            lightboxService.open($el)\r\n            $scope.new = {\r\n                projectId: projectId,\r\n                milestoneId: milestoneId,\r\n                bulk: \"\"\r\n            }\r\n\r\n        submit = debounce 2000, (event) ->\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley()\r\n            if not form.validate()\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            if currentLoading.isLoading()\r\n                return\r\n\r\n            data = $scope.new.bulk\r\n            projectId = $scope.new.projectId\r\n            milestoneId = $scope.new.milestoneId\r\n\r\n            promise = $rs.issues.bulkCreate(projectId, milestoneId, data)\r\n            promise.then (result) ->\r\n                result =  _.map(result.data, (x) -> $model.make_model('issues', x))\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"issueform:new:success\", result)\r\n                lightboxService.close($el)\r\n                $confirm.notify(\"success\")\r\n\r\n            promise.then null, ->\r\n                currentLoading.finish()\r\n                $confirm.notify(\"error\")\r\n\r\n        submitButton = $el.find(\"button[type='submit']\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\",\r\n                                          \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntrim = @.taiga.trim\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\ndebounceLeading = @.taiga.debounceLeading\r\nstartswith = @.taiga.startswith\r\nbindMethods = @.taiga.bindMethods\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nmodule = angular.module(\"taigaIssues\")\r\n\r\n#############################################################################\r\n## Issues Controller\r\n#############################################################################\r\n\r\nclass IssuesController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$tgUrls\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgEvents\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"$tgStorage\",\r\n        \"tgFilterRemoteStorageService\",\r\n        \"tgProjectService\",\r\n        \"tgUserActivityService\"\r\n    ]\r\n\r\n    filtersHashSuffix: \"issues-filters\"\r\n    myFiltersHashSuffix: \"issues-my-filters\"\r\n    excludePrefix: \"exclude_\"\r\n    filterCategories: [\r\n        \"tags\",\r\n        \"status\",\r\n        \"type\",\r\n        \"severity\",\r\n        \"priority\",\r\n        \"assigned_to\",\r\n        \"owner\",\r\n        \"role\",\r\n    ]\r\n\r\n    validQueryParams: [\r\n        'exclude_tags',\r\n        'tags',\r\n        'exclude_status',\r\n        'status',\r\n        'exclude_type',\r\n        'type',\r\n        'exclude_severity',\r\n        'severity',\r\n        'exclude_priority',\r\n        'priority',\r\n        'exclude_assigned_to',\r\n        'assigned_to',\r\n        'exclude_role',\r\n        'role',\r\n        'exclude_owner',\r\n        'owner',\r\n        'order_by'\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @urls, @params, @q, @location, @appMetaService,\r\n                  @navUrls, @events, @analytics, @translate, @errorHandlingService, @storage, @filterRemoteStorageService, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @showTags = true\r\n        @scope.sectionName = @translate.instant(\"PROJECT.SECTION.ISSUES\")\r\n        @.voting = false\r\n        @.openFilter = false\r\n\r\n        return if @.applyStoredFilters(@params.pslug, @.filtersHashSuffix, @.validQueryParams)\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            title = @translate.instant(\"ISSUES.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\r\n                projectName: @scope.project.name,\r\n                projectDescription: @scope.project.description\r\n            })\r\n            @appMetaService.setAll(title, description)\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"issueform:new:success\", =>\r\n            @analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1)\r\n            @.loadIssues()\r\n\r\n        @scope.$on \"assigned-to:changed\", =>\r\n            @.generateFilters()\r\n            if @.isFilterDataTypeSelected('assigned_to') ||\\\r\n                @.isFilterDataTypeSelected('role') ||\\\r\n                @.isOrderedBy('assigned_to') || @.isOrderedBy('modified')\r\n                    @.loadIssues()\r\n\r\n        @scope.$on \"status:changed\", =>\r\n            @.generateFilters()\r\n            if @.isFilterDataTypeSelected('status') ||\\\r\n                @.isOrderedBy('status') || @.isOrderedBy('modified')\r\n                    @.loadIssues()\r\n\r\n    toggleShowTags: ->\r\n        @rs.issues.storeIssuesShowTags(@scope.projectId, @showTags)\r\n\r\n    isOrderedBy: (fieldName) ->\r\n        pattern = new RegExp(\"-*\"+fieldName)\r\n        return pattern.test(@location.search().order_by)\r\n\r\n    changeQ: (q) ->\r\n        @.unselectFilter(\"page\")\r\n        @.replaceFilter(\"q\", q)\r\n        @.loadIssues()\r\n        @.generateFilters()\r\n\r\n    removeFilter: (filter) ->\r\n        @.unselectFilter(\"page\")\r\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\r\n        @.loadIssues()\r\n        @.generateFilters()\r\n\r\n    addFilter: (newFilter) ->\r\n        @.unselectFilter(\"page\")\r\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\r\n        @.loadIssues()\r\n        @.generateFilters()\r\n\r\n    selectCustomFilter: (customFilter) ->\r\n        orderBy = @location.search().order_by\r\n\r\n        if orderBy\r\n            customFilter.filter.order_by = orderBy\r\n\r\n        @.unselectFilter(\"page\")\r\n        @.replaceAllFilters(customFilter.filter)\r\n        @.loadIssues()\r\n        @.generateFilters()\r\n\r\n    removeCustomFilter: (customFilter) ->\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix).then (userFilters) =>\r\n            delete userFilters[customFilter.id]\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.myFiltersHashSuffix).then(@.generateFilters)\r\n\r\n    isFilterDataTypeSelected: (filterDataType) ->\r\n        for filter in @.selectedFilters\r\n            if (filter['dataType'] == filterDataType)\r\n                return true\r\n        return false\r\n\r\n    saveCustomFilter: (name) ->\r\n        filters = {}\r\n        urlfilters = @location.search()\r\n\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            filters[key] = urlfilters[key]\r\n            filters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix).then (userFilters) =>\r\n            userFilters[name] = filters\r\n\r\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.myFiltersHashSuffix).then(@.generateFilters)\r\n\r\n    getQueryParams: () ->\r\n        return _.pick(_.clone(@location.search()), @.validQueryParams)\r\n\r\n    generateFilters: ->\r\n        urlfilters = @.getQueryParams()\r\n        @.storeFilters(@params.pslug, urlfilters, @.filtersHashSuffix)\r\n\r\n        loadFilters = {}\r\n        loadFilters.project = @scope.projectId\r\n        loadFilters.q = urlfilters.q\r\n\r\n        for key in @.filterCategories\r\n            excludeKey = @.excludePrefix.concat(key)\r\n            loadFilters[key] = urlfilters[key]\r\n            loadFilters[excludeKey] = urlfilters[excludeKey]\r\n\r\n        return @q.all([\r\n            @rs.issues.filtersData(loadFilters),\r\n            @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix)\r\n        ]).then (result) =>\r\n            data = result[0]\r\n            customFiltersRaw = result[1]\r\n            dataCollection = {}\r\n\r\n            dataCollection.status = _.map data.statuses, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.type = _.map data.types, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.severity = _.map data.severities, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.priority = _.map data.priorities, (it) ->\r\n                it.id = it.id.toString()\r\n\r\n                return it\r\n            dataCollection.tags = _.map data.tags, (it) ->\r\n                it.id = it.name\r\n\r\n                return it\r\n\r\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\r\n                return tag.count > 0\r\n\r\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.full_name || \"Unassigned\"\r\n\r\n                return it\r\n            dataCollection.owner = _.map data.owners, (it) ->\r\n                it.id = it.id.toString()\r\n                it.name = it.full_name\r\n\r\n                return it\r\n            dataCollection.role = _.map data.roles, (it) ->\r\n                if it.id\r\n                    it.id = it.id.toString()\r\n                else\r\n                    it.id = \"null\"\r\n\r\n                it.name = it.name || \"Unassigned\"\r\n\r\n                return it\r\n\r\n            @.selectedFilters = []\r\n\r\n            for key in @.filterCategories\r\n                excludeKey = @.excludePrefix.concat(key)\r\n                if loadFilters[key]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n                if loadFilters[excludeKey]\r\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\r\n                    @.selectedFilters = @.selectedFilters.concat(selected)\r\n\r\n            @.filterQ = loadFilters.q\r\n\r\n            @.filters = [\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\r\n                    dataType: \"type\",\r\n                    content: dataCollection.type\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\r\n                    dataType: \"severity\",\r\n                    content: dataCollection.severity\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\r\n                    dataType: \"priority\",\r\n                    content: dataCollection.priority\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\r\n                    dataType: \"status\",\r\n                    content: dataCollection.status\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\r\n                    dataType: \"tags\",\r\n                    content: dataCollection.tags,\r\n                    hideEmpty: true,\r\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\r\n                    dataType: \"assigned_to\",\r\n                    content: dataCollection.assigned_to\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\r\n                    dataType: \"role\",\r\n                    content: dataCollection.role\r\n                },\r\n                {\r\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\r\n                    dataType: \"owner\",\r\n                    content: dataCollection.owner\r\n                }\r\n            ]\r\n\r\n            @.customFilters = []\r\n            _.forOwn customFiltersRaw, (value, key) =>\r\n                @.customFilters.push({id: key, name: key, filter: value})\r\n\r\n    initializeSubscription: ->\r\n        routingKey = \"changes.project.#{@scope.projectId}.issues\"\r\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\r\n            @.loadIssues())\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.is_issues_activated\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n\r\n        @scope.issueStatusById = groupBy(project.issue_statuses, (x) -> x.id)\r\n        @scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\")\r\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\r\n        @scope.severityList = _.sortBy(project.severities, \"order\")\r\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\r\n        @scope.priorityList = _.sortBy(project.priorities, \"order\")\r\n        @scope.issueTypes = _.sortBy(project.issue_types, \"order\")\r\n        @scope.issueTypeById = groupBy(project.issue_types, (x) -> x.id)\r\n\r\n        return project\r\n\r\n    # We need to guarantee that the last petition done here is the finally used\r\n    # When searching by text loadIssues can be called fastly with different parameters and\r\n    # can be resolved in a different order than generated\r\n    # We count the requests made and only if the callback is for the last one data is updated\r\n    loadIssuesRequests: 0\r\n    loadIssues: =>\r\n        params = @location.search()\r\n\r\n        promise = @rs.issues.list(@scope.projectId, params)\r\n        @.loadIssuesRequests += 1\r\n        promise.index = @.loadIssuesRequests\r\n        promise.then (data) =>\r\n            if promise.index == @.loadIssuesRequests\r\n                @scope.issues = data.models\r\n                @scope.page = data.current\r\n                @scope.count = data.count\r\n                @scope.paginatedBy = data.paginatedBy\r\n\r\n            return data\r\n\r\n        return promise\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.initializeSubscription()\r\n        @.generateFilters()\r\n\r\n        if @rs.issues.getIssuesShowTags(@scope.projectId) == false\r\n            @showTags = false\r\n\r\n        return @.loadIssues()\r\n\r\n    # Functions used from templates\r\n    addNewIssue: ->\r\n        project = @projectService.project.toJS()\r\n        @rootscope.$broadcast(\"genericform:new\", {\r\n            'objType': 'issue',\r\n            'project': project\r\n        })\r\n\r\n    addIssuesInBulk: ->\r\n        project = @projectService.project.toJS()\r\n        @rootscope.$broadcast(\"issueform:bulk\", project.id)\r\n\r\n    getIssuesOrderBy: ->\r\n        if _.isString(@location.search().order_by)\r\n            return @location.search().order_by\r\n        else\r\n            return \"created_date\"\r\n\r\nmodule.controller(\"IssuesController\", IssuesController)\r\n\r\n#############################################################################\r\n## Issues Pagination Directive\r\n#############################################################################\r\n\r\nIssuesPaginationDirective = ($log, $location, $template, $compile) ->\r\n    ## Issues Pagination\r\n    template = $template.get(\"issue/issue-paginator.html\", true)\r\n\r\n    linkPagination = ($scope, $el, $attrs, $ctrl) ->\r\n        # Constants\r\n        afterCurrent = 2\r\n        beforeCurrent = 4\r\n        atBegin = 2\r\n        atEnd = 2\r\n\r\n        $pagEl = $el.find(\".issues-paginator\")\r\n\r\n        getNumPages = ->\r\n            numPages = $scope.count / $scope.paginatedBy\r\n            if parseInt(numPages, 10) < numPages\r\n                numPages = parseInt(numPages, 10) + 1\r\n            else\r\n                numPages = parseInt(numPages, 10)\r\n\r\n            return numPages\r\n\r\n        renderPagination = ->\r\n            numPages = getNumPages()\r\n\r\n            if numPages <= 1\r\n                $pagEl.hide()\r\n                return\r\n            $pagEl.show()\r\n\r\n            pages = []\r\n            options = {}\r\n            options.pages = pages\r\n            options.showPrevious = ($scope.page > 1)\r\n            options.showNext = not ($scope.page == numPages)\r\n\r\n            cpage = $scope.page\r\n\r\n            for i in [1..numPages]\r\n                if i == (cpage + afterCurrent) and numPages > (cpage + afterCurrent + atEnd)\r\n                    pages.push({classes: \"dots\", type: \"dots\"})\r\n                else if i == (cpage - beforeCurrent) and cpage > (atBegin + beforeCurrent)\r\n                    pages.push({classes: \"dots\", type: \"dots\"})\r\n                else if i > (cpage + afterCurrent) and i <= (numPages - atEnd)\r\n                else if i < (cpage - beforeCurrent) and i > atBegin\r\n                else if i == cpage\r\n                    pages.push({classes: \"active\", num: i, type: \"page-active\"})\r\n                else\r\n                    pages.push({classes: \"page\", num: i, type: \"page\"})\r\n\r\n\r\n            html = template(options)\r\n            html = $compile(html)($scope)\r\n\r\n            $pagEl.html(html)\r\n\r\n        $scope.$watch \"issues\", (value) ->\r\n            # Do nothing if value is not logical true\r\n            return if not value\r\n\r\n            renderPagination()\r\n\r\n        $el.on \"click\", \".issues-paginator a.next\", (event) ->\r\n            event.preventDefault()\r\n\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", $scope.page + 1)\r\n                $ctrl.loadIssues()\r\n\r\n        $el.on \"click\", \".issues-paginator a.previous\", (event) ->\r\n            event.preventDefault()\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", $scope.page - 1)\r\n                $ctrl.loadIssues()\r\n\r\n        $el.on \"click\", \".issues-paginator li.page > a\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            pagenum = target.data(\"pagenum\")\r\n\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", pagenum)\r\n                $ctrl.loadIssues()\r\n\r\n    ## Issues Link\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        linkPagination($scope, $el, $attrs, $ctrl)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgIssuesPagination\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesPaginationDirective])\r\n\r\n#############################################################################\r\n## Issues Ordering Directive\r\n#############################################################################\r\n\r\nIssuesOrderingDirective = ($log, $location, $template, $compile) ->\r\n    ## Issues Filters\r\n    linkOrdering = ($scope, $el, $attrs, $ctrl) ->\r\n        # Draw the arrow the first time\r\n\r\n        currentOrder = $ctrl.getIssuesOrderBy()\r\n\r\n        if currentOrder\r\n            icon = if startswith(currentOrder, \"-\") then \"icon-arrow-up\" else \"icon-arrow-down\"\r\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='#{trim(currentOrder, \"-\")}']\")\r\n\r\n            svg = colHeadElement.find('svg')\r\n\r\n            svg.addClass(icon)\r\n            $compile(colHeadElement.contents())($scope)\r\n\r\n        $el.on \"click\", \".row.title > div:not(.skip-order)\", (event) ->\r\n            event.preventDefault();\r\n            target = angular.element(event.currentTarget)\r\n\r\n            currentOrder = $ctrl.getIssuesOrderBy()\r\n            newOrder = target.data(\"fieldname\")\r\n\r\n            if newOrder == 'total_voters' and currentOrder != \"-total_voters\"\r\n                currentOrder = \"total_voters\"\r\n            finalOrder = if currentOrder == newOrder then \"-#{newOrder}\" else newOrder\r\n\r\n            $scope.$apply ->\r\n                $ctrl.replaceFilter(\"order_by\", finalOrder)\r\n\r\n                if $ctrl.filtersHashSuffix\r\n                    urlfilters = $ctrl.getQueryParams()\r\n                    $ctrl.storeFilters($ctrl.params.pslug, urlfilters, $ctrl.filtersHashSuffix)\r\n\r\n                $ctrl.loadIssues().then ->\r\n                    # Update the arrow\r\n                    $el.find('.row.title svg').removeClass()\r\n                    colHeadElement = $el.find(\".row.title > div[data-fieldname='#{trim(finalOrder, \"-\")}']\")\r\n                    icon = if startswith(finalOrder, \"-\") then \"icon-arrow-up\" else \"icon-arrow-down\"\r\n\r\n                    colHeadElement.find('svg').addClass(icon)\r\n\r\n                    $compile(target.contents())($scope)\r\n\r\n    ## Issues Link\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        linkOrdering($scope, $el, $attrs, $ctrl)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgIssuesOrdering\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesOrderingDirective])\r\n\r\n#############################################################################\r\n## Issue status Directive (popover for change status)\r\n#############################################################################\r\n\r\nIssueStatusInlineEditionDirective = ($repo, $template, $rootscope) ->\r\n    ###\r\n    Print the status of an Issue and a popover to change it.\r\n    - tg-issue-status-inline-edition: The issue\r\n\r\n    Example:\r\n\r\n      div.status(tg-issue-status-inline-edition=\"issue\")\r\n        a.issue-status(href=\"\")\r\n\r\n    NOTE: This directive need 'issueStatusById' and 'project'.\r\n    ###\r\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true)\r\n\r\n    updateIssueStatus = ($el, issue, issueStatusById) ->\r\n        issueStatusDomParent = $el.find(\".issue-status\")\r\n        issueStatusDom = $el.find(\".issue-status .issue-status-bind\")\r\n\r\n        status = issueStatusById[issue.status]\r\n\r\n        if status\r\n            issueStatusDom.text(status.name)\r\n            issueStatusDom.prop(\"title\", status.name)\r\n            issueStatusDomParent.css('color', status.color)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        issue = $scope.$eval($attrs.tgIssueStatusInlineEdition)\r\n\r\n        $el.on \"click\", \".issue-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            target = angular.element(event.currentTarget)\r\n\r\n            issue.status = target.data(\"status-id\")\r\n            $el.find(\".pop-status\").popover().close()\r\n            updateIssueStatus($el, issue, $scope.issueStatusById)\r\n\r\n            attachments = issue.attachments\r\n\r\n            $scope.$apply () ->\r\n                $repo.save(issue).then (response) ->\r\n                    issue.attachments = attachments\r\n                    issue._isModified = false\r\n                    issue._attrs = _.extend(issue.getAttrs(), issue)\r\n                    issue._modifiedAttrs = {}\r\n\r\n                    $rootscope.$broadcast(\"status:changed\", response)\r\n\r\n        taiga.bindOnce $scope, \"project\", (project) ->\r\n            $el.append(selectionTemplate({ 'statuses':  project.issue_statuses }))\r\n            updateIssueStatus($el, issue, $scope.issueStatusById)\r\n\r\n            # If the user has not enough permissions the click events are unbinded\r\n            if project.my_permissions.indexOf(\"modify_issue\") == -1\r\n                $el.unbind(\"click\")\r\n                $el.find(\"a\").addClass(\"not-clickable\")\r\n\r\n        $scope.$watch $attrs.tgIssueStatusInlineEdition, (val) =>\r\n            updateIssueStatus($el, val, $scope.issueStatusById)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\",\r\n                                                IssueStatusInlineEditionDirective])\r\n\r\n\r\n#############################################################################\r\n## Issue assigned to Directive\r\n#############################################################################\r\n\r\nIssueAssignedToInlineEditionDirective = ($repo, $rootscope, $translate, avatarService, $lightboxFactory) ->\r\n    template = _.template(\"\"\"\r\n    <img style=\"background-color: <%- bg %>\" src=\"<%- imgurl %>\" alt=\"<%- name %>\"/>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        updateIssue = (issue) ->\r\n            ctx = {\r\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\r\n                imgurl: \"/#{window._version}/images/unnamed.png\"\r\n            }\r\n\r\n            member = $scope.usersById[issue.assigned_to]\r\n\r\n            avatar = avatarService.getAvatar(member)\r\n            ctx.imgurl = avatar.url\r\n            ctx.bg = null\r\n\r\n            if member\r\n                ctx.name = member.full_name_display\r\n                ctx.bg = avatar.bg\r\n\r\n            $el.find(\".avatar\").html(template(ctx))\r\n            $el.find(\".issue-assignedto\").attr('title', ctx.name)\r\n\r\n        $ctrl = $el.controller()\r\n        issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition)\r\n        updateIssue(issue)\r\n\r\n        $el.on \"click\", \".issue-assignedto\", (event) ->\r\n            onClose = (assignedUsers) =>\r\n                issue.assigned_to = assignedUsers.pop() || null\r\n                attachments = issue.attachments\r\n                $repo.save(issue).then ->\r\n                    issue.attachments = attachments\r\n                    issue._isModified = false\r\n                    issue._attrs = _.extend(issue.getAttrs(), issue)\r\n                    issue._modifiedAttrs = {}\r\n\r\n                    updateIssue(issue)\r\n                    $rootscope.$broadcast(\"assigned-to:changed\", issue)\r\n\r\n            $lightboxFactory.create(\r\n                'tg-lb-select-user',\r\n                {\r\n                    \"class\": \"lightbox lightbox-select-user\",\r\n                },\r\n                {\r\n                    \"currentUsers\": [issue.assigned_to],\r\n                    \"activeUsers\": $scope.activeUsers,\r\n                    \"onClose\": onClose,\r\n                    \"single\": true,\r\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n                }\r\n            )\r\n\r\n        taiga.bindOnce $scope, \"project\", (project) ->\r\n            # If the user has not enough permissions the click events are unbinded\r\n            if project.my_permissions.indexOf(\"modify_issue\") == -1\r\n                $el.unbind(\"click\")\r\n                $el.find(\"a\").addClass(\"not-clickable\")\r\n\r\n        $scope.$watch $attrs.tgIssueAssignedToInlineEdition, (val) ->\r\n            updateIssue(val)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\",\r\n                                                    \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaUserStories\")\r\n\r\n#############################################################################\r\n## User story Detail Controller\r\n#############################################################################\r\n\r\nclass UserStoryDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$log\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"tgErrorHandlingService\",\r\n        \"$tgConfig\",\r\n        \"tgProjectService\",\r\n        \"tgWysiwygService\",\r\n        \"tgAttachmentsFullService\",\r\n        \"$tgModel\",\r\n        \"$sce\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\r\n                  @log, @appMetaService, @navUrls, @analytics, @translate, @modelTransform,\r\n                  @errorHandlingService, @configService, @projectService, @wysiwigService,\r\n                  @attachmentsFullService, @tgmodel, @sce) ->\r\n        bindMethods(@)\r\n\r\n        @scope.usRef = @params.usref\r\n        @scope.sectionName = @translate.instant(\"US.SECTION_NAME\")\r\n        @scope.tribeEnabled = @configService.config.tribeHost\r\n        @scope.attachmentsReady = false\r\n        @scope.$on \"attachments:loaded\", () =>\r\n            @scope.attachmentsReady = true\r\n\r\n        @.initializeEventHandlers()\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            @._setMeta()\r\n            @.initializeOnDeleteGoToUrl()\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    _setMeta: ->\r\n        totalTasks = @scope.tasks.length\r\n        closedTasks = _.filter(@scope.tasks, (t) => @scope.taskStatusById[t.status].is_closed).length\r\n        progressPercentage = if totalTasks > 0 then Math.round(100 * closedTasks / totalTasks) else 0\r\n\r\n        title = @translate.instant(\"US.PAGE_TITLE\", {\r\n            userStoryRef: \"##{@scope.us.ref}\"\r\n            userStorySubject: @scope.us.subject\r\n            projectName: @scope.project.name\r\n        })\r\n\r\n        descriptionHtml = @sce.getTrustedHtml(@wysiwigService.getHTML(@scope.us.description) or \"\")\r\n\r\n        description = @translate.instant(\"US.PAGE_DESCRIPTION\", {\r\n            userStoryStatus: @scope.statusById[@scope.us.status]?.name or \"--\"\r\n            userStoryPoints: @scope.us.total_points\r\n            userStoryDescription: angular.element(descriptionHtml).text()\r\n            userStoryClosedTasks: closedTasks\r\n            userStoryTotalTasks: totalTasks\r\n            userStoryProgressPercentage: progressPercentage\r\n        })\r\n\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments('us', @scope.usId, @scope.projectId)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.relateToEpic = (us) =>\r\n            @scope.$broadcast(\"relate-to-epic:add\", us)\r\n\r\n        @scope.$on \"related-tasks:update\", =>\r\n            @.loadTasks()\r\n            @scope.tasks = _.clone(@scope.tasks, false)\r\n            allClosed = _.every @scope.tasks, (task) -> return task.is_closed\r\n\r\n            if @scope.us.is_closed != allClosed\r\n                @.loadUs()\r\n\r\n        @scope.$on \"attachment:create\", =>\r\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1)\r\n\r\n        @scope.$on \"task:reorder\", (event, task, newIndex) =>\r\n            @.reorderTask(task, newIndex)\r\n\r\n        @scope.$on \"comment:new\", =>\r\n            @.loadUs()\r\n\r\n    initializeOnDeleteGoToUrl: ->\r\n        ctx = {project: @scope.project.slug}\r\n        @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\r\n\r\n        if @params[\"kanban-status\"] && @scope.project.is_kanban_activated\r\n            @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-kanban\", ctx)\r\n\r\n        else\r\n            if @scope.project.is_backlog_activated\r\n                if @scope.us.milestone\r\n                    ctx.sprint = @scope.sprint.slug\r\n                    @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-taskboard\", ctx)\r\n                else\r\n                    @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-backlog\", ctx)\r\n\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.statusList = project.us_statuses\r\n        @scope.statusById = groupBy(project.us_statuses, (x) -> x.id)\r\n        @scope.taskStatusById = groupBy(project.task_statuses, (x) -> x.id)\r\n        @scope.pointsList = _.sortBy(project.points, \"order\")\r\n        @scope.pointsById = groupBy(@scope.pointsList, (e) -> e.id)\r\n        return project\r\n\r\n    loadUs: ->\r\n        kanbanHttpParams = {}\r\n        locationSearch = @location.search()\r\n        backlogHttpParams = _.pick(locationSearch, \"milestone\", \"no-milestone\")\r\n\r\n        Object.keys(locationSearch).forEach (key) ->\r\n            if key.startsWith('kanban-')\r\n                kanbanHttpParams[key.replace('kanban-', '')] = locationSearch[key]\r\n\r\n        Object.keys(locationSearch).forEach (key) ->\r\n            if key.startsWith('backlog-')\r\n                backlogHttpParams[key.replace('backlog-', '')] = locationSearch[key]\r\n\r\n        milestone = backlogHttpParams.milestone\r\n\r\n        if milestone\r\n            @rs.userstories.storeQueryParams(@scope.projectId,  _.merge(\r\n                backlogHttpParams,\r\n                {\r\n                    milestone: milestone\r\n                    order_by: \"sprint_order\"\r\n                }\r\n            ))\r\n\r\n        noMilestone = backlogHttpParams[\"no-milestone\"]\r\n        if noMilestone\r\n            @rs.userstories.storeQueryParams(@scope.projectId, _.merge(\r\n                backlogHttpParams,\r\n                {\r\n                    milestone: \"null\"\r\n                    order_by: \"backlog_order\"\r\n                }\r\n            ))\r\n\r\n        kanbanStaus = kanbanHttpParams[\"status\"]\r\n        if kanbanStaus\r\n            @rs.userstories.storeQueryParams(@scope.projectId, _.merge(\r\n                kanbanHttpParams,\r\n                {order_by: \"kanban_order\"}\r\n            ))\r\n\r\n        return @rs.userstories.getByRef(@scope.projectId, @params.usref).then (us) =>\r\n            @rootscope.$broadcast(\"userstory:loaded\", us)\r\n\r\n            @scope.us = us\r\n            @scope.usId = us.id\r\n            @scope.commentModel = us\r\n\r\n            @.loadAttachments()\r\n\r\n            window.legacyChannel.next({\r\n                type: 'SET_DETAIL_OBJ',\r\n                value: us._attrs\r\n            })\r\n\r\n            @modelTransform.setObject(@scope, 'us')\r\n\r\n            return us\r\n\r\n    loadSprint: ->\r\n        if @scope.us.milestone\r\n            return @rs.sprints.get(@scope.us.project, @scope.us.milestone).then (sprint) =>\r\n                @scope.sprint = sprint\r\n                return sprint\r\n\r\n    loadTasks: ->\r\n        return @rs.tasks.list(@scope.projectId, null, @scope.usId).then (tasks) =>\r\n            @scope.tasks = tasks\r\n            return tasks\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.loadUs().then(=> @q.all([@.loadSprint(), @.loadTasks()]))\r\n\r\n    ###\r\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\r\n    #       See app/modules/components/vote-button for more info\r\n    ###\r\n    onUpvote: ->\r\n        onSuccess = =>\r\n            @.loadUs()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.userstories.upvote(@scope.usId).then(onSuccess, onError)\r\n\r\n    onDownvote: ->\r\n        onSuccess = =>\r\n            @.loadUs()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.userstories.downvote(@scope.usId).then(onSuccess, onError)\r\n\r\n    ###\r\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\r\n    #       See app/modules/components/watch-button for more info\r\n    ###\r\n    onWatch: ->\r\n        onSuccess = =>\r\n            @.loadUs()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.userstories.watch(@scope.usId).then(onSuccess, onError)\r\n\r\n    onUnwatch: ->\r\n        onSuccess = =>\r\n            @.loadUs()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.userstories.unwatch(@scope.usId).then(onSuccess, onError)\r\n\r\n    onTribeInfo: ->\r\n        publishTitle = @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\r\n        image = $('<img />')\r\n            .attr({\r\n                'src': \"/#{window._version}/images/monster-fight.png\",\r\n                'alt': @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\r\n            })\r\n        text = @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\")\r\n        publishDesc = $('<div></div>').append(image).append(text)\r\n        @confirm.success(publishTitle, publishDesc)\r\n\r\n    reorderTask: (task, newIndex) ->\r\n        orderList = {}\r\n        @scope.tasks.forEach (it) ->\r\n            orderList[it.id] = it.us_order\r\n\r\n        withoutMoved = @scope.tasks.filter (it) -> it.id != task.id\r\n        beforeDestination = withoutMoved.slice(0, newIndex)\r\n        afterDestination = withoutMoved.slice(newIndex)\r\n\r\n        previous = beforeDestination[beforeDestination.length - 1]\r\n        newOrder = if !previous then 0 else previous.us_order + 1\r\n\r\n        orderList[task.id] = newOrder\r\n\r\n        previousWithTheSameOrder = beforeDestination.filter (it) ->\r\n            it.us_order == previous.us_order\r\n\r\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) ->\r\n            [it.id, it.us_order]\r\n        )\r\n\r\n        afterDestination.forEach (it) -> orderList[it.id] = it.us_order + 1\r\n\r\n        @scope.tasks =  _.map(@scope.tasks, (it) ->\r\n            it.us_order = orderList[it.id]\r\n            return it\r\n        )\r\n        @scope.tasks = _.sortBy(@scope.tasks, \"us_order\")\r\n\r\n        data = {\r\n            us_order: newOrder,\r\n            version: task.version\r\n        }\r\n\r\n        return @rs.tasks.reorder(task.id, data, setOrders).then (newTask) =>\r\n            newTask = @tgmodel.make_model(\"tasks\", newTask)\r\n\r\n            @scope.tasks =  _.map(@scope.tasks, (it) ->\r\n                return if it.id == newTask.id then newTask else it\r\n            )\r\n            @rootscope.$broadcast(\"related-tasks:reordered\")\r\n\r\n\r\n\r\nmodule.controller(\"UserStoryDetailController\", UserStoryDetailController)\r\n\r\n\r\n#############################################################################\r\n## User story status display directive\r\n#############################################################################\r\n\r\nUsStatusDisplayDirective = ($template, $compile) ->\r\n    # Display if a US is open or closed and its kanban status.\r\n    #\r\n    # Example:\r\n    #     tg-us-status-display(ng-model=\"us\")\r\n    #\r\n    # Requirements:\r\n    #   - US object (ng-model)\r\n    #   - scope.statusById object\r\n\r\n    template = $template.get(\"common/components/status-display.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (us) ->\r\n            status = $scope.statusById[us.status]\r\n\r\n            html = template({\r\n                is_closed: us.is_closed\r\n                status: status\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.ngModel, (us) ->\r\n            render(us) if us?\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective])\r\n\r\n#############################################################################\r\n## User story status button directive\r\n#############################################################################\r\n\r\nUsStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    # Display the status of a US and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-us-status-button(ng-model=\"us\")\r\n    #\r\n    # Requirements:\r\n    #   - Us object (ng-model)\r\n    #   - scope.statusById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"common/components/status-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\r\n\r\n        render = (us) =>\r\n            status = $scope.statusById[us.status]\r\n\r\n            html = template({\r\n                status: status\r\n                statuses: $scope.statusList\r\n                editable: isEditable()\r\n            })\r\n\r\n            $el.html(html)\r\n\r\n            $compile($el.contents())($scope)\r\n\r\n        save = (status) =>\r\n            $el.find(\".pop-status\").popover().close()\r\n\r\n            currentLoading = $loading()\r\n                .target($el.find('.js-edit-status'))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (us) ->\r\n                us.status = status\r\n\r\n                return us\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".js-edit-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n            status = target.data(\"status-id\")\r\n\r\n            save(status)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.status\r\n        , () ->\r\n            us = $model.$modelValue\r\n\r\n            render(us) if us\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\",\r\n                                      UsStatusButtonDirective])\r\n\r\n\r\n#############################################################################\r\n## User story team requirements button directive\r\n#############################################################################\r\n\r\nUsTeamRequirementButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    template = $template.get(\"us/us-team-requirement-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        canEdit = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\r\n\r\n        render = (us) ->\r\n            ctx = {\r\n                canEdit: canEdit()\r\n                isRequired: us.team_requirement\r\n            }\r\n            html = template(ctx)\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (team_requirement) ->\r\n            currentLoading = $loading()\r\n                .target($el.find(\"label\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (us) ->\r\n                us.team_requirement = team_requirement\r\n\r\n                return us\r\n\r\n            transform.then =>\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                currentLoading.finish()\r\n                $confirm.notify(\"error\")\r\n\r\n        $el.on \"click\", \".team-requirement\", (event) ->\r\n            return if not canEdit()\r\n\r\n            team_requirement = not $model.$modelValue.team_requirement\r\n\r\n            save(team_requirement)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.team_requirement\r\n        , () ->\r\n            us = $model.$modelValue\r\n\r\n            render(us) if us\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective])\r\n\r\n#############################################################################\r\n## User story client requirements button directive\r\n#############################################################################\r\n\r\nUsClientRequirementButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) ->\r\n    template = $template.get(\"us/us-client-requirement-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        canEdit = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\r\n\r\n        render = (us) ->\r\n            ctx = {\r\n                canEdit: canEdit()\r\n                isRequired: us.client_requirement\r\n            }\r\n            html = $compile(template(ctx))($scope)\r\n            $el.html(html)\r\n\r\n        save = (client_requirement) ->\r\n            currentLoading = $loading()\r\n                .target($el.find(\"label\"))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (us) ->\r\n                us.client_requirement = client_requirement\r\n\r\n                return us\r\n\r\n            transform.then =>\r\n                currentLoading.finish()\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n        $el.on \"click\", \".client-requirement\", (event) ->\r\n            return if not canEdit()\r\n\r\n            client_requirement = not $model.$modelValue.client_requirement\r\n            save(client_requirement)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.client_requirement\r\n        , () ->\r\n            us = $model.$modelValue\r\n            render(us) if us\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\",\r\n                                                 UsClientRequirementButtonDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ngroupBy = @.taiga.groupBy\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaTasks\")\r\n\r\n\r\n#############################################################################\r\n## Task Detail Controller\r\n#############################################################################\r\n\r\nclass TaskDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$log\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsFullService\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\r\n                  @log, @appMetaService, @navUrls, @analytics, @translate, @modelTransform, @errorHandlingService, @projectService, @attachmentsFullService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.taskRef = @params.taskref\r\n        @scope.sectionName = @translate.instant(\"TASK.SECTION_NAME\")\r\n        @scope.attachmentsReady = false\r\n        @scope.$on \"attachments:loaded\", () =>\r\n            @scope.attachmentsReady = true\r\n        @.initializeEventHandlers()\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            @._setMeta()\r\n            @.initializeOnDeleteGoToUrl()\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    _setMeta: ->\r\n        title = @translate.instant(\"TASK.PAGE_TITLE\", {\r\n            taskRef: \"##{@scope.task.ref}\"\r\n            taskSubject: @scope.task.subject\r\n            projectName: @scope.project.name\r\n        })\r\n        description = @translate.instant(\"TASK.PAGE_DESCRIPTION\", {\r\n            taskStatus: @scope.statusById[@scope.task.status]?.name or \"--\"\r\n            taskDescription: angular.element(@scope.task.description_html or \"\").text()\r\n        })\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments('task', @scope.taskId, @scope.projectId)\r\n\r\n    initializeEventHandlers: ->\r\n        @scope.$on \"promote-task-to-us:success\", (e, ref) =>\r\n            @analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1)\r\n            ctx = {project: @scope.project.slug, ref: ref}\r\n            @location.path(@navUrls.resolve(\"project-userstories-detail\", ctx))\r\n\r\n        @scope.$on \"attachment:create\", =>\r\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1)\r\n        @scope.$on \"custom-attributes-values:edit\", =>\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        @scope.$on \"comment:new\", =>\r\n            @.loadTask()\r\n\r\n    initializeOnDeleteGoToUrl: ->\r\n        ctx = {project: @scope.project.slug}\r\n        @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\r\n        if @scope.project.is_backlog_activated\r\n            if @scope.task.milestone\r\n                ctx.sprint = @scope.sprint.slug\r\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-taskboard\", ctx)\r\n            else if @scope.task.us\r\n                ctx.ref = @scope.us.ref\r\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-userstories-detail\", ctx)\r\n        else if @scope.project.is_kanban_activated\r\n            if @scope.us\r\n                ctx.ref = @scope.us.ref\r\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-userstories-detail\", ctx)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.statusList = project.task_statuses\r\n        @scope.statusById = groupBy(project.task_statuses, (x) -> x.id)\r\n        return project\r\n\r\n    loadTask: ->\r\n        return @rs.tasks.getByRef(@scope.projectId, @params.taskref).then (task) =>\r\n            @scope.task = task\r\n            @scope.taskId = task.id\r\n            @scope.commentModel = task\r\n\r\n            @.loadAttachments()\r\n\r\n            window.legacyChannel.next({\r\n                type: 'SET_DETAIL_OBJ',\r\n                value: task._attrs\r\n            })\r\n\r\n            @modelTransform.setObject(@scope, 'task')\r\n\r\n            if @scope.task.neighbors.previous?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.task.neighbors.previous.ref\r\n                }\r\n                @scope.previousUrl = @navUrls.resolve(\"project-tasks-detail\", ctx)\r\n\r\n            if @scope.task.neighbors.next?.ref?\r\n                ctx = {\r\n                    project: @scope.project.slug\r\n                    ref: @scope.task.neighbors.next.ref\r\n                }\r\n                @scope.nextUrl = @navUrls.resolve(\"project-tasks-detail\", ctx)\r\n            return task\r\n\r\n    loadSprint: ->\r\n        if @scope.task.milestone\r\n            return @rs.sprints.get(@scope.task.project, @scope.task.milestone).then (sprint) =>\r\n                @scope.sprint = sprint\r\n                return sprint\r\n\r\n    loadUserStory: ->\r\n        if @scope.task.user_story\r\n            return @rs.userstories.get(@scope.task.project, @scope.task.user_story).then (us) =>\r\n                @scope.us = us\r\n                return us\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        return @.loadTask().then(=> @q.all([@.loadSprint(), @.loadUserStory()]))\r\n\r\n    ###\r\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\r\n    #       See app/modules/components/vote-button for more info\r\n    ###\r\n    onUpvote: ->\r\n        onSuccess = =>\r\n            @.loadTask()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.tasks.upvote(@scope.taskId).then(onSuccess, onError)\r\n\r\n    onDownvote: ->\r\n        onSuccess = =>\r\n            @.loadTask()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.tasks.downvote(@scope.taskId).then(onSuccess, onError)\r\n\r\n    ###\r\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\r\n    #       See app/modules/components/watch-button for more info\r\n    ###\r\n    onWatch: ->\r\n        onSuccess = =>\r\n            @.loadTask()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.tasks.watch(@scope.taskId).then(onSuccess, onError)\r\n\r\n    onUnwatch: ->\r\n        onSuccess = =>\r\n            @.loadTask()\r\n            @rootscope.$broadcast(\"object:updated\")\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        return @rs.tasks.unwatch(@scope.taskId).then(onSuccess, onError)\r\n\r\nmodule.controller(\"TaskDetailController\", TaskDetailController)\r\n\r\n\r\n#############################################################################\r\n## Task status display directive\r\n#############################################################################\r\n\r\nTaskStatusDisplayDirective = ($template, $compile) ->\r\n    # Display if a Task is open or closed and its taskboard status.\r\n    #\r\n    # Example:\r\n    #     tg-task-status-display(ng-model=\"task\")\r\n    #\r\n    # Requirements:\r\n    #   - Task object (ng-model)\r\n    #   - scope.statusById object\r\n\r\n    template = $template.get(\"common/components/status-display.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (task) ->\r\n            status =  $scope.statusById[task.status]\r\n\r\n            html = template({\r\n                is_closed: status.is_closed\r\n                status: status\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.ngModel, (task) ->\r\n            render(task) if task?\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective])\r\n\r\n\r\n#############################################################################\r\n## Task status button directive\r\n#############################################################################\r\n\r\nTaskStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) ->\r\n    # Display the status of Task and you can edit it.\r\n    #\r\n    # Example:\r\n    #     tg-task-status-button(ng-model=\"task\")\r\n    #\r\n    # Requirements:\r\n    #   - Task object (ng-model)\r\n    #   - scope.statusById object\r\n    #   - $scope.project.my_permissions\r\n\r\n    template = $template.get(\"common/components/status-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\r\n\r\n        render = (task) =>\r\n            status = $scope.statusById[task.status]\r\n\r\n            html = $compile(template({\r\n                status: status\r\n                statuses: $scope.statusList\r\n                editable: isEditable()\r\n            }))($scope)\r\n\r\n            $el.html(html)\r\n\r\n        save = (status) ->\r\n            currentLoading = $loading()\r\n                .target($el)\r\n                .start()\r\n\r\n            transform = $modelTransform.save (task) ->\r\n                task.status = status\r\n\r\n                return task\r\n\r\n            onSuccess = ->\r\n                $rootScope.$broadcast(\"object:updated\")\r\n                currentLoading.finish()\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n                currentLoading.finish()\r\n\r\n            transform.then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".js-edit-status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            $el.find(\".pop-status\").popover().open()\r\n\r\n        $el.on \"click\", \".status\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            return if not isEditable()\r\n\r\n            target = angular.element(event.currentTarget)\r\n\r\n            $.fn.popover().closeAll()\r\n\r\n            save(target.data(\"status-id\"))\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.status\r\n        , () ->\r\n            task = $model.$modelValue\r\n            render(task) if task\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\r\n                                        \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective])\r\n\r\n\r\nTaskIsIocaineButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) ->\r\n    template = $template.get(\"issue/iocaine-button.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        isEditable = ->\r\n            return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\r\n\r\n        render = (task) ->\r\n            if not isEditable() and not task.is_iocaine\r\n                $el.html(\"\")\r\n                return\r\n\r\n            ctx = {\r\n                isIocaine: task.is_iocaine\r\n                isEditable: isEditable()\r\n            }\r\n            html = $compile(template(ctx))($scope)\r\n            $el.html(html)\r\n\r\n        save = (is_iocaine) ->\r\n            currentLoading = $loading()\r\n                .target($el.find('label'))\r\n                .start()\r\n\r\n            transform = $modelTransform.save (task) ->\r\n                task.is_iocaine = is_iocaine\r\n\r\n                return task\r\n\r\n            transform.then ->\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n            transform.finally ->\r\n                currentLoading.finish()\r\n\r\n        $el.on \"click\", \".is-iocaine\", (event) ->\r\n            return if not isEditable()\r\n\r\n            is_iocaine = not $model.$modelValue.is_iocaine\r\n            save(is_iocaine)\r\n\r\n        $scope.$watch () ->\r\n            return $model.$modelValue?.is_iocaine\r\n        , () ->\r\n            task = $model.$modelValue\r\n            render(task) if task\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\r\n                                           \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\n\r\nmodule = angular.module(\"taigaTeam\")\r\n\r\n#############################################################################\r\n## Team Controller\r\n#############################################################################\r\n\r\nclass TeamController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$location\",\r\n        \"$tgNavUrls\",\r\n        \"tgAppMetaService\",\r\n        \"$tgAuth\",\r\n        \"$translate\",\r\n        \"tgProjectService\",\r\n        \"tgErrorHandlingService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @rs, @params, @q, @location, @navUrls, @appMetaService, @auth,\r\n                  @translate, @projectService, @errorHandlingService) ->\r\n        @scope.sectionName = \"TEAM.SECTION_NAME\"\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then =>\r\n            title = @translate.instant(\"TEAM.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\r\n                projectName: @scope.project.name,\r\n                projectDescription: @scope.project.description\r\n            })\r\n            @appMetaService.setAll(title, description)\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    setRole: (role) ->\r\n        if role\r\n            @scope.filtersRole = role\r\n        else\r\n            @scope.filtersRole = null\r\n\r\n    loadMembers: ->\r\n        user = @auth.getUser()\r\n\r\n        # Calculate totals\r\n        @scope.totals = {}\r\n        for member in @scope.activeUsers\r\n            @scope.totals[member.id] = 0\r\n\r\n        # Get current user\r\n        @scope.currentUser = _.find(@scope.activeUsers, {id: user?.id})\r\n\r\n        # Get member list without current user\r\n        @scope.memberships = _.reject(@scope.activeUsers, {id: user?.id})\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n\r\n        @scope.issuesEnabled = project.is_issues_activated\r\n        @scope.tasksEnabled = project.is_kanban_activated or project.is_backlog_activated\r\n        @scope.wikiEnabled = project.is_wiki_activated\r\n        @scope.owner = project.owner.id\r\n\r\n        return project\r\n\r\n    loadMemberStats: ->\r\n        return @rs.projects.memberStats(@scope.projectId).then (stats) =>\r\n          totals = {}\r\n          _.forEach @scope.totals, (total, userId) =>\r\n              vals = _.map(stats, (memberStats, statsKey) -> memberStats[userId])\r\n              total = _.reduce(vals, (sum, el) -> sum + el)\r\n              @scope.totals[userId] = total\r\n\r\n          @scope.stats = @._processStats(stats)\r\n          @scope.stats.totals = @scope.totals\r\n\r\n    _processStat: (stat) ->\r\n        max = _.max(_.toArray(stat))\r\n        min = _.min(_.toArray(stat))\r\n\r\n        singleStat = Object()\r\n        for own key, value of stat\r\n            if value == min\r\n                singleStat[key] = 0.1\r\n            else if value == max\r\n                singleStat[key] = 1\r\n            else\r\n                singleStat[key] = (value * 0.5) / max\r\n\r\n        return singleStat\r\n\r\n    _processStats: (stats) ->\r\n        for key,value of stats\r\n            stats[key] = @._processStat(value)\r\n        return stats\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @.loadMembers()\r\n\r\n        userRoles = _.map @scope.users, (user) -> user.role\r\n\r\n        @scope.roles = _.filter @scope.roles, (role) -> userRoles.indexOf(role.id) != -1\r\n\r\n        return @.loadMemberStats()\r\n\r\nmodule.controller(\"TeamController\", TeamController)\r\n\r\n\r\n#############################################################################\r\n## Team Filters Directive\r\n#############################################################################\r\n\r\nTeamFiltersDirective = () ->\r\n    return {\r\n        templateUrl: \"team/team-filter.html\"\r\n    }\r\n\r\nmodule.directive(\"tgTeamFilters\", [TeamFiltersDirective])\r\n\r\n\r\n#############################################################################\r\n## Team Member Stats Directive\r\n#############################################################################\r\n\r\nTeamMemberStatsDirective = () ->\r\n    return {\r\n        templateUrl: \"team/team-member-stats.html\",\r\n        scope: {\r\n            stats: \"=\",\r\n            userId: \"=user\"\r\n            issuesEnabled: \"=issuesenabled\"\r\n            tasksEnabled: \"=tasksenabled\"\r\n            wikiEnabled: \"=wikienabled\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective)\r\n\r\n\r\n#############################################################################\r\n## Team Current User Directive\r\n#############################################################################\r\n\r\nTeamMemberCurrentUserDirective = () ->\r\n    return {\r\n        templateUrl: \"team/team-member-current-user.html\"\r\n        scope: {\r\n            project: \"=project\",\r\n            currentUser: \"=currentuser\",\r\n            stats: \"=\",\r\n            issuesEnabled: \"=issuesenabled\",\r\n            tasksEnabled: \"=tasksenabled\",\r\n            wikiEnabled: \"=wikienabled\",\r\n            owner: \"=owner\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective)\r\n\r\n\r\n#############################################################################\r\n## Team Members Directive\r\n#############################################################################\r\n\r\nTeamMembersDirective = () ->\r\n    template = \"team/team-members.html\"\r\n\r\n    return {\r\n        templateUrl: template\r\n        scope: {\r\n            memberships: \"=\",\r\n            filtersQ: \"=filtersq\",\r\n            filtersRole: \"=filtersrole\",\r\n            stats: \"=\",\r\n            issuesEnabled: \"=issuesenabled\",\r\n            tasksEnabled: \"=tasksenabled\",\r\n            wikiEnabled: \"=wikienabled\",\r\n            owner: \"=owner\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgTeamMembers\", TeamMembersDirective)\r\n\r\n\r\n#############################################################################\r\n## Leave project Directive\r\n#############################################################################\r\n\r\nLeaveProjectDirective = ($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        leaveConfirm = () ->\r\n            leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\")\r\n            confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\")\r\n\r\n            $confirm.ask(leave_project_text, confirm_leave_project_text).then (response) =>\r\n                promise = $rs.projects.leave($scope.project.id)\r\n\r\n                promise.then =>\r\n                    currentUserService.loadProjects().then () ->\r\n                        response.finish()\r\n                        $confirm.notify(\"success\")\r\n                        $location.path($navurls.resolve(\"home\"))\r\n\r\n                promise.then null, (response) ->\r\n                    response.finish()\r\n                    $confirm.notify('error', response.data._error_message)\r\n\r\n        $scope.leave = () ->\r\n            if $scope.project.owner.id == $scope.user.id\r\n                lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\r\n                    class: \"lightbox lightbox-leave-project-warning\"\r\n                }, {\r\n                    isCurrentUser: true,\r\n                    project: $scope.project\r\n                })\r\n            else\r\n                leaveConfirm()\r\n\r\n    return {\r\n        scope: {\r\n            user: \"=\",\r\n            project: \"=\"\r\n        },\r\n        templateUrl: \"team/leave-project.html\",\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\",\r\n                                    LeaveProjectDirective])\r\n\r\n\r\n#############################################################################\r\n## Team Filters\r\n#############################################################################\r\n\r\nmembersFilter = ->\r\n    return (members, filtersQ, filtersRole) ->\r\n        return _.filter members, (m) -> (not filtersRole or m.role == filtersRole.id) and\r\n                                        (not filtersQ or m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0)\r\n\r\nmodule.filter('membersFilter', membersFilter)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaWiki\")\r\n\r\n#############################################################################\r\n## Wiki Detail Controller\r\n#############################################################################\r\n\r\nclass WikiDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgModel\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$filter\",\r\n        \"$log\",\r\n        \"tgAppMetaService\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAnalytics\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsFullService\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @model, @confirm, @rs, @params, @q, @location,\r\n                  @filter, @log, @appMetaService, @navUrls, @analytics, @translate, @errorHandlingService, @projectService, @attachmentsFullService) ->\r\n        @scope.$on(\"wiki:links:move\", @.moveLink)\r\n        @scope.$on(\"wikipage:add\", @.loadWiki)\r\n        @scope.projectSlug = @params.pslug\r\n        @scope.wikiSlug = @params.slug\r\n        @scope.sectionName = \"Wiki\"\r\n        @scope.linksVisible = false\r\n        @scope.attachmentsReady = false\r\n        @scope.$on \"attachments:loaded\", () =>\r\n            @scope.attachmentsReady = true\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Success\r\n        promise.then () => @._setMeta()\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    _setMeta: ->\r\n        title =  @translate.instant(\"WIKI.PAGE_TITLE\", {\r\n            wikiPageName: @scope.wikiSlug\r\n            projectName: @scope.project.name\r\n        })\r\n        description =  @translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\r\n            wikiPageContent: angular.element(@scope.wiki?.html or \"\").text()\r\n            totalEditions: @scope.wiki?.editions or 0\r\n            lastModifiedDate: moment(@scope.wiki?.modified_date).format(@translate.instant(\"WIKI.DATETIME\"))\r\n        })\r\n\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments('wikipage', @scope.wikiId, @scope.projectId)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.is_wiki_activated\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadWiki: =>\r\n        promise = @rs.wiki.getBySlug(@scope.projectId, @params.slug)\r\n        promise.then (wiki) =>\r\n            @scope.wiki = wiki\r\n            @scope.wikiId = wiki.id\r\n\r\n            @.loadAttachments()\r\n\r\n            return @scope.wiki\r\n\r\n        promise.then null, (xhr) =>\r\n            @scope.wikiId = null\r\n            @scope.attachmentsReady = true\r\n\r\n            if @scope.project.my_permissions.indexOf(\"add_wiki_page\") == -1\r\n                return null\r\n\r\n            data = {\r\n                project: @scope.projectId\r\n                slug: @scope.wikiSlug\r\n                content: \"\"\r\n            }\r\n            @scope.wiki = @model.make_model(\"wiki\", data)\r\n            return @scope.wiki\r\n\r\n    loadWikiLinks: ->\r\n        return @rs.wiki.listLinks(@scope.projectId).then (wikiLinks) =>\r\n            @scope.wikiLinks = wikiLinks\r\n\r\n            for link in @scope.wikiLinks\r\n                link.url = @navUrls.resolve(\"project-wiki-page\", {\r\n                    project: @scope.projectSlug\r\n                    slug: link.href\r\n                })\r\n\r\n            selectedWikiLink = _.find(wikiLinks, {href: @scope.wikiSlug})\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n        @q.all([@.loadWikiLinks(), @.loadWiki()]).then @.checkLinksPerms.bind(this)\r\n\r\n    checkLinksPerms: ->\r\n        if @scope.project.my_permissions.indexOf(\"add_wiki_link\") != -1 ||\r\n          (@scope.project.my_permissions.indexOf(\"view_wiki_links\") != -1 && @scope.wikiLinks.length)\r\n            @scope.linksVisible = true\r\n\r\n    delete: ->\r\n        title = @translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\")\r\n        message = @scope.wikiSlug\r\n\r\n        @confirm.askOnDelete(title, message).then (askResponse) =>\r\n            onSuccess = =>\r\n                askResponse.finish()\r\n                ctx = {project: @scope.projectSlug}\r\n                @location.path(@navUrls.resolve(\"project-wiki\", ctx))\r\n                @confirm.notify(\"success\")\r\n                @.loadWiki()\r\n\r\n            onError = =>\r\n                askResponse.finish(false)\r\n                @confirm.notify(\"error\")\r\n\r\n            @repo.remove(@scope.wiki).then onSuccess, onError\r\n\r\n    moveLink: (ctx, item, itemIndex) =>\r\n        values = @scope.wikiLinks\r\n        r = values.indexOf(item)\r\n        values.splice(r, 1)\r\n        values.splice(itemIndex, 0, item)\r\n        _.each values, (value, index) ->\r\n            value.order = index\r\n\r\n        @repo.saveAll(values)\r\n\r\nmodule.controller(\"WikiDetailController\", WikiDetailController)\r\n\r\n\r\n#############################################################################\r\n## Wiki Summary Directive\r\n#############################################################################\r\n\r\nWikiSummaryDirective = ($log, $template, $compile, $translate, avatarService) ->\r\n    template = $template.get(\"wiki/wiki-summary.html\", true)\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        render = (wiki) ->\r\n            if not $scope.usersById?\r\n                $log.error \"WikiSummaryDirective requires userById set in scope.\"\r\n            else\r\n                user = $scope.usersById[wiki.last_modifier]\r\n\r\n            avatar = avatarService.getAvatar(user)\r\n\r\n            if user is undefined\r\n                user = {name: \"unknown\", avatar: avatar}\r\n            else\r\n                user = {name: user.full_name_display, avatar: avatar}\r\n\r\n            ctx = {\r\n                totalEditions: wiki.editions\r\n                lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\"))\r\n                user: user\r\n            }\r\n            html = template(ctx)\r\n            html = $compile(html)($scope)\r\n            $el.html(html)\r\n\r\n        $scope.$watch $attrs.ngModel, (wikiPage) ->\r\n            return if not wikiPage\r\n            render(wikiPage)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\",  \"tgAvatarService\", WikiSummaryDirective])\r\n\r\nWikiWysiwyg = ($modelTransform, $rootscope, $confirm, attachmentsFullService,\r\n$qqueue, $repo, $analytics, activityService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.editableDescription = false\r\n\r\n        $scope.saveDescription = $qqueue.bindAdd (description, cb) ->\r\n            onSuccess = (wikiPage) ->\r\n                if not $scope.item.id?\r\n                    $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1)\r\n                    $scope.$emit(\"wikipage:add\")\r\n                    $scope.editableDescription = $scope.project.my_permissions.indexOf(\"modify_wiki_page\") != -1\r\n\r\n                activityService.fetchEntries(true)\r\n                $confirm.notify(\"success\")\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n\r\n            $scope.item.content =  description\r\n\r\n            if $scope.item.id?\r\n                promise = $repo.save($scope.item).then(onSuccess, onError)\r\n            else\r\n                promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError)\r\n\r\n            promise.finally(cb)\r\n\r\n        $scope.uploadFiles = (file, cb) ->\r\n            attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then (result) ->\r\n                cb({\r\n                    default: result.getIn(['file', 'url'])\r\n                })\r\n\r\n            return\r\n\r\n        $scope.$watch $attrs.model, (value) ->\r\n            return if not value\r\n            $scope.item = value\r\n            $scope.version = value.version\r\n            $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\"\r\n\r\n        $scope.$watch 'project', (project) ->\r\n            return if !project\r\n\r\n            if $scope.item.id?\r\n                $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") != -1\r\n            else\r\n                $scope.editableDescription = project.my_permissions.indexOf(\"add_wiki_page\") != -1\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        template: \"\"\"\r\n            <div>\r\n                <tg-wysiwyg\r\n                    ng-if=\"editableDescription\"\r\n                    html-read-mode=\"true\"\r\n                    placeholder=\"'COMMON.DESCRIPTION.EMPTY '| translate\"\r\n                    version='version'\r\n                    project=\"project\"\r\n                    storage-key='storageKey'\r\n                    content='item.content'\r\n                    on-save='saveDescription(text, cb)'\r\n                    on-upload-file='uploadFiles'>\r\n                </tg-wysiwyg>\r\n\r\n                <div\r\n                    class=\"wysiwyg\"\r\n                    ng-if=\"!editableDescription && item.content.length\"\r\n                    tg-bind-wysiwyg-html=\"item.content\"></div>\r\n                <div\r\n                    class=\"wysiwyg\"\r\n                    ng-if=\"!editableDescription && !item.content.length\">\r\n                    {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\r\n                </div>\r\n            </div>\r\n        \"\"\"\r\n    }\r\n\r\nmodule.directive(\"tgWikiWysiwyg\", [\r\n    \"$tgQueueModelTransformation\",\r\n    \"$rootScope\",\r\n    \"$tgConfirm\",\r\n    \"tgAttachmentsFullService\",\r\n    \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\"\r\n    WikiWysiwyg])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaWiki\")\r\n\r\n\r\n#############################################################################\r\n## Wiki Main Directive\r\n#############################################################################\r\n\r\nWikiNavDirective = ($tgrepo, $log, $location, $confirm, $analytics, $loading, $template,\r\n                    $compile, $translate) ->\r\n    template = $template.get(\"wiki/wiki-nav.html\", true)\r\n\r\n    linkWikiLinks = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        if not $attrs.ngModel?\r\n            return $log.error \"WikiNavDirective: no ng-model attr is defined\"\r\n\r\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1\r\n        drake = null\r\n\r\n        render = (wikiLinks) ->\r\n            addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1\r\n            deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1\r\n\r\n            html = template({\r\n                wikiLinks: wikiLinks,\r\n                projectSlug: $scope.projectSlug\r\n                addWikiLinkPermission: addWikiLinkPermission\r\n                deleteWikiLinkPermission: deleteWikiLinkPermission\r\n            })\r\n\r\n            html = $compile(html)($scope)\r\n\r\n            $el.off()\r\n            if addWikiLinkPermission and drake\r\n                drake.destroy()\r\n\r\n            $el.html(html)\r\n\r\n            if addWikiLinkPermission\r\n                itemEl = null\r\n                tdom = $el.find(\".sortable\")\r\n\r\n                drake = dragula([tdom[0]], {\r\n                    direction: 'vertical',\r\n                    copySortSource: false,\r\n                    copy: false,\r\n                    mirrorContainer: tdom[0],\r\n                    moves: (item) -> return $(item).is('li')\r\n                })\r\n\r\n                drake.on 'dragend', (item) ->\r\n                    itemEl = $(item)\r\n                    item = itemEl.scope().link\r\n                    itemIndex = itemEl.index()\r\n                    $scope.$emit(\"wiki:links:move\", item, itemIndex)\r\n\r\n                scroll = autoScroll(window, {\r\n                    margin: 20,\r\n                    pixels: 30,\r\n                    scrollWhenOutside: true,\r\n                    autoScroll: () ->\r\n                        return this.down && drake.dragging\r\n                })\r\n\r\n            $el.on \"click\", \".add-button\", (event) ->\r\n                event.preventDefault()\r\n                $el.find(\".new\").removeClass(\"hidden\")\r\n                $el.find(\".new input\").focus()\r\n                $el.find(\".add-button\").hide()\r\n\r\n            $el.on \"click\", \".js-delete-link\", (event) ->\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                target = angular.element(event.currentTarget)\r\n                linkId = target.parents('.wiki-link').data('id')\r\n\r\n                title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\")\r\n                message = $scope.wikiLinks[linkId].title\r\n\r\n                $confirm.askOnDelete(title, message).then (askResponse) =>\r\n                    promise = $tgrepo.remove($scope.wikiLinks[linkId])\r\n                    promise.then ->\r\n                        promise = $ctrl.loadWikiLinks()\r\n                        promise.then ->\r\n                            askResponse.finish()\r\n                            render($scope.wikiLinks)\r\n                        promise.then null, ->\r\n                            askResponse.finish()\r\n                    promise.then null, ->\r\n                        askResponse.finish(false)\r\n                        $confirm.notify(\"error\")\r\n\r\n            $el.on \"keyup\", \".new input\", (event) ->\r\n                event.preventDefault()\r\n                if event.keyCode == 13\r\n                    target = angular.element(event.currentTarget)\r\n                    newLink = target.val()\r\n\r\n                    currentLoading = $loading()\r\n                        .target($el.find(\".new\"))\r\n                        .start()\r\n\r\n                    promise = $tgrepo.create(\"wiki-links\", {project: $scope.projectId, title: newLink})\r\n                    promise.then ->\r\n                        $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1)\r\n                        loadPromise = $ctrl.loadWikiLinks()\r\n                        loadPromise.then ->\r\n                            currentLoading.finish()\r\n                            $el.find(\".new\").addClass(\"hidden\")\r\n                            $el.find(\".new input\").val('')\r\n                            $el.find(\".add-button\").show()\r\n                            render($scope.wikiLinks)\r\n                        loadPromise.then null, ->\r\n                            currentLoading.finish()\r\n                            $el.find(\".new\").addClass(\"hidden\")\r\n                            $el.find(\".new input\").val('')\r\n                            $el.find(\".add-button\").show()\r\n                            $confirm.notify(\"error\", \"Error loading wiki links\")\r\n\r\n                    promise.then null, (error) ->\r\n                        currentLoading.finish()\r\n                        $el.find(\".new input\").val(newLink)\r\n                        $el.find(\".new input\").focus().select()\r\n                        if error?.__all__?[0]?\r\n                            $confirm.notify(\"error\", \"The link already exists\")\r\n                        else\r\n                            $confirm.notify(\"error\")\r\n\r\n                else if event.keyCode == 27\r\n                    target = angular.element(event.currentTarget)\r\n                    $el.find(\".new\").addClass(\"hidden\")\r\n                    $el.find(\".new input\").val('')\r\n                    $el.find(\".add-button\").show()\r\n\r\n        bindOnce($scope, $attrs.ngModel, render)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        linkWikiLinks($scope, $el, $attrs)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\",\r\n                               \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\n\r\nmodule = angular.module(\"taigaWiki\")\r\n\r\n#############################################################################\r\n## Wiki Pages List Controller\r\n#############################################################################\r\n\r\nclass WikiPagesListController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgModel\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgNavUrls\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @model, @confirm, @rs, @params, @q,\r\n                  @navUrls, @errorHandlingService, @projectService) ->\r\n        @scope.projectSlug = @params.pslug\r\n        @scope.wikiSlug = @params.slug\r\n        @scope.sectionName = \"Wiki\"\r\n        @scope.linksVisible = false\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        # On Error\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.is_wiki_activated\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n\r\n        return project\r\n\r\n    loadWikiPages: ->\r\n        promise = @rs.wiki.list(@scope.projectId).then (wikipages) =>\r\n            @scope.wikipages = wikipages\r\n\r\n    loadWikiLinks: ->\r\n        return @rs.wiki.listLinks(@scope.projectId).then (wikiLinks) =>\r\n            @scope.wikiLinks = wikiLinks\r\n\r\n            for link in @scope.wikiLinks\r\n                link.url = @navUrls.resolve(\"project-wiki-page\", {\r\n                    project: @scope.projectSlug\r\n                    slug: link.href\r\n                })\r\n\r\n            selectedWikiLink = _.find(wikiLinks, {href: @scope.wikiSlug})\r\n\r\n    loadInitialData: ->\r\n        project = @.loadProject()\r\n\r\n        @.fillUsersAndRoles(project.members, project.roles)\r\n\r\n        @q.all([@.loadWikiLinks(), @.loadWikiPages()]).then(@.checkLinksPerms.bind(this))\r\n\r\n    checkLinksPerms: ->\r\n        if @scope.project.my_permissions.indexOf(\"add_wiki_link\") != -1 ||\r\n          (@scope.project.my_permissions.indexOf(\"view_wiki_links\") != -1 && @scope.wikiLinks.length)\r\n            @scope.linksVisible = true\r\n\r\nmodule.controller(\"WikiPagesListController\", WikiPagesListController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ndebounce = @.taiga.debounce\r\nnormalizeString = @.taiga.normalizeString\r\n\r\nmodule = angular.module(\"taigaKanban\")\r\n\r\n#############################################################################\r\n## Warning message directive\r\n#############################################################################\r\n\r\nLightboxAddMembersWarningMessageDirective = () ->\r\n    return {\r\n          templateUrl: \"admin/memberships-warning-message.html\"\r\n          scope: {\r\n              project: \"=\"\r\n          }\r\n    }\r\n\r\nmodule.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective])\r\n\r\n\r\n#############################################################################\r\n## Transfer project ownership\r\n#############################################################################\r\n\r\nLbRequestOwnershipDirective = (lightboxService, rs, confirmService, $translate) ->\r\n    return {\r\n        link: (scope, el) ->\r\n            lightboxService.open(el)\r\n\r\n            scope.request = () ->\r\n                scope.loading = true\r\n\r\n                rs.projects.transferRequest(scope.projectId).then () ->\r\n                    scope.loading = false\r\n\r\n                    lightboxService.close(el)\r\n\r\n                    confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"))\r\n\r\n        templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\r\n    }\r\n\r\nmodule.directive('tgLbRequestOwnership', [\r\n    \"lightboxService\",\r\n    \"tgResources\",\r\n    \"$tgConfirm\",\r\n    \"$translate\",\r\n    LbRequestOwnershipDirective])\r\n\r\nclass ChangeOwnerLightboxController\r\n    constructor: (@rs, @lightboxService, @confirm, @translate) ->\r\n        @.users = []\r\n        @.q = \"\"\r\n        @.commentOpen = false\r\n\r\n    limit: 3\r\n\r\n    filterUsers: (user) ->\r\n        username = user.full_name_display.toUpperCase()\r\n        username = normalizeString(username)\r\n        text = @.q.toUpperCase()\r\n        text = normalizeString(text)\r\n\r\n        return _.includes(username, text)\r\n\r\n    getUsers: () ->\r\n        if !@.users.length && !@.q.length\r\n            users =  @.activeUsers\r\n        else\r\n            users = @.users\r\n\r\n        users = _.reject(users, {\"id\": @.currentOwnerId})\r\n        users = _.reject(users, {\"selected\": true})\r\n\r\n        @.totalUsers = _.size(users)\r\n\r\n        return users.slice(0, @.limit)\r\n\r\n\r\n    userSearch: () ->\r\n        @.users = @.activeUsers\r\n\r\n        @.selected = _.find(@.users, {\"selected\": true})\r\n\r\n        @.users = _.filter(@.users, @.filterUsers.bind(this)) if @.q\r\n\r\n    selectUser: (user) ->\r\n        @.activeUsers = _.map @.activeUsers, (user) ->\r\n            user.selected = false\r\n\r\n            return user\r\n\r\n        user.selected = true\r\n\r\n        @.userSearch()\r\n\r\n    submit: () ->\r\n        @.loading = true\r\n        @rs.projects.transferStart(@.projectId, @.selected.id, @.comment)\r\n            .then () =>\r\n                @.loading = false\r\n                @lightboxService.closeAll()\r\n\r\n                title = @translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\")\r\n                desc = @translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\")\r\n\r\n                @confirm.success(title, desc, {\r\n                    type: \"svg\",\r\n                    name: \"icon-speak-up\"\r\n                })\r\n\r\nChangeOwnerLightboxController.$inject = [\r\n        \"tgResources\",\r\n        \"lightboxService\",\r\n        \"$tgConfirm\",\r\n        \"$translate\"\r\n]\r\n\r\nmodule.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController)\r\n\r\nChangeOwnerLightboxDirective = (lightboxService, lightboxKeyboardNavigationService, $template, $compile) ->\r\n    link = (scope, el) ->\r\n        lightboxService.open(el)\r\n\r\n    return {\r\n        scope: true,\r\n        controller: \"ChangeOwnerLightbox\",\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            currentOwnerId: \"=\",\r\n            projectId: \"=\",\r\n            activeUsers: \"=\"\r\n        },\r\n        templateUrl: \"common/lightbox/lightbox-change-owner.html\"\r\n        link:link\r\n    }\r\n\r\n\r\nmodule.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective])\r\n\r\nTransferProjectStartSuccessDirective = (lightboxService) ->\r\n    link = (scope, el) ->\r\n        scope.close = () ->\r\n            lightboxService.close(el)\r\n\r\n        lightboxService.open(el)\r\n\r\n    return {\r\n        templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\"\r\n        link:link\r\n    }\r\n\r\n\r\nmodule.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\n\r\n\r\n#############################################################################\r\n## Project Memberships Controller\r\n#############################################################################\r\n\r\nclass MembershipsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAnalytics\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"$tgAuth\",\r\n        \"tgLightboxFactory\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls, @analytics,\r\n                  @appMetaService, @translate, @auth, @lightboxFactory, @errorHandlingService, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.project = {}\r\n        @scope.filters = {}\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then  =>\r\n           title = @translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {projectName:  @scope.project.name})\r\n           description = @scope.project.description\r\n           @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"membersform:new:success\", =>\r\n            @.loadInitialData()\r\n            @analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n\r\n        @scope.canAddUsers = project.max_memberships == null || project.max_memberships > project.total_memberships\r\n\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadMembers: ->\r\n        httpFilters = @.getUrlFilters()\r\n\r\n        return @rs.memberships.list(@scope.projectId, httpFilters).then (data) =>\r\n            @scope.memberships = _.filter(data.models, (membership) ->\r\n                                    membership.user == null or membership.is_user_active)\r\n\r\n            _.map(@scope.memberships, (member) =>\r\n                if member.is_owner\r\n                    @scope.projectOwnerEmail = member.user_email\r\n            )\r\n\r\n            @scope.page = data.current\r\n            @scope.count = data.count\r\n            @scope.paginatedBy = data.paginatedBy\r\n            return data\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n\r\n        return @q.all([\r\n            @.loadMembers(),\r\n            @auth.refresh()\r\n        ])\r\n\r\n    getUrlFilters: ->\r\n        filters = _.pick(@location.search(), \"page\")\r\n        filters.page = 1 if not filters.page\r\n        return filters\r\n\r\n    # Actions\r\n\r\n    addNewMembers:  ->\r\n        @lightboxFactory.create(\r\n            'tg-lb-add-members',\r\n            {\r\n                \"class\": \"lightbox lightbox-add-member\",\r\n                \"project\": \"project\"\r\n            },\r\n            {\r\n                \"project\": @scope.project\r\n            }\r\n        )\r\n\r\n    showLimitUsersWarningMessage: ->\r\n        title = @translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\")\r\n        message = @translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\r\n            members: @scope.project.max_memberships\r\n        })\r\n        icon = \"/\" + window._version + \"/svg/icons/team-question.svg\"\r\n        @confirm.success(title, message, {\r\n            name: icon,\r\n            type: \"img\"\r\n        })\r\n\r\nmodule.controller(\"MembershipsController\", MembershipsController)\r\n\r\n\r\n#############################################################################\r\n## Member Avatar Directive\r\n#############################################################################\r\n\r\nMembershipsDirective = ($template, $compile) ->\r\n    template = $template.get(\"admin/admin-membership-paginator.html\", true)\r\n\r\n    linkPagination = ($scope, $el, $attrs, $ctrl) ->\r\n        # Constants\r\n        afterCurrent = 2\r\n        beforeCurrent = 4\r\n        atBegin = 2\r\n        atEnd = 2\r\n\r\n        $pagEl = $el.find(\".memberships-paginator\")\r\n\r\n        getNumPages = ->\r\n            numPages = $scope.count / $scope.paginatedBy\r\n            if parseInt(numPages, 10) < numPages\r\n                numPages = parseInt(numPages, 10) + 1\r\n            else\r\n                numPages = parseInt(numPages, 10)\r\n\r\n            return numPages\r\n\r\n        renderPagination = ->\r\n            numPages = getNumPages()\r\n\r\n            if numPages <= 1\r\n                $pagEl.hide()\r\n                return\r\n\r\n            pages = []\r\n            options = {}\r\n            options.pages = pages\r\n            options.showPrevious = ($scope.page > 1)\r\n            options.showNext = not ($scope.page == numPages)\r\n\r\n            cpage = $scope.page\r\n\r\n            for i in [1..numPages]\r\n                if i == (cpage + afterCurrent) and numPages > (cpage + afterCurrent + atEnd)\r\n                    pages.push({classes: \"dots\", type: \"dots\"})\r\n                else if i == (cpage - beforeCurrent) and cpage > (atBegin + beforeCurrent)\r\n                    pages.push({classes: \"dots\", type: \"dots\"})\r\n                else if i > (cpage + afterCurrent) and i <= (numPages - atEnd)\r\n                else if i < (cpage - beforeCurrent) and i > atBegin\r\n                else if i == cpage\r\n                    pages.push({classes: \"active\", num: i, type: \"page-active\"})\r\n                else\r\n                    pages.push({classes: \"page\", num: i, type: \"page\"})\r\n\r\n            html = template(options)\r\n            html = $compile(html)($scope)\r\n\r\n            $pagEl.html(html)\r\n            $pagEl.show()\r\n\r\n        $scope.$watch \"memberships\", (value) ->\r\n            # Do nothing if value is not logical true\r\n            return if not value\r\n\r\n            renderPagination()\r\n\r\n        $el.on \"click\", \".memberships-paginator a.next\", (event) ->\r\n            event.preventDefault()\r\n\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", $scope.page + 1)\r\n                $ctrl.loadMembers()\r\n\r\n        $el.on \"click\", \".memberships-paginator a.previous\", (event) ->\r\n            event.preventDefault()\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", $scope.page - 1)\r\n                $ctrl.loadMembers()\r\n\r\n        $el.on \"click\", \".memberships-paginator li.page > a\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            pagenum = target.data(\"pagenum\")\r\n\r\n            $scope.$apply ->\r\n                $ctrl.selectFilter(\"page\", pagenum)\r\n                $ctrl.loadMembers()\r\n\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        linkPagination($scope, $el, $attrs, $ctrl)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective])\r\n\r\n\r\n#############################################################################\r\n## Member Avatar Directive\r\n#############################################################################\r\n\r\nMembershipsRowAvatarDirective = ($log, $template, $translate, $compile, avatarService) ->\r\n    template = $template.get(\"admin/memberships-row-avatar.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\")\r\n        render = (member) ->\r\n            avatar = avatarService.getAvatar(member)\r\n\r\n            ctx = {\r\n                full_name: if member.full_name then member.full_name else \"\"\r\n                email: if member.user_email then member.user_email else member.email\r\n                imgurl: avatar.url\r\n                bg: avatar.bg\r\n                pending: if !member.is_user_active then pending else \"\"\r\n                isOwner: member.is_owner\r\n            }\r\n\r\n            html = template(ctx)\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        if not $attrs.tgMembershipsRowAvatar?\r\n            return $log.error \"MembershipsRowAvatarDirective: the directive need a member\"\r\n\r\n        member = $scope.$eval($attrs.tgMembershipsRowAvatar)\r\n        render(member)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective])\r\n\r\n\r\n#############################################################################\r\n## Member IsAdminCheckbox Directive\r\n#############################################################################\r\n\r\nMembershipsRowAdminCheckboxDirective = ($log, $repo, $confirm, $template, $compile) ->\r\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        if not $attrs.tgMembershipsRowAdminCheckbox?\r\n            return $log.error \"MembershipsRowAdminCheckboxDirective: the directive need a member\"\r\n\r\n        member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox)\r\n\r\n        if member.is_owner\r\n            $el.find(\".js-check\").remove()\r\n            return\r\n\r\n        render = (member) ->\r\n            ctx = {inputId: \"is-admin-#{member.id}\"}\r\n\r\n            html = template(ctx)\r\n            html = $compile(html)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        $el.on \"click\", \":checkbox\", (event) =>\r\n            onSuccess = ->\r\n                $confirm.notify(\"success\")\r\n\r\n            onError = (data) ->\r\n                member.revert()\r\n                $el.find(\":checkbox\").prop(\"checked\", member.is_admin)\r\n                $confirm.notify(\"error\", data.is_admin[0])\r\n\r\n            target = angular.element(event.currentTarget)\r\n            member.is_admin = target.prop(\"checked\")\r\n            $repo.save(member).then(onSuccess, onError)\r\n\r\n        html = render(member)\r\n\r\n        if member.is_admin\r\n            $el.find(\":checkbox\").prop(\"checked\", true)\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\",\r\n    \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective])\r\n\r\n\r\n#############################################################################\r\n## Member RoleSelector Directive\r\n#############################################################################\r\n\r\nMembershipsRowRoleSelectorDirective = ($log, $repo, $confirm) ->\r\n    template = _.template(\"\"\"\r\n    <select>\r\n        <% _.each(roleList, function(role) { %>\r\n        <option value=\"<%- role.id %>\" <% if(selectedRole === role.id){ %>selected=\"selected\"<% } %>>\r\n            <%- role.name %>\r\n        </option>\r\n        <% }); %>\r\n    </select>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (member) ->\r\n            ctx = {\r\n                roleList: $scope.project.roles,\r\n                selectedRole: member.role\r\n            }\r\n\r\n            html = template(ctx)\r\n            $el.html(html)\r\n\r\n        if not $attrs.tgMembershipsRowRoleSelector?\r\n            return $log.error \"MembershipsRowRoleSelectorDirective: the directive need a member\"\r\n\r\n        $ctrl = $el.controller()\r\n        member = $scope.$eval($attrs.tgMembershipsRowRoleSelector)\r\n        html = render(member)\r\n\r\n        $el.on \"change\", \"select\", (event) =>\r\n            onSuccess = ->\r\n                $confirm.notify(\"success\")\r\n\r\n            onError = ->\r\n                $confirm.notify(\"error\")\r\n\r\n            target = angular.element(event.currentTarget)\r\n            newRole = parseInt(target.val(), 10)\r\n\r\n            if member.role != newRole\r\n                member.role = newRole\r\n                $repo.save(member).then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\n\r\nmodule.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\",\r\n                                                  MembershipsRowRoleSelectorDirective])\r\n\r\n\r\n#############################################################################\r\n## Member Actions Directive\r\n#############################################################################\r\n\r\nMembershipsRowActionsDirective = ($log, $repo, $rs, $confirm, $compile, $translate, $location,\r\n                                  $navUrls, lightboxFactory, projectService) ->\r\n    activedTemplate = \"\"\"\r\n    <div class=\"active\"\r\n         translate=\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\">\r\n    </div>\r\n    <a class=\"delete\" href=\"\"\r\n       title=\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\">\r\n        <tg-svg svg-icon=\"icon-trash\"></tg-svg>\r\n    </a>\r\n    \"\"\"\r\n\r\n    pendingTemplate = \"\"\"\r\n    <a class=\"resend js-resend\" href=\"\"\r\n       title=\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\"\r\n       translate=\"ADMIN.MEMBERSHIP.RESEND\">\r\n    </a>\r\n    <a class=\"delete\" href=\"\"\r\n       title=\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\">\r\n        <tg-svg svg-icon=\"icon-trash\"></tg-svg>\r\n    </a>\r\n    \"\"\"\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = (member) ->\r\n            if member.user\r\n                html = $compile(activedTemplate)($scope)\r\n            else\r\n                html = $compile(pendingTemplate)($scope)\r\n\r\n            $el.html(html)\r\n\r\n        if not $attrs.tgMembershipsRowActions?\r\n            return $log.error \"MembershipsRowActionsDirective: the directive need a member\"\r\n\r\n        $ctrl = $el.controller()\r\n        member = $scope.$eval($attrs.tgMembershipsRowActions)\r\n        render(member)\r\n\r\n        $el.on \"click\", \".js-resend\", (event) ->\r\n            event.preventDefault()\r\n            onSuccess = ->\r\n                text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\r\n                    email: $scope.member.email\r\n                })\r\n                $confirm.notify(\"success\", text)\r\n            onError = ->\r\n                text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_SEND_INVITATION\")\r\n                $confirm.notify(\"error\", text)\r\n\r\n            $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError)\r\n\r\n        leaveConfirm = () ->\r\n            title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\")\r\n            defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {email: member.email})\r\n            message = if member.user then member.full_name else defaultMsg\r\n\r\n            $confirm.askOnDelete(title, message).then (askResponse) ->\r\n                onSuccess = =>\r\n                    askResponse.finish()\r\n                    if member.user != $scope.user.id\r\n                        if $scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy\r\n                            $ctrl.selectFilter(\"page\", $scope.page - 1)\r\n\r\n                        projectService.fetchProject().then =>\r\n                            $ctrl.loadInitialData()\r\n                    else\r\n                        $location.path($navUrls.resolve(\"home\"))\r\n\r\n                    text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {message: message})\r\n                    $confirm.notify(\"success\", text, null, 5000)\r\n\r\n                onError = =>\r\n                    askResponse.finish(false)\r\n\r\n                    text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {message: message})\r\n                    $confirm.notify(\"error\", text)\r\n\r\n                $repo.remove(member).then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".delete\", (event) ->\r\n            event.preventDefault()\r\n\r\n            if $scope.project.owner.id == member.user\r\n                isCurrentUser = $scope.user.id == member.user\r\n\r\n                lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\r\n                    class: \"lightbox lightbox-leave-project-warning\"\r\n                }, {\r\n                    isCurrentUser: isCurrentUser,\r\n                    project: $scope.project\r\n                })\r\n            else\r\n                leaveConfirm()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\",\r\n                                             \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\",\r\n                                             \"tgProjectService\", MembershipsRowActionsDirective])\r\n\r\n\r\n#############################################################################\r\n## No more memberships explanation directive\r\n#############################################################################\r\n\r\nNoMoreMembershipsExplanationDirective = () ->\r\n    return {\r\n          templateUrl: \"admin/no-more-memberships-explanation.html\"\r\n          scope: {\r\n              project: \"=\",\r\n              ownerEmail: \"=\"\r\n          }\r\n    }\r\n\r\nmodule.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAdminNavigationDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        section = $attrs.tgAdminNavigation\r\n        $el.find(\".active\").removeClass(\"active\")\r\n        $el.find(\"#adminmenu-#{section}\").addClass(\"active\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\nmodule.directive(\"tgAdminNavigation\", AdminNavigationDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\nscopeDefer = @.taiga.scopeDefer\r\ntrim = @.taiga.trim\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\n\r\n\r\n#############################################################################\r\n## Project Profile Controller\r\n#############################################################################\r\n\r\nclass ProjectProfileController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"$tgAuth\",\r\n        \"tgCurrentUserService\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\",\r\n        \"$tgModel\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\r\n                  @appMetaService, @translate, @tgAuth, @currentUserService, @errorHandlingService, @projectService, @model) ->\r\n        @scope.project = {}\r\n\r\n        @scope.projectTags = []\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then =>\r\n            sectionName = @translate.instant( @scope.sectionName)\r\n            title = @translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\r\n                     sectionName: sectionName, projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n            @.fillUsersAndRoles(@scope.project.members, @scope.project.roles)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"project:loaded\", =>\r\n            sectionName = @translate.instant(@scope.sectionName)\r\n            title = @translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\r\n                     sectionName: sectionName, projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n        project = @model.make_model(\"projects\", project)\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\")\r\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\r\n        @scope.pointsList = _.sortBy(project.points, \"order\")\r\n        @scope.taskStatusList = _.sortBy(project.task_statuses, \"order\")\r\n        @scope.issueTypesList = _.sortBy(project.issue_types, \"order\")\r\n        @scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\")\r\n        @scope.prioritiesList = _.sortBy(project.priorities, \"order\")\r\n        @scope.severitiesList = _.sortBy(project.severities, \"order\")\r\n\r\n        scopeDefer @scope, =>\r\n            @scope.$emit('project:loaded', project)\r\n\r\n        @scope.projectTags = _.map @scope.project.tags, (it) =>\r\n            return [it, @scope.project.tags_colors[it]]\r\n\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n        @scope.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects().valid\r\n\r\n        return @tgAuth.refresh()\r\n\r\n    openDeleteLightbox: ->\r\n        @rootscope.$broadcast(\"deletelightbox:new\", @scope.project)\r\n\r\n    addTag: (name, color) ->\r\n        tags = _.clone(@scope.project.tags)\r\n\r\n        tags.push(name)\r\n\r\n        @scope.projectTags.push([name, null])\r\n        @scope.project.tags = tags\r\n\r\n    deleteTag: (tag) ->\r\n        tags = _.clone(@scope.project.tags)\r\n        _.pull(tags, tag[0])\r\n        _.remove @scope.projectTags, (it) => it[0] == tag[0]\r\n\r\n        @scope.project.tags = tags\r\n\r\nmodule.controller(\"ProjectProfileController\", ProjectProfileController)\r\n\r\n\r\n#############################################################################\r\n## Project Profile Directive\r\n#############################################################################\r\n\r\nProjectProfileDirective = ($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            privacyChanged = $scope.project.isAttributeModified(\"is_private\")\r\n            promise = $repo.save($scope.project)\r\n            promise.then ->\r\n                currentLoading.finish()\r\n                if privacyChanged && $scope.project.is_private\r\n                    $analytics.trackEvent(\r\n                        \"project-privacy-changed\",\r\n                        \"from-public-to-private\",\r\n                        \"Change project privacy from public to private\",\r\n                        1\r\n                    )\r\n                else if privacyChanged && !$scope.project.is_private\r\n                    $analytics.trackEvent(\r\n                        \"project-privacy-changed\",\r\n                        \"from-private-to-public\",\r\n                        \"Change project privacy from private to public\",\r\n                        1\r\n                    )\r\n                $confirm.notify(\"success\")\r\n                newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\r\n                    project: $scope.project.slug\r\n                })\r\n                $location.path(newUrl)\r\n\r\n                projectService.fetchProject().then () =>\r\n                    $ctrl.loadInitialData()\r\n\r\n                currentUserService.loadProjects()\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\",\r\n                                      \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\",\r\n                                      ProjectProfileDirective])\r\n\r\n\r\n#############################################################################\r\n## Project Default Values Directive\r\n#############################################################################\r\n\r\nProjectDefaultValuesDirective = ($rootScope, $repo, $confirm, $loading) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.save($scope.project)\r\n            promise.then ->\r\n                currentLoading.finish()\r\n                $confirm.notify(\"success\")\r\n                $rootScope.$broadcast(\"admin:project-default-values:updated\")\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\r\n                                            ProjectDefaultValuesDirective])\r\n\r\n#############################################################################\r\n## Project Modules Directive\r\n#############################################################################\r\n\r\nProjectModulesDirective = ($rootScope, $repo, $confirm, $loading) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        submit = =>\r\n            form = $el.find(\"form\").checksley()\r\n            form.initializeFields() # Need to reset the form constrains\r\n            form.reset() # Need to reset the form constrains\r\n            return if not form.validate()\r\n\r\n            promise = $repo.save($scope.project)\r\n            promise.then ->\r\n                $scope.$emit(\"project:loaded\", $scope.project)\r\n                $rootScope.$broadcast(\"admin:project-modules:updated\")\r\n                $confirm.notify(\"success\")\r\n\r\n            promise.then null, (data) ->\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        $el.on \"change\", \".module-activation.module-direct-active input\", (event) ->\r\n            event.preventDefault()\r\n\r\n            $scope.$applyAsync(submit)\r\n\r\n\r\n        $el.on \"submit\", \"form\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $el.on \"click\", \".save\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        $el.on \"keydown\", \".videoconference-attributes input\", (e) ->\r\n            return e.which != 32\r\n\r\n        $scope.$watch \"project.videoconferences\", (newVal, oldVal) ->\r\n            # Reset videoconferences_extra_data if videoconference system change\r\n            if newVal? and oldVal? and newVal != oldVal\r\n                $scope.project.videoconferences_extra_data = \"\"\r\n\r\n        $scope.$watch \"isVideoconferenceActivated\", (newValue, oldValue) ->\r\n            if newValue == false\r\n                # Reset videoconference attributes\r\n                $scope.project.videoconferences = null\r\n                $scope.project.videoconferences_extra_data = \"\"\r\n\r\n                # Save when videoconference is desactivated\r\n                submit() if oldValue == true\r\n\r\n        $scope.$watch \"project\", (project) ->\r\n            if project.videoconferences?\r\n                $scope.isVideoconferenceActivated = true\r\n            else\r\n                $scope.isVideoconferenceActivated = false\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\r\n                                      ProjectModulesDirective])\r\n\r\n\r\n#############################################################################\r\n## Project Export Directive\r\n#############################################################################\r\n\r\nProjectExportDirective = ($window, $rs, $confirm, $translate, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        buttonsEl = $el.find(\".admin-project-export-buttons\")\r\n        showButtons = -> buttonsEl.removeClass(\"hidden\")\r\n        hideButtons = -> buttonsEl.addClass(\"hidden\")\r\n\r\n        resultEl = $el.find(\".admin-project-export-result\")\r\n        showResult = -> resultEl.removeClass(\"hidden\")\r\n        hideResult = -> resultEl.addClass(\"hidden\")\r\n\r\n        spinnerEl = $el.find(\".spin\")\r\n        showSpinner = -> spinnerEl.removeClass(\"hidden\")\r\n        hideSpinner = -> spinnerEl.addClass(\"hidden\")\r\n\r\n        resultTitleEl = $el.find(\".result-title\")\r\n\r\n\r\n        loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\")\r\n        loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\")\r\n        dump_ready_text = -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"))\r\n        asyn_message = -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"))\r\n        syn_message = (url) -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\r\n                                                                                                   url: url}))\r\n\r\n        setLoadingTitle = -> resultTitleEl.html(loading_title)\r\n        setAsyncTitle = -> resultTitleEl.html(loading_msg)\r\n        setSyncTitle = -> resultTitleEl.html(dump_ready_text)\r\n\r\n        resultMessageEl = $el.find(\".result-message \")\r\n        setLoadingMessage = -> resultMessageEl.html(loading_msg)\r\n        setAsyncMessage = -> resultMessageEl.html(asyn_message)\r\n        setSyncMessage = (url) -> resultMessageEl.html(syn_message(url))\r\n\r\n        showLoadingMode = ->\r\n            showSpinner()\r\n            setLoadingTitle()\r\n            setLoadingMessage()\r\n            hideButtons()\r\n            showResult()\r\n\r\n        showExportResultAsyncMode = ->\r\n            hideSpinner()\r\n            setAsyncTitle()\r\n            setAsyncMessage()\r\n\r\n        showExportResultSyncMode = (url) ->\r\n            hideSpinner()\r\n            setSyncTitle()\r\n            setSyncMessage(url)\r\n\r\n        showErrorMode = ->\r\n            hideSpinner()\r\n            hideResult()\r\n            showButtons()\r\n\r\n        $el.on \"click\", \".button-export\", debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            onSuccess = (result) =>\r\n                $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1)\r\n                if result.status == 202 # Async mode\r\n                    showExportResultAsyncMode()\r\n                else #result.status == 200 # Sync mode\r\n                    dumpUrl = result.data.url\r\n                    showExportResultSyncMode(dumpUrl)\r\n                    $window.open(dumpUrl, \"_blank\")\r\n\r\n            onError = (result) =>\r\n                showErrorMode()\r\n\r\n                errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\")\r\n\r\n                if result.status == 429  # TOO MANY REQUESTS\r\n                    errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\")\r\n                else if result.data?._error_message\r\n                    errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\r\n                                                   message: result.data._error_message})\r\n\r\n                $confirm.notify(\"error\", errorMsg)\r\n\r\n            showLoadingMode()\r\n            $rs.projects.export($scope.projectId).then(onSuccess, onError)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\",\r\n                                     \"$tgAnalytics\", ProjectExportDirective])\r\n\r\n\r\n#############################################################################\r\n## CSV Export Controllers\r\n#############################################################################\r\n\r\nclass CsvExporterController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgUrls\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @urls, @confirm, @rs, @translate) ->\r\n        @rootscope.$on(\"project:loaded\", @.setCsvUuid)\r\n        @scope.$watch \"csvUuid\", (value) =>\r\n            if value\r\n                @scope.csvUrl = @urls.resolveAbsolute(\"#{@.type}-csv\", value)\r\n            else\r\n                @scope.csvUrl = \"\"\r\n\r\n    setCsvUuid: =>\r\n        @scope.csvUuid = @scope.project[\"#{@.type}_csv_uuid\"]\r\n\r\n    _generateUuid: (response=null) =>\r\n        promise = @rs.projects[\"regenerate_#{@.type}_csv_uuid\"](@scope.projectId)\r\n\r\n        promise.then (data) =>\r\n            @scope.csvUuid = data.data?.uuid\r\n\r\n        promise.then null, =>\r\n            @confirm.notify(\"error\")\r\n\r\n        promise.finally ->\r\n            response.finish() if response\r\n        return promise\r\n\r\n    _deleteUuid: (response=null) =>\r\n        promise = @rs.projects[\"delete_#{@.type}_csv_uuid\"](@scope.projectId)\r\n\r\n        promise.then (data) =>\r\n            @scope.csvUuid = data.data?.uuid\r\n\r\n        promise.then null, =>\r\n            @confirm.notify(\"error\")\r\n\r\n        promise.finally ->\r\n            response.finish() if response\r\n        return promise\r\n\r\n    regenerateUuid: ->\r\n        if @scope.csvUuid\r\n            title = @translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\")\r\n            subtitle = @translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\")\r\n\r\n            @confirm.ask(title, subtitle).then @._generateUuid\r\n        else\r\n            @._generateUuid()\r\n\r\n    deleteUuid: ->\r\n        if @scope.csvUuid\r\n            title = @translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\")\r\n            subtitle = @translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\")\r\n\r\n            @confirm.ask(title, subtitle).then @._deleteUuid\r\n        else\r\n            @._deleteUuid()\r\n\r\n\r\nclass CsvExporterEpicsController extends CsvExporterController\r\n    type: \"epics\"\r\n\r\n\r\nclass CsvExporterUserstoriesController extends CsvExporterController\r\n    type: \"userstories\"\r\n\r\n\r\nclass CsvExporterTasksController extends CsvExporterController\r\n    type: \"tasks\"\r\n\r\n\r\nclass CsvExporterIssuesController extends CsvExporterController\r\n    type: \"issues\"\r\n\r\n\r\nmodule.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController)\r\nmodule.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController)\r\nmodule.controller(\"CsvExporterTasksController\", CsvExporterTasksController)\r\nmodule.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController)\r\n\r\n\r\n#############################################################################\r\n## CSV Directive\r\n#############################################################################\r\n\r\nCsvEpicDirective = ($translate) ->\r\n    link = ($scope) ->\r\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\"\r\n\r\n    return {\r\n        controller: \"CsvExporterEpicsController\",\r\n        controllerAs: \"ctrl\",\r\n        templateUrl: \"admin/project-csv.html\",\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective])\r\n\r\n\r\nCsvUsDirective = ($translate) ->\r\n    link = ($scope) ->\r\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\"\r\n\r\n    return {\r\n        controller: \"CsvExporterUserstoriesController\",\r\n        controllerAs: \"ctrl\",\r\n        templateUrl: \"admin/project-csv.html\",\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective])\r\n\r\n\r\nCsvTaskDirective = ($translate) ->\r\n    link = ($scope) ->\r\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\"\r\n\r\n    return {\r\n        controller: \"CsvExporterTasksController\",\r\n        controllerAs: \"ctrl\",\r\n        templateUrl: \"admin/project-csv.html\",\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective])\r\n\r\n\r\nCsvIssueDirective = ($translate) ->\r\n    link = ($scope) ->\r\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\"\r\n\r\n    return {\r\n        controller: \"CsvExporterIssuesController\",\r\n        controllerAs: \"ctrl\",\r\n        templateUrl: \"admin/project-csv.html\",\r\n        link: link,\r\n        scope: true\r\n    }\r\n\r\nmodule.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective])\r\n\r\n\r\n#############################################################################\r\n## Project Logo Directive\r\n#############################################################################\r\n\r\nProjectLogoDirective = ($auth, $model, $rs, $confirm) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        showSizeInfo = ->\r\n            $el.find(\".size-info\").addClass(\"active\")\r\n\r\n        onSuccess = (response) ->\r\n            project = $model.make_model(\"projects\", response.data)\r\n            $scope.project = project\r\n\r\n            $el.find('.loading-overlay').removeClass('active')\r\n            $confirm.notify('success')\r\n\r\n        onError = (response) ->\r\n            showSizeInfo() if response.status == 413\r\n            $el.find('.loading-overlay').removeClass('active')\r\n            $confirm.notify('error', response.data._error_message)\r\n\r\n        # Change photo\r\n        $el.on \"click\", \".js-change-logo\", ->\r\n            $el.find(\"#logo-field\").click()\r\n\r\n        $el.on \"change\", \"#logo-field\", (event) ->\r\n            if $scope.logoAttachment\r\n                $el.find('.loading-overlay').addClass(\"active\")\r\n                $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError)\r\n\r\n        # Use default photo\r\n        $el.on \"click\", \"a.js-use-default-logo\", (event) ->\r\n            $el.find('.loading-overlay').addClass(\"active\")\r\n            $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective])\r\n\r\n\r\n#############################################################################\r\n## Project Logo Model Directive\r\n#############################################################################\r\n\r\nProjectLogoModelDirective = ($parse) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        model = $parse($attrs.tgProjectLogoModel)\r\n        modelSetter = model.assign\r\n\r\n        $el.bind 'change', ->\r\n            $scope.$apply ->\r\n                modelSetter($scope, $el[0].files[0])\r\n\r\n    return {link:link}\r\n\r\nmodule.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective])\r\n\r\n\r\nAdminProjectRestrictionsDirective = () ->\r\n    return {\r\n        scope: {\r\n            \"project\": \"=\"\r\n        },\r\n        templateUrl: \"admin/admin-project-restrictions.html\"\r\n    }\r\n\r\nmodule.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective])\r\n\r\nAdminProjectRequestOwnershipDirective = (lightboxFactory) ->\r\n    return {\r\n        link: (scope) ->\r\n            scope.requestOwnership = () ->\r\n                if scope.canRequest\r\n                    lightboxFactory.create(\"tg-lb-request-ownership\", {\r\n                        \"class\": \"lightbox lightbox-request-ownership\"\r\n                    }, {\r\n                        projectId: scope.projectId\r\n                    })\r\n\r\n        scope: {\r\n            \"canRequest\": \"=\",\r\n            \"projectId\": \"=\",\r\n            \"owner\": \"=\"\r\n        },\r\n        templateUrl: \"admin/admin-project-request-ownership.html\"\r\n    }\r\n\r\nmodule.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective])\r\n\r\nAdminProjectChangeOwnerDirective = (lightboxFactory) ->\r\n    return {\r\n        link: (scope) ->\r\n            scope.changeOwner = () ->\r\n                lightboxFactory.create(\"tg-lb-change-owner\", {\r\n                    \"class\": \"lightbox lightbox-select-user\",\r\n                    \"project-id\": \"projectId\",\r\n                    \"active-users\": \"activeUsers\",\r\n                    \"current-owner-id\": \"currentOwnerId\"\r\n                }, {\r\n                    projectId: scope.projectId,\r\n                    activeUsers: scope.activeUsers,\r\n                    currentOwnerId: scope.owner.id,\r\n                    members: scope.members\r\n                })\r\n\r\n        scope: {\r\n            \"activeUsers\": \"=\"\r\n            \"projectId\": \"=\"\r\n            \"owner\": \"=\"\r\n            \"members\": \"=\"\r\n        },\r\n        templateUrl: \"admin/admin-project-change-owner.html\"\r\n    }\r\n\r\nmodule.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ntrim = @.taiga.trim\r\ntoString = @.taiga.toString\r\njoinStr = @.taiga.joinStr\r\ngroupBy = @.taiga.groupBy\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\ngetDefaulColorList = @.taiga.getDefaulColorList\r\n\r\ndefaultColor = '#A9AABC'\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\n\r\n#############################################################################\r\n## Project values section Controller\r\n#############################################################################\r\n\r\nclass ProjectValuesSectionController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\r\n                  @appMetaService, @translate, @errorHandlingService, @projectService) ->\r\n        @scope.project = {}\r\n\r\n        @scope.$on \"project:load\", () =>\r\n            @projectService.fetchProject().then () =>\r\n                @.loadProject()\r\n\r\n        @.loadInitialData()\r\n\r\n        sectionName = @translate.instant(@scope.sectionName)\r\n\r\n        title = @translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\r\n            \"sectionName\": sectionName,\r\n            \"projectName\": @scope.project.name\r\n        })\r\n\r\n        description = @scope.project.description\r\n        @appMetaService.setAll(title, description)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        promise = @.loadProject()\r\n        return promise\r\n\r\nmodule.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController)\r\n\r\n#############################################################################\r\n## Project values Controller\r\n#############################################################################\r\n\r\nclass ProjectValuesController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs) ->\r\n        @scope.$on(\"admin:project-values:move\", @.moveValue)\r\n\r\n        unwatch = @scope.$watch \"resource\", (resource) =>\r\n            if resource\r\n                @.loadValues()\r\n                unwatch()\r\n    loadValues: =>\r\n        return @rs[@scope.resource].listValues(@scope.projectId, @scope.type).then (values) =>\r\n            if values.length\r\n                @scope.values = values\r\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\r\n            return values\r\n\r\n    moveValue: (ctx, itemValue, itemIndex) =>\r\n        values = @scope.values\r\n        r = values.indexOf(itemValue)\r\n        values.splice(r, 1)\r\n        values.splice(itemIndex, 0, itemValue)\r\n        _.each values, (value, index) ->\r\n            value.order = index\r\n\r\n        @repo.saveAll(values).then () =>\r\n            @rootscope.$broadcast(\"admin:project-values:updated\")\r\n\r\nmodule.controller(\"ProjectValuesController\", ProjectValuesController)\r\n\r\n#############################################################################\r\n## Project swimlanes Controller\r\n#############################################################################\r\n\r\nclass ProjectSwimlanesValuesController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$translate\"\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @translate, @confirm, @rs, @projectService) ->\r\n        @scope.$on \"swimlane:load\", => @.loadSwimlanes()\r\n\r\n        unwatch = @scope.$watch \"resource\", (resource) =>\r\n            if resource\r\n                @.loadSwimlanes()\r\n                unwatch()\r\n\r\n    addSwimlane: =>\r\n        promise = @rs[@scope.resource].create(@scope.projectId, @scope.swimlane.name)\r\n\r\n        promise.success (values) =>\r\n            @scope.swimlaneAdded()\r\n            @.loadSwimlanes()\r\n            @rootscope.$broadcast(\"project:load\")\r\n\r\n        promise.error =>\r\n            @confirm.notify('light-error', @translate.instant(\"ADMIN.PROJECT_KANBAN_OPTIONS.ACTION_ADD_SWIMLANE\"))\r\n            @scope.hideSwimlaneForm()\r\n\r\n    updateSwimlane: (swimlane, name) =>\r\n        return @rs[@scope.resource].edit(swimlane.id, name).then (values) =>\r\n            @.loadSwimlanes()\r\n            @rootscope.$broadcast(\"project:load\")\r\n\r\n    setDefaultSwimlane: (swimlane) =>\r\n        return @rs.projects.patch_default_swimlane(@scope.projectId, swimlane.id).then () =>\r\n            @rootscope.$broadcast(\"project:load\")\r\n\r\n    updatedSwimlanePosition: (swimlane, position) =>\r\n        prevSwimlane = @scope.values.find((value) ->\r\n            return value.id == swimlane.id\r\n        )\r\n\r\n        if (prevSwimlane.order == position)\r\n            return\r\n\r\n        swimlanesOrderArrayFiltered = @scope.values.filter((value, index) =>\r\n            return value.id != swimlane.id\r\n        )\r\n\r\n        swimlanesOrderArrayFiltered.splice(position, 0, swimlane)\r\n\r\n        newSwimlanesOrder = swimlanesOrderArrayFiltered.map((swimlane, index) =>\r\n            return [\r\n                swimlane.id,\r\n                index\r\n            ]\r\n        )\r\n\r\n        return @rs[@scope.resource].bulkUpdateOrder(@scope.projectId, newSwimlanesOrder).then (values) =>\r\n            @.loadSwimlanes()\r\n\r\n    filterArchivedProjectStatuses: () =>\r\n        return @.scope.project.us_statuses.filter((status) =>\r\n            return status.is_archived != true\r\n        )\r\n\r\n    filterArchivedSwimlaneStatus: (swimlane) =>\r\n        return swimlane.statuses.filter((status) =>\r\n            return status.is_archived != true\r\n        )\r\n\r\n    loadSwimlanes: =>\r\n        return @rs[@scope.resource].list(@scope.projectId).then (values) =>\r\n            @scope.values = values\r\n\r\n    removeSwimlane: (swimlaneId, moveTo) =>\r\n        return @rs[@scope.resource].delete(swimlaneId, moveTo).then () =>\r\n            @.loadSwimlanes()\r\n            @rootscope.$broadcast(\"project:load\")\r\n\r\nmodule.controller(\"ProjectSwimlanesValuesController\", ProjectSwimlanesValuesController)\r\n\r\n#############################################################################\r\n## Swimlanes directive\r\n#############################################################################\r\n\r\nProjectSwimlanesValue = ($timeout) ->\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $scope.isFormVisible = false\r\n        $scope.isNewSwimlane = false\r\n        $scope.swimlane = {\r\n            name: ''\r\n        }\r\n\r\n        $scope.swimlaneAdded = () ->\r\n            $scope.swimlane = {\r\n                name: ''\r\n            }\r\n            $scope.isNewSwimlane = true\r\n            $scope.isFormVisible = false\r\n            setTimeout () ->\r\n                $scope.isNewSwimlane = false\r\n                $scope.$apply()\r\n            , 10000\r\n\r\n        $scope.displaySwimlaneForm = () ->\r\n            $scope.isFormVisible = true\r\n            $timeout () -> $el.find(\"#admin-swimlanes-form-input\").focus()\r\n\r\n        $scope.hideSwimlaneForm = () ->\r\n            $scope.isFormVisible = false\r\n            $scope.swimlane = {\r\n                name: ''\r\n            }\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link:link\r\n    }\r\n\r\nmodule.directive(\"tgProjectSwimlanesValues\", [\"$timeout\", ProjectSwimlanesValue])\r\n\r\n#############################################################################\r\n## Swimlanes single directive\r\n#############################################################################\r\n\r\nProjectSwimlanesSingle = ($translate, $confirm, $animate) ->\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $scope.displaySwimlaneSingleForm = false\r\n        $scope.swimlaneSingleForm = {\r\n            name: ''\r\n        }\r\n\r\n        $scope.updateSwimlane = (swimlane) ->\r\n            $scope.displaySwimlaneSingleForm = false\r\n            $ctrl.updateSwimlane(swimlane, $scope.swimlaneSingleForm.name)\r\n\r\n        $scope.setDefaultSwimlane = (swimlane) ->\r\n            $ctrl.setDefaultSwimlane(swimlane)\r\n\r\n        $scope.getDefaultTitle = (swimlane) ->\r\n            if (swimlane.id == $scope.project.default_swimlane)\r\n                return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DEFAULT_SWIMLANE\")\r\n            else\r\n                return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SET_DEFAULT_SWIMLANE\")\r\n\r\n        $scope.removeSwimlaneTitle = (swimlane) ->\r\n            if (swimlane.id == $scope.project.default_swimlane)\r\n                return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DISABLE_DELETE_SWIMLANE\")\r\n\r\n        $scope.editSwimlaneSingleForm = () ->\r\n            $scope.displaySwimlaneSingleForm = true\r\n\r\n        $scope.cancelEditSwimlaneSingleForm = () ->\r\n            $scope.displaySwimlaneSingleForm = false\r\n\r\n        $scope.removeSwimlaneDialog = (event, swimlane) =>\r\n            title = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.TITLE_ACTION_DELETE_SWIMLANE\")\r\n\r\n            $animate.on(\"leave\", $el[0], (element, phase) ->\r\n                if(phase == \"close\")\r\n                    $animate.off(\"leave\", $el[0])\r\n\r\n                    $ctrl.scope.$evalAsync () =>\r\n                        $ctrl.scope.deletingSwimlane = false\r\n            );\r\n\r\n            if $scope.values.length > 1\r\n                subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_OPTIONS\", {swimlane:  swimlane.name})\r\n                replacement = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_REPLACEMENT\")\r\n\r\n                choices = {}\r\n                _.each $scope.values, (option) ->\r\n                    if swimlane.id != option.id\r\n                        choices[option.id] = option.name\r\n\r\n                $confirm.askChoice(title, subtitle, choices, replacement).then (response) ->\r\n                    $ctrl.scope.deletingSwimlane = true\r\n\r\n                    $ctrl.removeSwimlane(swimlane.id, response.selected)\r\n                    response.finish()\r\n            else\r\n                subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_LAST\")\r\n                $confirm.askDelete(title, subtitle).then (response) ->\r\n                    $ctrl.scope.deletingSwimlane = true\r\n\r\n                    $ctrl.removeSwimlane(swimlane.id)\r\n                    response.finish()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectSwimlanesSingle\", [\"$translate\", \"$tgConfirm\", \"$animate\", ProjectSwimlanesSingle])\r\n\r\n\r\n#############################################################################\r\n## Swimlanes sortable directive\r\n#############################################################################\r\n\r\nSortableSwimlanes = () ->\r\n\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        $ctrl = $el.controller()\r\n        itemEl = null\r\n        tdom = $el.find(\".sortable\")\r\n\r\n        drake = dragula([tdom[0]], {\r\n            direction: 'vertical',\r\n            copySortSource: false,\r\n            copy: false,\r\n            mirrorContainer: tdom[0],\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n            itemValue = itemEl.scope().value\r\n            newIndex = itemEl.index()\r\n\r\n            $scope.$apply () ->\r\n                $ctrl.updatedSwimlanePosition(itemValue, newIndex)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            drake.destroy()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgSortableSwimlanes\", [SortableSwimlanes])\r\n\r\n#############################################################################\r\n## Project due dates values Controller\r\n#############################################################################\r\n\r\nclass ProjectDueDatesValuesController extends ProjectValuesController\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n    ]\r\n\r\n    loadValues: =>\r\n        return @rs[@scope.resource].listValues(@scope.projectId, @scope.type).then (values) =>\r\n            if values.length\r\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\r\n                @displayValues(values)\r\n            else\r\n                @createDefaultValues()\r\n            return values\r\n\r\n    createDefaultValues: =>\r\n        if !@rs[@scope.resource].createDefaultValues?\r\n            return\r\n        return @rs[@scope.resource].createDefaultValues(@scope.projectId, @scope.type).then (response) =>\r\n            @rootscope.$broadcast(\"admin:project-values:updated\")\r\n            values = response.data\r\n            if values.length\r\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\r\n                @displayValues(values)\r\n            return values\r\n\r\n    displayValues: (values) =>\r\n        _.each values, (value, index) ->\r\n            value.days_to_due_abs = if value.days_to_due != null then Math.abs(value.days_to_due) else null\r\n            value.sign =  if value.days_to_due >= 0 then 1 else -1\r\n        @scope.values = values\r\n\r\nmodule.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController)\r\n\r\n#############################################################################\r\n## Project values directive\r\n#############################################################################\r\n\r\nProjectValuesDirective = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) ->\r\n    ## Drag & Drop Link\r\n\r\n    linkDragAndDrop = ($scope, $el, $attrs) ->\r\n        oldParentScope = null\r\n        newParentScope = null\r\n        itemEl = null\r\n        tdom = $el.find(\".sortable\")\r\n\r\n        drake = dragula([tdom[0]], {\r\n            direction: 'vertical',\r\n            copySortSource: false,\r\n            copy: false,\r\n            mirrorContainer: tdom[0],\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n            itemValue = itemEl.scope().value\r\n            itemIndex = itemEl.index()\r\n            $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex)\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            drake.destroy()\r\n\r\n    ## Value Link\r\n\r\n    linkValue = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n        valueType = $attrs.type\r\n        objName = $attrs.objname\r\n\r\n        initializeNewValue = ->\r\n            $scope.newValue = {\r\n                \"name\": \"\"\r\n                \"is_closed\": false\r\n                \"is_archived\": false\r\n            }\r\n\r\n        initializeTextTranslations = ->\r\n            $scope.addNewElementText = $translate.instant(\r\n                \"ADMIN.PROJECT_VALUES_#{objName.toUpperCase()}.ACTION_ADD\"\r\n            )\r\n\r\n        initializeNewValue()\r\n        initializeTextTranslations()\r\n\r\n        $rootscope.$on \"$translateChangeEnd\", ->\r\n            $scope.$evalAsync(initializeTextTranslations)\r\n\r\n        goToBottomList = (focus = false) =>\r\n            table = $el.find(\".table-main\")\r\n\r\n            $(document.body).scrollTop(table.offset().top + table.height())\r\n\r\n            if focus\r\n                $el.find(\".new-value input:visible\").first().focus()\r\n\r\n        saveValue = (target) ->\r\n            formEl = target.parents(\"form\")\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            value = formEl.scope().value\r\n\r\n            # default color\r\n            if !value.color\r\n                value.color = defaultColor\r\n\r\n            promise = $repo.save(value)\r\n            promise.then ->\r\n                row = target.parents(\".row.table-main\")\r\n                row.addClass(\"hidden\")\r\n                row.siblings(\".visualization\").removeClass('hidden')\r\n                $rootscope.$broadcast(\"admin:project-values:updated\")\r\n\r\n                projectService.fetchProject()\r\n\r\n            promise.then null, (data) ->\r\n                form.setErrors(data)\r\n\r\n        saveNewValue = (target) ->\r\n            formEl = target.parents(\"form\")\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            $scope.newValue.project = $scope.project.id\r\n\r\n            $scope.newValue.order = if $scope.maxValueOrder then $scope.maxValueOrder + 1 else 1\r\n\r\n            # default color\r\n            if !$scope.newValue.color\r\n                $scope.newValue.color = defaultColor\r\n\r\n            promise = $repo.create(valueType, $scope.newValue)\r\n            promise.then (data) ->\r\n                target.addClass(\"hidden\")\r\n                $scope.values.push(data)\r\n                $scope.maxValueOrder = data.order\r\n                initializeNewValue()\r\n                $rootscope.$broadcast(\"admin:project-values:updated\")\r\n\r\n            promise.then null, (data) ->\r\n                form.setErrors(data)\r\n\r\n        cancel = (target) ->\r\n            row = target.parents(\".row.table-main\")\r\n            formEl = target.parents(\"form\")\r\n            value = formEl.scope().value\r\n            $scope.$apply ->\r\n                row.addClass(\"hidden\")\r\n                value.revert()\r\n                row.siblings(\".visualization\").removeClass('hidden')\r\n\r\n        $el.on \"click\", \".show-add-new\", (event) ->\r\n            event.preventDefault()\r\n            $el.find(\".new-value\").removeClass('hidden')\r\n\r\n            goToBottomList(true)\r\n\r\n        $el.on \"click\", \".add-new\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            target = $el.find(\".new-value\")\r\n            saveNewValue(target)\r\n\r\n        $el.on \"click\", \".delete-new\", (event) ->\r\n            event.preventDefault()\r\n            $el.find(\".new-value\").addClass(\"hidden\")\r\n            initializeNewValue()\r\n\r\n        $el.on \"click\", \".edit-value\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n\r\n            row = target.parents(\".row.table-main\")\r\n            row.addClass(\"hidden\")\r\n\r\n            editionRow = row.siblings(\".edition\")\r\n            editionRow.removeClass('hidden')\r\n            editionRow.find('input:visible').first().focus().select()\r\n\r\n        $el.on \"keyup\", \".new-value input\", (event) ->\r\n            if event.keyCode == 13\r\n                target = $el.find(\".new-value\")\r\n                saveNewValue(target)\r\n            else if event.keyCode == 27\r\n                $el.find(\".new-value\").addClass(\"hidden\")\r\n                initializeNewValue()\r\n\r\n        $el.on \"click\", \".save\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            saveValue(target)\r\n\r\n        $el.on \"click\", \".cancel\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            cancel(target)\r\n\r\n        $el.on \"click\", \".delete-value\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            formEl = target.parents(\"form\")\r\n            value = formEl.scope().value\r\n\r\n            choices = {}\r\n            _.each $scope.values, (option) ->\r\n                if value.id != option.id\r\n                    choices[option.id] = option.name\r\n\r\n            subtitle = value.name\r\n\r\n            if _.keys(choices).length == 0\r\n                return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"))\r\n\r\n            title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\")\r\n            text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\")\r\n\r\n            $confirm.askChoice(title, subtitle, choices, text).then (response) ->\r\n                onSucces = ->\r\n                    $ctrl.loadValues().finally ->\r\n                        $rootscope.$broadcast(\"admin:project-values:updated\")\r\n                        response.finish()\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                $repo.remove(value, {\"moveTo\": response.selected}).then(onSucces, onError)\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        linkDragAndDrop($scope, $el, $attrs)\r\n        linkValue($scope, $el, $attrs)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\r\n                                     \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective])\r\n\r\n#############################################################################\r\n## Project due dates values directive\r\n#############################################################################\r\n\r\nProjectDueDatesValues = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) ->\r\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame,\r\n    $translate, $rootscope, projectService)\r\n\r\n    linkDueDateStatusValue = ($scope, $el, $attrs, $ctrl) ->\r\n        $ctrl = $el.controller()\r\n        valueType = $attrs.type\r\n\r\n        initializeNewValue = ->\r\n            $scope.newValue = {\r\n                \"name\": \"\"\r\n                \"days_to_due\": 0\r\n                \"sign\": 1\r\n            }\r\n\r\n        initializeNewValue()\r\n\r\n        _setDaysToDue = (value) ->\r\n            value.days_to_due = value.days_to_due_abs * value.sign\r\n\r\n        _valueFromEventTarget = (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            row = target.parents(\".row.table-main\")\r\n            formEl = target.parents(\"form\")\r\n            if not formEl.scope().value\r\n                return formEl.scope().newValue\r\n            else\r\n                return formEl.scope().value\r\n\r\n        saveNewValue = (target) ->\r\n            formEl = target.parents(\"form\")\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            $scope.newValue.project = $scope.project.id\r\n\r\n            $scope.newValue.order = if $scope.maxValueOrder then $scope.maxValueOrder + 1 else 1\r\n\r\n            promise = $repo.create(valueType, $scope.newValue)\r\n            promise.then (data) ->\r\n                target.addClass(\"hidden\")\r\n                data.sign = $scope.newValue.sign\r\n                data.days_to_due_abs = $scope.newValue.days_to_due_abs\r\n\r\n                $scope.values.push(data)\r\n                $rootscope.$broadcast(\"admin:project-values:updated\")\r\n                initializeNewValue()\r\n\r\n            promise.then null, (data) ->\r\n                form.setErrors(data)\r\n\r\n        $el.on \"input\", \".days-to-due-abs\", (event) ->\r\n            event.preventDefault()\r\n            value = _valueFromEventTarget(event)\r\n            $scope.$apply ->\r\n                _setDaysToDue(value)\r\n\r\n        $el.on \"click\", \".days-to-due-sign\", (event) ->\r\n            event.preventDefault()\r\n\r\n            currentValue = Number(angular.element(event.currentTarget).parent().find('input').val())\r\n\r\n            value = _valueFromEventTarget(event)\r\n\r\n            if currentValue == value.sign\r\n                return\r\n\r\n            $scope.$apply ->\r\n                value.sign = value.sign * -1\r\n                _setDaysToDue(value)\r\n\r\n        $el.on \"click\", \".add-new-due-date\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            target = $el.find(\".new-value\")\r\n            saveNewValue(target)\r\n\r\n        $el.on \"click\", \".delete-due-date\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            formEl = target.parents(\"form\")\r\n            value = formEl.scope().value\r\n\r\n            title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\")\r\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\",\r\n                                          {due_date_status_name:  value.name})\r\n\r\n            $confirm.askDelete(title, subtitle).then (response) ->\r\n                onSucces = ->\r\n                    $ctrl.loadValues().finally ->\r\n                        $rootscope.$broadcast(\"admin:project-values:updated\")\r\n                        response.finish()\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                $repo.remove(value).then(onSucces, onError)\r\n\r\n\r\n    return {\r\n        link: ($scope, $el, $attrs) ->\r\n            parentDirective.link($scope, $el, $attrs)\r\n            linkDueDateStatusValue($scope, $el, $attrs)\r\n    }\r\n\r\nmodule.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\r\n                                             \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues])\r\n\r\n\r\n#############################################################################\r\n## Custom Attributes Controller\r\n#############################################################################\r\n\r\n# Custom attributes types (see taiga-back/taiga/projects/custom_attributes/choices.py)\r\nTEXT_TYPE = \"text\"\r\nMULTILINE_TYPE = \"multiline\"\r\nRICHTEXT_TYPE = \"richtext\"\r\nDATE_TYPE = \"date\"\r\nURL_TYPE = \"url\"\r\nDROPDOWN_TYPE = \"dropdown\"\r\nCHECKBOX_TYPE = \"checkbox\"\r\nNUMBER_TYPE = \"number\"\r\n\r\n\r\nTYPE_CHOICES = [\r\n    {\r\n        key: TEXT_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\r\n    },\r\n    {\r\n        key: MULTILINE_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\r\n    },\r\n    {\r\n        key: RICHTEXT_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\r\n    },\r\n    {\r\n        key: DATE_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\r\n    },\r\n    {\r\n        key: URL_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\r\n    },\r\n    {\r\n        key: DROPDOWN_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\r\n    },\r\n    {\r\n        key: CHECKBOX_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\r\n    },\r\n    {\r\n        key: NUMBER_TYPE,\r\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\r\n    }\r\n]\r\n\r\nclass ProjectCustomAttributesController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @rs, @params, @q, @location, @navUrls, @appMetaService,\r\n                  @translate, @projectService) ->\r\n        @scope.TYPE_CHOICES = TYPE_CHOICES\r\n        @scope.project = @projectService.project.toJS()\r\n        @scope.projectId = @scope.project.id\r\n\r\n        sectionName = @translate.instant(@scope.sectionName)\r\n        title = @translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\r\n            \"sectionName\": sectionName,\r\n            \"projectName\": @scope.project.name\r\n        })\r\n        description = @scope.project.description\r\n        @appMetaService.setAll(title, description)\r\n\r\n        @scope.init = (type) =>\r\n            @scope.type = type\r\n            @.loadCustomAttributes()\r\n\r\n    #########################\r\n    # Custom Attribute\r\n    #########################\r\n    _parseAttributesExtra: () ->\r\n        @scope.customAttributes = _.map(@scope.customAttributes, (x) => @._parseAttributeExtra(x))\r\n\r\n    _parseAttributeExtra: (attr) ->\r\n        if (attr.type == 'dropdown' && !attr.extra)\r\n            attr.extra = ['']\r\n        return attr\r\n\r\n    _onCustomAttributesModified: =>\r\n        @rootscope.$broadcast(\"admin:project-custom-attributes:updated\")\r\n\r\n    loadCustomAttributes: =>\r\n        return @rs.customAttributes[@scope.type].list(@scope.projectId).then (customAttributes) =>\r\n            @scope.customAttributes = customAttributes\r\n            @scope.maxOrder = _.maxBy(customAttributes, \"order\")?.order\r\n            @._parseAttributesExtra()\r\n            return customAttributes\r\n\r\n    createCustomAttribute: (attrValues) =>\r\n        return @repo.create(\"custom-attributes/#{@scope.type}\", attrValues).then =>\r\n            @._onCustomAttributesModified()\r\n\r\n    saveCustomAttribute: (attrModel) =>\r\n        return @repo.save(attrModel).then =>\r\n            @._onCustomAttributesModified()\r\n\r\n    deleteCustomAttribute: (attrModel) =>\r\n        return @repo.remove(attrModel).then =>\r\n            @._onCustomAttributesModified()\r\n\r\n    moveCustomAttributes: (attrModel, newIndex) =>\r\n        customAttributes = @scope.customAttributes\r\n        r = customAttributes.indexOf(attrModel)\r\n        customAttributes.splice(r, 1)\r\n        customAttributes.splice(newIndex, 0, attrModel)\r\n\r\n        _.each customAttributes, (val, idx) ->\r\n            val.order = idx\r\n\r\n        @repo.saveAll(customAttributes).then =>\r\n            @._onCustomAttributesModified()\r\n\r\n\r\nmodule.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController)\r\n\r\n\r\n#############################################################################\r\n## Custom Attributes Directive\r\n#############################################################################\r\n\r\nProjectCustomAttributesDirective = ($log, $confirm, animationFrame, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $scope.isExtraVisible = {}\r\n\r\n        _manageFormEvent = (event, callback) ->\r\n            event.preventDefault()\r\n            formEl = angular.element(event.currentTarget).closest(\"form\")\r\n            callback(formEl)\r\n\r\n        ##################################\r\n        # Drag & Drop\r\n        ##################################\r\n\r\n        initDraggable = ->\r\n            sortableEl = $el.find(\".js-sortable\")\r\n            drake = dragula([sortableEl[0]], {\r\n                direction: 'vertical',\r\n                copySortSource: false,\r\n                copy: false,\r\n                mirrorContainer: sortableEl[0],\r\n                moves: (item, source, handle) ->\r\n                    childItem = $(handle).closest('.js-child-sortable')\r\n                    if childItem[0]\r\n                        return false\r\n                    return $(item).is('div[tg-bind-scope]')\r\n            })\r\n\r\n            drake.on 'dragend', (item) ->\r\n                itemEl = $(item)\r\n                itemAttr = itemEl.scope().attr\r\n                itemIndex = itemEl.index()\r\n                $ctrl.moveCustomAttributes(itemAttr, itemIndex)\r\n\r\n            sortableChildren = $el.find(\".js-child-sortable\")\r\n            for el in sortableChildren\r\n                drake[el] = dragula([el], {\r\n                    direction: 'vertical',\r\n                    copySortSource: false,\r\n                    copy: false,\r\n                    mirrorContainer: el,\r\n                    moves: (item) -> return $(item).is('div[tg-bind-scope]')\r\n                })\r\n\r\n                drake[el].on 'dragend', (item) ->\r\n                    itemEl = $(item)\r\n                    attrExtra = itemEl.scope().attr.extra\r\n\r\n                    sourceIndex = itemEl.scope().$index\r\n                    targetIndex = itemEl.index()\r\n\r\n                    value = attrExtra[sourceIndex]\r\n\r\n                    attrExtra.splice(sourceIndex, 1)\r\n                    attrExtra.splice(targetIndex, 0, value)\r\n\r\n                    itemEl.scope().attr.setAttr('extra', attrExtra)\r\n                    $ctrl.saveCustomAttribute(itemEl.scope().attr).then ->\r\n                        $confirm.notify(\"success\")\r\n\r\n\r\n        ##################################\r\n        # New custom attribute\r\n        ##################################\r\n\r\n        showCreateForm = ->\r\n            $el.find(\".js-new-custom-field\").removeClass(\"hidden\")\r\n            $el.find(\".js-new-custom-field input:visible\").first().focus()\r\n\r\n        hideCreateForm = ->\r\n            $el.find(\".js-new-custom-field\").addClass(\"hidden\")\r\n\r\n        showAddButton = ->\r\n            $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\")\r\n\r\n        hideAddButton = ->\r\n            $el.find(\".js-add-custom-field-button\").addClass(\"hidden\")\r\n\r\n        showCancelButton = ->\r\n            $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\")\r\n\r\n        hideCancelButton = ->\r\n            $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\")\r\n\r\n        resetNewAttr = ->\r\n            $scope.newAttr = {}\r\n\r\n        create = (formEl) ->\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            onSucces = ->\r\n                $ctrl.loadCustomAttributes()\r\n                hideCreateForm()\r\n                resetNewAttr()\r\n                $confirm.notify(\"success\")\r\n\r\n            onError = (data) ->\r\n                form.setErrors(data)\r\n\r\n            attr = $scope.newAttr\r\n            attr.project = $scope.projectId\r\n            attr.order = if $scope.maxOrder then $scope.maxOrder + 1 else 1\r\n\r\n            $ctrl.createCustomAttribute(attr).then(onSucces, onError)\r\n\r\n        cancelCreate = ->\r\n            hideCreateForm()\r\n            resetNewAttr()\r\n\r\n        initAttrType = (formEl) ->\r\n            attr =  if formEl.scope().newAttr then formEl.scope().newAttr else formEl.scope().attr\r\n\r\n            if attr.type isnt \"dropdown\"\r\n                return\r\n\r\n            if attr.extra?.length\r\n                return\r\n\r\n            attr.extra = ['']\r\n            if attr.id\r\n                showEditForm(formEl)\r\n            else\r\n                showExtra(-1)\r\n                formEl.scope().$apply()\r\n\r\n        $scope.$watch \"customAttributes\", (customAttributes) ->\r\n            return if not customAttributes\r\n\r\n            if customAttributes.length == 0\r\n                hideCancelButton()\r\n                hideAddButton()\r\n                showCreateForm()\r\n            else\r\n                hideCreateForm()\r\n                showAddButton()\r\n                showCancelButton()\r\n                initDraggable()\r\n\r\n        $el.on \"change\", \".custom-field-type select\", (event) ->\r\n            _manageFormEvent(event, initAttrType)\r\n\r\n        $el.on \"click\", \".js-add-custom-field-button\", (event) ->\r\n            _manageFormEvent(event, showCreateForm)\r\n\r\n        $el.on \"click\", \".js-create-custom-field-button\", debounce 2000, (event) ->\r\n            _manageFormEvent(event, create)\r\n\r\n        $el.on \"click\", \".js-cancel-new-custom-field-button\", (event) ->\r\n            event.preventDefault()\r\n            cancelCreate()\r\n\r\n        $el.on \"keyup\", \".js-new-custom-field input\", (event) ->\r\n            if event.keyCode == 13 # Enter\r\n                _manageFormEvent(event, create)\r\n            else if event.keyCode == 27 # Esc\r\n                cancelCreate()\r\n\r\n        ##################################\r\n        # Edit custom attribute\r\n        ##################################\r\n\r\n        showEditForm = (formEl) ->\r\n            formEl.find(\".js-view-custom-field\").addClass(\"hidden\")\r\n            formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\")\r\n            formEl.find(\".js-edit-custom-field input:visible\").first().focus().select()\r\n            formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\")\r\n            formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\")\r\n            formEl.find(\".custom-extra-actions\").removeClass(\"hidden\")\r\n            showExtra(formEl.scope().attr.id)\r\n            $scope.$apply()\r\n\r\n        update = (formEl) ->\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n            onSucces = ->\r\n                $ctrl.loadCustomAttributes()\r\n                hideEditForm(formEl)\r\n                $confirm.notify(\"success\")\r\n\r\n            onError = (data) ->\r\n                form.setErrors(data)\r\n\r\n            attr = formEl.scope().attr\r\n            attr.setAttr('extra', attr.extra)\r\n            $ctrl.saveCustomAttribute(attr).then(onSucces, onError)\r\n\r\n        cancelUpdate = (formEl) ->\r\n            hideEditForm(formEl)\r\n            revertChangesInCustomAttribute(formEl)\r\n\r\n        hideEditForm = (formEl) ->\r\n            formEl.find(\".js-edit-custom-field\").addClass(\"hidden\")\r\n            formEl.find(\".js-view-custom-field\").removeClass(\"hidden\")\r\n            formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\")\r\n            formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\")\r\n            formEl.find(\".custom-extra-actions\").addClass(\"hidden\")\r\n\r\n        revertChangesInCustomAttribute = (formEl) ->\r\n            $scope.$apply ->\r\n                formEl.scope().attr.revert()\r\n\r\n        $el.on \"click\", \".js-edit-custom-field-button\", (event) ->\r\n            _manageFormEvent(event, showEditForm)\r\n\r\n        $el.on \"click\", \".js-update-custom-field-button\", debounce 1000, (event) ->\r\n            _manageFormEvent(event, update)\r\n\r\n        $el.on \"click\", \".js-cancel-edit-custom-field-button\", (event) ->\r\n            _manageFormEvent(event, cancelUpdate)\r\n\r\n        $el.on \"keyup\", \".js-edit-custom-field input\", (event) ->\r\n            if event.keyCode == 13 # Enter\r\n                _manageFormEvent(event, update)\r\n            else if event.keyCode == 27 # Esc\r\n                _manageFormEvent(event, cancelUpdate)\r\n\r\n        ##################################\r\n        # Delete custom attribute\r\n        ##################################\r\n\r\n        deleteCustomAttribute = (formEl) ->\r\n            attr = formEl.scope().attr\r\n            message = attr.name\r\n\r\n            title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\")\r\n            text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\")\r\n\r\n            $confirm.askDelete(title, text, message).then (response) ->\r\n                onSucces = ->\r\n                    $ctrl.loadCustomAttributes().finally -> response.finish()\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\", null, \"We have not been able to delete '#{message}'.\")\r\n\r\n                $ctrl.deleteCustomAttribute(attr).then(onSucces, onError)\r\n\r\n        $el.on \"click\", \".js-delete-custom-field-button\", debounce 2000, (event) ->\r\n            _manageFormEvent(event, deleteCustomAttribute)\r\n\r\n        ##################################\r\n        # Custom attribute extra\r\n        ##################################\r\n\r\n        $scope.toggleExtraVisible = (index) ->\r\n            if not $scope.isExtraVisible[index]\r\n                showExtra(index)\r\n            else\r\n                hideExtra(index)\r\n\r\n        showExtra = (index) ->\r\n            $scope.isExtraVisible[index] = true\r\n\r\n        hideExtra = (index) ->\r\n            $scope.isExtraVisible[index] = false\r\n\r\n        _manageExtraFormEvent = (event, callback) ->\r\n            event.preventDefault()\r\n            formEl = angular.element(event.currentTarget).closest(\"form\")\r\n            formExtraEl = angular.element(event.currentTarget).closest(\".js-form\")\r\n            callback(formEl, formExtraEl)\r\n\r\n        addExtraOption = (formEl, formExtraEl) ->\r\n            formScope = formEl.scope()\r\n            attrExtra = if formScope.newAttr?.extra then formScope.newAttr.extra else formScope.attr.extra\r\n            attrExtra.push(\"\")\r\n            formScope.$apply()\r\n\r\n            formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\")\r\n            formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\")\r\n            formEl.find(\".js-edit-custom-field-extra input\").last().focus()\r\n\r\n        removeExtraOption = (formEl, formExtraEl) ->\r\n            attrExtra = formEl.scope().attr.extra\r\n            attrExtra.splice(formExtraEl.scope().$index, 1)\r\n            formExtraEl.scope().$apply()\r\n\r\n        $el.on \"keyup\", \".js-edit-custom-field-extra input\", (event) ->\r\n            if event.keyCode == 13 # Enter\r\n                _manageFormEvent(event, update)\r\n            else if event.keyCode == 27 # Esc\r\n                _manageFormEvent(event, cancelUpdate)\r\n\r\n        $el.on \"keyup\", \".js-new-custom-field-extra input\", (event) ->\r\n            if event.keyCode == 13 # Enter\r\n                _manageFormEvent(event, create)\r\n            else if event.keyCode == 27 # Esc\r\n                cancelCreate()\r\n\r\n        $el.on \"click\", \".js-add-option-custom-field-extra-button\", debounce 500, (event) ->\r\n            _manageExtraFormEvent(event, addExtraOption)\r\n\r\n        $el.on \"click\", \".js-delete-custom-field-extra-button\", debounce 500, (event) ->\r\n            _manageExtraFormEvent(event, removeExtraOption)\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\",\r\nProjectCustomAttributesDirective])\r\n\r\n\r\n#############################################################################\r\n## Tags Controller\r\n#############################################################################\r\n\r\nclass ProjectTagsController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$tgModel\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @model, @projectService) ->\r\n        @.loading = true\r\n        @.loadTags()\r\n\r\n    loadTags: =>\r\n        project = @projectService.project.toJS()\r\n        return @rs.projects.tagsColors(project.id).then (tags) =>\r\n            @scope.projectTagsAll = _.map tags.getAttrs(), (color, name) =>\r\n                @model.make_model('tag', {name: name, color: color})\r\n            @.filterAndSortTags()\r\n            @.loading = false\r\n\r\n    filterAndSortTags: =>\r\n        @scope.projectTags = _.sortBy @scope.projectTagsAll, (it) -> it.name.toLowerCase()\r\n\r\n        @scope.projectTags = _.filter(\r\n            @scope.projectTags,\r\n            (tag) => tag.name.indexOf(@scope.tagsFilter.name) != -1\r\n        )\r\n\r\n    createTag: (tag, color) =>\r\n        return @rs.projects.createTag(@scope.projectId, tag, color)\r\n\r\n    editTag: (from_tag, to_tag, color) =>\r\n        if from_tag == to_tag\r\n            to_tag = null\r\n\r\n        return @rs.projects.editTag(@scope.projectId, from_tag, to_tag, color)\r\n\r\n    deleteTag: (tag) =>\r\n        @scope.loadingDelete = true\r\n        return @rs.projects.deleteTag(@scope.projectId, tag).finally =>\r\n            @scope.loadingDelete = false\r\n\r\n    startMixingTags: (tag) =>\r\n        @scope.mixingTags.toTag = tag.name\r\n\r\n    toggleMixingFromTags: (tag) =>\r\n        if tag.name != @scope.mixingTags.toTag\r\n            index = @scope.mixingTags.fromTags.indexOf(tag.name)\r\n            if index == -1\r\n                @scope.mixingTags.fromTags.push(tag.name)\r\n            else\r\n                @scope.mixingTags.fromTags.splice(index, 1)\r\n\r\n    confirmMixingTags: () =>\r\n        toTag = @scope.mixingTags.toTag\r\n        fromTags = @scope.mixingTags.fromTags\r\n        @scope.loadingMixing = true\r\n        @rs.projects.mixTags(@scope.projectId, toTag, fromTags)\r\n            .then =>\r\n                @.cancelMixingTags()\r\n                @.loadTags()\r\n            .finally =>\r\n                @scope.loadingMixing = false\r\n\r\n    cancelMixingTags: () =>\r\n        @scope.mixingTags.toTag = null\r\n        @scope.mixingTags.fromTags = []\r\n\r\n    mixingClass: (tag) =>\r\n        if @scope.mixingTags.toTag != null\r\n            if tag.name == @scope.mixingTags.toTag\r\n                return \"mixing-tags-to\"\r\n            else if @scope.mixingTags.fromTags.indexOf(tag.name) != -1\r\n                return \"mixing-tags-from\"\r\n\r\nmodule.controller(\"ProjectTagsController\", ProjectTagsController)\r\n\r\n\r\n#############################################################################\r\n## Tags directive\r\n#############################################################################\r\n\r\nProjectTagsDirective = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $window = $(window)\r\n        $ctrl = $el.controller()\r\n        valueType = $attrs.type\r\n        objName = $attrs.objname\r\n\r\n        initializeNewValue = ->\r\n            $scope.newValue = {\r\n                \"tag\": \"\"\r\n                \"color\": \"\"\r\n            }\r\n\r\n        initializeTagsFilter = ->\r\n            $scope.tagsFilter = {\r\n                \"name\": \"\"\r\n            }\r\n\r\n        initializeMixingTags = ->\r\n            $scope.mixingTags = {\r\n                \"toTag\": null,\r\n                \"fromTags\": []\r\n            }\r\n\r\n        initializeTextTranslations = ->\r\n            $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\")\r\n\r\n        initializeNewValue()\r\n        initializeTagsFilter()\r\n        initializeMixingTags()\r\n        initializeTextTranslations()\r\n\r\n        $rootscope.$on \"$translateChangeEnd\", ->\r\n            $scope.$evalAsync(initializeTextTranslations)\r\n\r\n        goToBottomList = (focus = false) =>\r\n            table = $el.find(\".table-main\")\r\n\r\n            $(document.body).scrollTop(table.offset().top + table.height())\r\n\r\n            if focus\r\n                $el.find(\".new-value input:visible\").first().focus()\r\n\r\n        saveValue = (target) ->\r\n            formEl = target.parents(\"form\")\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            tag = formEl.scope().tag\r\n            originalTag = tag.clone()\r\n            originalTag.revert()\r\n\r\n            $scope.loadingEdit = true\r\n            promise = $ctrl.editTag(originalTag.name, tag.name, tag.color)\r\n            promise.then ->\r\n                $ctrl.loadTags().then ->\r\n                    row = target.parents(\".row.table-main\")\r\n                    row.addClass(\"hidden\")\r\n                    $scope.loadingEdit = false\r\n                    $rootscope.$broadcast('tags:updated')\r\n                    row.siblings(\".visualization\").removeClass('hidden')\r\n\r\n            promise.then null, (response) ->\r\n                $scope.loadingEdit = false\r\n                form.setErrors(response.data)\r\n\r\n        saveNewValue = (target) ->\r\n            formEl = target.parents(\"form\")\r\n            formEl = target\r\n            form = formEl.checksley()\r\n            return if not form.validate()\r\n\r\n            $scope.loadingCreate = true\r\n            promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color)\r\n            promise.then (data) ->\r\n                $ctrl.loadTags().then ->\r\n                    $scope.loadingCreate = false\r\n                    target.addClass(\"hidden\")\r\n                    $rootscope.$broadcast('tags:updated')\r\n                    initializeNewValue()\r\n\r\n            promise.then null, (response) ->\r\n                $scope.loadingCreate = false\r\n                form.setErrors(response.data)\r\n\r\n        cancel = (target) ->\r\n            row = target.parents(\".row.table-main\")\r\n            formEl = target.parents(\"form\")\r\n            tag = formEl.scope().tag\r\n\r\n            $scope.$apply ->\r\n                row.addClass(\"hidden\")\r\n                tag.revert()\r\n                row.siblings(\".visualization\").removeClass('hidden')\r\n\r\n        $scope.$watch \"tagsFilter.name\", (tagsFilter) ->\r\n            $ctrl.filterAndSortTags()\r\n\r\n        $window.on \"keyup\", (event) ->\r\n            if event.keyCode == 27\r\n                $scope.$apply ->\r\n                    initializeMixingTags()\r\n\r\n        $el.on \"click\", \".show-add-new\", (event) ->\r\n            event.preventDefault()\r\n            $el.find(\".new-value\").removeClass('hidden')\r\n\r\n        $el.on \"click\", \".add-new\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            target = $el.find(\".new-value\")\r\n            saveNewValue(target)\r\n\r\n        $el.on \"click\", \".delete-new\", (event) ->\r\n            event.preventDefault()\r\n            $el.find(\".new-value\").addClass(\"hidden\")\r\n            initializeNewValue()\r\n\r\n        $el.on \"click\", \".mix-tags\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            $scope.$apply ->\r\n                $ctrl.startMixingTags(target.parents('form').scope().tag)\r\n\r\n        $el.on \"click\", \".mixing-row\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            $scope.$apply ->\r\n                $ctrl.toggleMixingFromTags(target.parents('form').scope().tag)\r\n\r\n        $el.on \"click\", \".mixing-confirm\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $scope.$apply ->\r\n                $ctrl.confirmMixingTags()\r\n\r\n        $el.on \"click\", \".mixing-cancel\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $scope.$apply ->\r\n                $ctrl.cancelMixingTags()\r\n\r\n        $el.on \"click\", \".edit-value\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n\r\n            row = target.parents(\".row.table-main\")\r\n            row.addClass(\"hidden\")\r\n\r\n            editionRow = row.siblings(\".edition\")\r\n            editionRow.removeClass('hidden')\r\n            editionRow.find('input:visible').first().focus().select()\r\n\r\n        $el.on \"keyup\", \".new-value input\", (event) ->\r\n            if event.keyCode == 13\r\n                target = $el.find(\".new-value\")\r\n                saveNewValue(target)\r\n            else if event.keyCode == 27\r\n                $el.find(\".new-value\").addClass(\"hidden\")\r\n                initializeNewValue()\r\n\r\n        $el.on \"keyup\", \".status-name input\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            if event.keyCode == 13\r\n                saveValue(target)\r\n            else if event.keyCode == 27\r\n                cancel(target)\r\n\r\n        $el.on \"click\", \".save\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            saveValue(target)\r\n\r\n        $el.on \"click\", \".cancel\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            cancel(target)\r\n\r\n        $el.on \"click\", \".delete-tag\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            formEl = target.parents(\"form\")\r\n            tag = formEl.scope().tag\r\n\r\n            title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\")\r\n\r\n            $confirm.askOnDelete(title, tag.name).then (response) ->\r\n                onSucces = ->\r\n                    $ctrl.loadTags().finally ->\r\n                        $rootscope.$broadcast('tags:updated')\r\n                        response.finish()\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                $ctrl.deleteTag(tag.name).then(onSucces, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            $window.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\"$translate\", \"$rootScope\", ProjectTagsDirective])\r\n\r\n# #############################################################################\r\n# ## Swimlanes wip directive\r\n# #############################################################################\r\n\r\nProjectSwimlanesWipDirective = () ->\r\n\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        $scope.wipClosed = false\r\n\r\n        $scope.toggleWipVisibility = () ->\r\n            $scope.wipClosed = !$scope.wipClosed\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgProjectSwimlanesWip\", ProjectSwimlanesWipDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\nbindMethods = @.taiga.bindMethods\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\n\r\npublicPermissions = ['view_epics', 'view_milestones', 'view_us', 'view_tasks', 'view_issues', 'view_wiki_pages', 'view_wiki_links']\r\n\r\n#############################################################################\r\n## Project Roles Controller\r\n#############################################################################\r\n\r\nclass RolesController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"$tgModel\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\r\n                  @model, @appMetaService, @translate, @errorHandlingService, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = \"ADMIN.MENU.PERMISSIONS\"\r\n        @scope.project = {}\r\n        @scope.anyComputableRole = true\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n        project = @model.make_model(\"projects\", project)\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.anyComputableRole = _.some(_.map(project.roles, (point) -> point.computable))\r\n\r\n        return project\r\n\r\n    loadRoles: ->\r\n        return @rs.roles.list(@scope.projectId).then (roles) =>\r\n            roles = roles.map (role) ->\r\n                role.external_user = false\r\n\r\n                return role\r\n\r\n            public_permission = {\r\n                \"name\": @translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\r\n                \"permissions\": @scope.project.public_permissions,\r\n                \"external_user\": true\r\n            }\r\n\r\n            roles.push(public_permission)\r\n\r\n            @scope.roles = roles\r\n            @scope.role = @scope.roles[0]\r\n\r\n            if !@scope.project.is_private\r\n                publicPermissions.forEach (permission) =>\r\n                    if !@scope.role.permissions.includes(permission)\r\n                        @scope.role.permissions.push(permission)\r\n\r\n            return roles\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n        return @.loadRoles()\r\n\r\n    forceLoadProject: () ->\r\n        @rootscope.$broadcast(\"admin:project-roles:updated\")\r\n\r\n    setRole: (role) ->\r\n        @scope.role = role\r\n        @scope.$broadcast(\"role:changed\", @scope.role)\r\n\r\n    delete: ->\r\n        choices = {}\r\n        for role in @scope.roles\r\n            if role.id != @scope.role.id\r\n                choices[role.id] = role.name\r\n\r\n        if _.keys(choices).length == 0\r\n            return @confirm.error(@translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"))\r\n\r\n        title = @translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\")\r\n        subtitle = @scope.role.name\r\n        replacement = @translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\")\r\n        warning = @translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\")\r\n        return @confirm.askChoice(title, subtitle, choices, replacement, warning).then (response) =>\r\n            onSuccess = =>\r\n                @.forceLoadProject()\r\n                @.loadRoles().finally =>\r\n                    response.finish()\r\n            onError = =>\r\n                @confirm.notify('error')\r\n\r\n            return @repo.remove(@scope.role, {moveTo: response.selected}).then onSuccess, onError\r\n\r\n    _enableComputable: =>\r\n        onSuccess = =>\r\n            @confirm.notify(\"success\")\r\n            @.forceLoadProject()\r\n\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n            @scope.role.revert()\r\n\r\n        @repo.save(@scope.role).then onSuccess, onError\r\n\r\n    _disableComputable: =>\r\n        askOnSuccess = (response) =>\r\n            onSuccess = =>\r\n                response.finish()\r\n                @confirm.notify(\"success\")\r\n                @.forceLoadProject()\r\n            onError = =>\r\n                response.finish()\r\n                @confirm.notify(\"error\")\r\n                @scope.role.revert()\r\n            @repo.save(@scope.role).then onSuccess, onError\r\n\r\n        askOnError = (response) =>\r\n            @scope.role.revert()\r\n\r\n        title = @translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\")\r\n        subtitle = @translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\r\n            roleName: @scope.role.name\r\n        })\r\n        return @confirm.ask(title, subtitle, \"\").then askOnSuccess, askOnError\r\n\r\n    toggleComputable: debounce 2000, ->\r\n        if not @scope.role.computable\r\n            @._disableComputable()\r\n        else\r\n            @._enableComputable()\r\n\r\nmodule.controller(\"RolesController\", RolesController)\r\n\r\n\r\nEditRoleDirective = ($repo, $confirm) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        toggleView = ->\r\n            $el.find('.total').toggle()\r\n            $el.find('.edit-role').toggle()\r\n\r\n        submit = () ->\r\n            $scope.role.name = $el.find(\"input\").val()\r\n\r\n            promise = $repo.save($scope.role)\r\n\r\n            promise.then ->\r\n                $confirm.notify(\"success\")\r\n\r\n            promise.then null, (data) ->\r\n                $confirm.notify(\"error\")\r\n\r\n            toggleView()\r\n\r\n        $el.on \"click\", \".edit-value\", ->\r\n            toggleView()\r\n            $el.find(\"input\").focus()\r\n            $el.find(\"input\").val($scope.role.name)\r\n\r\n        $el.on \"click\", \"a.save\", submit\r\n\r\n        $el.on \"keyup\", \"input\", (event) ->\r\n            if event.keyCode == 13  # Enter key\r\n                submit()\r\n            else if event.keyCode == 27  # ESC key\r\n                toggleView()\r\n\r\n        $scope.$on \"role:changed\", ->\r\n            if $el.find('.edit-role').is(\":visible\")\r\n                toggleView()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective])\r\n\r\nRolesDirective =  ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgRoles\", RolesDirective)\r\n\r\nNewRoleDirective = ($tgrepo, $confirm) ->\r\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"]\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $el.on \"click\", \"button.add-button\", (event) ->\r\n            event.preventDefault()\r\n            $el.find(\".new\").removeClass(\"hidden\")\r\n            $el.find(\".new\").focus()\r\n            $el.find(\".add-button\").hide()\r\n\r\n        $el.on \"keyup\", \".new\", (event) ->\r\n            event.preventDefault()\r\n            if event.keyCode == 13  # Enter key\r\n                target = angular.element(event.currentTarget)\r\n                newRole = {\r\n                    project: $scope.projectId\r\n                    name: target.val()\r\n                    permissions: DEFAULT_PERMISSIONS\r\n                    order: _.maxBy($scope.roles, (r) -> r.order).order + 1\r\n                    computable: false\r\n                }\r\n\r\n                $el.find(\".new\").addClass(\"hidden\")\r\n                $el.find(\".new\").val('')\r\n\r\n                onSuccess = (role) ->\r\n                    insertPosition = $scope.roles.length - 1\r\n                    $scope.roles.splice(insertPosition, 0, role)\r\n                    $ctrl.setRole(role)\r\n                    $el.find(\".add-button\").show()\r\n                    $ctrl.forceLoadProject()\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n\r\n                $tgrepo.create(\"roles\", newRole).then(onSuccess, onError)\r\n\r\n            else if event.keyCode == 27  # ESC key\r\n                target = angular.element(event.currentTarget)\r\n                $el.find(\".new\").addClass(\"hidden\")\r\n                $el.find(\".new\").val('')\r\n                $el.find(\".add-button\").show()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective])\r\n\r\n\r\n# Use category-config.scss styles\r\nRolePermissionsDirective = ($rootscope, $repo, $confirm, $compile) ->\r\n    resumeTemplate = _.template(\"\"\"\r\n    <div class=\"resume-title\" translate=\"<%- category.name %>\"></div>\r\n    <div class=\"summary-role\">\r\n        <div class=\"count\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\r\n        <% _.each(category.permissions, function(permission) { %>\r\n            <div class=\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\"\r\n                 title=\"{{ '<%- permission.name %>' | translate }}\"></div>\r\n        <% }) %>\r\n    </div>\r\n    <tg-svg svg-icon=\"icon-arrow-right\"></tg-svg>\r\n    \"\"\")\r\n\r\n    categoryTemplate = _.template(\"\"\"\r\n    <div class=\"category-config\" data-id=\"<%- index %>\">\r\n        <div class=\"resume\">\r\n        </div>\r\n        <div class=\"category-items\">\r\n            <div class=\"items-container\">\r\n            <% _.each(category.permissions, function(permission) { %>\r\n                <div class=\"category-item\" data-id=\"<%- permission.key %>\">\r\n                    <span translate=\"<%- permission.name %>\"></span>\r\n                    <div class=\"check\">\r\n                        <input type=\"checkbox\"\r\n                               <% if(!permission.editable) { %> disabled=\"disabled\" <% } %>\r\n                               <% if(permission.active) { %> checked=\"checked\" <% } %>/>\r\n                        <div></div>\r\n                        <span class=\"check-text check-yes\" translate=\"COMMON.YES\"></span>\r\n                        <span class=\"check-text check-no\" translate=\"COMMON.NO\"></span>\r\n                    </div>\r\n                </div>\r\n            <% }) %>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \"\"\")\r\n\r\n    baseTemplate = _.template(\"\"\"\r\n    <div class=\"category-config-list\"></div>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        $ctrl = $el.controller()\r\n\r\n        generateCategoriesFromRole = (role) ->\r\n            setActivePermissions = (permissions) ->\r\n                return _.map(permissions, (x) -> _.extend({}, x, {active: x[\"key\"] in role.permissions}))\r\n\r\n            isPermissionEditable = (permission, role, project) ->\r\n                if role.external_user &&\r\n                   !project.is_private &&\r\n                   permission.key.indexOf(\"view_\") == 0\r\n                    return false\r\n                else\r\n                    return true\r\n\r\n            setActivePermissionsPerCategory = (category) ->\r\n                return _.map(category, (cat) ->\r\n                    cat.permissions = cat.permissions.map (permission) ->\r\n                        permission.editable = isPermissionEditable(permission, role, $scope.project)\r\n\r\n                        return permission\r\n\r\n                    _.extend({}, cat, {\r\n                        activePermissions: _.filter(cat[\"permissions\"], \"active\").length\r\n                    })\r\n                )\r\n\r\n            categories = []\r\n\r\n            epicPermissions = [\r\n                { key: \"view_epics\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"}\r\n                { key: \"add_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"}\r\n                { key: \"modify_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"}\r\n                { key: \"comment_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"}\r\n                { key: \"delete_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\" ,\r\n                permissions: setActivePermissions(epicPermissions)\r\n            })\r\n\r\n            milestonePermissions = [\r\n                { key: \"view_milestones\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"}\r\n                { key: \"add_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"}\r\n                { key: \"modify_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"}\r\n                { key: \"delete_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\r\n                permissions: setActivePermissions(milestonePermissions)\r\n            })\r\n\r\n            userStoryPermissions = [\r\n                { key: \"view_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"}\r\n                { key: \"add_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"}\r\n                { key: \"modify_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"}\r\n                { key: \"comment_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"}\r\n                { key: \"delete_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\r\n                permissions: setActivePermissions(userStoryPermissions)\r\n            })\r\n\r\n            taskPermissions = [\r\n                { key: \"view_tasks\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"}\r\n                { key: \"add_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"}\r\n                { key: \"modify_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"}\r\n                { key: \"comment_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"}\r\n                { key: \"delete_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\" ,\r\n                permissions: setActivePermissions(taskPermissions)\r\n            })\r\n\r\n            issuePermissions = [\r\n                { key: \"view_issues\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"}\r\n                { key: \"add_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"}\r\n                { key: \"modify_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"}\r\n                { key: \"comment_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"}\r\n                { key: \"delete_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\r\n                permissions: setActivePermissions(issuePermissions)\r\n            })\r\n\r\n            wikiPermissions = [\r\n                { key: \"view_wiki_pages\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"}\r\n                { key: \"add_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"}\r\n                { key: \"modify_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"}\r\n                { key: \"delete_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"}\r\n                { key: \"add_wiki_link\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"}\r\n                { key: \"delete_wiki_link\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"}\r\n                { key: \"view_wiki_links\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"}\r\n            ]\r\n\r\n            categories.push({\r\n                name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\r\n                permissions: setActivePermissions(wikiPermissions)\r\n            })\r\n\r\n            return setActivePermissionsPerCategory(categories)\r\n\r\n        renderResume = (element, category) ->\r\n            element.find(\".resume\").html($compile(resumeTemplate({category: category}))($scope))\r\n\r\n        renderCategory = (category, index) ->\r\n            html = categoryTemplate({category: category, index: index})\r\n            html = angular.element(html)\r\n            renderResume(html, category)\r\n            return $compile(html)($scope)\r\n\r\n        renderPermissions = () ->\r\n            $el.off()\r\n            html = baseTemplate()\r\n            _.each generateCategoriesFromRole($scope.role), (category, index) ->\r\n                if !$scope.project.is_private\r\n                    category.permissions.forEach (permission) =>\r\n                        if publicPermissions.includes(permission.key)\r\n                            permission.editable = false\r\n\r\n                html = angular.element(html).append(renderCategory(category, index))\r\n\r\n            $el.html(html)\r\n            $el.on \"click\", \".resume\", (event) ->\r\n                event.preventDefault()\r\n                target = angular.element(event.currentTarget)\r\n                target.toggleClass(\"open-drawer\")\r\n                target.next().toggleClass(\"open\")\r\n\r\n            $el.on \"change\", \".category-item input\", (event) ->\r\n                getActivePermissions = ->\r\n                    activePermissions = _.filter($el.find(\".category-item input\"), (t) ->\r\n                        angular.element(t).is(\":checked\")\r\n                    )\r\n                    activePermissions = _.sortBy(_.map(activePermissions, (t) ->\r\n                        permission = angular.element(t).parents(\".category-item\").data(\"id\")\r\n                    ))\r\n\r\n                    if activePermissions.length\r\n                        activePermissions.push(\"view_project\")\r\n\r\n                    return activePermissions\r\n\r\n                target = angular.element(event.currentTarget)\r\n\r\n                $scope.role.permissions = getActivePermissions()\r\n\r\n                onSuccess = () ->\r\n                    categories = generateCategoriesFromRole($scope.role)\r\n                    categoryId = target.parents(\".category-config\").data(\"id\")\r\n                    renderResume(target.parents(\".category-config\"), categories[categoryId])\r\n                    $rootscope.$broadcast(\"projects:reload\")\r\n                    $confirm.notify(\"success\")\r\n                    $ctrl.forceLoadProject()\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                    target.prop \"checked\", !target.prop(\"checked\")\r\n                    $scope.role.permissions = getActivePermissions()\r\n\r\n                if $scope.role.external_user\r\n                    $scope.project.public_permissions = $scope.role.permissions\r\n                    $scope.project.anon_permissions = $scope.role.permissions.filter (permission) ->\r\n                        return permission.indexOf(\"view_\") == 0\r\n\r\n                    $repo.save($scope.project).then onSuccess, onError\r\n                else\r\n                    $repo.save($scope.role).then onSuccess, onError\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        $scope.$on \"role:changed\", ->\r\n            renderPermissions()\r\n\r\n        bindOnce($scope, $attrs.ngModel, renderPermissions)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\",\r\n                                       RolePermissionsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\nbindMethods = @.taiga.bindMethods\r\ndebounce = @.taiga.debounce\r\ntimeout = @.taiga.timeout\r\n\r\nmodule = angular.module(\"taigaAdmin\")\r\n\r\n\r\n#############################################################################\r\n## Webhooks\r\n#############################################################################\r\n\r\nclass WebhooksController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @location, @navUrls, @appMetaService, @translate, @errorHandlingService, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\"\r\n        @scope.project = {}\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"webhooks:reload\", @.loadWebhooks\r\n\r\n    loadWebhooks: ->\r\n        return @rs.webhooks.list(@scope.projectId).then (webhooks) =>\r\n            @scope.webhooks = webhooks\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n\r\n        return @.loadWebhooks()\r\n\r\nmodule.controller(\"WebhooksController\", WebhooksController)\r\n\r\n\r\n#############################################################################\r\n## Webhook Directive\r\n#############################################################################\r\n\r\nWebhookDirective = ($rs, $repo, $confirm, $loading, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        webhook = $scope.$eval($attrs.tgWebhook)\r\n\r\n        updateLogs = () ->\r\n            prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\")\r\n\r\n            $rs.webhooklogs.list(webhook.id).then (webhooklogs) =>\r\n                for log in webhooklogs\r\n                    log.validStatus = 200 <= log.status < 300\r\n                    log.prettySentHeaders = _.map(_.toPairs(log.request_headers), ([header, value]) -> \"#{header}: #{value}\").join(\"\\n\")\r\n                    log.prettySentData = JSON.stringify(log.request_data)\r\n                    log.prettyDate = moment(log.created).format(prettyDate)\r\n\r\n                webhook.logs_counter = webhooklogs.length\r\n                webhook.logs = webhooklogs\r\n                updateShowHideHistoryText()\r\n\r\n        updateShowHideHistoryText = () ->\r\n            textElement = $el.find(\".toggle-history\")\r\n            historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\")\r\n\r\n            if historyElement.hasClass(\"open\")\r\n                text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\")\r\n                title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\")\r\n            else\r\n                text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\")\r\n                title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\")\r\n\r\n            textElement.text(text)\r\n            textElement.prop(\"title\", title)\r\n\r\n        showVisualizationMode = () ->\r\n            $el.find(\".edition-mode\").addClass(\"hidden\")\r\n            $el.find(\".visualization-mode\").removeClass(\"hidden\")\r\n\r\n        showEditMode = () ->\r\n            $el.find(\".visualization-mode\").addClass(\"hidden\")\r\n            $el.find(\".edition-mode\").removeClass(\"hidden\")\r\n\r\n        openHistory = () ->\r\n            $el.find(\".webhooks-history\").addClass(\"open\")\r\n\r\n        cancel = () ->\r\n            showVisualizationMode()\r\n            $scope.$apply ->\r\n                webhook.revert()\r\n\r\n        save = debounce 2000, (target) ->\r\n            form = target.parents(\"form\").checksley()\r\n            return if not form.validate()\r\n            promise = $repo.save(webhook)\r\n            promise.then =>\r\n                showVisualizationMode()\r\n\r\n            promise.then null, (data) ->\r\n                $confirm.notify(\"error\")\r\n                form.setErrors(data)\r\n\r\n        $el.on \"click\", \".test-webhook\", () ->\r\n            openHistory()\r\n            $rs.webhooks.test(webhook.id).then =>\r\n                updateLogs()\r\n\r\n        $el.on \"click\", \".edit-webhook\", () ->\r\n            showEditMode()\r\n\r\n        $el.on \"click\", \".cancel-existing\", () ->\r\n            cancel()\r\n\r\n        $el.on \"click\", \".edit-existing\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            save(target)\r\n\r\n        $el.on \"keyup\", \".edition-mode input\", (event) ->\r\n            if event.keyCode == 13\r\n                target = angular.element(event.currentTarget)\r\n                save(target)\r\n            else if event.keyCode == 27\r\n                target = angular.element(event.currentTarget)\r\n                cancel(target)\r\n\r\n        $el.on \"click\", \".delete-webhook\", () ->\r\n            title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\")\r\n            message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {name: webhook.name})\r\n\r\n            $confirm.askOnDelete(title, message).then (askResponse) =>\r\n                onSucces = ->\r\n                    askResponse.finish()\r\n                    $scope.$emit(\"webhooks:reload\")\r\n\r\n                onError = ->\r\n                    askResponse.finish(false)\r\n                    $confirm.notify(\"error\")\r\n\r\n                $repo.remove(webhook).then(onSucces, onError)\r\n\r\n        $el.on \"click\", \".toggle-history\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n\r\n            if not webhook.logs? or webhook.logs.length == 0\r\n                updateLogs().then ->\r\n                    #Waiting for ng-repeat to finish\r\n                    timeout 0, ->\r\n                        $el.find(\".webhooks-history\")\r\n                            .toggleClass(\"open\")\r\n                            .slideToggle()\r\n\r\n                        updateShowHideHistoryText()\r\n\r\n            else\r\n                $el.find(\".webhooks-history\")\r\n                    .toggleClass(\"open\")\r\n                    .slideToggle()\r\n\r\n                $scope.$apply () ->\r\n                    updateShowHideHistoryText()\r\n\r\n\r\n        $el.on \"click\", \".history-single\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            target.toggleClass(\"history-single-open\")\r\n            target.siblings(\".history-single-response\").toggleClass(\"open\")\r\n\r\n        $el.on \"click\", \".resend-request\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            log = target.data(\"log\")\r\n            $rs.webhooklogs.resend(log).then () =>\r\n                updateLogs()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\",\r\n                               WebhookDirective])\r\n\r\n\r\n#############################################################################\r\n## New webhook Directive\r\n#############################################################################\r\n\r\nNewWebhookDirective = ($rs, $repo, $confirm, $loading, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        webhook = $scope.$eval($attrs.tgWebhook)\r\n        formDOMNode = $el.find(\".new-webhook-form\")\r\n        addWebhookDOMNode = $el.find(\".add-webhook\")\r\n        initializeNewValue = ->\r\n            $scope.newValue = {\r\n                \"name\": \"\"\r\n                \"url\": \"\"\r\n                \"key\": \"\"\r\n            }\r\n\r\n        initializeNewValue()\r\n\r\n        $scope.$watch \"webhooks\", (webhooks) ->\r\n            if webhooks?\r\n                if webhooks.length == 0\r\n                    formDOMNode.removeClass(\"hidden\")\r\n                    addWebhookDOMNode.addClass(\"hidden\")\r\n                    formDOMNode.find(\"input\")[0].focus()\r\n                else\r\n                    formDOMNode.addClass(\"hidden\")\r\n                    addWebhookDOMNode.removeClass(\"hidden\")\r\n\r\n        save = debounce 2000, () ->\r\n            form = formDOMNode.checksley()\r\n            return if not form.validate()\r\n\r\n            $scope.newValue.project = $scope.project.id\r\n            promise = $repo.create(\"webhooks\", $scope.newValue)\r\n            promise.then =>\r\n                $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1)\r\n                $scope.$emit(\"webhooks:reload\")\r\n                initializeNewValue()\r\n\r\n            promise.then null, (data) ->\r\n                $confirm.notify(\"error\")\r\n                form.setErrors(data)\r\n\r\n        formDOMNode.on \"click\", \".add-new\", (event) ->\r\n            event.preventDefault()\r\n            save()\r\n\r\n        formDOMNode.on \"keyup\", \"input\", (event) ->\r\n            if event.keyCode == 13\r\n                save()\r\n\r\n        formDOMNode.on \"click\", \".cancel-new\", (event) ->\r\n            $scope.$apply ->\r\n                initializeNewValue()\r\n\r\n                # Close form if there some webhooks created\r\n                if $scope.webhooks.length >= 1\r\n                    formDOMNode.addClass(\"hidden\")\r\n\r\n        addWebhookDOMNode.on \"click\", (event) ->\r\n            formDOMNode.removeClass(\"hidden\")\r\n            formDOMNode.find(\"input\")[0].focus()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective])\r\n\r\n\r\n#############################################################################\r\n## Github Controller\r\n#############################################################################\r\n\r\nclass GithubController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = @translate.instant(\"ADMIN.GITHUB.SECTION_NAME\")\r\n        @scope.project = {}\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadModules: ->\r\n        return @rs.modules.list(@scope.projectId, \"github\").then (github) =>\r\n            @scope.github = github\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        promise = @.loadProject()\r\n        return @.loadModules()\r\n\r\nmodule.controller(\"GithubController\", GithubController)\r\n\r\n\r\n#############################################################################\r\n## Gitlab Controller\r\n#############################################################################\r\n\r\nclass GitlabController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = @translate.instant(\"ADMIN.GITLAB.SECTION_NAME\")\r\n        @scope.project = {}\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"project:modules:reload\", =>\r\n            @.loadModules()\r\n\r\n    loadModules: ->\r\n        return @rs.modules.list(@scope.projectId, \"gitlab\").then (gitlab) =>\r\n            @scope.gitlab = gitlab\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n        return @.loadModules()\r\n\r\nmodule.controller(\"GitlabController\", GitlabController)\r\n\r\n\r\n#############################################################################\r\n## Bitbucket Controller\r\n#############################################################################\r\n\r\nclass BitbucketController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = @translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\")\r\n        @scope.project = {}\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @scope.$on \"project:modules:reload\", =>\r\n            @.loadModules()\r\n\r\n    loadModules: ->\r\n        return @rs.modules.list(@scope.projectId, \"bitbucket\").then (bitbucket) =>\r\n            @scope.bitbucket = bitbucket\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n        return @.loadModules()\r\n\r\nmodule.controller(\"BitbucketController\", BitbucketController)\r\n\r\n\r\nSelectInputText = ($translate, $confirm)->\r\n    link = ($scope, $el, $attrs) ->\r\n        $el.on \"click\", \".select-input-content\", () ->\r\n            source = $el.find(\"input\")\r\n            if !source.val()\r\n                return\r\n\r\n            source.select()\r\n            document.execCommand 'copy'\r\n            $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"))\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText])\r\n\r\n\r\n#############################################################################\r\n## GithubWebhooks Directive\r\n#############################################################################\r\n\r\nGithubWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.saveAttribute($scope.github, \"github\")\r\n            promise.then ->\r\n                $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1)\r\n                currentLoading.finish()\r\n                $confirm.notify(\"success\")\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective])\r\n\r\n\r\n#############################################################################\r\n## GitlabWebhooks Directive\r\n#############################################################################\r\n\r\nGitlabWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.saveAttribute($scope.gitlab, \"gitlab\")\r\n            promise.then ->\r\n                $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1)\r\n                currentLoading.finish()\r\n                $confirm.notify(\"success\")\r\n                $scope.$emit(\"project:modules:reload\")\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective])\r\n\r\n\r\n#############################################################################\r\n## BitbucketWebhooks Directive\r\n#############################################################################\r\n\r\nBitbucketWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\")\r\n            promise.then ->\r\n                $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1)\r\n                currentLoading.finish()\r\n                $confirm.notify(\"success\")\r\n                $scope.$emit(\"project:modules:reload\")\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective])\r\n\r\n\r\n#############################################################################\r\n## Valid Origin IP's Directive\r\n#############################################################################\r\nValidOriginIpsDirective = ->\r\n    link = ($scope, $el, $attrs, $ngModel) ->\r\n        $ngModel.$parsers.push (value) ->\r\n            value = $.trim(value)\r\n            if value == \"\"\r\n                return []\r\n\r\n            return value.split(\",\")\r\n\r\n    return {\r\n        link: link\r\n        restrict: \"EA\"\r\n        require: \"ngModel\"\r\n    }\r\n\r\nmodule.directive(\"tgValidOriginIps\", ValidOriginIpsDirective)\r\n\r\n#############################################################################\r\n## Gogs Controller\r\n#############################################################################\r\n\r\nclass GogsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\r\n        bindMethods(@)\r\n\r\n        @scope.sectionName = @translate.instant(\"ADMIN.GOGS.SECTION_NAME\")\r\n        @scope.project = {}\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then () =>\r\n            title = @translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {projectName: @scope.project.name})\r\n            description = @scope.project.description\r\n            @appMetaService.setAll(title, description)\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadModules: ->\r\n        return @rs.modules.list(@scope.projectId, \"gogs\").then (gogs) =>\r\n            @scope.gogs = gogs\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        @.loadProject()\r\n        return @.loadModules()\r\n\r\nGogsWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            return if not form.validate()\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.saveAttribute($scope.gogs, \"gogs\")\r\n            promise.then ->\r\n                $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1)\r\n                currentLoading.finish()\r\n                $confirm.notify(\"success\")\r\n                $scope.$emit(\"project:modules:reload\")\r\n\r\n            promise.then null, (data) ->\r\n                currentLoading.finish()\r\n                form.setErrors(data)\r\n                if data._error_message\r\n                    $confirm.notify(\"error\", data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n        $el.on \"click\", \".submit-button\", submit\r\n\r\n    return {link:link}\r\n\r\nmodule.controller(\"GogsController\", GogsController)\r\nmodule.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ntimeout = @.taiga.timeout\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaProject\")\r\n\r\n#############################################################################\r\n## Delete Project Lightbox Directive\r\n#############################################################################\r\n\r\nDeleteProjectDirective = ($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        projectToDelete = null\r\n        $scope.$on \"deletelightbox:new\", (ctx, project)->\r\n            lightboxService.open($el)\r\n            projectToDelete = project\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        submit = ->\r\n            tgLoader.start()\r\n            lightboxService.close($el)\r\n\r\n            promise = $repo.remove(projectToDelete)\r\n\r\n            promise.then (data) ->\r\n                $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1)\r\n                tgLoader.pageLoaded()\r\n                $rootscope.$broadcast(\"projects:reload\")\r\n                $location.path($navUrls.resolve(\"home\"))\r\n                $confirm.notify(\"success\")\r\n                currentUserService.loadProjects()\r\n\r\n            # FIXME: error handling?\r\n            promise.then null, ->\r\n                $confirm.notify(\"error\")\r\n                lightboxService.close($el)\r\n\r\n        $el.on \"click\", \".js-cancel\", (event) ->\r\n            event.preventDefault()\r\n            lightboxService.close($el)\r\n\r\n        $el.on \"click\", \".js-confirm\", (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\",\r\n                                       \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\",\r\n                                       \"$tgAnalytics\", DeleteProjectDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nbindOnce = @.taiga.bindOnce\r\n\r\n# Escape Html bind once directive\r\nBindOnceBindDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoBind, (val) ->\r\n            $el.text(val)\r\n\r\n    return {link:link}\r\n\r\n# Html bind once directive\r\nBindOnceHtmlDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoHtml, (val) ->\r\n            $el.html(val)\r\n\r\n    return {link:link}\r\n\r\n# Object reference bind once helper.\r\nBindOnceRefDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoRef, (val) ->\r\n            $el.html(\"##{val} \")\r\n    return {link:link}\r\n\r\n# Object src bind once helper.\r\nBindOnceSrcDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoSrc, (val) ->\r\n            $el.attr(\"src\", val)\r\n    return {link:link}\r\n\r\n# Object href bind once helper.\r\nBindOnceHrefDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoHref, (val) ->\r\n            $el.attr(\"href\", val)\r\n    return {link:link}\r\n\r\n# Object alt bind once helper.\r\nBindOnceAltDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoAlt, (val) ->\r\n            $el.attr(\"alt\", val)\r\n    return {link:link}\r\n\r\n# Object title bind once helper.\r\nBindOnceTitleDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        bindOnce $scope, $attrs.tgBoTitle, (val) ->\r\n            $el.attr(\"title\", val)\r\n    return {link:link}\r\n\r\nBindTitleDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$watch $attrs.tgTitleHtml, (val) ->\r\n            $el.attr(\"title\", val) if val?\r\n\r\n    return {link:link}\r\n\r\nBindHtmlDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$watch $attrs.tgBindHtml, (val) ->\r\n            $el.html(val) if val?\r\n\r\n    return {link:link}\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.directive(\"tgBoBind\", BindOnceBindDirective)\r\nmodule.directive(\"tgBoHtml\", BindOnceHtmlDirective)\r\nmodule.directive(\"tgBoRef\", BindOnceRefDirective)\r\nmodule.directive(\"tgBoSrc\", BindOnceSrcDirective)\r\nmodule.directive(\"tgBoHref\", BindOnceHrefDirective)\r\nmodule.directive(\"tgBoAlt\", BindOnceAltDirective)\r\nmodule.directive(\"tgBoTitle\", BindOnceTitleDirective)\r\nmodule.directive(\"tgBindTitle\", BindTitleDirective)\r\nmodule.directive(\"tgBindHtml\", BindHtmlDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ConfigurationService\r\n    constructor: () ->\r\n        @.config = window.taigaConfig\r\n\r\n    get: (key, defaultValue=null) ->\r\n        if _.has(@.config, key)\r\n            return @.config[key]\r\n        return defaultValue\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.service(\"$tgConfig\", ConfigurationService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaBase\")\r\n\r\n\r\nclass ContribController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"$scope\",\r\n        \"$routeParams\",\r\n        \"$tgRepo\",\r\n        \"$tgResources\",\r\n        \"$tgConfirm\",\r\n        \"tgProjectService\",\r\n        \"tgErrorHandlingService\"\r\n    ]\r\n\r\n    constructor: (@rootScope, @scope, @params, @repo, @rs, @confirm, @projectService, @errorHandlingService) ->\r\n        @scope.currentPlugin = _.head(_.filter(@rootScope.adminPlugins, {\"slug\": @params.plugin}))\r\n        @scope.projectSlug = @params.pslug\r\n\r\n        @.loadInitialData()\r\n\r\n    loadProject: ->\r\n        project = @projectService.project.toJS()\r\n\r\n        if not project.i_am_admin\r\n            @errorHandlingService.permissionDenied()\r\n\r\n        @scope.projectId = project.id\r\n        @scope.project = project\r\n        @scope.$emit('project:loaded', project)\r\n        @scope.$broadcast('project:loaded', project)\r\n        return project\r\n\r\n    loadInitialData: ->\r\n        return @.loadProject()\r\n\r\nmodule.controller(\"ContribController\", ContribController)\r\n\r\n\r\nclass ContribUserSettingsController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"$scope\",\r\n        \"$routeParams\"\r\n    ]\r\n\r\n    constructor: (@rootScope, @scope, @params) ->\r\n        @scope.currentPlugin = _.head(_.filter(@rootScope.userSettingsPlugins, {\"slug\": @params.plugin}))\r\n\r\nmodule.controller(\"ContribUserSettingsController\", ContribUserSettingsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass FiltersStorageService extends taiga.Service\r\n    @.$inject = [\"$tgStorage\", \"$routeParams\"]\r\n\r\n    constructor: (@storage, @params) ->\r\n\r\n    generateHash: (components=[]) ->\r\n        components = _.map(components, (x) -> JSON.stringify(x))\r\n        return hex_sha1(components.join(\":\"))\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass HttpService extends taiga.Service\r\n    @.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"]\r\n\r\n    constructor: (@http, @q, @tgLoader, @storage, @rootScope, @cacheFactory, @translate) ->\r\n        super()\r\n        @.cache = @cacheFactory(\"httpget\")\r\n    headers: ->\r\n        headers = {}\r\n\r\n        # Authorization\r\n        token = @storage.get('token')\r\n        if token\r\n            headers[\"Authorization\"] = \"Bearer #{token}\"\r\n\r\n        # Accept-Language\r\n        lang = @translate.preferredLanguage()\r\n        if lang\r\n            headers[\"Accept-Language\"] = lang\r\n\r\n        return headers\r\n\r\n    request: (options) ->\r\n        options.headers = _.assign({}, options.headers or {}, @.headers())\r\n\r\n        return @http(options)\r\n\r\n    get: (url, params, options) ->\r\n        options = _.assign({method: \"GET\", url: url}, options)\r\n        options.params = params if params\r\n\r\n        # prevent duplicated http request\r\n        options.cache = @.cache\r\n\r\n        return @.request(options).finally (data) =>\r\n            @.cache.removeAll()\r\n\r\n    post: (url, data, params, options) ->\r\n        options = _.assign({method: \"POST\", url: url}, options)\r\n\r\n        options.data = data if data\r\n        options.params = params if params\r\n        options.responseType = 'text'\r\n\r\n        return @.request(options)\r\n\r\n    put: (url, data, params, options) ->\r\n        options = _.assign({method: \"PUT\", url: url}, options)\r\n        options.data = data if data\r\n        options.params = params if params\r\n        return @.request(options)\r\n\r\n    patch: (url, data, params, options) ->\r\n        options = _.assign({method: \"PATCH\", url: url}, options)\r\n        options.data = data if data\r\n        options.params = params if params\r\n        return @.request(options)\r\n\r\n    delete: (url, data, params, options) ->\r\n        options = _.assign({method: \"DELETE\", url: url}, options)\r\n        options.data = data if data\r\n        options.params = params if params\r\n        return @.request(options)\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.service(\"$tgHttp\", HttpService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\n# https://stackoverflow.com/questions/12371159/how-to-get-evaluated-attributes-inside-a-custom-directive\r\n# https://stackoverflow.com/questions/18637803/how-can-i-parse-an-attribute-directive-which-has-multiple-values\r\n# https://github.com/angular/angular.js/blob/master/src/ng/directive/ngClass.js#L146\r\n\r\nmodule = angular.module(\"taigaBase\")\r\n\r\nLoadElementDirective = ($parse) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        unwatch = $scope.$watch $parse($attrs.tgLoadElement), (val) ->\r\n            if val\r\n                legacyObj =  $parse($attrs.tgLoadElement)($scope)\r\n                el = $el[0]\r\n\r\n                el.component = legacyObj.component\r\n\r\n                if legacyObj.params\r\n                    el.params = legacyObj.params\r\n\r\n                if legacyObj.events\r\n                    el.events = legacyObj.events\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            unwatch()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgLoadElement\", ['$parse', LoadElementDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nlocationFactory = ($location, $route, $rootscope) ->\r\n    $location.noreload =  (scope) ->\r\n        lastRoute = $route.current\r\n        un = scope.$on \"$locationChangeSuccess\", ->\r\n            $route.current = lastRoute\r\n            un()\r\n\r\n        return $location\r\n\r\n    $location.isInCurrentRouteParams = (name, value) ->\r\n        params = $location.search() || {}\r\n\r\n        return params[name] == value\r\n\r\n    return $location\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass Model\r\n    constructor: (name, data, dataTypes) ->\r\n        @._attrs = data\r\n        @._name = name\r\n        @._dataTypes = dataTypes\r\n\r\n        @.setAttrs(data)\r\n        @.initialize()\r\n\r\n    realClone: ->\r\n        attrs = _.cloneDeep(@._attrs)\r\n\r\n        instance =  new Model(@._name, attrs, @._dataTypes)\r\n\r\n        instance._modifiedAttrs = _.cloneDeep(@._modifiedAttrs)\r\n        instance._isModified = _.cloneDeep(@._isModified)\r\n\r\n        return instance\r\n\r\n    clone: ->\r\n        instance = new Model(@._name, @._attrs, @._dataTypes)\r\n        instance._modifiedAttrs = @._modifiedAttrs\r\n        instance._isModified = @._isModified\r\n        return instance\r\n\r\n    applyCasts: ->\r\n        for attrName, castName of @._dataTypes\r\n            castMethod = service.casts[castName]\r\n            if not castMethod\r\n                continue\r\n\r\n            @._attrs[attrName] = castMethod(@._attrs[attrName])\r\n\r\n    getIdAttrName: ->\r\n        return \"id\"\r\n\r\n    getName: ->\r\n        return @._name\r\n\r\n    getAttrs: (patch=false) ->\r\n        if @._attrs.version?\r\n            @._modifiedAttrs.version = @._attrs.version\r\n\r\n        if patch\r\n            return _.extend({}, @._modifiedAttrs)\r\n        return _.extend({}, @._attrs, @._modifiedAttrs)\r\n\r\n    setAttrs: (attrs) ->\r\n        @._attrs = attrs\r\n        @._modifiedAttrs = {}\r\n\r\n        @.applyCasts()\r\n        @._isModified = false\r\n\r\n    setAttr: (name, value) ->\r\n        @._modifiedAttrs[name] = value\r\n        @._isModified = true\r\n\r\n    initialize: () ->\r\n        self = @\r\n\r\n        getter = (name) ->\r\n            return ->\r\n                if typeof(name) == 'string' and name.substr(0,2) == \"__\"\r\n                    return self[name]\r\n\r\n                if name not in _.keys(self._modifiedAttrs)\r\n                    return self._attrs[name]\r\n\r\n                return self._modifiedAttrs[name]\r\n\r\n        setter = (name) ->\r\n            return (value) ->\r\n                if typeof(name) == 'string' and name.substr(0,2) == \"__\"\r\n                    self[name] = value\r\n                    return\r\n\r\n                if self._attrs[name] != value\r\n                    self._modifiedAttrs[name] = value\r\n                    self._isModified = true\r\n                else\r\n                    delete self._modifiedAttrs[name]\r\n\r\n                return\r\n\r\n        _.each @_attrs, (value, name) ->\r\n            options =\r\n                get: getter(name)\r\n                set: setter(name)\r\n                enumerable: true\r\n                configurable: true\r\n\r\n            Object.defineProperty(self, name, options)\r\n\r\n    serialize: () ->\r\n        data =\r\n            \"data\": _.clone(@_attrs)\r\n            \"name\": @_name\r\n\r\n        return JSON.stringify(data)\r\n\r\n    isModified: ->\r\n        return this._isModified\r\n\r\n    isAttributeModified: (attribute) ->\r\n        return @._modifiedAttrs[attribute]?\r\n\r\n    markSaved: () ->\r\n        @._isModified = false\r\n        @._attrs = @.getAttrs()\r\n        @._modifiedAttrs = {}\r\n\r\n    revert: () ->\r\n        @_modifiedAttrs = {}\r\n        @_isModified = false\r\n\r\n    @desSerialize = (sdata) ->\r\n        ddata = JSON.parse(sdata)\r\n        model = new Model(ddata.url, ddata.data)\r\n        return model\r\n\r\n\r\ntaiga = @.taiga\r\n\r\nclass ModelService extends taiga.Service\r\n    @.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"]\r\n\r\n    constructor: (@q, @urls, @storage, @http) ->\r\n        super()\r\n\r\nprovider = ($q, $http, $gmUrls, $gmStorage) ->\r\n    service = {}\r\n    service.make_model = (name, data, cls=Model, dataTypes={}) ->\r\n        return new cls(name, data, dataTypes)\r\n\r\n    service.cls = Model\r\n    service.casts = {\r\n        int: (value) ->\r\n            return parseInt(value, 10)\r\n\r\n        float: (value) ->\r\n            return parseFloat(value, 10)\r\n    }\r\n\r\n    return service\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntrim = @.taiga.trim\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaBase\")\r\n\r\n\r\n#############################################################################\r\n## Navigation Urls Service\r\n#############################################################################\r\n\r\nclass NavigationUrlsService extends taiga.Service\r\n    constructor: ->\r\n        @.urls = {}\r\n\r\n    update: (urls) ->\r\n        @.urls = _.merge({}, @.urls, urls or {})\r\n\r\n    formatUrl: (url, ctx={}) ->\r\n        replacer = (match) ->\r\n            match = trim(match, \":\")\r\n            return ctx[match] or \":\" + match\r\n        return url.replace(/(:\\w+)/g, replacer)\r\n\r\n    _resolve: (name, ctx) ->\r\n        url = @.urls[name]\r\n        return \"\" if not url\r\n        return @.formatUrl(url, ctx) if ctx\r\n        return url\r\n\r\n    resolve: (name, ctx) ->\r\n        url = @._resolve(name, ctx)\r\n\r\n        if url.startsWith('/')\r\n            return url.slice(1)\r\n\r\n        return url\r\n\r\nmodule.service(\"$tgNavUrls\", NavigationUrlsService)\r\n\r\n\r\n#############################################################################\r\n## Navigation Urls Directive\r\n#############################################################################\r\n\r\nNavigationUrlsDirective = ($navurls, $auth, $q, $location, lightboxService, tgSections) ->\r\n    # Example:\r\n    # link(tg-nav=\"project-backlog:project='sss',\")\r\n\r\n    # bindOnce version that uses $q for offer\r\n    # promise based api\r\n    bindOnceP = ($scope, attr) ->\r\n        defered = $q.defer()\r\n        bindOnce $scope, attr, (v) ->\r\n            defered.resolve(v)\r\n        return defered.promise\r\n\r\n    parseNav = (data, $scope) ->\r\n        [name, params] = _.map(data.split(\":\"), trim)\r\n        if params\r\n            # split by 'xxx='\r\n            # example\r\n            # project=vm.timeline.getIn(['data', 'project', 'slug']), ref=vm.timeline.getIn(['obj', 'ref'])\r\n            # [\"\", \"project\", \"vm.timeline.getIn(['data', 'project', 'slug']), \", \"ref\", \"vm.timeline.getIn(['obj', 'ref'])\"]\r\n            result = params.split(/(\\w+)=/)\r\n\r\n            # remove empty string\r\n            result = _.filter result, (str) -> return str.length\r\n\r\n            # remove , at the end of the string\r\n            result = _.map result, (str) -> return trim(str.replace(/,$/g, ''))\r\n\r\n            params = []\r\n            index = 0\r\n\r\n            # ['param1', 'value'] => [{'param1': 'value'}]\r\n            while index < result.length\r\n                obj = {}\r\n                obj[result[index]] = result[index + 1]\r\n                params.push obj\r\n                index = index + 2\r\n        else\r\n            params = []\r\n\r\n        values = _.map params, (param) -> _.values(param)[0]\r\n        promises = _.map(values, (x) -> bindOnceP($scope, x))\r\n\r\n        return Promise.all(promises).then ->\r\n            options = {}\r\n            for param in params\r\n                key = Object.keys(param)[0]\r\n                value = param[key]\r\n\r\n                options[key] = $scope.$eval(value)\r\n            return [name, options]\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        if $el.is(\"a\")\r\n            $el.attr(\"href\", \"#\")\r\n\r\n        $el.on \"pointerenter\", (event) ->\r\n            target = $(event.currentTarget)\r\n\r\n            if !target.data(\"fullUrl\") || $attrs.tgNavGetParams != target.data(\"params\")\r\n                parseNav($attrs.tgNav, $scope).then (result) ->\r\n                    [name, options] = result\r\n                    user = $auth.getUser()\r\n                    options.user = user.username if user\r\n\r\n                    if name == 'project'\r\n                        path = tgSections.getPath(options['project'], options['section'])\r\n                        name = \"#{name}-#{path}\"\r\n\r\n                    url = $navurls.resolve(name)\r\n\r\n                    fullUrl = $navurls.formatUrl(url, options)\r\n\r\n                    if $attrs.tgNavGetParams\r\n                        getURLParams = JSON.parse($attrs.tgNavGetParams)\r\n                        getURLParamsStr = $.param(getURLParams)\r\n                        fullUrl = \"#{fullUrl}?#{getURLParamsStr}\"\r\n\r\n                        target.data(\"params\", $attrs.tgNavGetParams)\r\n\r\n                    target.data(\"fullUrl\", fullUrl)\r\n\r\n                    if target.is(\"a\")\r\n                        target.attr(\"href\", fullUrl)\r\n\r\n                    $el.on \"click\", (event) ->\r\n                        if event.metaKey || event.ctrlKey\r\n                            return\r\n\r\n                        event.preventDefault()\r\n                        target = $(event.currentTarget)\r\n\r\n                        if target.hasClass('noclick')\r\n                            return\r\n\r\n                        fullUrl = target.data(\"fullUrl\")\r\n\r\n                        switch event.which\r\n                            when 1\r\n                                $location.url(fullUrl)\r\n                                $scope.$apply()\r\n                            when 2\r\n                                window.open fullUrl\r\n\r\n                        lightboxService.closeAll()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link: link}\r\n\r\nmodule.directive(\"tgNav\",\r\n    [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass RepositoryService extends taiga.Service\r\n    @.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"]\r\n\r\n    constructor: (@q, @model, @storage, @http, @urls) ->\r\n        super()\r\n\r\n    resolveUrlForModel: (model) ->\r\n        idAttrName = model.getIdAttrName()\r\n        return \"#{@urls.resolve(model.getName())}/#{model[idAttrName]}\"\r\n\r\n    resolveUrlForAttributeModel: (model) ->\r\n        return @urls.resolve(model.getName(), model.parent)\r\n\r\n    create: (name, data, dataTypes={}, extraParams={}) ->\r\n        defered = @q.defer()\r\n        url = @urls.resolve(name)\r\n\r\n        promise = @http.post(url, JSON.stringify(data), extraParams)\r\n        promise.success (_data, _status) =>\r\n            defered.resolve(@model.make_model(name, _data, null, dataTypes))\r\n\r\n        promise.error (data, status) =>\r\n            defered.reject(data)\r\n\r\n        return defered.promise\r\n\r\n    remove: (model, params={}) ->\r\n        defered = @q.defer()\r\n        url = @.resolveUrlForModel(model)\r\n\r\n        promise = @http.delete(url, {}, params)\r\n        promise.success (data, status) ->\r\n            defered.resolve(model)\r\n\r\n        promise.error (data, status) ->\r\n            defered.reject(model)\r\n\r\n        return defered.promise\r\n\r\n    saveAll: (models, patch=true) ->\r\n        promises = _.map(models, (x) => @.save(x, true))\r\n        return @q.all(promises)\r\n\r\n    save: (model, patch=true, params = {}, options, returnHeaders = false) ->\r\n        defered = @q.defer()\r\n\r\n        if not model.isModified() and patch\r\n            defered.resolve(model)\r\n            return defered.promise\r\n\r\n        url = @.resolveUrlForModel(model)\r\n\r\n        data = JSON.stringify(model.getAttrs(patch))\r\n\r\n        if patch\r\n            promise = @http.patch(url, data, params, options)\r\n        else\r\n            promise = @http.put(url, data, params, options)\r\n\r\n        promise.success (data, status, headers, response) =>\r\n            model._isModified = false\r\n            model._attrs = _.extend(model.getAttrs(), data)\r\n            model._modifiedAttrs = {}\r\n\r\n            model.applyCasts()\r\n\r\n            if returnHeaders\r\n                defered.resolve([model, headers()])\r\n            else\r\n                defered.resolve(model)\r\n\r\n        promise.error (data, status) ->\r\n            defered.reject(data)\r\n\r\n        return defered.promise\r\n\r\n    saveAttribute: (model, attribute, patch=true) ->\r\n        defered = @q.defer()\r\n\r\n        if not model?.isModified() and patch\r\n            defered.resolve(model)\r\n            return defered.promise\r\n\r\n        url = @.resolveUrlForAttributeModel(model)\r\n\r\n        data = {}\r\n\r\n        data[attribute] = model.getAttrs()\r\n\r\n        if patch\r\n            promise = @http.patch(url, data)\r\n        else\r\n            promise = @http.put(url, data)\r\n\r\n        promise.success (data, status) =>\r\n            model._isModified = false\r\n            model._attrs = _.extend(model.getAttrs(), data)\r\n            model._modifiedAttrs = {}\r\n\r\n            model.applyCasts()\r\n            defered.resolve(model)\r\n\r\n        promise.error (data, status) ->\r\n            defered.reject(data)\r\n\r\n        return defered.promise\r\n\r\n    refresh: (model) ->\r\n        defered = @q.defer()\r\n\r\n        url = @.resolveUrlForModel(model)\r\n        promise = @http.get(url)\r\n        promise.success (data, status) ->\r\n            model._modifiedAttrs = {}\r\n            model._attrs = data\r\n            model._isModified = false\r\n            model.applyCasts()\r\n            defered.resolve(model)\r\n\r\n        promise.error (data, status) ->\r\n            defered.reject(data)\r\n\r\n        return defered.promise\r\n\r\n    queryMany: (name, params, options={}, headers=false) ->\r\n        url = @urls.resolve(name)\r\n        httpOptions = {headers: {}}\r\n\r\n        if not options.enablePagination\r\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\r\n\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            result =  _.map(data.data, (x) => @model.make_model(name, x))\r\n\r\n            if headers\r\n                return [result, data.headers]\r\n\r\n            return result\r\n\r\n    queryOneAttribute: (name, id, attribute, params, options={}) ->\r\n        url = @urls.resolve(name, id)\r\n        httpOptions = {headers: {}}\r\n\r\n        if not options.enablePagination\r\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\r\n\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            model = @model.make_model(name, data.data[attribute])\r\n            model.parent = id\r\n\r\n            return model\r\n\r\n    queryOne: (name, id, params, options={}) ->\r\n        url = @urls.resolve(name)\r\n        url = \"#{url}/#{id}\" if id\r\n        httpOptions = {headers: {}}\r\n        if not options.enablePagination\r\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\r\n\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            return @model.make_model(name, data.data)\r\n\r\n    queryOneRaw: (name, id, params, options={}) ->\r\n        url = @urls.resolve(name)\r\n        url = \"#{url}/#{id}\" if id\r\n        httpOptions = _.merge({headers: {}}, options)\r\n        if not options.enablePagination\r\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            return data.data\r\n\r\n    queryPaginated: (name, params, options={}) ->\r\n        url = @urls.resolve(name)\r\n        httpOptions = _.merge({headers: {}}, options)\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            headers = data.headers()\r\n            result = {}\r\n            result.models = _.map(data.data, (x) => @model.make_model(name, x))\r\n            result.count = parseInt(headers[\"x-pagination-count\"], 10)\r\n            result.current = parseInt(headers[\"x-pagination-current\"] or 1, 10)\r\n            result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10)\r\n            return result\r\n\r\n    queryOnePaginatedRaw: (name, id, params, options={}) ->\r\n        url = @urls.resolve(name)\r\n        url = \"#{url}/#{id}\" if id\r\n        httpOptions = _.merge({headers: {}}, options)\r\n\r\n        return @http.get(url, params, httpOptions).then (data) =>\r\n            headers = data.headers()\r\n            result = {}\r\n            result.data = data.data\r\n            result.count = parseInt(headers[\"x-pagination-count\"], 10)\r\n            result.current = parseInt(headers[\"x-pagination-current\"] or 1, 10)\r\n            result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10)\r\n\r\n            return result\r\n\r\n    resolve: (options) ->\r\n        params = {}\r\n        params.project = options.pslug if options.pslug?\r\n        params.us = options.usref if options.usref?\r\n        params.task = options.taskref if options.taskref?\r\n        params.issue = options.issueref if options.issueref?\r\n        params.milestone = options.sslug if options.sslug?\r\n        params.wikipage = options.wikipage if options.wikipage?\r\n        params.ref = options.ref if options.ref?\r\n\r\n        cache = not (options.wikipage or options.sslug)\r\n        return @.queryOneRaw(\"resolver\", null, params, {cache: cache})\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.service(\"$tgRepo\", RepositoryService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass StorageService extends taiga.Service\r\n    @.$inject = [\"$rootScope\"]\r\n\r\n    constructor: ($rootScope) ->\r\n        super()\r\n\r\n    get: (key, _default) ->\r\n        serializedValue = localStorage.getItem(key)\r\n        if serializedValue == null\r\n            return _default or null\r\n\r\n        try\r\n            return JSON.parse(serializedValue)\r\n        catch e\r\n            return null\r\n\r\n    set: (key, val) ->\r\n        if _.isObject(key)\r\n            _.each key, (val, key) =>\r\n                @set(key, val)\r\n        else\r\n            localStorage.setItem(key, JSON.stringify(val))\r\n\r\n    contains: (key) ->\r\n        value = @.get(key)\r\n        return (value != null)\r\n\r\n    remove: (key) ->\r\n        localStorage.removeItem(key)\r\n\r\n    clear: ->\r\n        localStorage.clear()\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.service(\"$tgStorage\", StorageService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nformat = (fmt, obj) ->\r\n    obj = _.clone(obj)\r\n    return fmt.replace /%s/g, (match) -> String(obj.shift())\r\n\r\ntaiga = @.taiga\r\n\r\nclass UrlsService extends taiga.Service\r\n    @.$inject = [\"$tgConfig\"]\r\n\r\n    constructor: (@config) ->\r\n        @.urls = {}\r\n        @.mainUrl = @config.get(\"api\")\r\n\r\n    update: (urls) ->\r\n        @.urls = _.merge(@.urls, urls)\r\n\r\n    resolve: ->\r\n        args = _.toArray(arguments)\r\n\r\n        if args.length == 0\r\n            throw Error(\"wrong arguments to setUrls\")\r\n\r\n        name = args.slice(0, 1)[0]\r\n        url = format(@.urls[name], args.slice(1))\r\n\r\n        return format(\"%s/%s\", [\r\n            _.trimEnd(@.mainUrl, \"/\"),\r\n            _.trimStart(url, \"/\")\r\n        ])\r\n\r\n    resolveAbsolute: ->\r\n        url = @.resolve.apply(@, arguments)\r\n        if (/^https?:\\/\\//i).test(url)\r\n            return url\r\n        if (/^\\//).test(url)\r\n            return \"#{window.location.protocol}//#{window.location.host}#{url}\"\r\n        return \"#{window.location.protocol}//#{window.location.host}/#{url}\"\r\n\r\n\r\nmodule = angular.module(\"taigaBase\")\r\nmodule.service('$tgUrls', UrlsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo) ->\r\n    _get = (objectId, resource) ->\r\n        return $repo.queryOne(resource, objectId)\r\n\r\n    service = {\r\n        epic: {\r\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/epic\")\r\n        }\r\n        userstory: {\r\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/userstory\")\r\n        }\r\n        task: {\r\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/task\")\r\n        }\r\n        issue: {\r\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/issue\")\r\n        }\r\n    }\r\n\r\n    return (instance) ->\r\n        instance.customAttributesValues = service\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\n\r\nresourceProvider = ($repo) ->\r\n    _list = (projectId, resource) ->\r\n        return $repo.queryMany(resource, {project: projectId})\r\n\r\n    service = {\r\n        epic:{\r\n            list: (projectId) -> _list(projectId, \"custom-attributes/epic\")\r\n        }\r\n        userstory:{\r\n            list: (projectId) -> _list(projectId, \"custom-attributes/userstory\")\r\n        }\r\n        task:{\r\n            list: (projectId) -> _list(projectId, \"custom-attributes/task\")\r\n        }\r\n        issue: {\r\n            list: (projectId) -> _list(projectId, \"custom-attributes/issue\")\r\n        }\r\n    }\r\n\r\n    return (instance) ->\r\n        instance.customAttributes = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\n\r\nresourceProvider = ($repo, $http, $urls, $storage) ->\r\n    service = {}\r\n    hashSuffix = \"epics-queryparams\"\r\n\r\n    service.getByRef = (projectId, ref) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n        params.ref = ref\r\n        return $repo.queryOne(\"epics\", \"by_ref\", params)\r\n\r\n    service.listValues = (projectId, type) ->\r\n        params = {\"project\": projectId}\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryMany(type, params)\r\n\r\n    service.storeQueryParams = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getQueryParams = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.upvote = (epicId) ->\r\n        url = $urls.resolve(\"epic-upvote\", epicId)\r\n        return $http.post(url)\r\n\r\n    service.downvote = (epicId) ->\r\n        url = $urls.resolve(\"epic-downvote\", epicId)\r\n        return $http.post(url)\r\n\r\n    service.watch = (epicId) ->\r\n        url = $urls.resolve(\"epic-watch\", epicId)\r\n        return $http.post(url)\r\n\r\n    service.unwatch = (epicId) ->\r\n        url = $urls.resolve(\"epic-unwatch\", epicId)\r\n        return $http.post(url)\r\n\r\n    return (instance) ->\r\n        instance.epics = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\",\"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (contentType, objectId, entryType) ->\r\n        return $repo.queryOneRaw(\"history/#{contentType}\", objectId, {type: entryType})\r\n\r\n    service.editComment = (type, objectId, activityId, comment) ->\r\n        url = $urls.resolve(\"history/#{type}\")\r\n        url = \"#{url}/#{objectId}/edit_comment\"\r\n        params = {\r\n            id: activityId\r\n        }\r\n        commentData = {\r\n            comment: comment\r\n        }\r\n        return $http.post(url, commentData, params).then (data) =>\r\n            return data.data\r\n\r\n    service.getCommentHistory = (type, objectId, activityId) ->\r\n        url = $urls.resolve(\"history/#{type}\")\r\n        url = \"#{url}/#{objectId}/comment_versions\"\r\n        params = {id: activityId}\r\n        return $http.get(url, params).then (data) =>\r\n            return data.data\r\n\r\n    service.deleteComment = (type, objectId, activityId) ->\r\n        url = $urls.resolve(\"history/#{type}\")\r\n        url = \"#{url}/#{objectId}/delete_comment\"\r\n        params = {id: activityId}\r\n        return $http.post(url, null, params).then (data) =>\r\n            return data.data\r\n\r\n    service.undeleteComment = (type, objectId, activityId) ->\r\n        url = $urls.resolve(\"history/#{type}\")\r\n        url = \"#{url}/#{objectId}/undelete_comment\"\r\n        params = {id: activityId}\r\n        return $http.post(url, null, params).then (data) =>\r\n            return data.data\r\n\r\n    return (instance) ->\r\n        instance.history = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo) ->\r\n    service = {}\r\n\r\n    service.get = (token) ->\r\n        return $repo.queryOne(\"invitations\", token)\r\n\r\n    return (instance) ->\r\n        instance.invitations = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nresourceProvider = ($repo, $http, $urls, $storage, $q) ->\r\n    service = {}\r\n    hashSuffix = \"issues-queryparams\"\r\n    hashSprintShowTags = \"taskboard-issues\"\r\n    hashIssuesShowTags = \"issues-list\"\r\n\r\n    service.get = (projectId, issueId) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n        return $repo.queryOne(\"issues\", issueId, params)\r\n\r\n    service.getByRef = (projectId, ref) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n        params.ref = ref\r\n        return $repo.queryOne(\"issues\", \"by_ref\", params)\r\n\r\n    service.listInAllProjects = (filters) ->\r\n        return $repo.queryMany(\"issues\", filters)\r\n\r\n    service.list = (projectId, filters, options) ->\r\n        params = {project: projectId}\r\n        params = _.extend({}, params, filters or {})\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryPaginated(\"issues\", params, options)\r\n\r\n    service.listInProject = (projectId, sprintId=null, params) ->\r\n        params = _.merge(params, {project: projectId})\r\n        params.milestone = sprintId if sprintId\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryMany(\"issues\", params)\r\n\r\n    service.bulkCreate = (projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"bulk-create-issues\")\r\n        params = {project_id: projectId,  milestone_id: milestoneId, bulk_issues: data}\r\n        return $http.post(url, params)\r\n\r\n    service.upvote = (issueId) ->\r\n        url = $urls.resolve(\"issue-upvote\", issueId)\r\n        return $http.post(url)\r\n\r\n    service.downvote = (issueId) ->\r\n        url = $urls.resolve(\"issue-downvote\", issueId)\r\n        return $http.post(url)\r\n\r\n    service.watch = (issueId) ->\r\n        url = $urls.resolve(\"issue-watch\", issueId)\r\n        return $http.post(url)\r\n\r\n    service.unwatch = (issueId) ->\r\n        url = $urls.resolve(\"issue-unwatch\", issueId)\r\n        return $http.post(url)\r\n\r\n    service.stats = (projectId) ->\r\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/issues_stats\")\r\n\r\n    service.filtersData = (params) ->\r\n        return $repo.queryOneRaw(\"issues-filters\", null, params)\r\n\r\n    service.listValues = (projectId, type) ->\r\n        params = {\"project\": projectId}\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryMany(type, params)\r\n\r\n    service.createDefaultValues = (projectId, type) ->\r\n        data = {\"project_id\": projectId}\r\n        url = $urls.resolve(\"#{type}-create-default\")\r\n        return $http.post(url, data)\r\n\r\n    service.storeQueryParams = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getQueryParams = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"bulk-update-issue-milestone\")\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_issues: data}\r\n        return $http.post(url, params)\r\n\r\n    service.promoteToUserStory = (issueId, projectId) ->\r\n        url = $urls.resolve(\"promote-issue-to-us\", issueId)\r\n        data = {project_id: projectId}\r\n        return $http.post(url, data)\r\n\r\n    # Persist display Tags on issues section\r\n\r\n    service.storeIssuesShowTags = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashIssuesShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getIssuesShowTags = (projectId) ->\r\n        ns = \"#{projectId}:#{hashIssuesShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash)\r\n\r\n    # Persist display Tags on taskboard issues list\r\n\r\n    service.storeSprintShowTags = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSprintShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getSprintShowTags = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSprintShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash)\r\n\r\n    return (instance) ->\r\n        instance.issues = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nresourceProvider = ($storage) ->\r\n    service = {}\r\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\"\r\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\"\r\n    hashSuffixSwimlanesModes = \"kanban-swimlanesmodels\"\r\n\r\n    service.storeStatusColumnModes = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getStatusColumnModes = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.storeSwimlanesModes = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffixSwimlanesModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getSwimlanesModes = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffixSwimlanesModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    return (instance) ->\r\n        instance.kanban = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\n\r\nresourceProvider = ($repo) ->\r\n    service = {\r\n        list: -> return $repo.queryMany(\"locales\")\r\n    }\r\n\r\n    return (instance) ->\r\n        instance.locales = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider])\r\n\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $urls, $http) ->\r\n    service = {}\r\n\r\n    service.render = (projectId, content) ->\r\n        # We can't use an empty content\r\n        content = ' ' if not content? or content == \"\"\r\n\r\n        params = {\r\n            project_id: projectId\r\n            content: content\r\n        }\r\n        url = $urls.resolve(\"wiki\")\r\n        return $http.post(\"#{url}/render\", params).then (data) =>\r\n            return data.data\r\n\r\n    return (instance) ->\r\n        instance.mdrender = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (id) ->\r\n        return $repo.queryOne(\"memberships\", id)\r\n\r\n    service.list = (projectId, filters, enablePagination=true) ->\r\n        params = {project: projectId}\r\n        params = _.extend({}, params, filters or {})\r\n        if enablePagination\r\n            return $repo.queryPaginated(\"memberships\", params)\r\n\r\n        return $repo.queryMany(\"memberships\", params, options={enablePagination:enablePagination})\r\n\r\n    service.listByUser = (userId, filters) ->\r\n        params = {user: userId}\r\n        params = _.extend({}, params, filters or {})\r\n        return $repo.queryPaginated(\"memberships\", params)\r\n\r\n    service.resendInvitation = (id) ->\r\n        url = $urls.resolve(\"memberships\")\r\n        return $http.post(\"#{url}/#{id}/resend_invitation\", {})\r\n\r\n    service.bulkCreateMemberships = (projectId, data, invitation_extra_text) ->\r\n        url = $urls.resolve(\"bulk-create-memberships\")\r\n        params = {project_id: projectId, bulk_memberships: data, invitation_extra_text: invitation_extra_text}\r\n        return $http.post(url, params)\r\n\r\n    return (instance) ->\r\n        instance.memberships = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nresourceProvider = ($repo) ->\r\n    service = {}\r\n\r\n    service.list = (projectId, module) ->\r\n        return $repo.queryOneAttribute(\"project-modules\", projectId, module)\r\n\r\n    return (instance) ->\r\n        instance.modules = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (id) ->\r\n        return $repo.queryOne(\"notify-policies\", id)\r\n\r\n    service.list = (filters) ->\r\n        params = _.extend({}, params, filters or {})\r\n        return $repo.queryMany(\"notify-policies\", params)\r\n\r\n    return (instance) ->\r\n        instance.notifyPolicies = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\n\r\nresourceProvider = ($config, $repo, $http, $urls, $auth, $q, $translate) ->\r\n    service = {}\r\n\r\n    service.get = (projectId) ->\r\n        return $repo.queryOne(\"projects\", projectId)\r\n\r\n    service.getBySlug = (projectSlug) ->\r\n        return $repo.queryOne(\"projects\", \"by_slug?slug=#{projectSlug}\")\r\n\r\n    service.list = (filters) ->\r\n        params = {\"order_by\": \"user_order\"}\r\n        params = _.extend({}, params, filters or {})\r\n        return $repo.queryMany(\"projects\", params)\r\n\r\n    service.listByMember = (memberId) ->\r\n        params = {\"member\": memberId, \"order_by\": \"user_order\"}\r\n        return $repo.queryMany(\"projects\", params)\r\n\r\n    service.templates = ->\r\n        return $repo.queryMany(\"project-templates\")\r\n\r\n    service.usersList = (projectId) ->\r\n        params = {\"project\": projectId}\r\n        return $repo.queryMany(\"users\", params)\r\n\r\n    service.rolesList = (projectId) ->\r\n        params = {\"project\": projectId}\r\n        return $repo.queryMany(\"roles\", params)\r\n\r\n    service.stats = (projectId) ->\r\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/stats\")\r\n\r\n    service.bulkUpdateOrder = (bulkData) ->\r\n        url = $urls.resolve(\"bulk-update-projects-order\")\r\n        return $http.post(url, bulkData)\r\n\r\n    service.regenerate_epics_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_epics_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.regenerate_userstories_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_userstories_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.regenerate_tasks_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_tasks_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.regenerate_issues_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_issues_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.delete_epics_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_epics_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.delete_userstories_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_userstories_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.delete_tasks_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_tasks_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.patch_default_swimlane = (projectId, swimlaneId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}\"\r\n        data = {\r\n            default_swimlane: swimlaneId\r\n        }\r\n        return $http.patch(url, data)\r\n\r\n    service.delete_issues_csv_uuid = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_issues_csv_uuid\"\r\n        return $http.post(url)\r\n\r\n    service.leave = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/leave\"\r\n        return $http.post(url)\r\n\r\n    service.memberStats = (projectId) ->\r\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/member_stats\")\r\n\r\n    service.tagsColors = (projectId) ->\r\n        return $repo.queryOne(\"projects\", \"#{projectId}/tags_colors\")\r\n\r\n    service.deleteTag = (projectId, tag) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_tag\"\r\n        return $http.post(url, {tag: tag})\r\n\r\n    service.createTag = (projectId, tag, color) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/create_tag\"\r\n        data = {}\r\n        data.tag = tag\r\n        data.color = null\r\n        if color\r\n            data.color = color\r\n        return $http.post(url, data)\r\n\r\n    service.editTag = (projectId, from_tag, to_tag, color) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/edit_tag\"\r\n        data = {}\r\n        data.from_tag = from_tag\r\n        if to_tag\r\n            data.to_tag = to_tag\r\n        data.color = null\r\n        if color\r\n            data.color = color\r\n        return $http.post(url, data)\r\n\r\n    service.mixTags = (projectId, to_tag, from_tags) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/mix_tags\"\r\n        return $http.post(url, {to_tag: to_tag, from_tags: from_tags})\r\n\r\n    service.export = (projectId) ->\r\n        url = \"#{$urls.resolve(\"exporter\")}/#{projectId}\"\r\n        return $http.get(url)\r\n\r\n    service.import = (file, statusUpdater) ->\r\n        defered = $q.defer()\r\n\r\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\r\n        if maxFileSize and file.size > maxFileSize\r\n            errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\r\n                fileName: file.name\r\n                fileSize: sizeFormat(file.size)\r\n                maxFileSize: sizeFormat(maxFileSize)\r\n            })\r\n\r\n            response = {\r\n                status: 413,\r\n                data: _error_message: errorMsg\r\n            }\r\n            defered.reject(response)\r\n            return defered.promise\r\n\r\n        uploadProgress = (evt) =>\r\n            percent = Math.round((evt.loaded / evt.total) * 100)\r\n            message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\r\n                uploadedSize: sizeFormat(evt.loaded)\r\n                totalSize: sizeFormat(evt.total)\r\n            })\r\n            statusUpdater(\"in-progress\", null, message, percent)\r\n\r\n        uploadComplete = (evt) =>\r\n            statusUpdater(\"done\",\r\n                          $translate.instant(\"PROJECT.IMPORT.TITLE\"),\r\n                          $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"))\r\n\r\n        uploadFailed = (evt) =>\r\n            statusUpdater(\"error\")\r\n\r\n        complete = (evt) =>\r\n            response = {}\r\n            try\r\n                response.data = JSON.parse(evt.target.responseText)\r\n            catch\r\n                response.data = {}\r\n            response.status = evt.target.status\r\n            if evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')\r\n                response.headers = {\r\n                    isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') == 'True',\r\n                    memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\r\n                }\r\n            defered.resolve(response) if response.status in [201, 202]\r\n            defered.reject(response)\r\n\r\n        failed = (evt) =>\r\n            defered.reject(\"fail\")\r\n\r\n        data = new FormData()\r\n        data.append('dump', file)\r\n\r\n        xhr = new XMLHttpRequest()\r\n        xhr.upload.addEventListener(\"progress\", uploadProgress, false)\r\n        xhr.upload.addEventListener(\"load\", uploadComplete, false)\r\n        xhr.upload.addEventListener(\"error\", uploadFailed, false)\r\n        xhr.upload.addEventListener(\"abort\", uploadFailed, false)\r\n        xhr.addEventListener(\"load\", complete, false)\r\n        xhr.addEventListener(\"error\", failed, false)\r\n\r\n        xhr.open(\"POST\", $urls.resolve(\"importer\"))\r\n        xhr.setRequestHeader(\"Authorization\", \"Bearer #{$auth.getToken()}\")\r\n        xhr.setRequestHeader('Accept', 'application/json')\r\n        xhr.send(data)\r\n\r\n        return defered.promise\r\n\r\n    service.changeLogo = (projectId, file) ->\r\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\r\n        if maxFileSize and file.size > maxFileSize\r\n            response = {\r\n                status: 413,\r\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\r\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\r\n            }\r\n            defered = $q.defer()\r\n            defered.reject(response)\r\n            return defered.promise\r\n\r\n        data = new FormData()\r\n        data.append('logo', file)\r\n        options = {\r\n            transformRequest: angular.identity,\r\n            headers: {'Content-Type': undefined}\r\n        }\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/change_logo\"\r\n        return $http.post(url, data, {}, options)\r\n\r\n    service.removeLogo = (projectId) ->\r\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/remove_logo\"\r\n        return $http.post(url)\r\n\r\n    return (instance) ->\r\n        instance.projects = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\",\r\n                                                \"$q\", \"$translate\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (id) ->\r\n        return $repo.queryOne(\"roles\", id)\r\n\r\n    service.list = (projectId) ->\r\n        return $repo.queryMany(\"roles\", {project: projectId})\r\n\r\n    return (instance) ->\r\n        instance.roles = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $urls, $http, $q) ->\r\n    service = {}\r\n\r\n    service.do = (projectId, term) ->\r\n        deferredAbort = $q.defer()\r\n\r\n        url = $urls.resolve(\"search\")\r\n        params = {\r\n            url: url,\r\n            method: \"GET\",\r\n            timeout: deferredAbort.promise,\r\n            cancelable: true,\r\n            params: {\r\n                project: projectId\r\n                text: term,\r\n                get_all: false,\r\n            }\r\n        }\r\n\r\n        request = $http.request(params).then (data) ->\r\n            return data.data\r\n\r\n        request.abort = () ->\r\n            deferredAbort.resolve()\r\n\r\n        request.finally = () ->\r\n            request.abort = angular.noop\r\n            deferredAbort = request = null\r\n\r\n        return request\r\n\r\n    return (instance) ->\r\n        instance.search = service\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nresourceProvider = ($repo, $model, $storage, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (projectId, sprintId) ->\r\n        return $repo.queryOne(\"milestones\", sprintId).then (sprint) ->\r\n            uses = sprint.user_stories\r\n            uses = _.map(uses, (u) -> $model.make_model(\"userstories\", u))\r\n            sprint._attrs.user_stories = uses\r\n            return sprint\r\n\r\n    service.stats = (projectId, sprintId) ->\r\n        return $repo.queryOneRaw(\"milestones\", \"#{sprintId}/stats\")\r\n\r\n    service.list = (projectId, filters) ->\r\n        params = {\"project\": projectId}\r\n        params = _.extend({}, params, filters or {})\r\n        return $repo.queryMany(\"milestones\", params, {}, true).then (result) =>\r\n            milestones = result[0]\r\n            headers = result[1]\r\n\r\n            for m in milestones\r\n                uses = m.user_stories\r\n                uses = _.map(uses, (u) => $model.make_model(\"userstories\", u))\r\n                m._attrs.user_stories = uses\r\n\r\n            return {\r\n                milestones: milestones,\r\n                closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\r\n                open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\r\n            }\r\n\r\n    service.moveUserStoriesMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId)\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_stories: data}\r\n        return $http.post(url, params)\r\n\r\n    service.moveTasksMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId)\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_tasks: data}\r\n        return $http.post(url, params)\r\n\r\n    service.moveIssuesMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId)\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_issues: data}\r\n        return $http.post(url, params)\r\n\r\n    return (instance) ->\r\n        instance.sprints = service\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgSprintsResourcesProvider\",\r\n[\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.list = (projectId) ->\r\n        params = {project: projectId}\r\n        return $repo.queryMany(\"swimlanes\", params)\r\n\r\n    service.create = (projectId, name, order) ->\r\n        url = $urls.resolve(\"swimlanes\")\r\n        params = {\r\n            project: projectId,\r\n            name: name,\r\n        }\r\n        if (order)\r\n            params.order = order\r\n\r\n        return $http.post(url, params)\r\n\r\n    service.edit = (swimlaneId, name) ->\r\n        url = $urls.resolve(\"swimlanes\")\r\n        url = \"#{url}/#{swimlaneId}\"\r\n        params = {\r\n            name\r\n        }\r\n        return $http.patch(url, params)\r\n\r\n    service.bulkUpdateOrder = (project, swimlanesOrder) ->\r\n        url = $urls.resolve(\"swimlanes\")\r\n        url = \"#{url}/bulk_update_order\"\r\n        params = {\r\n            project,\r\n            bulk_swimlanes: swimlanesOrder\r\n        }\r\n        return $http.post(url, params)\r\n\r\n    service.wipLimitUpdate = (swimlaneId, wip_limit) ->\r\n        url = $urls.resolve(\"swimlane-userstory-statuses\")\r\n        url = \"#{url}/#{swimlaneId}\"\r\n        params = {\r\n            wip_limit\r\n        }\r\n        return $http.patch(url, params)\r\n\r\n    service.delete = (swimlaneId, moveTo) ->\r\n        url = $urls.resolve(\"swimlanes\")\r\n        if (moveTo)\r\n            url = \"#{url}/#{swimlaneId}?moveTo=#{moveTo}\"\r\n        else\r\n            url = \"#{url}/#{swimlaneId}\"\r\n        return $http.delete(url)\r\n\r\n    return (instance) ->\r\n        instance.swimlanes = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgSwimlanesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nresourceProvider = ($repo, $http, $urls, $storage) ->\r\n    service = {}\r\n    hashSuffix = \"tasks-queryparams\"\r\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\"\r\n    hashSuffixUsRowModes = \"tasks-usrowmodels\"\r\n\r\n    service.get = (projectId, taskId, extraParams) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n\r\n        params = _.extend({}, params, extraParams)\r\n\r\n        return $repo.queryOne(\"tasks\", taskId, params)\r\n\r\n    service.getByRef = (projectId, ref, extraParams) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n        params.ref = ref\r\n\r\n        params = _.extend({}, params, extraParams)\r\n\r\n        return $repo.queryOne(\"tasks\", \"by_ref\", params)\r\n\r\n    service.listInAllProjects = (filters) ->\r\n        return $repo.queryMany(\"tasks\", filters)\r\n\r\n    service.filtersData = (params) ->\r\n        return $repo.queryOneRaw(\"task-filters\", null, params)\r\n\r\n    service.list = (projectId, sprintId=null, userStoryId=null, params) ->\r\n        params = _.merge(params, {project: projectId, order_by: 'us_order'})\r\n        params.milestone = sprintId if sprintId\r\n        params.user_story = userStoryId if userStoryId\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryMany(\"tasks\", params)\r\n\r\n    service.bulkCreate = (projectId, sprintId, usId, data) ->\r\n        url = $urls.resolve(\"bulk-create-tasks\")\r\n        params = {project_id: projectId, milestone_id: sprintId, us_id: usId, bulk_tasks: data}\r\n        return $http.post(url, params).then (result) ->\r\n            return result.data\r\n\r\n    service.upvote = (taskId) ->\r\n        url = $urls.resolve(\"task-upvote\", taskId)\r\n        return $http.post(url)\r\n\r\n    service.downvote = (taskId) ->\r\n        url = $urls.resolve(\"task-downvote\", taskId)\r\n        return $http.post(url)\r\n\r\n    service.watch = (taskId) ->\r\n        url = $urls.resolve(\"task-watch\", taskId)\r\n        return $http.post(url)\r\n\r\n    service.unwatch = (taskId) ->\r\n        url = $urls.resolve(\"task-unwatch\", taskId)\r\n        return $http.post(url)\r\n\r\n    service.bulkUpdateTaskTaskboardOrder = (projectId, data) ->\r\n        url = $urls.resolve(\"bulk-update-task-taskboard-order\")\r\n        params = {project_id: projectId, bulk_tasks: data}\r\n        return $http.post(url, params)\r\n\r\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"bulk-update-task-milestone\")\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_tasks: data}\r\n        return $http.post(url, params)\r\n\r\n    service.reorder = (id, data, setOrders) ->\r\n        url = $urls.resolve(\"tasks\") + \"/#{id}\"\r\n\r\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\r\n\r\n        return $http.patch(url, data, null, options)\r\n            .then (result) -> result.data\r\n\r\n    service.listValues = (projectId, type) ->\r\n        params = {\"project\": projectId}\r\n        return $repo.queryMany(type, params)\r\n\r\n    service.createDefaultValues = (projectId, type) ->\r\n        data = {\"project_id\": projectId}\r\n        url = $urls.resolve(\"#{type}-create-default\")\r\n        return $http.post(url, data)\r\n\r\n    service.storeQueryParams = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getQueryParams = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.storeStatusColumnModes = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getStatusColumnModes = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.storeUsRowModes = (projectId, sprintId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffixUsRowModes}\"\r\n        hash = generateHash([projectId, sprintId, ns])\r\n\r\n        $storage.set(hash, params)\r\n\r\n    service.getUsRowModes = (projectId, sprintId) ->\r\n        ns = \"#{projectId}:#{hashSuffixUsRowModes}\"\r\n        hash = generateHash([projectId, sprintId, ns])\r\n\r\n        return $storage.get(hash) or {}\r\n\r\n    service.promoteToUserStory = (taskId, projectId) ->\r\n        url = $urls.resolve(\"promote-task-to-us\", taskId)\r\n        data = {project_id: projectId}\r\n        return $http.post(url, data)\r\n\r\n    return (instance) ->\r\n        instance.tasks = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (id) ->\r\n        return $repo.queryOne(\"user-project-settings\", id)\r\n\r\n    service.list = (filters) ->\r\n        params = _.extend({}, params, filters or {})\r\n        return $repo.queryMany(\"user-project-settings\", params)\r\n\r\n    return (instance) ->\r\n        instance.userProjectSettings = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\n\r\nresourceProvider = ($config, $repo, $http, $urls, $q) ->\r\n    service = {}\r\n\r\n    service.changeAvatar = (file) ->\r\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\r\n        if maxFileSize and file.size > maxFileSize\r\n            response = {\r\n                status: 413,\r\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\r\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\r\n            }\r\n            defered = $q.defer()\r\n            defered.reject(response)\r\n            return defered.promise\r\n\r\n        data = new FormData()\r\n        data.append('avatar', file)\r\n        options = {\r\n            transformRequest: angular.identity,\r\n            headers: {'Content-Type': undefined}\r\n        }\r\n        url = \"#{$urls.resolve(\"users\")}/change_avatar\"\r\n        return $http.post(url, data, {}, options)\r\n\r\n    service.removeAvatar = () ->\r\n        url = \"#{$urls.resolve(\"users\")}/remove_avatar\"\r\n        return $http.post(url)\r\n\r\n    service.changePassword = (currentPassword, newPassword) ->\r\n        url = \"#{$urls.resolve(\"users\")}/change_password\"\r\n        data = {\r\n            current_password: currentPassword\r\n            password: newPassword\r\n        }\r\n        return $http.post(url, data)\r\n\r\n    return (instance) ->\r\n        instance.userSettings = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\",\r\n                                                    resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\n\r\nresourceProvider = ($http, $urls) ->\r\n    service = {}\r\n\r\n    service.contacts = (userId, options={}) ->\r\n        url = $urls.resolve(\"user-contacts\", userId)\r\n        httpOptions = {headers: {}}\r\n\r\n        if not options.enablePagination\r\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\r\n\r\n        return $http.get(url, {}, httpOptions)\r\n            .then (result) ->\r\n                return result.data\r\n\r\n    return (instance) ->\r\n        instance.users = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\",\r\n                                                    resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nhashShowTags = 'backlog-tags'\r\n\r\nresourceProvider = ($repo, $http, $urls, $storage, $q) ->\r\n    service = {}\r\n    hashSuffix = \"userstories-queryparams\"\r\n\r\n    service.get = (projectId, usId, extraParams) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n\r\n        params = _.extend({}, params, extraParams)\r\n\r\n        return $repo.queryOne(\"userstories\", usId, params)\r\n\r\n    service.getByRef = (projectId, ref, extraParams = {}) ->\r\n        params = service.getQueryParams(projectId)\r\n        params.project = projectId\r\n        params.ref = ref\r\n        params = _.extend({}, params, extraParams)\r\n        # TODO: fix api performance issue\r\n        if params.milestone == 'null'\r\n            delete params.milestone\r\n            delete params['no-milestone']\r\n\r\n        return $repo.queryOne(\"userstories\", \"by_ref\", params)\r\n\r\n    service.listInAllProjects = (filters) ->\r\n        return $repo.queryMany(\"userstories\", filters)\r\n\r\n    service.filtersData = (params) ->\r\n        return $repo.queryOneRaw(\"userstories-filters\", null, params)\r\n\r\n    service.listUnassigned = (projectId, filters, pageSize, store = true) ->\r\n        params = {\"project\": projectId, \"milestone\": \"null\"}\r\n        params = _.extend({}, params, filters or {})\r\n        if store\r\n            service.storeQueryParams(projectId, params)\r\n\r\n        return $repo.queryMany(\"userstories\", _.extend(params, {\r\n            page_size: pageSize\r\n        }), {\r\n            enablePagination: true\r\n        }, true)\r\n\r\n    service.listAll = (projectId, filters) ->\r\n        params = {\"project\": projectId}\r\n        params = _.extend({}, params, filters or {})\r\n        service.storeQueryParams(projectId, params)\r\n\r\n        return $repo.queryMany(\"userstories\", params)\r\n\r\n    service.bulkCreate = (projectId, status, bulk, swimlane) ->\r\n        data = {\r\n            project_id: projectId\r\n            status_id: status\r\n            bulk_stories: bulk\r\n            swimlane_id: swimlane\r\n        }\r\n\r\n        url = $urls.resolve(\"bulk-create-us\")\r\n\r\n        return $http.post(url, data)\r\n\r\n    service.upvote = (userStoryId) ->\r\n        url = $urls.resolve(\"userstory-upvote\", userStoryId)\r\n        return $http.post(url)\r\n\r\n    service.downvote = (userStoryId) ->\r\n        url = $urls.resolve(\"userstory-downvote\", userStoryId)\r\n        return $http.post(url)\r\n\r\n    service.watch = (userStoryId) ->\r\n        url = $urls.resolve(\"userstory-watch\", userStoryId)\r\n        return $http.post(url)\r\n\r\n    service.unwatch = (userStoryId) ->\r\n        url = $urls.resolve(\"userstory-unwatch\", userStoryId)\r\n        return $http.post(url)\r\n\r\n    service.bulkUpdateBacklogOrder = (projectId, milestoneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) ->\r\n        url = $urls.resolve(\"bulk-update-us-backlog-order\")\r\n        params = {project_id: projectId, bulk_userstories: bulkUserstories}\r\n\r\n        if milestoneId\r\n            params.milestone_id = milestoneId\r\n\r\n        if afterUserstoryId\r\n            params.after_userstory_id = afterUserstoryId\r\n\r\n        else if  beforeUserstoryId\r\n            params.before_userstory_id = beforeUserstoryId\r\n\r\n        return $http.post(url, params)\r\n\r\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\r\n        url = $urls.resolve(\"bulk-update-us-milestone\")\r\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_stories: data}\r\n        return $http.post(url, params)\r\n\r\n    service.bulkUpdateKanbanOrder = (projectId, statusId, swimlaneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) ->\r\n        url = $urls.resolve(\"bulk-update-us-kanban-order\")\r\n        params = {\r\n            project_id: projectId,\r\n            status_id: statusId,\r\n            bulk_userstories: bulkUserstories\r\n        }\r\n\r\n        if afterUserstoryId\r\n            params.after_userstory_id = afterUserstoryId\r\n\r\n        else if  beforeUserstoryId\r\n            params.before_userstory_id = beforeUserstoryId\r\n\r\n        if swimlaneId\r\n            params.swimlane_id = swimlaneId\r\n\r\n        return $http.post(url, params)\r\n\r\n    service.listValues = (projectId, type) ->\r\n        params = {\"project\": projectId}\r\n        service.storeQueryParams(projectId, params)\r\n        return $repo.queryMany(type, params)\r\n\r\n    service.createDefaultValues = (projectId, type) ->\r\n        data = {\"project_id\": projectId}\r\n        url = $urls.resolve(\"#{type}-create-default\")\r\n        return $http.post(url, data)\r\n\r\n    service.editStatus = (statusId, wip_limit) ->\r\n        url = $urls.resolve(\"userstory-statuses\")\r\n        url = \"#{url}/#{statusId}\"\r\n        params = {\r\n            wip_limit\r\n        }\r\n        return $http.patch(url, params)\r\n\r\n    service.storeQueryParams = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getQueryParams = (projectId) ->\r\n        ns = \"#{projectId}:#{hashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or {}\r\n\r\n    service.storeBacklog = (projectId, ids) ->\r\n        ns = \"#{projectId}:backlog-ids\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, ids)\r\n\r\n    service.getBacklog = (projectId) ->\r\n        ns = \"#{projectId}:backlog-ids\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash) or []\r\n\r\n    service.storeShowTags = (projectId, params) ->\r\n        ns = \"#{projectId}:#{hashShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        $storage.set(hash, params)\r\n\r\n    service.getShowTags = (projectId) ->\r\n        ns = \"#{projectId}:#{hashShowTags}\"\r\n        hash = generateHash([projectId, ns])\r\n        return $storage.get(hash)\r\n\r\n    return (instance) ->\r\n        instance.userstories = service\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nresourceProvider = ($repo, $urls, $http) ->\r\n    service = {}\r\n\r\n    service.list = (webhookId) ->\r\n        params = {webhook: webhookId}\r\n        return $repo.queryMany(\"webhooklogs\", params)\r\n\r\n    service.resend = (webhooklogId) ->\r\n        url = $urls.resolve(\"webhooklogs-resend\", webhooklogId)\r\n        return $http.post(url)\r\n\r\n    return (instance) ->\r\n        instance.webhooklogs = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nresourceProvider = ($repo, $urls, $http) ->\r\n    service = {}\r\n\r\n    service.list = (projectId) ->\r\n        params = {project: projectId}\r\n        return $repo.queryMany(\"webhooks\", params)\r\n\r\n    service.test = (webhookId) ->\r\n        url = $urls.resolve(\"webhooks-test\", webhookId)\r\n        return $http.post(url)\r\n\r\n    return (instance) ->\r\n        instance.webhooks = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nresourceProvider = ($repo, $http, $urls) ->\r\n    service = {}\r\n\r\n    service.get = (wikiId) ->\r\n        return $repo.queryOne(\"wiki\", wikiId)\r\n\r\n    service.getBySlug = (projectId, slug) ->\r\n        return $repo.queryOne(\"wiki\", \"by_slug?project=#{projectId}&slug=#{slug}\")\r\n\r\n    service.list = (projectId) ->\r\n        return $repo.queryMany(\"wiki\", {project: projectId})\r\n\r\n    service.listLinks = (projectId) ->\r\n        return $repo.queryMany(\"wiki-links\", {project: projectId})\r\n\r\n    return (instance) ->\r\n        instance.wiki = service\r\n\r\n\r\nmodule = angular.module(\"taigaResources\")\r\nmodule.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## User ChangePassword Controller\r\n#############################################################################\r\n\r\nclass UserChangePasswordController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAuth\",\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\r\n                  @auth, @translate) ->\r\n        @scope.sectionName = @translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\")\r\n        @scope.user = @auth.getUser()\r\n\r\nmodule.controller(\"UserChangePasswordController\", UserChangePasswordController)\r\n\r\n\r\n#############################################################################\r\n## User ChangePassword Directive\r\n#############################################################################\r\n\r\nUserChangePasswordDirective = ($rs, $confirm, $loading, $translate) ->\r\n    link = ($scope, $el, $attrs, ctrl) ->\r\n        form = new checksley.Form($el.find(\"form\"))\r\n\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            if not form.validate()\r\n                return\r\n\r\n            if $scope.newPassword1 != $scope.newPassword2\r\n                $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"))\r\n                return\r\n\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1)\r\n            promise.then =>\r\n                currentLoading.finish()\r\n                $confirm.notify('success')\r\n\r\n            promise.then null, (response) =>\r\n                currentLoading.finish()\r\n                $confirm.notify('error', response.data._error_message)\r\n\r\n        submitButton = $el.find(\".submit-button\")\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link:link\r\n    }\r\n\r\nmodule.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindOnce = @.taiga.bindOnce\r\ndebounce = @.taiga.debounce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## Delete User Lightbox Directive\r\n#############################################################################\r\n\r\nDeleteUserDirective = ($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$on \"deletelightbox:new\", (ctx, user)->\r\n            lightboxService.open($el)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        submit = ->\r\n            currentLoading = $loading()\r\n                .target(submitButton)\r\n                .start()\r\n\r\n            promise = $repo.remove($scope.user)\r\n\r\n            promise.then (data) ->\r\n                currentLoading.finish()\r\n                lightboxService.close($el)\r\n                $auth.logout()\r\n                $location.path($navUrls.resolve(\"login\"))\r\n\r\n            # FIXME: error handling?\r\n            promise.then null, ->\r\n                currentLoading.finish()\r\n                console.log \"FAIL\"\r\n\r\n        $el.on \"click\", \".js-cancel\", (event) ->\r\n            event.preventDefault()\r\n            lightboxService.close($el)\r\n\r\n        $el.on \"click\", \".js-confirm\", debounce 2000, (event) ->\r\n            event.preventDefault()\r\n            submit()\r\n\r\n        submitButton = $el.find(\".js-confirm\")\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl: \"user/lightbox/lightbox-delete-account.html\"\r\n    }\r\n\r\nmodule.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\",\r\n                                    \"lightboxService\", \"$tgLoading\", DeleteUserDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmixOf = @.taiga.mixOf\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## User settings Controller\r\n#############################################################################\r\n\r\nclass UserLiveNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAuth\",\r\n        \"tgErrorHandlingService\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls, @auth, @errorHandlingService) ->\r\n        @scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\"\r\n        @scope.user = @auth.getUser()\r\n        promise = @.loadInitialData()\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadInitialData: ->\r\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\r\n            @scope.notifyPolicies = notifyPolicies\r\n            return notifyPolicies\r\n\r\nmodule.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController)\r\n\r\n\r\n#############################################################################\r\n## User Notifications Directive\r\n#############################################################################\r\n\r\nUserLiveNotificationsDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective)\r\n\r\n\r\n#############################################################################\r\n## User Notifications List Directive\r\n#############################################################################\r\n\r\nUserLiveNotificationsListDirective = ($repo, $confirm, $compile) ->\r\n    template = _.template(\"\"\"\r\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\r\n        <div class=\"policy-table-row\" data-index=\"<%- index %>\">\r\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\r\n          <div class=\"policy-table-all\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-all-<%- notifyPolicy.id %>\"\r\n                     value=\"2\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\"checked\"<% } %>/>\r\n              <label for=\"policy-all-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\"></label>\r\n            </div>\r\n          </div>\r\n          <div class=\"policy-table-involved\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-involved-<%- notifyPolicy.id %>\"\r\n                     value=\"1\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\"checked\"<% } %> />\r\n              <label for=\"policy-involved-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\"></label>\r\n            </div>\r\n          </div>\r\n          <div class=\"policy-table-none\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-none-<%- notifyPolicy.id %>\"\r\n                     value=\"3\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\"checked\"<% } %> />\r\n              <label for=\"policy-none-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\"></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <% }) %>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = ->\r\n            $el.off()\r\n\r\n            ctx = {notifyPolicies: $scope.notifyPolicies}\r\n            html = template(ctx)\r\n\r\n            $el.html($compile(html)($scope))\r\n\r\n            $el.on \"change\", \"input[type=radio]\", (event) ->\r\n                target = angular.element(event.currentTarget)\r\n\r\n                policyIndex = target.parents(\".policy-table-row\").data('index')\r\n                policy = $scope.notifyPolicies[policyIndex]\r\n                prev_level = policy.live_notify_level\r\n                policy.live_notify_level = parseInt(target.val(), 10)\r\n\r\n                onSuccess = ->\r\n                    $confirm.notify(\"success\")\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                    target.parents(\".policy-table-row\")\r\n                          .find(\"input[value=#{prev_level}]\")\r\n                          .prop(\"checked\", true)\r\n\r\n                $repo.save(policy).then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        bindOnce($scope, $attrs.ngModel, render)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\",\r\n                                             UserLiveNotificationsListDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmixOf = @.taiga.mixOf\r\nsizeFormat = @.taiga.sizeFormat\r\nmodule = angular.module(\"taigaUserSettings\")\r\ndebounce = @.taiga.debounce\r\n\r\n#############################################################################\r\n## User settings Controller\r\n#############################################################################\r\n\r\nclass UserSettingsController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgConfig\",\r\n        \"$tgRepo\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$routeParams\",\r\n        \"$q\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAuth\",\r\n        \"$translate\",\r\n        \"tgErrorHandlingService\"\r\n        \"$window\"\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @config, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\r\n                  @auth, @translate, @errorHandlingService, @window) ->\r\n        @scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\"\r\n\r\n        @scope.project = {}\r\n        @scope.user = @auth.getUser()\r\n\r\n        if !@scope.user\r\n            @errorHandlingService.permissionDenied()\r\n        else\r\n            @scope.lang = @getLan()\r\n            @scope.theme = @getTheme()\r\n\r\n        maxFileSize = @config.get(\"maxUploadFileSize\", null)\r\n        if maxFileSize\r\n            text = @translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\"maxFileSize\": sizeFormat(maxFileSize)})\r\n            @scope.maxFileSizeMsg = text\r\n\r\n        promise = @.loadInitialData()\r\n\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadInitialData: ->\r\n        compiledThemes = window._taigaAvailableThemes\r\n        @scope.availableThemes = @config.get(\"themes\", []).filter (theme) =>\r\n            return compiledThemes.includes(theme)\r\n\r\n        return @rs.locales.list().then (locales) =>\r\n            @scope.locales = locales\r\n            return locales\r\n\r\n    openDeleteLightbox: ->\r\n        @rootscope.$broadcast(\"deletelightbox:new\", @scope.user)\r\n\r\n    getLan: ->\r\n        return @scope.user.lang ||\r\n               @translate.preferredLanguage()\r\n\r\n    getTheme: ->\r\n        compiledThemes = window._taigaAvailableThemes\r\n\r\n        theme = @scope.user.theme ||\r\n               @config.get(\"defaultTheme\") ||\r\n               \"taiga\"\r\n\r\n        if !compiledThemes.includes(theme)\r\n            theme = \"taiga\"\r\n\r\n        return theme\r\n\r\n    exportProfile: ->\r\n        onSuccess = (result) ->\r\n            dumpUrl = result.data.url\r\n            @window.open(dumpUrl, \"_blank\")\r\n\r\n        onError = (response) =>\r\n            if response.data?._error_message\r\n                @confirm.notify(\"error\", response.data._error_message)\r\n\r\n        @auth.exportProfile().then(onSuccess, onError)\r\n\r\n    verifyEmail: ->\r\n        onSuccess = (result) =>\r\n            text = @translate.instant(\"USER_PROFILE.VERIFY_EMAIL_SUCCESS\")\r\n            @confirm.notify(\"success\", text)\r\n\r\n        onError = (response) =>\r\n            if response.data?._error_message\r\n                @confirm.notify(\"error\", response.data._error_message)\r\n\r\n        @auth.sendVerificationEmail().then(onSuccess, onError)\r\n\r\n\r\nmodule.controller(\"UserSettingsController\", UserSettingsController)\r\n\r\n\r\n#############################################################################\r\n## User Profile Directive\r\n#############################################################################\r\n\r\nUserProfileDirective = ($confirm, $auth, $repo, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        submit = debounce 2000, (event) =>\r\n            event.preventDefault()\r\n\r\n            form = $el.find(\"form\").checksley()\r\n            return if not form.validate()\r\n\r\n            changeEmail = $scope.user.isAttributeModified(\"email\")\r\n            $scope.user.lang = $scope.lang\r\n            $scope.user.theme = $scope.theme\r\n\r\n            onSuccess = (data) =>\r\n                $auth.setUser(data)\r\n\r\n                if changeEmail\r\n                    text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\")\r\n                    $confirm.success(text)\r\n                else\r\n                    $confirm.notify('success')\r\n\r\n            onError = (data) =>\r\n                form.setErrors(data)\r\n                $confirm.notify('error', data._error_message)\r\n\r\n            $repo.save($scope.user).then(onSuccess, onError)\r\n\r\n        $el.on \"submit\", \"form\", submit\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective])\r\n\r\n\r\n#############################################################################\r\n## User Avatar Directive\r\n#############################################################################\r\n\r\nUserAvatarDirective = ($auth, $model, $rs, $confirm) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        showSizeInfo = ->\r\n            $el.find(\".size-info\").removeClass(\"hidden\")\r\n\r\n        onSuccess = (response) ->\r\n            user = $model.make_model(\"users\", response.data)\r\n            $auth.setUser(user)\r\n            $scope.user = user\r\n\r\n            $el.find('.loading-overlay').removeClass('active')\r\n            $confirm.notify('success')\r\n\r\n        onError = (response) ->\r\n            showSizeInfo() if response.status == 413\r\n            $el.find('.loading-overlay').removeClass('active')\r\n            $confirm.notify('error', response.data._error_message)\r\n\r\n        # Change photo\r\n        $el.on \"click\", \".js-change-avatar\", (e) ->\r\n            e.preventDefault()\r\n            $el.find(\"#avatar-field\").click()\r\n\r\n        $el.on \"change\", \"#avatar-field\", (event) ->\r\n            if $scope.avatarAttachment\r\n                $el.find('.loading-overlay').addClass(\"active\")\r\n                $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError)\r\n\r\n        # Use gravatar photo\r\n        $el.on \"click\", \"a.js-use-gravatar\", (event) ->\r\n            $el.find('.loading-overlay').addClass(\"active\")\r\n            $rs.userSettings.removeAvatar().then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective])\r\n\r\n\r\n#############################################################################\r\n## User Avatar Model Directive\r\n#############################################################################\r\n\r\nTaigaAvatarModelDirective = ($parse) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        model = $parse($attrs.tgAvatarModel)\r\n        modelSetter = model.assign\r\n\r\n        $el.bind 'change', ->\r\n            $scope.$apply ->\r\n                modelSetter($scope, $el[0].files[0])\r\n\r\n    return {link:link}\r\n\r\nmodule.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nUserSettingsNavigationDirective = ->\r\n    link = ($scope, $el, $attrs) ->\r\n        section = $attrs.tgUserSettingsNavigation\r\n        $el.find(\".active\").removeClass(\"active\")\r\n        $el.find(\"#usersettingsmenu-#{section}\").addClass(\"active\")\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\nmodule.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmixOf = @.taiga.mixOf\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## User settings Controller\r\n#############################################################################\r\n\r\nclass UserNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgConfirm\",\r\n        \"$tgResources\",\r\n        \"$tgAuth\",\r\n        \"$tgConfig\",\r\n        \"tgResources\",\r\n        \"tgCurrentUserService\",\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@scope, @confirm, @rs, @auth, @config, @resources, @currentUserService, @translate) ->\r\n        @scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\"\r\n        @scope.user = @auth.getUser()\r\n        promise = @.loadInitialData()\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n        @.isSaas = @config.get(\"isSaas\")\r\n        @.onPremiseSubscribed = false\r\n        @.loadPremise = false\r\n\r\n    subscribed: ->\r\n        @.loadPremise = true\r\n        @resources.onPremise.subscribeOnPremiseNewsletter(\r\n            {\r\n                \"email\": @currentUserService.getUser().get('email'),\r\n                \"full_name\": @currentUserService.getUser().get('full_name'),\r\n                \"origin_form\": 'Newsletter sign-up settings'\r\n            }\r\n        ).then () =>\r\n            text = @translate.instant(\"PROJECT.NEWSLETTER_OPENING.SAVED_PREFERENCE\")\r\n\r\n            @confirm.notify(\"success\", \"Your preferences have been save successfully\")\r\n            @.onPremiseSubscribed = true\r\n            @.loadPremise = false\r\n            @resources.user.getUserStorage('dont_ask_premise_newsletter')\r\n                .then (storageState) =>\r\n                    @resources.user.setUserStorage('dont_ask_premise_newsletter', true)\r\n                .catch (storageError) =>\r\n                    if storageError.status = 404\r\n                        @resources.user.createUserStorage('dont_ask_premise_newsletter', false)\r\n\r\n        .catch () =>\r\n            @confirm.notify(\"light-error\", \"\")\r\n            @.loadPremise = false\r\n\r\n    loadInitialData: ->\r\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\r\n            @scope.notifyPolicies = notifyPolicies\r\n            return notifyPolicies\r\n\r\nmodule.controller(\"UserNotificationsController\", UserNotificationsController)\r\n\r\n\r\n#############################################################################\r\n## User Notifications Directive\r\n#############################################################################\r\n\r\nUserNotificationsDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserNotifications\", UserNotificationsDirective)\r\n\r\n\r\n#############################################################################\r\n## User Notifications List Directive\r\n#############################################################################\r\n\r\nUserNotificationsListDirective = ($repo, $confirm, $compile) ->\r\n    template = _.template(\"\"\"\r\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\r\n        <div class=\"policy-table-row\" data-index=\"<%- index %>\">\r\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\r\n          <div class=\"policy-table-all\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-all-<%- notifyPolicy.id %>\"\r\n                     value=\"2\" <% if (notifyPolicy.notify_level == 2) { %>checked=\"checked\"<% } %>/>\r\n              <label for=\"policy-all-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\"></label>\r\n            </div>\r\n          </div>\r\n          <div class=\"policy-table-involved\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-involved-<%- notifyPolicy.id %>\"\r\n                     value=\"1\" <% if (notifyPolicy.notify_level == 1) { %>checked=\"checked\"<% } %> />\r\n              <label for=\"policy-involved-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\"></label>\r\n            </div>\r\n          </div>\r\n          <div class=\"policy-table-none\">\r\n            <div class=\"button-check\">\r\n              <input type=\"radio\"\r\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-none-<%- notifyPolicy.id %>\"\r\n                     value=\"3\" <% if (notifyPolicy.notify_level == 3) { %>checked=\"checked\"<% } %> />\r\n              <label for=\"policy-none-<%- notifyPolicy.id %>\"\r\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\"></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <% }) %>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = ->\r\n            $el.off()\r\n\r\n            ctx = {notifyPolicies: $scope.notifyPolicies}\r\n            html = template(ctx)\r\n\r\n            $el.html($compile(html)($scope))\r\n\r\n            $el.on \"change\", \"input[type=radio]\", (event) ->\r\n                target = angular.element(event.currentTarget)\r\n\r\n                policyIndex = target.parents(\".policy-table-row\").data('index')\r\n                policy = $scope.notifyPolicies[policyIndex]\r\n                prev_level = policy.notify_level\r\n                policy.notify_level = parseInt(target.val(), 10)\r\n\r\n                onSuccess = ->\r\n                    $confirm.notify(\"success\")\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n                    target.parents(\".policy-table-row\")\r\n                          .find(\"input[value=#{prev_level}]\")\r\n                          .prop(\"checked\", true)\r\n\r\n                $repo.save(policy).then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        bindOnce($scope, $attrs.ngModel, render)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\",\r\n                                             UserNotificationsListDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmixOf = @.taiga.mixOf\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## Custom Homepage Controller\r\n#############################################################################\r\n\r\nclass UserProjectSettingsController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$rootScope\"\r\n        \"$scope\"\r\n        \"$tgSections\"\r\n        \"$tgResources\"\r\n        \"$tgRepo\"\r\n        \"$tgConfirm\"\r\n         \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@rootScope, @scope, @tgSections, @rs, @repo, @confirm, @currentUserService) ->\r\n        @scope.sections = @tgSections.list()\r\n\r\n        promise = @.loadInitialData()\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadInitialData: ->\r\n        return @rs.userProjectSettings.list().then (userProjectSettings) =>\r\n            @scope.userProjectSettings = userProjectSettings\r\n\r\n    updateCustomHomePage: (projectSettings) ->\r\n        onSuccess = =>\r\n            @currentUserService.loadProjects()\r\n            @rootScope.$broadcast(\"dropdown-project-list:updated\")\r\n            @confirm.notify(\"success\")\r\n\r\n        onError = =>\r\n            @confirm.notify(\"error\")\r\n\r\n        @repo.save(projectSettings).then(onSuccess, onError)\r\n\r\n    filteredSections: (projectSettings) ->\r\n        return _.filter @scope.sections, (section) ->\r\n            section.id in projectSettings.allowed_sections\r\n\r\n\r\nmodule.controller(\"UserProjectSettingsController\", UserProjectSettingsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nmixOf = @.taiga.mixOf\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module(\"taigaUserSettings\")\r\n\r\n\r\n#############################################################################\r\n## User Web Notifications Controller\r\n#############################################################################\r\n\r\nclass UserWebNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$tgResources\",\r\n        \"$tgAuth\"\r\n    ]\r\n\r\n    constructor: (@scope, @rs, @auth) ->\r\n        @scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\"\r\n        @scope.user = @auth.getUser()\r\n        promise = @.loadInitialData()\r\n        promise.then null, @.onInitialDataError.bind(@)\r\n\r\n    loadInitialData: ->\r\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\r\n            @scope.notifyPolicies = notifyPolicies\r\n            return notifyPolicies\r\n\r\nmodule.controller(\"UserWebNotificationsController\", UserWebNotificationsController)\r\n\r\n\r\n#############################################################################\r\n## User Web Notifications Directive\r\n#############################################################################\r\n\r\nUserWebNotificationsDirective = () ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective)\r\n\r\n\r\n#############################################################################\r\n## User Web Notifications List Directive\r\n#############################################################################\r\n\r\nUserWebNotificationsListDirective = ($repo, $confirm, $compile) ->\r\n    template = _.template(\"\"\"\r\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\r\n        <div class=\"policy-table-row\">\r\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\r\n          <div class=\"policy-table-all\">\r\n            <div class=\"check\" data-index=\"<%- index %>\">\r\n              <input type=\"checkbox\"\r\n                <% if(notifyPolicy.web_notify_level) { %> checked=\"checked\" <% } %>\r\n                name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-<%- notifyPolicy.id %>\"/>\r\n              <div></div>\r\n              <span class=\"check-text check-yes\" translate=\"COMMON.YES\"></span>\r\n              <span class=\"check-text check-no\"\" translate=\"COMMON.NO\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <% }) %>\r\n    \"\"\")\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        render = ->\r\n            $el.off()\r\n\r\n            ctx = {notifyPolicies: $scope.notifyPolicies}\r\n            html = template(ctx)\r\n\r\n            $el.html($compile(html)($scope))\r\n\r\n            $el.on \"click\", \".check\", (event) ->\r\n                target = angular.element(event.currentTarget)\r\n                policyIndex = target.data('index')\r\n                policy = $scope.notifyPolicies[policyIndex]\r\n                policy.web_notify_level = !policy.web_notify_level\r\n\r\n                onSuccess = ->\r\n                    $confirm.notify(\"success\")\r\n                    target.find(\"input\").prop(\"checked\", policy.web_notify_level)\r\n\r\n                onError = ->\r\n                    $confirm.notify(\"error\")\r\n\r\n                $repo.save(policy).then(onSuccess, onError)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n        bindOnce($scope, $attrs.ngModel, render)\r\n\r\n    return {link:link}\r\n\r\nmodule.directive(\"tgUserWebNotificationsList\",\r\n[\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaComponents\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaDiscover\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaExternalApps\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaHistory\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHome\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaNavigationBar\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaNotifications\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaProfile\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaProjects\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaResources2\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaUserTimeline\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaUtils\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nangular.module(\"taigaWikiHistory\", [])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n#############################################################################\r\n## Animated Counter\r\n#############################################################################\r\nAnimatedCounter = () ->\r\n    template = \"\"\"\r\n        <div\r\n            ng-class=\"{'wip-amount': data.wip, 'limit-over': data.count > data.wip}\"\r\n            class=\"animated-counter-inner\">\r\n            <div class=\"counter-translator\">\r\n                <div class=\"result\">\r\n                    <span class=\"current\">{{ nextUp.current || 0 }}</span><span ng-if=\"nextUp.wip\"> / {{ nextUp.wip }}</span>\r\n                </div>\r\n                <div class=\"result\">\r\n                    <span class=\"current\">{{ renderCount.current || 0 }}</span><span ng-if=\"renderCount.wip\"> / {{ renderCount.wip }}</span>\r\n                </div>\r\n                <div class=\"result\">\r\n                    <span class=\"current\">{{ nextDown.current || 0 }}</span><span ng-if=\"nextDown.wip\"> / {{ nextDown.wip }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    \"\"\"\r\n\r\n    link = ($scope, $el, $attrs) ->\r\n        transitionEnd = (event) ->\r\n            $scope.$evalAsync () =>\r\n                if $scope.nextUp != undefined\r\n                    $scope.renderCount = $scope.nextUp\r\n                else\r\n                    $scope.renderCount = $scope.nextDown\r\n\r\n                $(counter).removeClass('inc dec')\r\n\r\n        counter = $el.find('.counter-translator')\r\n        counter.on('transitionend', transitionEnd)\r\n        initialLoad = false\r\n        lastCount = undefined\r\n\r\n        unwatch = $scope.$on 'kanban:userstories:loaded', () ->\r\n            initialLoad = true\r\n            unwatch()\r\n\r\n        renderData = (data) ->\r\n            getCounter = (num) =>\r\n                return {\r\n                    current: num,\r\n                    wip: data.wip,\r\n                }\r\n\r\n            $scope.nextUp = undefined\r\n            $scope.nextDown = undefined\r\n\r\n            if !$scope.data || $scope.data.count == undefined\r\n                lastCount = 0\r\n                $scope.renderCount = getCounter(lastCount)\r\n                return\r\n            else if lastCount == $scope.data.count\r\n                return\r\n            # initialLoad, wait empty @.queue to animate preventing the animation on load\r\n            else if !initialLoad || lastCount == undefined\r\n                lastCount = $scope.data.count\r\n                $scope.renderCount = getCounter(lastCount)\r\n                return\r\n\r\n            if $scope.data.count > lastCount\r\n                lastCount = $scope.data.count\r\n                $scope.nextUp = getCounter($scope.data.count)\r\n            else if $scope.data.count < lastCount\r\n                lastCount = $scope.data.count\r\n                $scope.nextDown = getCounter($scope.data.count)\r\n\r\n            if $scope.nextUp != undefined || $scope.nextDown != undefined\r\n                counter.removeClass('inc dec')\r\n\r\n                $scope.$evalAsync () =>\r\n                    if $scope.nextUp != undefined\r\n                        counter.addClass('inc')\r\n                    else if $scope.nextDown != undefined\r\n                        counter.addClass('dec')\r\n\r\n        $scope.$watch 'disabled', (disabled) ->\r\n            if $scope.disabled\r\n                return\r\n\r\n            renderData($scope.data)\r\n\r\n        $scope.$watch 'data', (data) ->\r\n            if $scope.disabled\r\n                return\r\n\r\n            renderData(data)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n            counter.off()\r\n\r\n    return {\r\n        link: link,\r\n        template: template,\r\n        scope: {\r\n            data: '<',\r\n            disabled: '<'\r\n        },\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAnimatedCounter\", [AnimatedCounter])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAssignedToInlineDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template\r\n$translate, $compile, $currentUserService, avatarService, $userListService) ->\r\n    link = ($scope, $el, $attr, $model) ->\r\n        isEditable = ->\r\n            return $scope.project?.my_permissions?.indexOf($attr.requiredPerm) != -1\r\n\r\n        renderUserList = (text) ->\r\n            selectedId = $model.$modelValue.assigned_to\r\n            users = $userListService.searchUsers(text)\r\n            users = _.reject(users, {\"id\": selectedId}) if selectedId\r\n\r\n            visibleUsers = _.slice(users, 0, 5)\r\n            visibleUsers = _.map visibleUsers, (user) -> user.avatar = avatarService.getAvatar(user)\r\n\r\n            $scope.users = _.slice(users, 0, 5)\r\n            $scope.showMore = users.length > 5\r\n\r\n        renderUser = (assignedObject) ->\r\n            if assignedObject?.assigned_to\r\n                $scope.selected = assignedObject.assigned_to\r\n                assigned_to_extra_info = $scope.usersById[$scope.selected]\r\n                $scope.fullName = assigned_to_extra_info?.full_name_display\r\n                $scope.isUnassigned = false\r\n                $scope.avatar = avatarService.getAvatar(assigned_to_extra_info)\r\n                $scope.bg = $scope.avatar.bg\r\n                $scope.isIocaine = assignedObject?.is_iocaine\r\n            else\r\n                $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\")\r\n                $scope.isUnassigned = true\r\n                $scope.avatar = avatarService.getAvatar(null)\r\n                $scope.bg = null\r\n                $scope.isIocaine = false\r\n\r\n            $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated())\r\n            $scope.isEditable = isEditable()\r\n\r\n        $el.on \"click\", \".users-search\", (event) ->\r\n            event.stopPropagation()\r\n\r\n        $el.on \"click\", \".users-dropdown\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $scope.usersSearch = \"\"\r\n            renderUserList()\r\n            $scope.$apply()\r\n            $el.find(\".pop-users\").popover().open()\r\n\r\n        $scope.selfAssign = () ->\r\n            $model.$modelValue.assigned_to = $currentUserService.getUser().get('id')\r\n            renderUser($model.$modelValue)\r\n\r\n        $scope.unassign = () ->\r\n            $model.$modelValue.assigned_to  = null\r\n            renderUser()\r\n\r\n        $scope.$watch \"usersSearch\", (searchingText) ->\r\n            if searchingText?\r\n                renderUserList(searchingText)\r\n                $el.find('input').focus()\r\n\r\n        $el.on \"click\", \".user-list-single\", (event) ->\r\n            event.preventDefault()\r\n            target = angular.element(event.currentTarget)\r\n            $model.$modelValue.assigned_to = target.data(\"user-id\")\r\n            renderUser($model.$modelValue)\r\n            $scope.$apply()\r\n\r\n        $scope.$watch $attr.ngModel, (instance) ->\r\n            renderUser(instance)\r\n\r\n        $scope.$on \"isiocaine:changed\", (ctx, instance) ->\r\n            renderUser(instance)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link:link,\r\n        templateUrl: \"components/assigned-inline/assigned-to-inline.html\"\r\n        require:\"ngModel\"\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\",\r\n\"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\r\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAssignedUsersInlineDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template\r\n$translate, $compile, $currentUserService, avatarService, $userListService) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        currentAssignedIds = []\r\n        currentAssignedTo = null\r\n\r\n        isAssigned = ->\r\n            return currentAssignedIds.length > 0\r\n\r\n        renderUsersList = (text) ->\r\n            users = $userListService.searchUsers(text)\r\n\r\n            # Add selected users\r\n            selected = []\r\n            _.map users, (user) ->\r\n                if user.id in currentAssignedIds\r\n                    user.avatar = avatarService.getAvatar(user)\r\n                    selected.push(user)\r\n\r\n            # Filter users in searchs\r\n            visible = []\r\n            _.map users, (user) ->\r\n                if user.id not in currentAssignedIds\r\n                    user.avatar = avatarService.getAvatar(user)\r\n                    visible.push(user)\r\n\r\n            $scope.selected = _.slice(selected, 0, 5)\r\n            if $scope.selected.length < 5\r\n                $scope.users = _.slice(visible, 0, 5 - $scope.selected.length)\r\n            else\r\n                $scope.users = []\r\n            $scope.showMore = users.length > 5\r\n\r\n        renderUsers = () ->\r\n            assignedUsers = _.map(currentAssignedIds, (assignedUserId) -> $scope.usersById[assignedUserId])\r\n            assignedUsers = _.filter assignedUsers, (it) -> return !!it\r\n\r\n            $scope.hiddenUsers = if currentAssignedIds.length > 3 then currentAssignedIds.length - 3 else 0\r\n            $scope.assignedUsers = _.slice(assignedUsers, 0, 3)\r\n\r\n            $scope.isAssigned = isAssigned()\r\n\r\n        applyToModel = () ->\r\n            _.map currentAssignedIds, (userId) ->\r\n                if !$scope.usersById[userId]\r\n                    currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1)\r\n            if currentAssignedIds.length == 0\r\n                currentAssignedTo = null\r\n            else if currentAssignedIds.indexOf(currentAssignedTo) == -1 || !currentAssignedTo\r\n                currentAssignedTo = currentAssignedIds[0]\r\n\r\n            if (!$model.$modelValue.assigned_users)\r\n                $model.$modelValue.assigned_users = currentAssignedIds\r\n            else\r\n                $model.$modelValue.setAttr('assigned_users', currentAssignedIds)\r\n            $model.$modelValue.assigned_to = currentAssignedTo\r\n\r\n        $el.on \"click\", \".users-dropdown\", (event) ->\r\n            event.preventDefault()\r\n            event.stopPropagation()\r\n            $scope.usersSearch = null\r\n            renderUsersList()\r\n            $scope.$apply()\r\n            $el.find(\".pop-users\").popover().open()\r\n\r\n        $scope.assign = (user) ->\r\n            currentAssignedIds.push(user.id)\r\n            renderUsers()\r\n            applyToModel()\r\n\r\n        $scope.selfAssign = () ->\r\n            currentAssignedIds.push($currentUserService.getUser().get('id'))\r\n            renderUsers()\r\n            applyToModel()\r\n\r\n        $scope.unassign = (user) ->\r\n            index = currentAssignedIds.indexOf(user.id)\r\n            currentAssignedIds.splice(index, 1)\r\n            renderUsers()\r\n            applyToModel()\r\n\r\n        $el.on \"click\", \".users-search\", (event) ->\r\n            event.stopPropagation()\r\n\r\n        $scope.$watch \"usersSearch\", (searchingText) ->\r\n            if searchingText?\r\n                renderUsersList(searchingText)\r\n                $el.find('input').focus()\r\n\r\n        $scope.$watch $attrs.ngModel, (item) ->\r\n            return if not item?\r\n            currentAssignedIds = []\r\n            assigned_to = null\r\n\r\n            if item.assigned_users?\r\n                currentAssignedIds = item.assigned_users\r\n            assigned_to = item.assigned_to\r\n            renderUsers()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        scope: true,\r\n        link:link,\r\n        templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\r\n        require:\"ngModel\"\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\",\r\n\"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\r\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentLinkDirective = ($parse, attachmentsPreviewService, lightboxService) ->\r\n    link = (scope, el, attrs) ->\r\n        attachment = $parse(attrs.tgAttachmentLink)(scope)\r\n\r\n        el.on \"click\", (event) ->\r\n            if taiga.isImage(attachment.getIn(['file', 'name']))\r\n                event.preventDefault()\r\n\r\n                scope.$apply ->\r\n                    lightboxService.open($('tg-attachments-preview'))\r\n                    attachmentsPreviewService.fileId = attachment.getIn(['file', 'id'])\r\n            else if taiga.isPdf(attachment.getIn(['file', 'name']))\r\n                event.preventDefault()\r\n                window.open(attachment.getIn(['file', 'url']))\r\n\r\n        scope.$on \"$destroy\", -> el.off()\r\n    return {\r\n        link: link\r\n    }\r\n\r\nAttachmentLinkDirective.$inject = [\r\n    \"$parse\",\r\n    \"tgAttachmentsPreviewService\",\r\n    \"lightboxService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentGalleryDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            attachment: \"=\",\r\n            onDelete: \"&\",\r\n            onUpdate: \"&\",\r\n            type: \"=\"\r\n        },\r\n        controller: \"Attachment\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/attachment/attachment-gallery.html\",\r\n        link: link\r\n    }\r\n\r\nAttachmentGalleryDirective.$inject = []\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AttachmentController\r\n    @.$inject = [\r\n        'tgAttachmentsService',\r\n        '$translate'\r\n    ]\r\n\r\n    constructor: (@attachmentsService, @translate) ->\r\n        @.form = {}\r\n        @.form.description = @.attachment.getIn(['file', 'description'])\r\n        @.form.is_deprecated = @.attachment.get(['file', 'is_deprecated'])\r\n\r\n        @.title = @translate.instant(\"ATTACHMENT.TITLE\", {\r\n            fileName: @.attachment.get('name'),\r\n            date: moment(@.attachment.get('created_date')).format(@translate.instant(\"ATTACHMENT.DATE\"))\r\n        })\r\n\r\n    editMode: (mode) ->\r\n        attachment = @.attachment.set('editable', mode)\r\n        @.onUpdate({attachment: attachment})\r\n\r\n    delete: () ->\r\n        @.onDelete({attachment: @.attachment})\r\n\r\n    save: () ->\r\n        attachment = @.attachment.set('loading', true)\r\n\r\n        @.onUpdate({attachment: attachment})\r\n\r\n        attachment = @.attachment.merge({\r\n            editable: false,\r\n            loading: false\r\n        })\r\n\r\n        attachment = attachment.mergeIn(['file'], {\r\n            description: @.form.description,\r\n            is_deprecated: !!@.form.is_deprecated\r\n        })\r\n\r\n        @.onUpdate({attachment: attachment})\r\n\r\nangular.module('taigaComponents').controller('Attachment', AttachmentController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            attachment: \"=\",\r\n            onDelete: \"&\",\r\n            onUpdate: \"&\",\r\n            type: \"=\"\r\n        },\r\n        controller: \"Attachment\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/attachment/attachment.html\",\r\n        link: link\r\n    }\r\n\r\nAttachmentDirective.$inject = []\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentsDropDirective = ($parse) ->\r\n    link = (scope, el, attrs) ->\r\n        eventAttr = $parse(attrs.tgAttachmentsDrop)\r\n\r\n        el.on 'dragover', (e) ->\r\n            e.preventDefault()\r\n            e.currentTarget.classList.add('attachment-dragover')\r\n            return false\r\n\r\n        el.on 'dragleave', (e) ->\r\n            e.preventDefault()\r\n            e.currentTarget.classList.remove('attachment-dragover')\r\n            return false\r\n\r\n        el.on 'drop', (e) ->\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n\r\n            e.currentTarget.classList.remove('attachment-dragover')\r\n\r\n            dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer)\r\n\r\n            scope.$apply () -> eventAttr(scope, {files: dataTransfer.files})\r\n\r\n        scope.$on \"$destroy\", -> el.off()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nAttachmentsDropDirective.$inject = [\r\n    \"$parse\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\nclass AttachmentsFullController\r\n    @.$inject = [\r\n        \"$translate\",\r\n        \"$tgConfirm\",\r\n        \"$tgConfig\",\r\n        \"$tgStorage\",\r\n        \"tgAttachmentsFullService\",\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsPreviewService\"\r\n    ]\r\n\r\n    constructor: (@translate, @confirm, @config, @storage, @attachmentsFullService, @projectService, @attachmentsPreviewService) ->\r\n        @.mode = @storage.get('attachment-mode', 'list')\r\n\r\n        @.maxFileSize = @config.get(\"maxUploadFileSize\", null)\r\n        @.maxFileSize = sizeFormat(@.maxFileSize) if @.maxFileSize\r\n        @.maxFileSizeMsg = if @.maxFileSize then @translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {maxFileSize: @.maxFileSize}) else \"\"\r\n\r\n        taiga.defineImmutableProperty @, 'attachments', () => return @attachmentsFullService.attachments\r\n        taiga.defineImmutableProperty @, 'deprecatedsCount', () => return @attachmentsFullService.deprecatedsCount\r\n        taiga.defineImmutableProperty @, 'attachmentsVisible', () => return @attachmentsFullService.attachmentsVisible\r\n        taiga.defineImmutableProperty @, 'deprecatedsVisible', () => return @attachmentsFullService.deprecatedsVisible\r\n\r\n    uploadingAttachments: () ->\r\n        return @attachmentsFullService.uploadingAttachments\r\n\r\n    addAttachment: (file) ->\r\n        editable = (@.mode == 'list')\r\n\r\n        @attachmentsFullService.addAttachment(@.projectId, @.objId, @.type, file, editable)\r\n\r\n    setMode: (mode) ->\r\n        @.mode = mode\r\n\r\n        @storage.set('attachment-mode', mode)\r\n\r\n    toggleDeprecatedsVisible: () ->\r\n        @attachmentsFullService.toggleDeprecatedsVisible()\r\n\r\n    addAttachments: (files) ->\r\n        _.forEach files, (file) => @.addAttachment(file)\r\n\r\n    loadAttachments: ->\r\n        @attachmentsFullService.loadAttachments(@.type, @.objId, @.projectId)\r\n\r\n    deleteAttachment: (toDeleteAttachment) ->\r\n        @attachmentsPreviewService.fileId = null\r\n\r\n        title = @translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\")\r\n        message = @translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\r\n            fileName: toDeleteAttachment.getIn(['file', 'name'])\r\n        })\r\n\r\n        return @confirm.askOnDelete(title, message)\r\n            .then (askResponse) =>\r\n                onError = () =>\r\n                    message = @translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {errorMessage: message})\r\n                    @confirm.notify(\"error\", null, message)\r\n                    askResponse.finish(false)\r\n\r\n                onSuccess = () => askResponse.finish()\r\n\r\n                @attachmentsFullService.deleteAttachment(toDeleteAttachment, @.type).then(onSuccess, onError)\r\n\r\n    reorderAttachment: (attachment, newIndex) ->\r\n        @attachmentsFullService.reorderAttachment(@.objId, @.type, attachment, newIndex)\r\n\r\n    updateAttachment: (toUpdateAttachment) ->\r\n        @attachmentsFullService.updateAttachment(toUpdateAttachment, @.type)\r\n\r\n    _isEditable: ->\r\n        if @projectService.project\r\n            return @projectService.hasPermission(@.editPermission)\r\n        return false\r\n\r\n    showAttachments: ->\r\n        return @._isEditable() || @attachmentsFullService.attachments.size\r\n\r\nangular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nbindOnce = @.taiga.bindOnce\r\n\r\nAttachmentsFullDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.displayAttachmentInput = (event) ->\r\n            angular.element('#add-attach').click();\r\n            return false;\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            type: \"@\",\r\n            objId: \"=\",\r\n            projectId: \"=\",\r\n            editPermission: \"@\"\r\n        },\r\n        controller: \"AttachmentsFull\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/attachments-full/attachments-full.html\",\r\n        link: link\r\n    }\r\n\r\nAttachmentsFullDirective.$inject = []\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AttachmentsFullService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgAttachmentsService\",\r\n        \"$rootScope\",\r\n        \"$q\"\r\n    ]\r\n\r\n    constructor: (@attachmentsService, @rootScope, @q) ->\r\n        @._attachments = Immutable.List()\r\n        @._deprecatedsCount = 0\r\n        @._attachmentsVisible = Immutable.List()\r\n        @._deprecatedsVisible = false\r\n        @.uploadingAttachments = []\r\n        @.types = @attachmentsService.types\r\n\r\n        taiga.defineImmutableProperty @, 'attachments', () => return @._attachments\r\n        taiga.defineImmutableProperty @, 'deprecatedsCount', () => return @._deprecatedsCount\r\n        taiga.defineImmutableProperty @, 'attachmentsVisible', () => return @._attachmentsVisible\r\n        taiga.defineImmutableProperty @, 'deprecatedsVisible', () => return @._deprecatedsVisible\r\n\r\n    toggleDeprecatedsVisible: () ->\r\n        @._deprecatedsVisible = !@._deprecatedsVisible\r\n        @.regenerate()\r\n\r\n    regenerate: () ->\r\n        @._deprecatedsCount = @._attachments.count (it) -> it.getIn(['file', 'is_deprecated'])\r\n\r\n        if @._deprecatedsVisible\r\n            @._attachmentsVisible = @._attachments\r\n        else\r\n            @._attachmentsVisible = @._attachments.filter (it) -> !it.getIn(['file', 'is_deprecated'])\r\n\r\n    addAttachment: (projectId, objId, type, file, editable = true, comment = false) ->\r\n        return @q (resolve, reject) =>\r\n            if @attachmentsService.validate(file)\r\n                @.uploadingAttachments.push(file)\r\n\r\n                promise = @attachmentsService.upload(file, objId, projectId, type, comment)\r\n                promise.then (file) =>\r\n                    @.uploadingAttachments = @.uploadingAttachments.filter (uploading) ->\r\n                        return uploading.name != file.get('name')\r\n\r\n                    attachment = Immutable.Map()\r\n\r\n                    attachment = attachment.merge({\r\n                        file: file,\r\n                        editable: editable,\r\n                        loading: false,\r\n                        from_comment: comment\r\n                    })\r\n\r\n                    @._attachments = @._attachments.push(attachment)\r\n\r\n                    @.regenerate()\r\n\r\n                    @rootScope.$broadcast(\"attachment:create\")\r\n\r\n                    resolve(attachment)\r\n            else\r\n                reject(new Error(file))\r\n\r\n    loadAttachments: (type, objId, projectId)->\r\n        @attachmentsService.list(type, objId, projectId).then (files) =>\r\n            @._attachments = files.map (file) ->\r\n                attachment = Immutable.Map()\r\n\r\n                return attachment.merge({\r\n                    loading: false,\r\n                    editable: false,\r\n                    file: file\r\n                })\r\n\r\n            @rootScope.$broadcast(\"attachments:loaded\", @._attachments)\r\n\r\n            @.regenerate()\r\n\r\n    deleteAttachment: (toDeleteAttachment, type) ->\r\n        onSuccess = () =>\r\n            @._attachments = @._attachments.filter (attachment) -> attachment != toDeleteAttachment\r\n\r\n            @.regenerate()\r\n\r\n        return @attachmentsService.delete(type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess)\r\n\r\n    reorderAttachment: (objectId, type, attachment, newIndex) ->\r\n        oldIndex = @.attachments.findIndex (it) -> it == attachment\r\n\r\n        attachments = @.attachments.remove(oldIndex)\r\n        attachments = attachments.splice(newIndex, 0, attachment)\r\n\r\n        attachments = attachments.map (x, i) -> x.setIn(['file', 'order'], i + 1)\r\n        @._attachments = attachments\r\n        @.regenerate()\r\n\r\n        afterAttachmentId = null\r\n\r\n        if newIndex > 0\r\n            previousAttachment = @.attachments.get(newIndex - 1)\r\n            afterAttachmentId = previousAttachment.getIn(['file', 'id'])\r\n\r\n        return @attachmentsService.bulkUpdateOrder(\r\n            objectId,\r\n            type,\r\n            afterAttachmentId,\r\n            [attachment.getIn(['file', 'id'])],\r\n        )\r\n\r\n    updateAttachment: (toUpdateAttachment, type) ->\r\n        index = @._attachments.findIndex (attachment) ->\r\n            return attachment.getIn(['file', 'id']) == toUpdateAttachment.getIn(['file', 'id'])\r\n\r\n        oldAttachment = @._attachments.get(index)\r\n\r\n        patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'))\r\n\r\n        if toUpdateAttachment.get('loading')\r\n            @.setAttachments(index, toUpdateAttachment)\r\n        else\r\n            if _.isEmpty(patch)\r\n                @.setAttachments(index, toUpdateAttachment)\r\n            else\r\n                return @attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then () =>\r\n                    @.setAttachments(index, toUpdateAttachment)\r\n\r\n    setAttachments: (index, toUpdateAttachment) ->\r\n        @._attachments = @._attachments.set(index, toUpdateAttachment)\r\n\r\n        @.regenerate()\r\n\r\n\r\nangular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AttachmentsPreviewController\r\n    @.$inject = [\r\n        \"tgAttachmentsPreviewService\"\r\n    ]\r\n\r\n    constructor: (@attachmentsPreviewService) ->\r\n        taiga.defineImmutableProperty @, \"current\", () =>\r\n            if !@attachmentsPreviewService.fileId\r\n                return null\r\n\r\n            return @.getCurrent()\r\n\r\n    hasPagination: () ->\r\n        images = @.attachments.filter (attachment) =>\r\n            return taiga.isImage(attachment.getIn(['file', 'name']))\r\n\r\n        return images.size > 1\r\n\r\n    getCurrent: () ->\r\n        attachment = @.attachments.find (attachment) =>\r\n            @attachmentsPreviewService.fileId == attachment.getIn(['file', 'id'])\r\n\r\n        if !attachment\r\n            return null\r\n        file = attachment.get('file')\r\n\r\n        return file\r\n\r\n    getIndex: () ->\r\n        return @.attachments.findIndex (attachment) =>\r\n            @attachmentsPreviewService.fileId == attachment.getIn(['file', 'id'])\r\n\r\n    next: () ->\r\n        attachmentIndex = @.getIndex()\r\n\r\n        image = @.attachments.slice(attachmentIndex + 1).find (attachment) ->\r\n                return taiga.isImage(attachment.getIn(['file', 'name']))\r\n\r\n        if !image\r\n            image = @.attachments.find (attachment) ->\r\n                return taiga.isImage(attachment.getIn(['file', 'name']))\r\n\r\n\r\n        @attachmentsPreviewService.fileId = image.getIn(['file', 'id'])\r\n\r\n    previous: () ->\r\n        attachmentIndex = @.getIndex()\r\n\r\n        image = @.attachments.slice(0, attachmentIndex).findLast (attachment) ->\r\n                return taiga.isImage(attachment.getIn(['file', 'name']))\r\n\r\n        if !image\r\n            image = @.attachments.findLast (attachment) ->\r\n                return taiga.isImage(attachment.getIn(['file', 'name']))\r\n\r\n        @attachmentsPreviewService.fileId = image.getIn(['file', 'id'])\r\n\r\nangular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentPreviewLightboxDirective = (lightboxService, attachmentsPreviewService) ->\r\n    link = ($scope, el, attrs, ctrl) ->\r\n        $(document.body).on \"keydown.image-preview\", (e) ->\r\n            if attachmentsPreviewService.fileId\r\n                if e.keyCode == 39\r\n                    ctrl.next()\r\n                else if e.keyCode == 37\r\n                    ctrl.previous()\r\n\r\n            $scope.$digest()\r\n\r\n        $scope.$on '$destroy', () ->\r\n            $(document.body).off('.image-preview')\r\n\r\n    return {\r\n        scope: {},\r\n        controller: 'AttachmentsPreview',\r\n        templateUrl: 'components/attachments-preview/attachments-preview.html',\r\n        link: link,\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            attachments: \"=\"\r\n        }\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\r\n    \"lightboxService\",\r\n    \"tgAttachmentsPreviewService\",\r\n    AttachmentPreviewLightboxDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AttachmentsPreviewService extends taiga.Service\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n\r\nangular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AttachmentsSimpleController\r\n    @.$inject = [\r\n        \"tgAttachmentsService\"\r\n    ]\r\n\r\n    constructor: (@attachmentsService) ->\r\n\r\n    addAttachment: (file) ->\r\n        attachment = Immutable.fromJS({\r\n            file: file,\r\n            name: file.name,\r\n            size: file.size\r\n        })\r\n\r\n        if @attachmentsService.validate(file)\r\n            @.attachments = @.attachments.push(attachment)\r\n\r\n            @.onAdd({attachment: attachment}) if @.onAdd\r\n\r\n    addAttachments: (files) ->\r\n        _.forEach files, @.addAttachment.bind(this)\r\n\r\n    deleteAttachment: (toDeleteAttachment) ->\r\n        @.attachments = @.attachments.filter (attachment) -> attachment != toDeleteAttachment\r\n\r\n        @.onDelete({attachment: toDeleteAttachment}) if @.onDelete\r\n\r\nangular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentsSimpleDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.displayAttachmentInput = (event) ->\r\n            angular.element('#add-attach').click();\r\n            return false;\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            attachments: \"=\",\r\n            onAdd: \"&\",\r\n            onDelete: \"&\"\r\n        },\r\n        controller: \"AttachmentsSimple\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/attachments-simple/attachments-simple.html\",\r\n        link: link\r\n    }\r\n\r\nAttachmentsSimpleDirective.$inject = []\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAttachmentSortableDirective = ($parse) ->\r\n    link = (scope, el, attrs) ->\r\n        callback = $parse(attrs.tgAttachmentsSortable)\r\n\r\n        drake = dragula([el[0]], {\r\n            copySortSource: false,\r\n            copy: false,\r\n            mirrorContainer: el[0],\r\n            moves: (item) -> return $(item).is('div[tg-bind-scope]')\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            item = $(item)\r\n\r\n            attachment = item.scope().attachment\r\n            newIndex = item.index()\r\n\r\n            scope.$apply () ->\r\n                callback(scope, {attachment: attachment, index: newIndex})\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n\r\n        scope.$on \"$destroy\", ->\r\n            el.off()\r\n            drake.destroy()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nAttachmentSortableDirective.$inject = [\r\n    \"$parse\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAutoSelectDirective = ($timeout) ->\r\n    return {\r\n        link: (scope, elm) ->\r\n            $timeout () -> elm[0].select()\r\n    }\r\n\r\nAutoSelectDirective.$inject = [\r\n    '$timeout'\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAvatarDirective = (avatarService) ->\r\n    link = (scope, el, attrs) ->\r\n        if attrs.tgAvatarBig\r\n            attributeName = 'avatarBig'\r\n        else\r\n            attributeName = 'avatar'\r\n\r\n        scope.$watch attributeName, (user) ->\r\n            avatar = avatarService.getAvatar(user, attributeName)\r\n\r\n            el.attr('src', avatar.url)\r\n            el.attr('title', \"#{avatar.fullName}\")\r\n            el.attr('alt', \"#{avatar.fullName}\")\r\n            el.css('background', avatar.bg or \"\")\r\n\r\n    return {\r\n        link: link\r\n        scope: {\r\n            avatar: \"=tgAvatar\"\r\n            avatarBig: \"=tgAvatarBig\"\r\n        }\r\n    }\r\n\r\nAvatarDirective.$inject = [\r\n    'tgAvatarService'\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective)\r\nangular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\n\r\nBelongToEpicsDirective = ($translate, $confirm, $rs, $rs2, lightboxService) ->\r\n\r\n    link = (scope, el, attrs) ->\r\n        scope.$watch 'epics', (epics) ->\r\n            updateEpics(epics)\r\n\r\n        scope.$on \"related-epics:changed\", (ctx, userStory)->\r\n            $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then (us) ->\r\n                scope.item.epics = us.epics\r\n                updateEpics(us.epics)\r\n\r\n        scope.removeEpicRelationship = (epic) ->\r\n            title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\")\r\n            message = $translate.instant(\r\n                \"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\",\r\n                { epicSubject:  epic.get('subject') }\r\n            )\r\n\r\n            $confirm.ask(title, null, message).then (askResponse) ->\r\n                onSuccess = ->\r\n                    askResponse.finish()\r\n                    scope.$broadcast(\"related-epics:changed\", scope.item)\r\n\r\n                onError = ->\r\n                    askResponse.finish(false)\r\n                    $confirm.notify(\"error\")\r\n\r\n                epicId = epic.get('id')\r\n                usId = scope.item.id\r\n                $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError)\r\n\r\n        updateEpics = (epics) ->\r\n            scope.epicsLength = 0\r\n            scope.immutable_epics = []\r\n            if epics && !epics.isIterable\r\n                scope.epicsLength = epics.length\r\n                scope.immutable_epics = Immutable.fromJS(epics)\r\n\r\n    templateUrl = (el, attrs) ->\r\n        if attrs.format\r\n            return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\"\r\n        return \"components/belong-to-epics/belong-to-epics-pill.html\"\r\n\r\n    return {\r\n        link: link,\r\n        scope: {\r\n            epics: '=',\r\n            item: \"=\"\r\n        },\r\n        templateUrl: templateUrl\r\n    }\r\n\r\n\r\nmodule.directive(\"tgBelongToEpics\", [\r\n    \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\",\r\n    BelongToEpicsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nBindCode = ($sce, $parse, $compile, wysiwygService) ->\r\n  return {\r\n    restrict: 'A',\r\n    compile:  (tElement, tAttrs) ->\r\n        tgBindWysiwygHtmlGetter = $parse(tAttrs.tgBindWysiwygHtml)\r\n        tgBindWysiwygHtmlWatch = $parse tAttrs.tgBindWysiwygHtml, (value) ->\r\n            return (value || '').toString()\r\n\r\n        $compile.$$addBindingClass(tElement)\r\n\r\n        render = (element, html) =>\r\n\r\n            window._extraValidHtmlElments = {input: true}\r\n            window._extraValidAttrs = {checked: true}\r\n\r\n            element.html($sce.getTrustedHtml(html) || '')\r\n            element[0].querySelectorAll('pre code').forEach (block) =>\r\n                blockClasses = block.className + ' ';\r\n                blockClasses += if block.parentNode then block.parentNode.className else ''\r\n                match = /\\blang(?:uage)?-([\\w-]+)\\b/i.exec(blockClasses)\r\n                matchResult = 'plaintext'\r\n\r\n                if match && match.length\r\n                    matchResult = match[1]\r\n\r\n                language = hljs.getLanguage(matchResult)\r\n\r\n                if language\r\n                    resultHighlight = hljs.highlightBlock(block)\r\n                else\r\n                    ljs.load \"/#{window._version}/highlightjs-languages/\" +  matchResult + \".min.js\", ->\r\n                        hljs.highlightBlock(block)\r\n\r\n            anchor = element[0].querySelectorAll('a[href^=\"#\"]')\r\n            anchor.forEach (link) =>\r\n                link.addEventListener 'click', (e) =>\r\n                    e.preventDefault()\r\n                    node = document.querySelector(link.getAttribute('href'))\r\n\r\n                    if node\r\n                        node.scrollIntoView()\r\n\r\n        return (scope, element, attr) ->\r\n            $compile.$$addBindingInfo(element, attr.tgBindWysiwygHtml);\r\n\r\n            scope.$watch tgBindWysiwygHtmlWatch, () ->\r\n                html = wysiwygService.getHTML(tgBindWysiwygHtmlGetter(scope))\r\n\r\n                html = wysiwygService.relativePaths(html)\r\n\r\n                wysiwygService.refreshAttachmentURL(html).then (html) =>\r\n                    render(element, html)\r\n\r\n                render(element, html)\r\n  }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgBindWysiwygHtml\", [\r\n        \"$sce\",\r\n        \"$parse\",\r\n        \"$compile\",\r\n        \"tgWysiwygService\",\r\n        BindCode])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nBoardZoomDirective = () ->\r\n    return {\r\n        scope: {\r\n            levels: \"=\",\r\n            value: \"=\"\r\n        },\r\n        templateUrl: 'components/board-zoom/board-zoom.html'\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass CardSlideshowController\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n        @.index = 0\r\n\r\n    next: () ->\r\n        @.index++\r\n\r\n        if @.index >= @.images.size\r\n            @.index = 0\r\n\r\n    previous: () ->\r\n        @.index--\r\n\r\n        if @.index < 0\r\n            @.index = @.images.size - 1\r\n\r\nangular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\ncardSlideshowDirective = () ->\r\n    return {\r\n        controller: \"CardSlideshow\",\r\n        templateUrl: \"components/card-slideshow/card-slideshow.html\",\r\n        bindToController: true,\r\n        controllerAs: \"vm\",\r\n        scope: {\r\n            images: \"=\"\r\n        }\r\n    }\r\n\r\nmodule.directive('tgCardSlideshow', cardSlideshowDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass CardController\r\n    @.$inject = [\r\n        \"$scope\",\r\n    ]\r\n\r\n    constructor: (@scope) ->\r\n\r\n    getLinkParams: () ->\r\n        ctrl = taiga.findScope @scope, (scope) ->\r\n            if scope && scope.ctrl\r\n                return scope.ctrl\r\n\r\n            return false\r\n\r\n        lastLoadUserstoriesParams = ctrl.lastLoadUserstoriesParams\r\n\r\n        if lastLoadUserstoriesParams\r\n            lastLoadUserstoriesParams['status'] = @scope.vm.item.getIn(['model', 'status'])\r\n            lastLoadUserstoriesParams['swimlane'] = @scope.vm.item.getIn(['model', 'swimlane'])\r\n\r\n            lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity)\r\n\r\n            if ctrl.scope.swimlanesList.size && !lastLoadUserstoriesParams['swimlane']\r\n                lastLoadUserstoriesParams.swimlane = \"null\"\r\n\r\n            ParsedLastLoadUserstoriesParams = {}\r\n            Object.keys(lastLoadUserstoriesParams).forEach (key) ->\r\n                ParsedLastLoadUserstoriesParams['kanban-' + key] = lastLoadUserstoriesParams[key]\r\n\r\n            return ParsedLastLoadUserstoriesParams\r\n        else\r\n            return {}\r\n\r\n    visible: (name) ->\r\n        return @.zoom.indexOf(name) != -1\r\n\r\n    hasTasks: () ->\r\n        tasks = @.item.getIn(['model', 'tasks'])\r\n        return tasks and tasks.size > 0\r\n\r\n    getTagColor: (color) ->\r\n        if color\r\n            return color\r\n        return \"#A9AABC\"\r\n\r\n    hasMultipleAssignedUsers: () ->\r\n        assignedUsers = @.item.getIn(['model', 'assigned_users'])\r\n        return assignedUsers and assignedUsers.size > 1\r\n\r\n    hasVisibleAttachments: () ->\r\n        return @.item.get('images').size > 0\r\n\r\n    toggleFold: () ->\r\n        @.onToggleFold({id: @.item.get('id')})\r\n\r\n    getClosedTasks: () ->\r\n        return @.item.getIn(['model', 'tasks']).filter (task) -> return task.get('is_closed')\r\n\r\n    closedTasksPercent: () ->\r\n        return @.getClosedTasks().size * 100 / @.item.getIn(['model', 'tasks']).size\r\n\r\n    getModifyPermisionKey: () ->\r\n        return  if @.type == 'task' then 'modify_task' else 'modify_us'\r\n\r\n    getDeletePermisionKey: () ->\r\n        return  if @.type == 'task' then 'delete_task' else 'delete_us'\r\n\r\n    _setVisibility: () ->\r\n        visibility = {\r\n            related: @.visible('related_tasks'),\r\n            slides: @.visible('attachments')\r\n        }\r\n\r\n        if !_.isUndefined(@.item.get('foldStatusChanged')) && @.visible('unfold')\r\n            # by default attachments & task are folded in level 2, see also card-unfold.jadee\r\n            if @.zoomLevel == 2\r\n                visibility.related = @.item.get('foldStatusChanged')\r\n                visibility.slides = @.item.get('foldStatusChanged')\r\n            else\r\n                visibility.related = !@.item.get('foldStatusChanged')\r\n                visibility.slides = !@.item.get('foldStatusChanged')\r\n\r\n        if !@.item.getIn(['model', 'tasks']) || !@.item.getIn(['model', 'tasks']).size\r\n            visibility.related = false\r\n\r\n        if !@.item.get('images') || !@.item.get('images').size\r\n            visibility.slides = false\r\n\r\n        return visibility\r\n\r\n    isRelatedTasksVisible: () ->\r\n        visibility = @._setVisibility()\r\n\r\n        return visibility.related\r\n\r\n    isSlideshowVisible: () ->\r\n        visibility = @._setVisibility()\r\n\r\n        return visibility.slides\r\n\r\n    getNavKey: () ->\r\n        if @.type == 'task'\r\n            return 'project-tasks-detail'\r\n        else if @.type == 'issue'\r\n            return 'project-issues-detail'\r\n        else\r\n            return 'project-userstories-detail'\r\n\r\nangular.module('taigaComponents').controller('Card', CardController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\ncardDirective = () ->\r\n    return {\r\n        controller: \"Card\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/card/card.html\",\r\n        bindToController: {\r\n            onToggleFold: \"&\",\r\n            onClickAssignedTo: \"&\",\r\n            onClickEdit: \"&\",\r\n            onClickRemove: \"&\",\r\n            onClickDelete: \"&\",\r\n            onClickMoveToTop: \"&\",\r\n            project: \"<\",\r\n            item: \"<\",\r\n            zoom: \"<\",\r\n            zoomLevel: \"<\",\r\n            archived: \"<\",\r\n            inViewPort: \"<\",\r\n            folded: \"<\",\r\n            type: \"@\",\r\n            isFirst: \"<\"\r\n        }\r\n    }\r\n\r\nmodule.directive('tgCard', cardDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nClickInputFile = () ->\r\n  return {\r\n      link:  (scope, el) ->\r\n          el.on 'click', (e) ->\r\n              if !$(e.target).is('input')\r\n                  e.preventDefault()\r\n                  inputFile = el.find('input[type=\"file\"]')\r\n                  inputFile.val('')\r\n                  inputFile.trigger('click')\r\n\r\n          scope.$on \"$destroy\", -> el.off()\r\n  }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgClickInputFile\", [ClickInputFile])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ngetDefaulColorList = taiga.getDefaulColorList\r\n\r\n\r\nclass ColorSelectorController\r\n    @.$inject = [\r\n        \"tgProjectService\",\r\n    ]\r\n\r\n    constructor: (@projectService) ->\r\n        @.colorList = getDefaulColorList()\r\n        @.checkIsColorRequired()\r\n        @.displayColorList = false\r\n\r\n    userCanChangeColor: () ->\r\n        return true if not @.requiredPerm\r\n        return @projectService.hasPermission(@.requiredPerm)\r\n\r\n    checkIsColorRequired: () ->\r\n        if !@.isColorRequired\r\n            @.colorList = _.dropRight(@.colorList)\r\n\r\n    setColor: (color) ->\r\n        @.color = color\r\n        @.customColor = color\r\n\r\n    resetColor: () ->\r\n        if @.isColorRequired and not @.color\r\n            @.color = @.initColor\r\n\r\n    toggleColorList: () ->\r\n        @.displayColorList = !@.displayColorList\r\n        @.customColor = @.color\r\n        @.resetColor()\r\n\r\n    onSelectDropdownColor: (color) ->\r\n        @.color = color\r\n        @.onSelectColor({color: color})\r\n        @.toggleColorList()\r\n\r\n    onKeyDown: (event) ->\r\n        if event.which == 13 # ENTER\r\n            if @.customColor or not @.isColorRequired\r\n                @.onSelectDropdownColor(@.customColor)\r\n            event.preventDefault()\r\n\r\n\r\nangular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nbindOnce = @.taiga.bindOnce\r\n\r\nColorSelectorDirective = ($timeout) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        # Animation\r\n        _timeout = null\r\n\r\n        cancel = () ->\r\n            $timeout.cancel(_timeout)\r\n            _timeout = null\r\n\r\n        close = () ->\r\n            return if _timeout\r\n\r\n            _timeout = $timeout (() ->\r\n                ctrl.displayColorList = false\r\n                ctrl.resetColor()\r\n            ), 400\r\n\r\n        el.find('.color-selector')\r\n            .mouseenter(cancel)\r\n            .mouseleave(close)\r\n\r\n        el.find('.color-selector-dropdown')\r\n            .mouseenter(cancel)\r\n            .mouseleave(close)\r\n\r\n        scope.$watch 'vm.initColor', (color) ->\r\n            # We can't just bind once because sometimes the initial color is reset from the outside\r\n            ctrl.setColor(color)\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"components/color-selector/color-selector.html\",\r\n        controller: \"ColorSelectorCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            isColorRequired: \"=\",\r\n            onSelectColor: \"&\",\r\n            initColor: \"=\",\r\n            requiredPerm: \"@\"\r\n        },\r\n        scope: {},\r\n    }\r\n\r\n\r\nColorSelectorDirective.$inject = [\r\n    \"$timeout\"\r\n]\r\n\r\nangular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaBase')\r\n\r\nclass DetailHeaderController\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"$tgConfirm\",\r\n        \"$tgQueueModelTransformation\",\r\n        \"$tgNavUrls\",\r\n        \"$window\"\r\n    ]\r\n\r\n    constructor: (@rootScope, @confirm, @modelTransform, @navUrls, @window) ->\r\n        @.editMode = false\r\n        @.loadingSubject = false\r\n        @.originalSubject = @.item.subject\r\n        @.objType = {\r\n            'tasks': 'task',\r\n            'issues': 'issue',\r\n            'userstories': 'us',\r\n        }[@.item._name]\r\n\r\n    _checkPermissions: () ->\r\n        @.permissions = {\r\n            canEdit: _.includes(@.project.my_permissions, @.requiredPerm)\r\n        }\r\n\r\n    cancelEdit: () ->\r\n        @.editMode = false\r\n        @.item.subject = @.originalSubject\r\n\r\n    editSubject: (value) ->\r\n        selection = @window.getSelection()\r\n        if selection.type != \"Range\"\r\n            if value\r\n                @.editMode = true\r\n            if !value\r\n                @.editMode = false\r\n\r\n    onKeyDown: (event) ->\r\n        if event.which == 13\r\n            @.saveSubject()\r\n\r\n        if event.which == 27\r\n            @.item.subject = @.originalSubject\r\n            @.editSubject(false)\r\n\r\n    saveSubject: () ->\r\n        onEditSubjectSuccess = () =>\r\n            @.loadingSubject = false\r\n            @rootScope.$broadcast(\"object:updated\")\r\n            @confirm.notify('success')\r\n            @.originalSubject = @.item.subject\r\n\r\n        onEditSubjectError = () =>\r\n            @.loadingSubject = false\r\n            @confirm.notify('error')\r\n\r\n        @.editMode = false\r\n        @.loadingSubject = true\r\n        item = @.item\r\n        transform = @modelTransform.save (item) ->\r\n            return item\r\n        return transform.then(onEditSubjectSuccess, onEditSubjectError)\r\n\r\nmodule.controller(\"DetailHeaderCtrl\", DetailHeaderController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaBase')\r\n\r\nDetailHeaderDirective = ($tgWysiwygService) ->\r\n    @.$inject = []\r\n\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.blocked_html_note = ''\r\n\r\n        scope.$watch \"vm.item.blocked_note\" , (blocked_note) ->\r\n            html_note = $tgWysiwygService.getHTML(blocked_note)\r\n            scope.blocked_html_note = html_note\r\n\r\n        ctrl._checkPermissions()\r\n\r\n    return {\r\n        link: link,\r\n        controller: \"DetailHeaderCtrl\",\r\n        bindToController: true,\r\n        scope: {\r\n            item: \"=\",\r\n            project: \"=\",\r\n            sectionName: \"=\"\r\n            requiredPerm: \"@\"\r\n        },\r\n        controllerAs: \"vm\",\r\n        templateUrl:\"components/detail/header/detail-header.html\"\r\n    }\r\n\r\n\r\nmodule.directive(\"tgDetailHeader\", [\"tgWysiwygService\", DetailHeaderDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaBase\")\r\n\r\nclass DetailNavController\r\n    @.$inject = [\r\n        \"$tgNavUrls\",\r\n        \"$tgResources\",\r\n    ]\r\n\r\n    constructor: (@navUrls, @rs) ->\r\n        return\r\n\r\n    _checkNav: () ->\r\n        params = @rs.userstories.getQueryParams(@.item.project_extra_info.id)\r\n        noMilestone = params.milestone == 'null'\r\n\r\n        neighbors = @.item.neighbors\r\n\r\n        @.previousUrl = null\r\n        @.nextUrl = null\r\n\r\n        if noMilestone\r\n            uss = @rs.userstories.getBacklog(@.item.project_extra_info.id)\r\n            index = uss.findIndex (ref) => ref == @.item.ref\r\n\r\n            if index != -1\r\n                neighbors = {\r\n                    previous: {\r\n                        ref: uss[index - 1]\r\n                    },\r\n                    next: {\r\n                        ref: uss[index + 1]\r\n                    },\r\n                }\r\n\r\n        if neighbors.previous?.ref?\r\n            ctx = {\r\n                project: @.item.project_extra_info.slug\r\n                ref: neighbors.previous.ref\r\n            }\r\n            @.previousUrl = @navUrls.resolve(\"project-\" + @.item._name + \"-detail\", ctx)\r\n\r\n        if neighbors.next?.ref?\r\n            ctx = {\r\n                project: @.item.project_extra_info.slug\r\n                ref: neighbors.next.ref\r\n            }\r\n            @.nextUrl = @navUrls.resolve(\"project-\" + @.item._name + \"-detail\", ctx)\r\n\r\nmodule.controller(\"DetailNavCtrl\", DetailNavController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaBase')\r\n\r\nDetailNavDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.$watch \"vm.item\", (value) ->\r\n            return if not value\r\n            ctrl._checkNav()\r\n\r\n    return {\r\n        link: link,\r\n        controller: \"DetailNavCtrl\",\r\n        bindToController: true,\r\n        scope: {\r\n            item: \"=\"\r\n        },\r\n        controllerAs: \"vm\",\r\n        templateUrl:\"components/detail/nav/detail-nav.html\"\r\n    }\r\n\r\nmodule.directive(\"tgDetailNav\", DetailNavDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DueDateController\r\n    @.$inject = [\r\n        \"tgDueDateService\",\r\n        \"tgLightboxFactory\"\r\n    ]\r\n\r\n    constructor: (@dueDateService, @tgLightboxFactory) ->\r\n\r\n    visible: () ->\r\n        return @dueDateService.visible(@._getScope())\r\n\r\n    disabled: () ->\r\n        return @dueDateService.disabled(@._getScope())\r\n\r\n    color: () ->\r\n        return @dueDateService.color(@._getScope())\r\n\r\n    title: () ->\r\n        return @dueDateService.title(@._getScope())\r\n\r\n    setDueDate: () ->\r\n        return if @.disabled()\r\n        @tgLightboxFactory.create(\r\n            \"tg-lb-set-due-date\",\r\n            {\"class\": \"lightbox lightbox-set-due-date\"},\r\n            {\"object\": @.item, \"notAutoSave\": @.notAutoSave}\r\n        )\r\n\r\n    _getScope: () ->\r\n        return {\r\n            dueDate: @.dueDate,\r\n            isClosed: @.isClosed,\r\n            item: @.item,\r\n            objType: @.objType,\r\n            format: @.format,\r\n            notAutoSave: @.notAutoSave\r\n        }\r\n\r\nangular.module('taigaComponents').controller('DueDateCtrl', DueDateController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\ndueDatePopoverDirective = ($translate, datePickerConfigService) ->\r\n    return {\r\n        link: (scope, el, attrs, ctrl) ->\r\n            scope.open = false\r\n\r\n            datePickerConfig = datePickerConfigService.get()\r\n            _.merge(datePickerConfig, {\r\n                field: el.find('.due-date-button')[0]\r\n                container: el.find('.date-picker-container')[0]\r\n                bound: true\r\n                onClose: () ->\r\n                    scope.open = false\r\n                    scope.$apply()\r\n                onSelect: () ->\r\n                    ctrl.dueDate = this.getMoment().format('YYYY-MM-DD')\r\n            })\r\n            el.picker = new Pikaday(datePickerConfig)\r\n\r\n            el.on \"click\", \".due-date-button\", (event) ->\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                if scope.open\r\n                    el.picker.hide()\r\n                    return\r\n                if !el.picker.getDate() && ctrl.dueDate\r\n                    el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'))\r\n                el.picker.show()\r\n                scope.open = true\r\n                scope.$apply()\r\n\r\n            el.on \"click\", \".date-picker-clean\", (event) ->\r\n                event.preventDefault()\r\n                event.stopPropagation()\r\n                ctrl.dueDate = null\r\n                el.picker.setDate(ctrl.dueDate)\r\n                scope.open = false\r\n                el.picker.hide()\r\n                scope.$apply()\r\n\r\n            scope.$on \"status:changed\", (ctx, status) ->\r\n                ctrl.isClosed = ctrl.item.is_closed\r\n\r\n        controller: \"DueDateCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        templateUrl: \"components/due-date/due-date-popover.html\",\r\n        scope: {\r\n            dueDate: '=',\r\n            isClosed: '=',\r\n            item: '=',\r\n            objType: '@',\r\n            format: '@',\r\n            notAutoSave: '='\r\n        }\r\n    }\r\n\r\nmodule.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective])","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\ndueDateDirective = ($translate, datePickerConfigService) ->\r\n    templateUrl = (el, attrs) ->\r\n        if attrs.format\r\n            return \"components/due-date/due-date-\" + attrs.format + \".html\"\r\n        return \"components/due-date/due-date-icon.html\"\r\n\r\n    return {\r\n        link: (scope, el, attrs, ctrl) ->\r\n            renderDatePicker = () ->\r\n                prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n                if ctrl.dueDate\r\n                    ctrl.dueDate = moment(ctrl.dueDate, prettyDate)\r\n\r\n                el.on \"click\", \".date-picker-popover-trigger\", (event) ->\r\n                    if ctrl.disabled()\r\n                        return\r\n                    event.preventDefault()\r\n                    event.stopPropagation()\r\n                    el.find(\".date-picker-popover\").popover().open()\r\n\r\n                el.on \"click\", \".date-picker-clean\", (event) ->\r\n                    event.preventDefault()\r\n                    event.stopPropagation()\r\n                    ctrl.dueDate = null\r\n                    scope.$apply()\r\n                    el.find(\".date-picker-popover\").popover().close()\r\n\r\n                datePickerConfig = datePickerConfigService.get()\r\n                _.merge(datePickerConfig, {\r\n                    field: el.find('input.due-date')[0]\r\n                    container: el.find('.date-picker-container')[0]\r\n                    bound: false\r\n                    onSelect: () ->\r\n                        ctrl.dueDate = this.getMoment().format('YYYY-MM-DD')\r\n                        el.find(\".date-picker-popover\").popover().close()\r\n                        scope.$apply()\r\n                })\r\n\r\n                el.picker = new Pikaday(datePickerConfig)\r\n\r\n            if attrs.format == 'button-popover'\r\n                renderDatePicker()\r\n\r\n        controller: \"DueDateCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        templateUrl: templateUrl,\r\n        scope: {\r\n            dueDate: '=',\r\n            isClosed: '=',\r\n            item: '=',\r\n            objType: '@',\r\n            format: '@',\r\n            notAutoSave: '='\r\n        }\r\n    }\r\n\r\nmodule.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass DueDateService\r\n    @.$inject = [\r\n        \"$translate\"\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@translate, @projectService) ->\r\n        @.defaultConfig = [\r\n            {\"color\": \"#93C45D\", \"name\": \"normal due\", \"days_to_due\": null, \"by_default\": true},\r\n            {\"color\": \"#EA7B4B\", \"name\": \"due soon\", \"days_to_due\": 14, \"by_default\": false},\r\n            {\"color\": \"#E44057\", \"name\": \"past due\", \"days_to_due\": 0, \"by_default\": false}\r\n        ]\r\n\r\n    visible: (options) ->\r\n        return options.format == 'button' or options.dueDate?\r\n\r\n    disabled: (options) ->\r\n        return options.isClosed\r\n\r\n    color: (options) ->\r\n        return @.getStatus(options)?.color || null\r\n\r\n    title: (options) ->\r\n        if options.dueDate\r\n            return @._formatTitle(options)\r\n        else if options.format == 'button'\r\n            return @translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE')\r\n        return ''\r\n\r\n    getStatus: (options) ->\r\n        if !options.dueDate\r\n            return null\r\n\r\n        project = @projectService.project.toJS()\r\n        config = project[\"#{options.objType}_duedates\"]\r\n\r\n        if !config\r\n            config = @.defaultConfig\r\n\r\n        return @._getAppearance(options, config)\r\n\r\n    _getDefaultAppearance: (config) ->\r\n        defaultAppearance = null\r\n        _.map config, (it) ->\r\n            if it.by_default == true\r\n                defaultAppearance = it\r\n        return defaultAppearance\r\n\r\n    _getAppearance: (options, config) ->\r\n        currentAppearance = @._getDefaultAppearance(config)\r\n        config = _.sortBy(config, (o) -> - o.days_to_due) # sort desc\r\n\r\n        dueDate = moment(options.dueDate)\r\n        now = moment()\r\n        _.map config, (appearance) ->\r\n            if appearance.days_to_due == null\r\n                return\r\n            limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"))\r\n            if now >= limitDate\r\n                currentAppearance = appearance\r\n\r\n        return currentAppearance\r\n\r\n    _formatTitle: (options) ->\r\n        prettyDate = @translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n        formatedDate = moment(options.dueDate).format(prettyDate)\r\n\r\n        status = @.getStatus(options)\r\n        if status?.name\r\n            return \"#{formatedDate} (#{status.name})\"\r\n        return formatedDate\r\n\r\ntaiga.DueDateService = DueDateService\r\n\r\nangular.module(\"taigaCommon\").service(\"tgDueDateService\", DueDateService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nFileChangeDirective = ($parse) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        eventAttr = $parse(attrs.tgFileChange)\r\n\r\n        el.on 'change', (event) ->\r\n            scope.$apply () -> eventAttr(scope, {files: event.currentTarget.files})\r\n\r\n        scope.$on \"$destroy\", -> el.off()\r\n\r\n    return {\r\n        restrict: \"A\",\r\n        link: link\r\n    }\r\n\r\nFileChangeDirective.$inject = [\r\n    \"$parse\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ngenerateHash = taiga.generateHash\r\n\r\nclass FilterRemoteStorageService extends taiga.Service\r\n    @.$inject = [\r\n        \"$q\",\r\n        \"$tgUrls\",\r\n        \"$tgHttp\"\r\n    ]\r\n\r\n    constructor: (@q, @urls, @http) ->\r\n\r\n    storeFilters: (projectId, myFilters, filtersHashSuffix) ->\r\n        deferred = @q.defer()\r\n        url = @urls.resolve(\"user-storage\")\r\n        ns = \"#{projectId}:#{filtersHashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n        if _.isEmpty(myFilters)\r\n            promise = @http.delete(\"#{url}/#{hash}\", {key: hash, value:myFilters})\r\n            promise.then ->\r\n                deferred.resolve()\r\n            promise.then null, ->\r\n                deferred.reject()\r\n        else\r\n            promise = @http.put(\"#{url}/#{hash}\", {key: hash, value:myFilters})\r\n            promise.then (data) ->\r\n                deferred.resolve()\r\n            promise.then null, (data) =>\r\n                innerPromise = @http.post(\"#{url}\", {key: hash, value:myFilters})\r\n                innerPromise.then ->\r\n                    deferred.resolve()\r\n                innerPromise.then null, ->\r\n                    deferred.reject()\r\n        return deferred.promise\r\n\r\n    getFilters: (projectId, filtersHashSuffix) ->\r\n        deferred = @q.defer()\r\n        url = @urls.resolve(\"user-storage\")\r\n        ns = \"#{projectId}:#{filtersHashSuffix}\"\r\n        hash = generateHash([projectId, ns])\r\n\r\n        promise = @http.get(\"#{url}/#{hash}\")\r\n        promise.then (data) ->\r\n            deferred.resolve(data.data.value)\r\n        promise.then null, (data) ->\r\n            deferred.resolve({})\r\n\r\n        return deferred.promise\r\n\r\nangular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nFilterSlideDownDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        filter = $('tg-filter')\r\n\r\n        scope.$watch attrs.ngIf, (value) ->\r\n            if value\r\n                filter.find('.filter-list').hide()\r\n\r\n                wrapperHeight = filter.height()\r\n                contentHeight = 0\r\n\r\n                filter.children().each () ->\r\n                    contentHeight += $(this).outerHeight(true)\r\n\r\n                $(el.context.nextSibling)\r\n                    .css({\r\n                        \"display\": \"block\"\r\n                    })\r\n\r\n    return {\r\n        priority: 900,\r\n        link: link\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass FilterController\r\n    @.$inject = [\r\n        '$translate',\r\n    ]\r\n\r\n    @.activeCustomFilter = null\r\n    @.repeatedFilterError = false\r\n    @.lengthZeroError = false\r\n\r\n    constructor: (@translate) ->\r\n        @.opened = null\r\n        @.filterModeOptions = [\"include\", \"exclude\"]\r\n        @.filterModeLabels = {\r\n            \"include\": @translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\r\n            \"exclude\": @translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\"),\r\n        }\r\n        @.filterMode = 'include'\r\n        @.customFilterForm = false\r\n        @.customFilterName = ''\r\n\r\n        @.$onChanges = (changes) ->\r\n            if changes.selectedFilters\r\n                @.getIncludedFilters()\r\n                @.getExcludedFilters()\r\n\r\n        @.includedFilters = @.getIncludedFilters()\r\n        @.excludedFilters = @.getExcludedFilters()\r\n\r\n\r\n    toggleFilterCategory: (filterName) ->\r\n        if @.opened == filterName\r\n            @.opened = null\r\n        else\r\n            @.opened = filterName\r\n\r\n    isOpen: (filterName) ->\r\n        return @.opened == filterName\r\n\r\n    openCustomFilter: () ->\r\n        @.customFilterForm = true\r\n        @.lengthZeroError = false\r\n        @.repeatedFilterError = false\r\n\r\n    saveCustomFilter: () ->\r\n        if @.customFilterName.length > 0 && !@.customFilters.find((filter) => filter.name == @.customFilterName)\r\n            @.lengthZeroError = false\r\n            @.repeatedFilterError = false\r\n            @.onSaveCustomFilter({name: @.customFilterName})\r\n            @.customFilterForm = false\r\n            @.opened = 'custom-filter'\r\n            @.customFilterName = ''\r\n\r\n        if @.customFilterName.length == 0\r\n            @.lengthZeroError = true\r\n        else\r\n            @.lengthZeroError = false\r\n\r\n        if !@.customFilters.find((filter) => filter.name == @.customFilterName)\r\n            @.repeatedFilterError = false\r\n        else\r\n            @.repeatedFilterError = true\r\n\r\n    unselectFilter: (filter) ->\r\n        @.activeCustomFilter = null\r\n        @.onRemoveFilter({filter: filter})\r\n\r\n    selectFilter: (filterCategory, filter) ->\r\n        filter = {\r\n            category: filterCategory\r\n            filter: filter\r\n            mode: @.filterMode\r\n        }\r\n        @.activeCustomFilter = null\r\n        @.onAddFilter({filter: filter})\r\n\r\n    removeCustomFilter: (filter) ->\r\n        @.activeCustomFilter = null\r\n        @.onRemoveCustomFilter({filter: filter})\r\n\r\n    selectCustomFilter: (filter) ->\r\n        @.activeCustomFilter = filter.id\r\n        @.onSelectCustomFilter({filter: filter})\r\n\r\n    getIncludedFilters: () ->\r\n        @.includedFilters = _.filter @.selectedFilters, (it) ->\r\n            return it.mode == 'include'\r\n\r\n    getExcludedFilters: () ->\r\n        @.excludedFilters = _.filter @.selectedFilters, (it) ->\r\n            return it.mode == 'exclude'\r\n\r\n    isFilterSelected: (filterCategory, filter) ->\r\n        return !!_.find @.selectedFilters, (it) ->\r\n            return filter.id == it.id && filterCategory.dataType == it.dataType\r\n\r\nangular.module('taigaComponents').controller('Filter', FilterController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nFilterDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        watchTaskboardHeight = (taskboard) =>\r\n            resizeObserver = new ResizeObserver () =>\r\n                maxSize = null\r\n                currentMax = Number(el[0].style.getPropertyValue('--filter-list-max-height').replace('px', ''))\r\n\r\n                if scope.vm.opened\r\n                    maxSize = taskboard.offsetHeight - el[0].offsetHeight + currentMax\r\n                else\r\n                    maxSize = taskboard.offsetHeight - el[0].offsetHeight\r\n\r\n                if maxSize < 100\r\n                    maxSize = 100\r\n                else if maxSize > 380\r\n                    maxSize = 380\r\n\r\n                el[0].style.setProperty('--filter-list-max-height', maxSize + \"px\")\r\n\r\n                resizeObserver.unobserve(el[0]);\r\n\r\n            resizeObserver.observe(taskboard);\r\n\r\n        attrs.$observe \"open\", (open) ->\r\n            open = scope.$eval(open)\r\n\r\n            if open\r\n                el.addClass('open')\r\n            else\r\n                el.removeClass('open')\r\n\r\n        taskboard = $('.js-taskboard-manager')\r\n        if taskboard.length\r\n            watchTaskboardHeight(taskboard[0])\r\n\r\n    return {\r\n        scope: {\r\n            onChangeQ: \"&\",\r\n            onAddFilter: \"&\",\r\n            onSelectCustomFilter: \"&\",\r\n            onRemoveFilter: \"&\",\r\n            onRemoveCustomFilter: \"&\",\r\n            onSaveCustomFilter: \"&\",\r\n            customFilters: \"<\",\r\n            filters: \"<\"\r\n            customFilters: \"<\"\r\n            selectedFilters: \"<\"\r\n        },\r\n        bindToController: true,\r\n        controller: \"Filter\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: 'components/filter/filter.html',\r\n        link: link\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nInputSearchComponent =\r\n  bindings: {\r\n    q: '<',\r\n    change: '&'\r\n  },\r\n  template: \"\"\"\r\n    <input\r\n        type=\"search\"\r\n        placeholder=\"{{'COMMON.FILTERS.INPUT_PLACEHOLDER' | translate}}\"\r\n        ng-model=\"$ctrl.searchText\"\r\n        ng-change=\"$ctrl.onChange($ctrl.searchText)\" />\r\n    <tg-svg svg-icon=\"icon-search\"></tg-svg>\r\n  \"\"\",\r\n  controller: ->\r\n    @.searchText = ''\r\n    @.dirty = false\r\n\r\n    @.$onChanges = (changes) ->\r\n        if changes.q && !@.dirty\r\n            @.searchText = @.q\r\n\r\n    @.onChange = (text) =>\r\n        @.dirty = true\r\n        @.change({q: text})\r\n\r\n    return\r\n\r\nangular.module(\"taigaComponents\").component(\"tgInputSearch\", InputSearchComponent)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass IssuesTableController\r\n    edit: (issue) ->\r\n        @.onEditIssue({id: issue.id})\r\n\r\n    toggleTags: () ->\r\n        @.onToggleTags({tags: @.showTags})\r\n\r\n    detach: (issue) ->\r\n        @.onDetachIssue({id: issue.id})\r\n\r\n    delete: (issue) ->\r\n        @.onDeleteIssue({id: issue.id})\r\n\r\nangular.module('taigaComponents').controller('IssuesTable', IssuesTableController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\nissuesTableDirective = ($timeout) ->\r\n\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.issueOptions = null\r\n\r\n        scope.displayOptions = (id) ->\r\n            if (timeout)\r\n                $timeout.cancel(timeout)\r\n                timeout = null\r\n            scope.issueOptions = id\r\n\r\n        scope.hideOptions = () ->\r\n            timeout = $timeout (() ->\r\n                scope.issueOptions = null\r\n            ), 200\r\n\r\n    return {\r\n        controller: \"IssuesTable\",\r\n        controllerAs: \"ctrl\",\r\n        templateUrl: \"components/issues-table/issues-table.html\",\r\n        bindToController: {\r\n            issues: \"<\",\r\n            showTags: \"=\",\r\n            onLoadIssues: '&',\r\n            onAddIssuesInBulk: '&',\r\n            onAddNewIssue: '&',\r\n            sprintIssues: '<',\r\n            onDeleteIssue: '&',\r\n            onEditIssue: '&',\r\n            onDetachIssue: '&',\r\n            onToggleTags: '&'\r\n        },\r\n        scope: true,\r\n        link: link\r\n    }\r\n\r\nmodule.directive('tgIssuesTable', ['$timeout', issuesTableDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nJoyRideDirective = ($rootScope, currentUserService, joyRideService, $location, $translate) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        unsuscribe = null\r\n        intro = introJs()\r\n\r\n        intro.oncomplete () ->\r\n            $('html,body').scrollTop(0)\r\n\r\n        intro.onexit () ->\r\n            currentUserService.disableJoyRide()\r\n\r\n        initJoyrRide = (next, config) ->\r\n            if !config[next.joyride]\r\n                return\r\n\r\n            intro.setOptions({\r\n                exitOnEsc: false,\r\n                exitOnOverlayClick: false,\r\n                showStepNumbers: false,\r\n                nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\r\n                prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\r\n                skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\r\n                doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\r\n                disableInteraction: true\r\n            })\r\n\r\n            intro.setOption('steps', joyRideService.get(next.joyride))\r\n            intro.start()\r\n\r\n        $rootScope.$on '$routeChangeSuccess',  (event, next) ->\r\n            if !next.joyride || !currentUserService.isAuthenticated()\r\n                intro.exit()\r\n                unsuscribe() if unsuscribe\r\n                return\r\n\r\n\r\n            intro.oncomplete () ->\r\n                currentUserService.disableJoyRide(next.joyride)\r\n\r\n            if next.loader\r\n                unsuscribe = $rootScope.$on 'loader:end',  () ->\r\n                    currentUserService.loadJoyRideConfig()\r\n                        .then (config) -> initJoyrRide(next, config)\r\n\r\n                    unsuscribe()\r\n            else\r\n                currentUserService.loadJoyRideConfig()\r\n                    .then (config) -> initJoyrRide(next, config)\r\n\r\n    return {\r\n        scope: {},\r\n        link: link\r\n    }\r\n\r\nJoyRideDirective.$inject = [\r\n    \"$rootScope\",\r\n    \"tgCurrentUserService\",\r\n    \"tgJoyRideService\",\r\n    \"$location\",\r\n    \"$translate\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass JoyRideService extends taiga.Service\r\n    @.$inject = [\r\n        '$translate',\r\n        'tgCheckPermissionsService'\r\n    ]\r\n\r\n    constructor: (@translate, @checkPermissionsService) ->\r\n\r\n    getConfig: () ->\r\n      return {\r\n          dashboard: () =>\r\n              steps = [\r\n                  {\r\n                      element: '.project-list > section:not(.ng-hide)',\r\n                      position: 'left',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\r\n                          text: @translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\r\n                      }\r\n                  },\r\n                  {\r\n                      element: '.working-on-container',\r\n                      position: 'right',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\r\n                          text: @translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\r\n                      }\r\n                  },\r\n                  {\r\n                      element: '.watching-container',\r\n                      position: 'right',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE')\r\n                          text: [\r\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'),\r\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')\r\n                          ]\r\n                      }\r\n                  }\r\n              ]\r\n\r\n              if !$('.project-list .create-project-button').is(':hidden')\r\n                  steps.push({\r\n                      element: '.project-list .create-project-button',\r\n                      position: 'bottom',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE')\r\n                          text: [\r\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'),\r\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')\r\n                          ]\r\n                      }\r\n                  })\r\n\r\n              return steps\r\n\r\n          backlog: () =>\r\n              steps = [\r\n                  {\r\n                      element: '.summary',\r\n                      position: 'bottom',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE')\r\n                          text: [\r\n                              @translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'),\r\n                              @translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')\r\n                          ]\r\n                      }\r\n                  },\r\n                  {\r\n                      element: '.backlog-table-empty',\r\n                      position: 'bottom',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE')\r\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\r\n                      }\r\n                  },\r\n                  {\r\n                      element: '.sprints',\r\n                      position: 'left',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE')\r\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\r\n                      }\r\n                  }\r\n              ]\r\n\r\n              if @checkPermissionsService.check('add_us')\r\n                  steps.push({\r\n                      element: '.new-us',\r\n                      position: 'rigth',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE')\r\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\r\n                      }\r\n                  })\r\n\r\n              return steps\r\n\r\n           kanban: () =>\r\n              steps = [\r\n                  {\r\n                      element: '.kanban-table-inner',\r\n                      position: 'bottom',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.KANBAN.STEP1.TITLE')\r\n                          text: @translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\r\n                      }\r\n                  },\r\n                  {\r\n                      element: '.card-placeholder',\r\n                      position: 'right',\r\n                      joyride: {\r\n                          title: @translate.instant('JOYRIDE.KANBAN.STEP2.TITLE')\r\n                          text: @translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\r\n                      }\r\n                  }\r\n              ]\r\n\r\n              if @checkPermissionsService.check('add_us')\r\n                  steps.push({\r\n                        element: '.add-action',\r\n                        position: 'bottom',\r\n                        joyride: {\r\n                            title: @translate.instant('JOYRIDE.KANBAN.STEP3.TITLE')\r\n                            text: [\r\n                                @translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'),\r\n                                @translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2'),\r\n                            ]\r\n                        }\r\n                    })\r\n\r\n              return steps\r\n      }\r\n\r\n    get: (name) ->\r\n        joyRides = @.getConfig()\r\n        joyRide = joyRides[name].call(this)\r\n\r\n        return _.map joyRide, (item) ->\r\n            html = \"\"\r\n\r\n            if item.joyride.title\r\n                html += \"<h3>#{item.joyride.title}</h3>\"\r\n\r\n            if _.isArray(item.joyride.text)\r\n                _.forEach item.joyride.text, (text) ->\r\n                    html += \"<p>#{text}</p>\"\r\n            else\r\n                html += \"<p>#{item.joyride.text}</p>\"\r\n\r\n            item.intro = html\r\n\r\n            return item\r\n\r\nangular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nKanbanBoardZoomDirective = (storage, projectService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.zoomIndex = storage.get(\"kanban_zoom\", 1)\r\n\r\n        scope.levels = 4\r\n\r\n        zooms = [\r\n            [\"assigned_to\", \"ref\"],\r\n            [\"subject\", \"card-data\", \"assigned_to_extended\"],\r\n            [\"tags\", \"extra_info\", \"unfold\"],\r\n            [\"related_tasks\", \"attachments\"]\r\n        ]\r\n\r\n        getZoomView = (zoomIndex = 0) ->\r\n            if zoomIndex > 3\r\n                zoomIndex = 3\r\n\r\n            zoomIndex = Number(zoomIndex)\r\n\r\n            if Number(storage.get(\"kanban_zoom\")) != zoomIndex\r\n                storage.set(\"kanban_zoom\", zoomIndex)\r\n\r\n            return _.reduce zooms, (result, value, key) ->\r\n                if key <= zoomIndex\r\n                    result = result.concat(value)\r\n\r\n                return result\r\n\r\n        scope.$watch 'zoomIndex', (zoomLevel) ->\r\n            zoom = getZoomView(zoomLevel)\r\n            scope.onZoomChange({zoomLevel: zoomLevel, zoom: zoom})\r\n\r\n    return {\r\n        scope: {\r\n            onZoomChange: \"&\"\r\n        },\r\n        template: \"\"\"\r\n        <tg-board-zoom\r\n            class=\"board-zoom\"\r\n            value=\"zoomIndex\"\r\n            levels=\"levels\"\r\n        ></tg-board-zoom>\r\n        \"\"\",\r\n        link: link\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntruncate = taiga.truncate\r\n\r\nSelectUserDirective = (\r\n    $rootScope\r\n    $repo\r\n    $translate\r\n    lightboxService\r\n    lightboxKeyboardNavigationService\r\n    avatarService\r\n    projectService\r\n) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        users = []\r\n        roles = []\r\n        lightboxService.open($el)\r\n\r\n        normalize = (text) ->\r\n            text.toUpperCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\r\n\r\n        getFilteredUsers = (text=\"\") ->\r\n            selected = _.compact(_.sortBy(\r\n                _.filter(users, (x) ->\r\n                    _.includes($scope.currentUsers, x.id)\r\n                ),\r\n                'name'\r\n            ))\r\n\r\n            _filterRows = (text, row) ->\r\n                if row.type == 'user' && _.find(selected, ['id', row.id])\r\n                    return false\r\n\r\n                name = normalize(row.name)\r\n                text = normalize(text)\r\n\r\n                return _.includes(name, text)\r\n\r\n            collection = _.union(\r\n                users,\r\n                _.filter(roles, (role) =>\r\n                    difference = _.difference(role.userIds, _.map(selected, 'id'))\r\n                    return difference.length > 0\r\n                )\r\n            )\r\n            available = _.sortBy(\r\n                _.filter(collection, _.partial(_filterRows, text)),\r\n                'name'\r\n            )\r\n\r\n            if !text\r\n                $scope.selected = selected\r\n                $scope.collection = _.union(selected, available)\r\n            else\r\n                $scope.selected = []\r\n                $scope.collection = available\r\n\r\n        closeLightbox = () ->\r\n            lightboxKeyboardNavigationService.stop()\r\n            lightboxService.close($el)\r\n\r\n        $scope.$on \"watcher:add\", (ctx, item) ->\r\n            $scope.item = item\r\n            getFilteredUsers()\r\n\r\n            lightboxService.open($el).then ->\r\n                $el.find(\"input\").focus()\r\n                lightboxKeyboardNavigationService.init($el)\r\n\r\n        $scope.$watch \"activeUsers\", (activeUsers) ->\r\n            return if not activeUsers\r\n\r\n            users = _.map activeUsers, (user) ->\r\n                return {\r\n                    id: user.id,\r\n                    type: 'user',\r\n                    name: user.full_name_display,\r\n                    avatar: avatarService.getAvatar(user),\r\n                }\r\n\r\n            return if $scope.single\r\n\r\n            project = projectService.project.toJS()\r\n            roles = _.map project.roles, (role) ->\r\n                roleUsers = _.filter(activeUsers, {'role': role.id})\r\n                suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\")\r\n                return {\r\n                    id: role.id,\r\n                    type: 'role',\r\n                    name: \"#{suffix}: #{role.name}\",\r\n                    avatar: null,\r\n                    userIds: _.map(roleUsers, 'id')\r\n                    userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\r\n                }\r\n\r\n        $scope.$watch \"currentUsers\", (currentUsers) ->\r\n            if not currentUsers\r\n                return\r\n            getFilteredUsers()\r\n\r\n        $scope.$watch \"searchText\", (searchingText) ->\r\n            getFilteredUsers(searchingText)\r\n            $el.find(\"input\").focus()\r\n\r\n        $scope.removeItem = (user, $event) ->\r\n            $event.preventDefault()\r\n            $event.stopPropagation()\r\n            $event.currentTarget.remove()\r\n\r\n            $scope.searchText = null\r\n            _.pull($scope.currentUsers, user.id)\r\n            getFilteredUsers()\r\n\r\n        $scope.addItem = (item) ->\r\n            if item.type == 'user'\r\n                return if $scope.currentUsers.includes(item.id)\r\n                if $scope.single\r\n                    $scope.currentUsers = [item.id]\r\n                    confirmSelection()\r\n                    return\r\n                $scope.currentUsers.push(item.id)\r\n\r\n            if item.type == 'role'\r\n                $scope.currentUsers = _.union($scope.currentUsers, item.userIds)\r\n\r\n            $scope.searchText = null\r\n            getFilteredUsers()\r\n\r\n        $scope.clearSearch = () ->\r\n            $scope.searchText = ''\r\n\r\n        confirmSelection = () ->\r\n            $scope.loading = true\r\n            $scope.onClose($scope.currentUsers)\r\n            closeLightbox()\r\n            $scope.loading = false\r\n\r\n        $el.on \"click\", \".lb-select-user-confirm\", (event) ->\r\n            return if $scope.loading\r\n            event.preventDefault()\r\n            confirmSelection()\r\n\r\n        $el.on \"click\", \".close\", (event) ->\r\n            event.preventDefault()\r\n\r\n            closeLightbox()\r\n            $scope.$apply ->\r\n                $scope.searchText = null\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        templateUrl: \"components/lb-select-user/lb-select-user.html\"\r\n        link: link\r\n        scope: true\r\n    }\r\n\r\nSelectUserDirective.$inject = [\r\n    \"$rootScope\"\r\n    \"$tgRepo\"\r\n    \"$translate\"\r\n    \"lightboxService\"\r\n    \"lightboxKeyboardNavigationService\"\r\n    \"tgAvatarService\"\r\n    \"tgProjectService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nLiveAnnouncementDirective = (liveAnnouncementService) ->\r\n    link = (scope, el, attrs) ->\r\n\r\n    return {\r\n        restrict: \"AE\",\r\n        scope: {},\r\n        controllerAs: 'vm',\r\n        controller: () ->\r\n            this.close = () ->\r\n                liveAnnouncementService.open = false\r\n\r\n            Object.defineProperties(this, {\r\n                open: {\r\n                    get: () -> return liveAnnouncementService.open\r\n                },\r\n                title: {\r\n                    get: () -> return liveAnnouncementService.title\r\n                },\r\n                desc: {\r\n                    get: () -> return liveAnnouncementService.desc\r\n                }\r\n            })\r\n        link: link,\r\n        templateUrl: \"components/live-announcement/live-announcement.html\"\r\n    }\r\n\r\nLiveAnnouncementDirective.$inject = [\r\n    \"tgLiveAnnouncementService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass LiveAnnouncementService extends taiga.Service\r\n    constructor: () ->\r\n        @.open = false\r\n        @.title = \"\"\r\n        @.desc = \"\"\r\n\r\n    show: (title, desc) ->\r\n        @.open = true\r\n        @.title = title\r\n        @.desc = desc\r\n\r\nangular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\nclass MoveToSprintLightboxController\r\n    @.$inject = [\r\n        '$rootScope'\r\n        '$scope'\r\n        '$tgResources'\r\n        'tgProjectService'\r\n        '$translate'\r\n        'lightboxService'\r\n        '$tgConfirm',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (\r\n        @rootScope\r\n        @scope\r\n        @rs\r\n        @projectService\r\n        @translate\r\n        @lightboxService\r\n        @confirm\r\n        @q\r\n    ) ->\r\n        @.projectId = @projectService.project.get('id')\r\n        @.loading = false\r\n        @.someSelected = false\r\n        @.selectedSprintId = null\r\n        @.typesSelected = {\r\n            uss: false\r\n            tasks: false\r\n            issues: false\r\n        }\r\n        @.itemsToMove = {}\r\n        @._loadSprints()\r\n\r\n        @scope.$watch \"vm.openItems\", (openItems) =>\r\n            return if !openItems\r\n            @._init(openItems)\r\n\r\n    _init: (openItems) ->\r\n        @.hasManyItemTypes = _.size(@.openItems) > 1\r\n\r\n        @.ussCount = parseInt(openItems.uss?.length)\r\n        @.updateSelected('uss', @.ussCount > 0)\r\n\r\n        @.tasksCount = parseInt(openItems.tasks?.length)\r\n        @.updateSelected('tasks', @.tasksCount > 0)\r\n\r\n        @.issuesCount = parseInt(openItems.issues?.length)\r\n        @.updateSelected('issues', @.issuesCount > 0)\r\n\r\n    _loadSprints: () ->\r\n        @rs.sprints.list(@.projectId, {closed: false}).then (data) =>\r\n            @.sprints = _.filter(data.milestones, (x) => x.id != @.sprint.id)\r\n\r\n    updateSelected: (itemType, value) ->\r\n        @.typesSelected[itemType] = value\r\n        @.someSelected = _.some(@.typesSelected)\r\n\r\n        if value is true\r\n            @.itemsToMove[itemType] = @.openItems[itemType]\r\n        else if @.itemsToMove[itemType]\r\n            delete @.itemsToMove[itemType]\r\n\r\n    submit: () ->\r\n        itemsNotMoved = {}\r\n        _.map @.openItems, (itemsList, itemsType) =>\r\n            if not @.itemsToMove[itemsType]\r\n                itemsNotMoved[itemsType] = true\r\n\r\n        @.loading = true\r\n\r\n        @moveItems().then () =>\r\n            @rootScope.$broadcast(\"taskboard:items:move\", @.typesSelected)\r\n            @lightboxService.closeAll()\r\n            @.loading = false\r\n            if _.size(itemsNotMoved) > 0\r\n                @.displayWarning(itemsNotMoved)\r\n\r\n    moveItems: () ->\r\n        promises = []\r\n        if  @.itemsToMove.uss\r\n            promises.push(\r\n                @rs.sprints.moveUserStoriesMilestone(\r\n                    @.sprint.id\r\n                    @.projectId\r\n                    @.selectedSprintId\r\n                    @.itemsToMove.uss\r\n                )\r\n            )\r\n        if  @.itemsToMove.tasks\r\n            promises.push(\r\n                @rs.sprints.moveTasksMilestone(\r\n                    @.sprint.id\r\n                    @.projectId\r\n                    @.selectedSprintId\r\n                    @.itemsToMove.tasks\r\n                )\r\n            )\r\n        if  @.itemsToMove.issues\r\n            promises.push(\r\n                @rs.sprints.moveIssuesMilestone(\r\n                    @.sprint.id\r\n                    @.projectId\r\n                    @.selectedSprintId\r\n                    @.itemsToMove.issues\r\n                )\r\n            )\r\n        return @q.all(promises)\r\n\r\n    displayWarning: (itemsNotMoved) ->\r\n        action = @translate.instant('COMMON.I_GET_IT')\r\n        if _.size(itemsNotMoved) == 1 and itemsNotMoved.issues is true\r\n            title = @translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE')\r\n            desc = @translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED')\r\n        else\r\n            totalItemsMoved = 0\r\n            _.map @.itemsToMove, (itemsList, itemsType) -> totalItemsMoved += itemsList.length\r\n            title = @translate.instant(\r\n                'TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE'\r\n                { total: totalItemsMoved }\r\n                'messageformat'\r\n            )\r\n            desc = @translate.instant(\r\n                'TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN'\r\n                { sprintName: @.sprint?.name }\r\n            )\r\n        @confirm.success(title, desc, null, action)\r\n\r\nmodule.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\nmoveToSprintLightboxDirective = (lightboxService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        lightboxService.open(el)\r\n\r\n    return {\r\n        scope: {}\r\n        bindToController: {\r\n            openItems: \"=\"\r\n            sprint: \"=\"\r\n        },\r\n        templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\"\r\n        controller: \"MoveToSprintLbCtrl\"\r\n        controllerAs: \"vm\"\r\n        link: link\r\n    }\r\n\r\nmoveToSprintLightboxDirective.$inject = [\r\n    \"lightboxService\"\r\n]\r\n\r\nmodule.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass MoveToSprintController\r\n    @.$inject = [\r\n      '$scope'\r\n      'tgLightboxFactory'\r\n      'tgProjectService'\r\n    ]\r\n\r\n    constructor: (\r\n        @scope\r\n        @lightboxFactory\r\n        @projectService\r\n    ) ->\r\n        @.permissions = @projectService.project.get('my_permissions')\r\n        @.hasOpenItems = false\r\n        @.disabled = false\r\n        @.openItems = {\r\n            uss: []\r\n            tasks: []\r\n            issues: []\r\n        }\r\n\r\n        @scope.$watch \"vm.uss\", () => @getOpenUss()\r\n        @scope.$watch \"vm.unnasignedTasks\", () => @getOpenStorylessTasks()\r\n        @scope.$watch \"vm.issues\", () => @getOpenIssues()\r\n\r\n    checkOpenItems: () ->\r\n        return _.some(Object.keys(@.openItems), (x) => @.openItems[x].length > 0)\r\n\r\n    openLightbox: () ->\r\n        if @.disabled is not true && @.hasOpenItems\r\n            openItems = {}\r\n            _.map @.openItems, (itemsList, itemsType) ->\r\n                if itemsList.length\r\n                    openItems[itemsType] = itemsList\r\n\r\n            @lightboxFactory.create('tg-lb-move-to-sprint', {\r\n                \"class\": \"lightbox lightbox-move-to-sprint\"\r\n                \"sprint\": \"sprint\"\r\n                \"open-items\": \"openItems\"\r\n            }, {\r\n                sprint: @.sprint\r\n                openItems: openItems\r\n            })\r\n\r\n    getOpenUss: () ->\r\n        return if !@.uss or @.permissions.indexOf(\"modify_us\") == -1\r\n        @.openItems.uss = []\r\n        @.uss.map (us) =>\r\n            if us.is_closed is false\r\n                @.openItems.uss.push({\r\n                    us_id: us.id\r\n                    order: us.sprint_order\r\n                })\r\n        @.hasOpenItems = @checkOpenItems()\r\n\r\n    getOpenStorylessTasks: () ->\r\n        return if !@.unnasignedTasks or @.permissions.indexOf(\"modify_task\") == -1\r\n        @.openItems.tasks = []\r\n        @.unnasignedTasks.map (column) => column.map (taskId) =>\r\n            task = @.taskMap.get(taskId)\r\n            if task.get('model').get('is_closed') is false\r\n                @.openItems.tasks.push({\r\n                    task_id: task.get('model').get('id')\r\n                    order: task.get('model').get('taskboard_order')\r\n                })\r\n        @.hasOpenItems = @checkOpenItems()\r\n\r\n    getOpenIssues: () ->\r\n        return if !@.issues or @.permissions.indexOf(\"modify_issue\") == -1\r\n        @.openItems.issues = []\r\n        @.issues.map (issue) =>\r\n            if issue.get('status').get('is_closed') is false\r\n                @.openItems.issues.push({ issue_id: issue.get('id') })\r\n        @.hasOpenItems = @checkOpenItems()\r\n\r\nangular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\nmoveToSprintDirective = (taskboardTasksService) ->\r\n    return {\r\n        controller: \"MoveToSprintCtrl\"\r\n        controllerAs: \"vm\"\r\n        bindToController: true\r\n        templateUrl: 'components/move-to-sprint/move-to-sprint.html'\r\n        scope:  {\r\n            sprint: '='\r\n            uss: '='\r\n            unnasignedTasks: '='\r\n            issues: '='\r\n            disabled: '='\r\n            taskMap: '='\r\n        }\r\n    }\r\n\r\nmoveToSprintDirective.$inject = [\r\n    'tgTaskboardTasks'\r\n]\r\n\r\nmodule.directive('tgMoveToSprint', [moveToSprintDirective])","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProjectLogoBigSrcDirective = (projectLogoService) ->\r\n    link = (scope, el, attrs) ->\r\n        scope.$watch 'project', (project) ->\r\n            project = Immutable.fromJS(project) # Necesary for old code\r\n\r\n            return if not project\r\n\r\n            projectLogo = project.get('logo_big_url')\r\n\r\n            if projectLogo\r\n                el.attr('src', projectLogo)\r\n                el.css('background', \"\")\r\n            else\r\n                logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'))\r\n                el.attr('src', logo.src)\r\n                el.css('background', logo.color)\r\n\r\n    return {\r\n        link: link\r\n        scope: {\r\n             project: \"=tgProjectLogoBigSrc\"\r\n        }\r\n    }\r\n\r\nProjectLogoBigSrcDirective.$inject = [\r\n    \"tgProjectLogoService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProjectLogoSmallSrcDirective = (projectLogoService) ->\r\n    link = (scope, el, attrs) ->\r\n        scope.$watch 'project', (project) ->\r\n            project = Immutable.fromJS(project) # Necesary for old code\r\n\r\n            return if not project\r\n\r\n            projectLogo = project.get('logo_small_url')\r\n\r\n            if projectLogo\r\n                el.attr('src', projectLogo)\r\n                el.css('background', \"\")\r\n            else\r\n                logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'))\r\n                el.attr('src', logo.src)\r\n                el.css('background', logo.color)\r\n\r\n    return {\r\n        link: link\r\n        scope: {\r\n             project: \"=tgProjectLogoSmallSrc\"\r\n        }\r\n    }\r\n\r\nProjectLogoSmallSrcDirective.$inject = [\r\n    \"tgProjectLogoService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectMenuController\r\n    @.$inject = [\r\n        \"tgProjectService\",\r\n        \"tgLightboxFactory\"\r\n    ]\r\n\r\n    constructor: (@projectService, @lightboxFactory) ->\r\n        @.project = null\r\n        @.menu = Immutable.Map()\r\n\r\n    show: () ->\r\n        @.project = @projectService.project\r\n        @.sprints = @.project.get('milestones')?.toJS()\r\n        @.active = @._getActiveSection()\r\n\r\n        @.projectMenu = {\r\n            component: 'tg-project-navigation',\r\n            params: {\r\n                project: @projectService.project.toJS(),\r\n            },\r\n            events: {\r\n                search: () =>\r\n                    @.search()\r\n            }\r\n        }\r\n\r\n        @._setVideoConference()\r\n        @._setMenuPermissions()\r\n\r\n    hide: () ->\r\n        @.project = null\r\n        @.menu = {}\r\n\r\n    search: () ->\r\n        @lightboxFactory.create(\"tg-search-box\", {\r\n            \"class\": \"lightbox lightbox-search\"\r\n        })\r\n\r\n    _setVideoConference: () ->\r\n        videoconferenceUrl = @._videoConferenceUrl()\r\n\r\n        if videoconferenceUrl\r\n            @.project = @.project.set(\"videoconferenceUrl\", videoconferenceUrl)\r\n\r\n    _setMenuPermissions: () ->\r\n        @.menu = Immutable.Map({\r\n            epics: false,\r\n            backlog: false,\r\n            kanban: false,\r\n            issues: false,\r\n            wiki: false\r\n        })\r\n\r\n        if @.project.get(\"is_epics_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_epics\") != -1\r\n            @.menu = @.menu.set(\"epics\", true)\r\n\r\n        if @.project.get(\"is_backlog_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_us\") != -1\r\n            @.menu = @.menu.set(\"backlog\", true)\r\n\r\n        if @.project.get(\"is_kanban_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_us\") != -1\r\n            @.menu = @.menu.set(\"kanban\", true)\r\n\r\n        if @.project.get(\"is_issues_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_issues\") != -1\r\n            @.menu = @.menu.set(\"issues\", true)\r\n\r\n        if @.project.get(\"is_wiki_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") != -1\r\n            @.menu = @.menu.set(\"wiki\", true)\r\n\r\n    _getActiveSection: () ->\r\n        sectionName = @projectService.section\r\n\r\n        sectionsBreadcrumb = @projectService.sectionsBreadcrumb\r\n\r\n        indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\")\r\n        indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\")\r\n\r\n        if indexBacklog != -1 || indexKanban != -1\r\n            if indexKanban == -1 || indexBacklog > indexKanban\r\n                oldSectionName = \"backlog\"\r\n            else\r\n                oldSectionName = \"kanban\"\r\n\r\n        if  sectionName  == \"backlog-kanban\"\r\n            if oldSectionName in [\"backlog\", \"kanban\"]\r\n                sectionName = oldSectionName\r\n            else if @.project.get(\"is_backlog_activated\") && !@.project.get(\"is_kanban_activated\")\r\n                sectionName = \"backlog\"\r\n            else if !@.project.get(\"is_backlog_activated\") && @.project.get(\"is_kanban_activated\")\r\n                sectionName = \"kanban\"\r\n\r\n        return sectionName\r\n\r\n    _videoConferenceUrl: () ->\r\n        # Get base url\r\n        if @.project.get(\"videoconferences\") == \"whereby-com\"\r\n            baseUrl = \"https://whereby.com/\"\r\n        else if @.project.get(\"videoconferences\") == \"talky\"\r\n            baseUrl = \"https://talky.io/\"\r\n        else if @.project.get(\"videoconferences\") == \"jitsi\"\r\n            baseUrl = \"https://meet.jit.si/\"\r\n        else if @.project.get(\"videoconferences\") == \"custom\"\r\n            return @.project.get(\"videoconferences_extra_data\")\r\n        else\r\n            return \"\"\r\n\r\n        # Add prefix to the chat room name if exist\r\n        if @.project.get(\"videoconferences_extra_data\")\r\n            url = @.project.get(\"slug\") + \"-\" + taiga.slugify(@.project.get(\"videoconferences_extra_data\"))\r\n        else\r\n            url = @.project.get(\"slug\")\r\n\r\n        # Some special cases\r\n        if @.project.get(\"videoconferences\") == \"jitsi\"\r\n            url = url.replace(/-/g, \"\")\r\n\r\n        return baseUrl + url\r\n\r\nangular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nProjectMenuDirective = (projectService, lightboxFactory) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        projectChange = () ->\r\n            if projectService.project\r\n                ctrl.show()\r\n            else\r\n                ctrl.hide()\r\n\r\n        scope.$watch ( () ->\r\n            return projectService.project\r\n        ), projectChange\r\n\r\n        fixed = false\r\n        topBarHeight = 48\r\n\r\n        window.addEventListener \"scroll\", () ->\r\n            position = $(window).scrollTop()\r\n\r\n            if position > topBarHeight && fixed == false\r\n                el.find('.sticky-project-menu').addClass('unblock')\r\n                fixed = true\r\n            else if position == 0 && fixed == true\r\n                el.find('.sticky-project-menu').removeClass('unblock')\r\n                fixed = false\r\n\r\n    return {\r\n        scope: {},\r\n        controller: \"ProjectMenu\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/project-menu/project-menu.html\",\r\n        link: link\r\n    }\r\n\r\nProjectMenuDirective.$inject = [\r\n    \"tgProjectService\",\r\n    \"tgLightboxFactory\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nPromoteToUsButtonDirective = ($rootScope, $rs, $confirm, $translate) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        itemType = null\r\n\r\n        save = (item, askResponse) ->\r\n            data = {\r\n                project: item.project\r\n            }\r\n\r\n            onSuccess = (response) ->\r\n                askResponse.finish()\r\n                $confirm.notify(\"success\")\r\n                $rootScope.$broadcast(\"promote-#{itemType}-to-us:success\", response.data[0])\r\n\r\n            onError = ->\r\n                askResponse.finish()\r\n                $confirm.notify(\"error\")\r\n\r\n            $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError)\r\n\r\n        $el.on \"click\", \".promote-button\", (event) ->\r\n            event.preventDefault()\r\n            item = $model.$modelValue\r\n            itemType = _.get({ tasks: 'task', issues: 'issue' }, item._name)\r\n\r\n            ctx = \"COMMON.CONFIRM_PROMOTE.#{itemType.toUpperCase()}\"\r\n            title = $translate.instant(\"#{ctx}.TITLE\")\r\n            message = $translate.instant(\"#{ctx}.MESSAGE\")\r\n            subtitle = item.subject\r\n            $confirm.ask(title, subtitle, message).then (response) ->\r\n                save(item, response)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        restrict: \"AE\"\r\n        require: \"ngModel\"\r\n        templateUrl: \"components/promote-to-us/promote-to-us.html\"\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\",\r\n    [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective])","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\nnormalizeString = @.taiga.normalizeString\r\ngroupBy = @.taiga.groupBy\r\n\r\nsearchListDirective = ($translate) ->\r\n    link = (scope, el, attrs, model) ->\r\n        scope.templateUrl = \"components/search-list/search-list-#{scope.itemType}-choice.html\"\r\n        scope.currentSelected = null\r\n        filtering = false\r\n        avaliableItems = []\r\n        itemsById = {}\r\n\r\n        if scope.itemType == 'issue'\r\n            scope.milestonesById = groupBy(scope.project.milestones, (e) -> e.id)\r\n\r\n        if scope.filterClosed\r\n            scope.showClosed = false\r\n\r\n            if scope.itemType == 'sprint'\r\n                scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\")\r\n                scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\")\r\n\r\n        el.on \"click\", \".choice\", (event) ->\r\n            choiceId = parseInt($(event.currentTarget).data(\"choice-id\"))\r\n            value = if attrs.ngModel?.id != choiceId then itemsById[choiceId] else null\r\n            model.$setViewValue(value)\r\n            scope.currentSelected = value\r\n            scope.$apply()\r\n\r\n        isContainedIn = (needle, haystack) ->\r\n            return _.includes(parseString(haystack), parseString(needle))\r\n\r\n        parseString = (value) ->\r\n            if typeof value != 'string'\r\n                value = value.toString()\r\n            return normalizeString(value.toUpperCase())\r\n\r\n        resetSelected = () ->\r\n            scope.currentSelected = null\r\n            model.$setViewValue(null)\r\n\r\n        resetAll = () ->\r\n            resetSelected()\r\n            scope.searchText = ''\r\n            avaliableItems = angular.copy(scope.items)\r\n            itemsById = groupBy(avaliableItems, (x) -> x.id)\r\n\r\n\r\n        scope.isVisible = (item) ->\r\n            if !scope.filterClosed || scope.showClosed\r\n                return true\r\n            if (scope.itemType == 'sprint' && (item.closed || item.is_closed))\r\n                if (scope.currentSelected?.id == item.id)\r\n                    resetSelected()\r\n                return false\r\n            return true\r\n\r\n        scope.toggleShowClosed = (item) ->\r\n            scope.showClosed = !scope.showClosed\r\n\r\n        scope.filterItems = (searchText) ->\r\n            scope.filtering = true\r\n            scope.items = _.filter(avaliableItems, (item) ->\r\n                itemAttrs = item.getAttrs()\r\n                if Array.isArray(scope.filterBy)\r\n                    _.some(scope.filterBy, (attr) -> isContainedIn(searchText, itemAttrs[attr]))\r\n                else\r\n                    isContainedIn(searchText, itemAttrs[scope.filterBy])\r\n            )\r\n            if !_.find(scope.items, scope.currentSelected)\r\n                resetSelected()\r\n\r\n        scope.$watch 'items', (items) ->\r\n            if !scope.filtering && items\r\n                resetAll()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl: \"components/search-list/search-list.html\",\r\n        require: \"ngModel\",\r\n        scope: {\r\n            label: '@',\r\n            placeholder: '@',\r\n            project: '=',\r\n            filterBy: '=',\r\n            items: '=',\r\n            itemType: '@',\r\n            filterClosed: '=',\r\n            itemDisabled: '='\r\n        }\r\n    }\r\n\r\nmodule.directive('tgSearchList', ['$translate', searchListDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntimeout = @.taiga.timeout\r\ncancelTimeout = @.taiga.cancelTimeout\r\n\r\n#############################################################################\r\n## Swimlane Selector\r\n#############################################################################\r\n\r\nSwimlaneSelector = ($timeout, $translate) ->\r\n\r\n    link = (scope, el, attrs) ->\r\n\r\n        scope.displaySelector = false\r\n        scope.selectedSwimlane = null\r\n        timeout = null\r\n\r\n        mount = () ->\r\n            getCurrentSwimlane()\r\n\r\n        getCurrentSwimlane = () ->\r\n            if (scope.userStory.id)\r\n                if (scope.userStory.swimlane)\r\n                    filteredSwimlanes = scope.swimlanes.filter (swimlane) ->\r\n                        return swimlane.id == scope.userStory.swimlane\r\n\r\n                    scope.currentSwimlane = filteredSwimlanes.get(0)\r\n                else\r\n                    scope.currentSwimlane = null\r\n            else\r\n                filteredSwimlanes = scope.swimlanes.filter (swimlane) ->\r\n                    return swimlane.id == scope.defaultSwimlaneId\r\n\r\n                scope.currentSwimlane = filteredSwimlanes.get(0)\r\n            getSelectedSwimlane()\r\n\r\n        getSelectedSwimlane = () ->\r\n            if (scope.userStory.id)\r\n                if (scope.currentSwimlane)\r\n                    scope.selectedSwimlane = scope.currentSwimlane.id\r\n                else\r\n                    scope.selectedSwimlane = null\r\n            else\r\n                scope.selectedSwimlane = scope.currentSwimlane.id\r\n\r\n        scope.displayOptions = () ->\r\n            if (timeout)\r\n                $timeout.cancel(timeout)\r\n                timeout = null\r\n            scope.displaySelector = true\r\n\r\n        scope.hideOptions = () ->\r\n            timeout = $timeout (() ->\r\n                scope.displaySelector = false\r\n            ), 100\r\n\r\n        scope.selectSwimlane = (swimlane) ->\r\n            if (swimlane == 'noSwimlane')\r\n                swimlane = {\r\n                    id: null,\r\n                    kanban_order: 1,\r\n                    name: $translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\r\n                }\r\n                scope.ngModel = swimlane.id\r\n                scope.currentSwimlane = swimlane\r\n                scope.hideOptions()\r\n            else\r\n                scope.ngModel = if swimlane.id != -1 then swimlane.id else null\r\n                scope.currentSwimlane = swimlane\r\n                scope.hideOptions()\r\n\r\n            getSelectedSwimlane()\r\n\r\n        scope.$watch 'userStory', (userStory) ->\r\n            getCurrentSwimlane()\r\n\r\n        mount()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl: \"components/swimlane-selector/swimlane-selector.html\",\r\n        scope: {\r\n            swimlanes: '<',\r\n            defaultSwimlaneId: '<',\r\n            userStory: '<'\r\n            hasUnclassifiedStories: '<'\r\n            ngModel : '=',\r\n        },\r\n        require: \"ngModel\"\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgSwimlaneSelector\", ['$timeout', \"$translate\", SwimlaneSelector])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nTagOptionDirective = () ->\r\n    select = (selected) ->\r\n        selected.addClass('selected')\r\n\r\n        selectedPosition = selected.position().top + selected.outerHeight()\r\n        containerHeight = selected.parent().outerHeight()\r\n\r\n        if selectedPosition > containerHeight\r\n            diff = selectedPosition - containerHeight\r\n            selected.parent().scrollTop(selected.parent().scrollTop() + diff)\r\n        else if selected.position().top < 0\r\n            selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top)\r\n\r\n    dispatch = (el, code, scope) ->\r\n        activeElement = el.find(\".selected\")\r\n\r\n        # Key: down\r\n        if code == 40\r\n            if not activeElement.length\r\n                select(el.find('li:first'))\r\n            else\r\n                next = activeElement.next('li')\r\n                if next.length\r\n                    activeElement.removeClass('selected')\r\n                    select(next)\r\n        # Key: up\r\n        else if code == 38\r\n            if not activeElement.length\r\n                select(el.find('li:last'))\r\n            else\r\n                prev = activeElement.prev('li')\r\n\r\n                if prev.length\r\n                    activeElement.removeClass('selected')\r\n                    select(prev)\r\n\r\n    stop = ->\r\n        $(document).off(\".tags-keyboard-navigation\")\r\n\r\n    link = (scope, el) ->\r\n        stop()\r\n\r\n        $(el).parent().on \"keydown.tags-keyboard-navigation\", (event) =>\r\n            code = if event.keyCode then event.keyCode else event.which\r\n\r\n            if code == 40 || code == 38\r\n                event.preventDefault()\r\n\r\n                dispatch(el, code, scope)\r\n\r\n        scope.$on(\"$destroy\", stop)\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"components/tags/tag-dropdown/tag-dropdown.html\",\r\n        scope: {\r\n            onSelectTag: \"&\",\r\n            colorArray: \"=\",\r\n            tag: \"=\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgTagsDropdown\", TagOptionDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntrim = @.taiga.trim\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nclass TagLineCommonController\r\n\r\n    @.$inject = [\r\n        \"tgTagLineService\"\r\n    ]\r\n\r\n    constructor: (@tagLineService) ->\r\n        @.disableColorSelection = false\r\n        @.newTag = {name: \"\", color: null}\r\n        @.colorArray = []\r\n        @.addTag = false\r\n\r\n    checkPermissions: () ->\r\n        hasPermissions = @tagLineService.checkPermissions(@.project.my_permissions, @.permissions)\r\n        return hasPermissions\r\n\r\n    _createColorsArray: (projectTagColors) ->\r\n        @.colorArray =  @tagLineService.createColorsArray(projectTagColors)\r\n\r\n    displayTagInput: () ->\r\n        @.addTag = true\r\n\r\n    addNewTag: (name, color) ->\r\n        @.newTag.name = \"\"\r\n        @.newTag.color = null\r\n\r\n        return if not name.length\r\n\r\n        if @.disableColorSelection\r\n            @.onAddTag({name: name, color: color}) if name.length\r\n        else\r\n            if @.project.tags_colors[name]\r\n                color = @.project.tags_colors[name]\r\n            @.onAddTag({name: name, color: color})\r\n\r\n    selectColor: (color) ->\r\n        @.newTag.color = color\r\n\r\nmodule.controller(\"TagLineCommonCtrl\", TagLineCommonController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nTagLineCommonDirective = () ->\r\n    link = (scope, el, attr, ctrl) ->\r\n        if !_.isUndefined(attr.disableColorSelection)\r\n            ctrl.disableColorSelection = true\r\n\r\n        unwatch = scope.$watch \"vm.project\", (project) ->\r\n            return if !project || !Object.keys(project).length\r\n\r\n            unwatch()\r\n\r\n            if not ctrl.disableColorSelection\r\n                ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors)\r\n\r\n        el.on \"keydown\", \".tag-input\", (event) ->\r\n            if event.keyCode == 27\r\n                ctrl.addTag = false\r\n\r\n                ctrl.newTag.name = \"\"\r\n                ctrl.newTag.color = \"\"\r\n\r\n                event.stopPropagation()\r\n            else if event.keyCode == 13\r\n                event.preventDefault()\r\n\r\n                if el.find('.tags-dropdown .selected').length\r\n                    tagName = $('.tags-dropdown .selected .tags-dropdown-name').text()\r\n                    ctrl.addNewTag(tagName, null)\r\n                else\r\n                    ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color)\r\n\r\n            scope.$apply()\r\n\r\n    return {\r\n        link: link,\r\n        scope: {\r\n            permissions: \"@\",\r\n            loadingAddTag: \"=\",\r\n            loadingRemoveTag: \"=\",\r\n            tags: \"=\",\r\n            project: \"=\",\r\n            onAddTag: \"&\",\r\n            onDeleteTag: \"&\"\r\n        },\r\n        templateUrl:\"components/tags/tag-line-common/tag-line-common.html\",\r\n        controller: \"TagLineCommonCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true\r\n    }\r\n\r\nmodule.directive(\"tgTagLineCommon\", TagLineCommonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntrim = @.taiga.trim\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nclass TagLineController\r\n\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"$tgConfirm\",\r\n        \"$tgQueueModelTransformation\",\r\n    ]\r\n\r\n    constructor: (@rootScope, @confirm, @modelTransform) ->\r\n        @.loadingAddTag = false\r\n\r\n    onDeleteTag: (tag) ->\r\n        @.loadingRemoveTag = tag[0]\r\n\r\n        onDeleteTagSuccess = (item) =>\r\n            @rootScope.$broadcast(\"object:updated\")\r\n            @.loadingRemoveTag = false\r\n\r\n            return item\r\n\r\n        onDeleteTagError = () =>\r\n            @confirm.notify(\"error\")\r\n            @.loadingRemoveTag = false\r\n\r\n        tagName = trim(tag[0].toLowerCase())\r\n\r\n        transform = @modelTransform.save (item) ->\r\n            itemtags = _.clone(item.tags)\r\n\r\n            _.remove itemtags, (tag) -> tag[0] == tagName\r\n\r\n            item.tags = itemtags\r\n\r\n            return item\r\n\r\n        return transform.then(onDeleteTagSuccess, onDeleteTagError)\r\n\r\n    onAddTag: (tag, color) ->\r\n        @.loadingAddTag = true\r\n\r\n        onAddTagSuccess = (item) =>\r\n            @rootScope.$broadcast(\"object:updated\") #its a kind of magic.\r\n            @rootScope.$broadcast(\"tags:updated\")\r\n            @.addTag = false\r\n            @.loadingAddTag = false\r\n\r\n            return item\r\n\r\n        onAddTagError = () =>\r\n            @.loadingAddTag = false\r\n            @confirm.notify(\"error\")\r\n\r\n        transform = @modelTransform.save (item) =>\r\n            value = trim(tag.toLowerCase())\r\n\r\n            itemtags = _.clone(item.tags)\r\n\r\n            itemtags.push([tag , color])\r\n\r\n            item.tags = itemtags\r\n\r\n            return item\r\n\r\n        return transform.then(onAddTagSuccess, onAddTagError)\r\n\r\nmodule.controller(\"TagLineCtrl\", TagLineController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nTagLineDirective = () ->\r\n    return {\r\n        scope: {\r\n            item: \"=\",\r\n            permissions: \"@\",\r\n            project: \"=\"\r\n        },\r\n        templateUrl:\"components/tags/tag-line-detail/tag-line-detail.html\",\r\n        controller: \"TagLineCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true\r\n    }\r\n\r\nmodule.directive(\"tgTagLine\", TagLineDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nclass TagLineService extends taiga.Service\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n\r\n    checkPermissions: (myPermissions, projectPermissions) ->\r\n        return _.includes(myPermissions, projectPermissions)\r\n\r\n    createColorsArray: (projectTagColors) ->\r\n        return _.map(projectTagColors, (index, value) ->\r\n            return [value, index]\r\n        )\r\n\r\nmodule.service(\"tgTagLineService\", TagLineService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaCommon')\r\n\r\nTagDirective = () ->\r\n    return {\r\n        templateUrl:\"components/tags/tag/tag.html\",\r\n        scope: {\r\n            tag: \"<\",\r\n            loadingRemoveTag: \"<\",\r\n            onDeleteTag: \"&\",\r\n            hasPermissions: \"<\"\r\n        },\r\n    }\r\n\r\nmodule.directive(\"tgTag\", TagDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTaskboardZoomDirective = (storage) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.zoomIndex = storage.get(\"taskboard_zoom\", 2)\r\n\r\n        scope.levels = 4\r\n\r\n        zooms = [\r\n            [\"assigned_to\", \"ref\"],\r\n            [\"subject\"],\r\n            [\"tags\", \"extra_info\", \"unfold\", \"card-data\", \"assigned_to_extended\"],\r\n            [\"related_tasks\", \"attachments\"]\r\n        ]\r\n\r\n        getZoomView = (zoomIndex = 0) ->\r\n            zoomIndex = Number(zoomIndex)\r\n\r\n            if Number(storage.get(\"taskboard_zoom\")) != zoomIndex\r\n                storage.set(\"taskboard_zoom\", zoomIndex)\r\n\r\n            return _.reduce zooms, (result, value, key) ->\r\n                if key <= zoomIndex\r\n                    result = result.concat(value)\r\n\r\n                return result\r\n\r\n        scope.$watch 'zoomIndex', (zoomLevel) ->\r\n            zoom = getZoomView(zoomLevel)\r\n            scope.onZoomChange({zoomLevel: zoomLevel, zoom: zoom})\r\n\r\n    return {\r\n        scope: {\r\n            onZoomChange: \"&\"\r\n        },\r\n        template: \"\"\"\r\n        <tg-board-zoom\r\n            levels=\"levels\"\r\n            class=\"board-zoom\"\r\n            value=\"zoomIndex\"\r\n        ></tg-board-zoom>\r\n        \"\"\",\r\n        link: link\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTasksSortableDirective = ($parse, projectService) ->\r\n    link = (scope, el, attrs) ->\r\n        return if not projectService.hasPermission(\"modify_task\")\r\n\r\n        callback = $parse(attrs.tgTasksSortable)\r\n\r\n        drake = dragula([el[0]], {\r\n            copySortSource: false\r\n            copy: false\r\n            mirrorContainer: el[0]\r\n            moves: (item) ->\r\n                return $(item).is('div.single-related-task.js-related-task')\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n\r\n            task = itemEl.scope().task\r\n            newIndex = itemEl.index()\r\n\r\n            scope.$apply () ->\r\n                callback(scope, {task: task, newIndex: newIndex})\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n        scope.$on \"$destroy\", ->\r\n            el.off()\r\n            drake.destroy()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nTasksSortableDirective.$inject = [\r\n    \"$parse\",\r\n    \"tgProjectService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTermsOfServiceAndPrivacyPolicyNoticeDirective = ($config) ->\r\n    link = (scope, el, attrs) ->\r\n        scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\")\r\n        scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\")\r\n        scope.target = false\r\n\r\n        if !scope.privacyPolicyUrl || !scope.termsOfServiceUrl\r\n            scope.target = true\r\n\r\n        el.on \"change\", \"input[name='accepted_terms']\", (event) ->\r\n            target = angular.element(event.currentTarget)\r\n            scope.target = target.is(\":checked\")\r\n            scope.$apply()\r\n\r\n    return {\r\n        restrict: \"AE\",\r\n        link: link,\r\n        scope: {\r\n            target: \"=\"\r\n        }\r\n        templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\r\n    }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\r\n        \"$tgConfig\",\r\n        TermsOfServiceAndPrivacyPolicyNoticeDirective\r\n    ])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAssignedToDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template,\r\n$translate, $compile, $currentUserService, avatarService, $lightboxFactory) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        currentUserId = $currentUserService.getUser()?.get('id')\r\n\r\n        isEditable = ->\r\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\r\n\r\n        isIocaine = (item) ->\r\n            return item?.is_iocaine\r\n\r\n        isSelfAssigned = ->\r\n            return $scope.assignedUser && $scope.assignedUser.id == currentUserId\r\n\r\n        save = (userId) ->\r\n            $scope.loading = true\r\n            transform = $modelTransform.save (item) ->\r\n                item.assigned_to = userId\r\n                return item\r\n\r\n            transform.then (item) ->\r\n                $attrs.ngModel = item\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n            transform.finally () ->\r\n                $scope.loading = false\r\n\r\n            return transform\r\n\r\n        render = (item) ->\r\n            $scope.assignedUser = $scope.usersById[item?.assigned_to]\r\n            $scope.isEditable = isEditable()\r\n            $scope.isIocaine = isIocaine(item)\r\n            $scope.isSelfAssigned = isSelfAssigned()\r\n\r\n        $el.on \"click\", \".remove-user\", (event) ->\r\n            return if not isEditable()\r\n            event.stopPropagation()\r\n            title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\")\r\n            $confirm.ask(title).then (response) ->\r\n                response.finish()\r\n                save(null)\r\n\r\n        $scope.openAssignedUsers = () ->\r\n            onClose = (assignedUsers) =>\r\n                save(assignedUsers.pop() || null)\r\n\r\n            item = _.clone($model.$modelValue, false)\r\n            $lightboxFactory.create(\r\n                'tg-lb-select-user',\r\n                {\r\n                    \"class\": \"lightbox lightbox-select-user\",\r\n                },\r\n                {\r\n                    \"currentUsers\": [item.assigned_to],\r\n                    \"activeUsers\": @.activeUsers,\r\n                    \"onClose\": onClose,\r\n                    \"single\": true,\r\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n                }\r\n            )\r\n\r\n        $scope.selfAssign = () ->\r\n            save(currentUserId)\r\n\r\n        $scope.$watch $attrs.ngModel, (item, currentItem) ->\r\n            return if not item?\r\n            render(item)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        link:link,\r\n        templateUrl: \"components/ticket-assigned/assigned-to.html\",\r\n        require:\"ngModel\"\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\",\r\n\"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\r\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAssignedUsersDirective = ($rootscope, $confirm, $repo, $modelTransform, $template, $compile,\r\n$translate, $currentUserService, $lightboxFactory) ->\r\n    link = ($scope, $el, $attrs, $model) ->\r\n        currentUserId = $currentUserService.getUser()?.get('id')\r\n        $scope.visibleAssignedUsersCount = 4\r\n        $scope.displayHidden = false\r\n\r\n        $scope.toggleFold = () ->\r\n            $scope.displayHidden = !$scope.displayHidden\r\n\r\n        isEditable = ->\r\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\r\n\r\n        save = (assignedUsersIds, assignedToUser) ->\r\n            $scope.loading = true\r\n            transform = $modelTransform.save (item) ->\r\n                item.assigned_users = assignedUsersIds\r\n                if assignedToUser\r\n                    item.assigned_to = assignedToUser\r\n                else if not assignedUsersIds.length\r\n                    item.assigned_to = null\r\n                else if not _.includes(assignedUsersIds, item.assigned_to)\r\n                    item.assigned_to = assignedUsersIds[0]\r\n                return item\r\n\r\n            transform.then ->\r\n                result = $rootscope.$broadcast(\"object:updated\")\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n            transform.finally ->\r\n                $scope.loading = false\r\n\r\n        $scope.openAssignedUsers = () ->\r\n            onClose = (assignedUsers) =>\r\n                save(assignedUsers)\r\n\r\n            item = _.clone($model.$modelValue, false)\r\n            $lightboxFactory.create(\r\n                'tg-lb-select-user',\r\n                {\r\n                    \"class\": \"lightbox lightbox-select-user\",\r\n                },\r\n                {\r\n                    \"currentUsers\": item.assigned_users,\r\n                    \"activeUsers\": $scope.activeUsers,\r\n                    \"onClose\": onClose,\r\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\r\n                }\r\n            )\r\n\r\n        $el.on \"click\", \".user-list-single\", (event) ->\r\n            return if not isEditable()\r\n            event.stopPropagation()\r\n            $scope.openAssignedUsers()\r\n\r\n        $el.on \"click\", \".remove-user\", (event) ->\r\n            return if not isEditable()\r\n            event.stopPropagation()\r\n            target = angular.element(event.currentTarget)\r\n            assignedUserId = target.data(\"user-id\")\r\n\r\n            title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\")\r\n            message = $scope.usersById[assignedUserId].full_name_display\r\n\r\n            $confirm.askOnDelete(title, message).then (askResponse) ->\r\n                askResponse.finish()\r\n\r\n                assignedUserIds = _.clone($model.$modelValue.assigned_users, false)\r\n                assignedUserIds = _.pull(assignedUserIds, assignedUserId)\r\n\r\n                deleteAssignedUser(assignedUserIds)\r\n\r\n        $scope.selfAssign = () ->\r\n            return if not isEditable()\r\n            assignedUsers = _.clone($model.$modelValue.assigned_users, false)\r\n            assignedUsers.push(currentUserId)\r\n            assignedUsers = _.uniq(assignedUsers)\r\n            save(assignedUsers, currentUserId)\r\n\r\n        deleteAssignedUser = (assignedUserIds) ->\r\n            $scope.loading = true\r\n            transform = $modelTransform.save (item) ->\r\n                item.assigned_users = assignedUserIds\r\n\r\n                # Update as\r\n                if item.assigned_to not in assignedUserIds and assignedUserIds.length > 0\r\n                    item.assigned_to = assignedUserIds[0]\r\n                if assignedUserIds.length == 0\r\n                    item.assigned_to = null\r\n\r\n                return item\r\n\r\n            transform.then () ->\r\n                item = $modelTransform.getObj()\r\n                $attrs.ngModel = item\r\n                $rootscope.$broadcast(\"object:updated\")\r\n            transform.then null, ->\r\n                item.revert()\r\n                $confirm.notify(\"error\")\r\n            transform.finally ->\r\n                $scope.loading = false\r\n\r\n        render = (assignedUserIds) ->\r\n            assignedUsers = _.map(assignedUserIds, (assignedUserId) -> $scope.usersById[assignedUserId])\r\n            $scope.assignedUsers = _.compact(assignedUsers)\r\n            $scope.selfAssigned = _.includes(assignedUserIds, currentUserId)\r\n            $scope.isEditable = isEditable()\r\n\r\n        $scope.$on \"assigned-user:deleted\", (ctx, assignedUserId) ->\r\n            assignedUsersIds = _.clone($model.$modelValue.assigned_users, false)\r\n            assignedUsersIds = _.pull(assignedUsersIds, assignedUserId)\r\n            assignedUsersIds = _.uniq(assignedUsersIds)\r\n            deleteAssignedUser(assignedUsersIds)\r\n\r\n        $scope.$on \"assigned-user:added\", (ctx, assignedUserId) ->\r\n            assignedUsers = _.clone($model.$modelValue.assigned_users, false)\r\n            assignedUsers.push(assignedUserId)\r\n            assignedUsers = _.uniq(assignedUsers)\r\n\r\n            # Save assigned_users and assignedUserId for assign_to legacy attribute\r\n            save(assignedUsers, assignedUserId)\r\n\r\n        $scope.$watch $attrs.ngModel, (item, currentItem) ->\r\n            return if not item?\r\n            render(item.assigned_users)\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        scope: true,\r\n        templateUrl: \"components/ticket-assigned/assigned-users.html\",\r\n        link:link\r\n        require:\"ngModel\"\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\",\r\n\"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\",\r\n\"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass TicketWatchersController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n        \"$rootScope\"\r\n        \"tgLightboxFactory\"\r\n        \"$translate\",\r\n        \"$tgQueueModelTransformation\",\r\n    ]\r\n\r\n    constructor: (@currentUserService, @rootScope, @lightboxFactory, @translate, @modelTransform) ->\r\n        @.user = @currentUserService.getUser()\r\n        @.loading = false\r\n\r\n    openWatchers: ->\r\n        onClose = (watchersIds) => @.save(watchersIds)\r\n\r\n        @lightboxFactory.create(\r\n            'tg-lb-select-user',\r\n            {\r\n                \"class\": \"lightbox lightbox-select-user\",\r\n            },\r\n            {\r\n                \"currentUsers\": @.item.watchers,\r\n                \"activeUsers\": @.activeUsers,\r\n                \"onClose\": onClose,\r\n                \"lbTitle\": @translate.instant(\"COMMON.WATCHERS.ADD\"),\r\n            }\r\n        )\r\n\r\n    getPerms: ->\r\n        return \"\" if !@.item\r\n\r\n        name = @.item._name\r\n\r\n        perms = {\r\n            userstories: 'modify_us',\r\n            issues: 'modify_issue',\r\n            tasks: 'modify_task',\r\n            epics: 'modify_epic'\r\n        }\r\n\r\n        return perms[name]\r\n\r\n    watch: ->\r\n        @.loading = true\r\n        promise = @._watch()\r\n        promise.finally () => @.loading = false\r\n        return promise\r\n\r\n    unwatch: ->\r\n        @.loading = true\r\n        promise = @._unwatch()\r\n        promise.finally () => @.loading = false\r\n        return promise\r\n\r\n    deleteWatcher: (watcherId) ->\r\n        watchersIds = _.filter(@.item.watchers, (x) => x != watcherId)\r\n        @.save(watchersIds)\r\n\r\n    save: (watchersIds) ->\r\n        @.loading = true\r\n        transform = @modelTransform.save (item) ->\r\n            item.watchers = watchersIds\r\n            return item\r\n        transform.then =>\r\n            @rootScope.$broadcast(\"object:updated\")\r\n        transform.finally () => @.loading = false\r\n\r\n    _watch: ->\r\n        @.onWatch()\r\n\r\n    _unwatch: ->\r\n        @.onUnwatch()\r\n\r\nangular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nWatchersDirective = ($rootscope, $confirm, $repo, $modelTransform, $template,\r\n$compile, $translate, $currentUserService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.visibleWatchersCount = 4\r\n        $scope.displayHidden = false\r\n        $scope.isAuthenticated = !!$currentUserService.getUser()\r\n\r\n        isEditable = ->\r\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\r\n\r\n        render = () ->\r\n            watchersIds = _.clone($scope.vm.item?.watchers, false)\r\n            watchers = _.map(watchersIds, (watcherId) -> $scope.usersById[watcherId])\r\n            watchers = _.filter watchers, (it) -> return !!it\r\n            $scope.vm.watchers = _.compact(watchers)\r\n            $scope.isEditable = isEditable()\r\n\r\n        $scope.toggleFold = () ->\r\n            $scope.displayHidden = !$scope.displayHidden\r\n\r\n        $el.on \"click\", \".user-list-single\", (event) ->\r\n            return if not isEditable()\r\n            event.stopPropagation()\r\n            $scope.vm.openWatchers()\r\n\r\n        $el.on \"click\", \".remove-user\", (event) ->\r\n            return if not isEditable()\r\n            event.stopPropagation()\r\n            target = angular.element(event.currentTarget)\r\n            watcherId = target.data(\"watcher-id\")\r\n\r\n            title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\")\r\n            message = $scope.usersById[watcherId].full_name_display\r\n\r\n            $confirm.askOnDelete(title, message).then (askResponse) =>\r\n                askResponse.finish()\r\n                $scope.vm.deleteWatcher(watcherId)\r\n\r\n        $scope.$on \"watcher:added\", (ctx, watcherId) ->\r\n            watchersIds = _.clone($scope.item.watchers, false)\r\n            watchersIds.push(watcherId)\r\n            watchersIds = _.uniq(watchers)\r\n            $scope.vm.save(watchersIds)\r\n\r\n        $scope.$on \"watchers:selected\", (ctx, watchersIds) ->\r\n            $scope.vm.save(watchersIds)\r\n\r\n        $scope.$watch \"vm.item\" , (item) ->\r\n            return if not item\r\n            render()\r\n\r\n        $scope.$on \"$destroy\", ->\r\n            $el.off()\r\n\r\n    return {\r\n        scope: true,\r\n        controller: \"TicketWatchersController\",\r\n        bindToController: {\r\n            item: \"=\",\r\n            onWatch: \"=\",\r\n            onUnwatch: \"=\",\r\n            activeUsers: \"=\"\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\r\n        link: link\r\n    }\r\n\r\nWatchersDirective.$inject = [\r\n    \"$rootScope\"\r\n    \"$tgConfirm\"\r\n    \"$tgRepo\"\r\n    \"$tgQueueModelTransformation\"\r\n    \"$tgTemplate\"\r\n    \"$compile\"\r\n    \"$translate\"\r\n    \"tgCurrentUserService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective)","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntimeout = @.taiga.timeout\r\n\r\nmodule = angular.module(\"taigaComponents\")\r\n\r\ntipsDirective = (tgLoader, $translate) ->\r\n    tips = [\r\n      { contentType: \"icon\", icon: \"icon-project\", message: \"PROJECTS_ORDER\"}\r\n      { contentType: \"icon\", icon: \"icon-upvote\", message: \"VOTING\"}\r\n      { contentType: \"icon\", icon: \"icon-attach\", message: \"ISSUES_TO_SPRINT\"}\r\n      { contentType: \"icon\", icon: \"icon-clock\", message: \"DUE_DATE\"}\r\n      { contentType: \"icon\", icon: \"icon-iocaine\", message: \"IOCAIN\"}\r\n      { contentType: \"icon\", icon: \"icon-blocked-project\", message: \"BLOCKED\"}\r\n      { contentType: \"icon\", icon: \"icon-promote\", message: \"PROMOTE\"}\r\n      { contentType: \"icon\", icon: \"icon-bulk\", message: \"BULK\"}\r\n      { contentType: \"range\", message: \"ZOOM\"}\r\n      { contentType: \"icon\", icon: \"icon-settings\", message: \"CUSTOM_FIELDS\"}\r\n      { contentType: \"arrows\", message: \"SLIDE_ARROWS\"}\r\n    ]\r\n\r\n    randomInt = (size) ->\r\n        return Math.floor(Math.random() * size) + 1\r\n\r\n    link = (scope, el, attrs) ->\r\n        scope.tipLoaded = false\r\n        waitingTimeout = null\r\n\r\n        tgLoader.onStart () ->\r\n            waitingTimeout = timeout 1000, ->\r\n                loadTip()\r\n\r\n        tgLoader.onEnd () ->\r\n            clearTimeout(waitingTimeout)\r\n            scope.tipLoaded = false\r\n\r\n        loadTip = () ->\r\n            scope.tipLoaded = true\r\n            tip = tips[randomInt(tips.length - 1)]\r\n            scope.tip = {\r\n                contentType: tip.contentType\r\n                message: \"TIPS.TIP_#{tip.message}\"\r\n                icon: tip.icon\r\n                color: \"tip-color-#{randomInt(5)}\"\r\n            }\r\n\r\n    return {\r\n        link: link,\r\n        scope: true,\r\n        templateUrl: \"components/tips/tip.html\",\r\n    }\r\n\r\nmodule.directive('tgTips', ['tgLoader', '$translate', tipsDirective])","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTribeButtonDirective = (configService, locationService) ->\r\n    link = (scope, el, attrs) ->\r\n\r\n        scope.vm = {}\r\n        scope.vm.tribeHost = configService.config.tribeHost\r\n        scope.vm.url = \"#{locationService.protocol()}://#{locationService.host()}\"\r\n        if (locationService.protocol() == \"http\" and locationService.port() != 80)\r\n            scope.vm.url = \"#{scope.vm.url}:#{locationService.port()}\"\r\n        else if (locationService.protocol() == \"https\" and locationService.port() != 443)\r\n            scope.vm.url = \"#{scope.vm.url}:#{locationService.port()}\"\r\n\r\n    return {\r\n        scope: {usId: \"=\", projectSlug: \"=\"}\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/tribe-button/tribe-button.html\",\r\n        link: link\r\n    }\r\n\r\nTribeButtonDirective.$inject = [\r\n    \"$tgConfig\", \"$tgLocation\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTribeLinkedDirective = (configService) ->\r\n    link = (scope, el, attrs) ->\r\n\r\n        scope.vm = {}\r\n\r\n        scope.vm.tribeHost = configService.config.tribeHost\r\n\r\n        scope.vm.show = () ->\r\n            scope.vm.open = true\r\n\r\n        scope.vm.hide = (event) ->\r\n            scope.vm.open = false\r\n\r\n    directive = {\r\n        templateUrl: \"components/tribe-button/tribe-linked.html\",\r\n        scope: {\r\n            gigTitle: \"=\",\r\n            gigId: \"=\"\r\n        },\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nTribeLinkedDirective.$inject = [\r\n    \"$tgConfig\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass VoteButtonController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        @.user = @currentUserService.getUser()\r\n        @.loading = false\r\n\r\n    toggleVote: ->\r\n        @.loading = true\r\n\r\n        if not @.item.is_voter\r\n            promise = @.onUpvote()\r\n        else\r\n            promise = @.onDownvote()\r\n\r\n        promise.finally () => @.loading = false\r\n\r\n        return promise\r\n\r\nangular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nVoteButtonDirective = ->\r\n    return {\r\n        scope: {}\r\n        controller: \"VoteButton\",\r\n        bindToController: {\r\n            item: \"=\",\r\n            onUpvote: \"=\",\r\n            onDownvote: \"=\"\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"components/vote-button/vote-button.html\",\r\n    }\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectSwimlanesWipLimitController\r\n    @.$inject = [\r\n        \"$scope\",\r\n        \"$rootScope\",\r\n        \"$tgResources\",\r\n    ]\r\n\r\n    constructor: (@scope, @rootscope, @rs) ->\r\n        @.new_wip_limit = @.status.wip_limit\r\n\r\n    submitSwimlaneNewStatus: () ->\r\n        @scope.displayWipLimitSelector = false\r\n        if (!!@.status.swimlane_userstory_status_id)\r\n            return @rs.swimlanes.wipLimitUpdate(@.status.swimlane_userstory_status_id, @.new_wip_limit).then () =>\r\n                @rootscope.$broadcast(\"swimlane:load\")\r\n        else\r\n            return @rs.userstories.editStatus(@.status.id, @.new_wip_limit).then () =>\r\n                @rootscope.$broadcast(\"project:load\")\r\n\r\nangular.module(\"taigaComponents\").controller(\"ProjectSwimlanesWipLimit\", ProjectSwimlanesWipLimitController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntimeout = @.taiga.timeout\r\ncancelTimeout = @.taiga.cancelTimeout\r\n\r\n#############################################################################\r\n## Swimlane Selector\r\n#############################################################################\r\n\r\nWipLimitSelector = ($timeout) ->\r\n\r\n    link = (scope, el, attrs) ->\r\n\r\n        scope.displayWipLimitSelector = false\r\n\r\n        scope.toggleWipSelectorVisibility = () ->\r\n            scope.displayWipLimitSelector = !scope.displayWipLimitSelector\r\n\r\n    return {\r\n        link: link,\r\n        scope: {}\r\n        templateUrl: \"components/wip-limit-selector/wip-limit-selector.html\",\r\n        controller: \"ProjectSwimlanesWipLimit\",\r\n        bindToController: {\r\n            status: '=',\r\n        }\r\n        controllerAs: \"vm\",\r\n    }\r\n\r\nangular.module('taigaComponents').directive(\"tgWipLimitSelector\", [WipLimitSelector])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCommentEditWysiwyg = (attachmentsFullService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.uploadFiles = (file, cb) ->\r\n            projectId = parseInt($scope.vm.projectId, 10)\r\n            object = parseInt($scope.vm.object, 10)\r\n\r\n            if !projectId\r\n                projectId = parseInt($scope.vm.project.id, 10)\r\n\r\n            return attachmentsFullService.addAttachment(\r\n                projectId,\r\n                object,\r\n                attachmentsFullService.types[$scope.vm.name],\r\n                file,\r\n                true,\r\n                true\r\n            ).then (result) ->\r\n                cb({\r\n                    default: result.getIn(['file', 'url'])\r\n                })\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        template: \"\"\"\r\n            <div>\r\n                <tg-wysiwyg\r\n                    editonly\r\n                    required\r\n                    project=\"vm.project\"\r\n                    content='vm.comment.comment'\r\n                    on-save=\"vm.saveComment(text, cb)\"\r\n                    on-cancel=\"vm.onEditMode({commentId: vm.comment.id})\"\r\n                    on-upload-file='uploadFiles'>\r\n                </tg-wysiwyg>\r\n            </div>\r\n        \"\"\"\r\n    }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCommentWysiwyg = ($modelTransform, $rootscope, attachmentsFullService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.editableDescription = false\r\n\r\n        $scope.saveComment = (description, cb) ->\r\n            $scope.content = ''\r\n            $scope.vm.type.comment = description\r\n\r\n            transform = $modelTransform.save (item) -> return\r\n            transform.then ->\r\n                if $scope.vm.onAddComment\r\n                    $scope.vm.onAddComment()\r\n                $rootscope.$broadcast(\"object:updated\")\r\n            transform.finally(cb)\r\n\r\n        types = {\r\n            epics: \"epic\",\r\n            userstories: \"us\",\r\n            userstory: \"us\",\r\n            issues: \"issue\",\r\n            tasks: \"task\",\r\n            epic: \"epic\",\r\n            us: \"us\"\r\n            issue: \"issue\",\r\n            task: \"task\",\r\n        }\r\n\r\n        $scope.onChange = (markdown) ->\r\n            $scope.vm.type.comment = markdown\r\n\r\n        $scope.uploadFiles = (file, cb) ->\r\n            return attachmentsFullService.addAttachment($scope.vm.project.id, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then (result) ->\r\n                cb({\r\n                    default: result.getIn(['file', 'url'])\r\n                })\r\n\r\n        $scope.content = ''\r\n\r\n        $scope.$watch \"vm.type\", (value) ->\r\n            return if not value\r\n\r\n            $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        template: \"\"\"\r\n            <div>\r\n                <tg-wysiwyg\r\n                    required\r\n                    not-persist\r\n                    project=\"vm.project\"\r\n                    placeholder=\"'COMMENTS.TYPE_NEW_COMMENT '| translate\"\r\n                    storage-key='storageKey'\r\n                    content='content'\r\n                    on-save='saveComment(text, cb)'\r\n                    on-upload-file='uploadFiles'>\r\n                </tg-wysiwyg>\r\n            </div>\r\n        \"\"\"\r\n    }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgCommentWysiwyg\", [\r\n        \"$tgQueueModelTransformation\",\r\n        \"$rootScope\",\r\n        \"tgAttachmentsFullService\",\r\n        CommentWysiwyg])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCustomFieldEditWysiwyg = (attachmentsFullService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        types = {\r\n            epics: \"epic\",\r\n            userstories: \"us\",\r\n            userstory: \"us\",\r\n            issues: \"issue\",\r\n            tasks: \"task\",\r\n            epic: \"epic\",\r\n            us: \"us\"\r\n            issue: \"issue\",\r\n            task: \"task\",\r\n        }\r\n\r\n        $scope.uploadFiles = (file, cb) ->\r\n            return attachmentsFullService.addAttachment($scope.project.id, $scope.ctrl.objectId.toString(), types[$scope.ctrl.type], file).then (result) ->\r\n                cb({\r\n                    default: result.getIn(['file', 'url'])\r\n                })\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        template: \"\"\"\r\n            <tg-wysiwyg\r\n                class=\"custom-field\"\r\n                editonly=\"!!customAttributeValue.value.length\"\r\n                project=\"project\"\r\n                content='customAttributeValue.value'\r\n                on-save=\"saveCustomRichText(text, cb)\"\r\n                on-cancel=\"cancelCustomRichText()\"\r\n                on-upload-file='uploadFiles'>\r\n            </tg-wysiwyg>\r\n        \"\"\"\r\n    }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n# Used in details descriptions\r\nItemWysiwyg = ($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        $scope.editableDescription = false\r\n        $scope.saveDescription = (description, cb) ->\r\n            transform = $modelTransform.save (item) ->\r\n                item.description = description\r\n\r\n                return item\r\n\r\n            transform.then ->\r\n                $confirm.notify(\"success\")\r\n                $rootscope.$broadcast(\"object:updated\")\r\n\r\n            transform.then null, ->\r\n                $confirm.notify(\"error\")\r\n\r\n            transform.finally(cb)\r\n\r\n        types = {\r\n            epics: \"epic\",\r\n            userstories: \"us\",\r\n            userstory: \"us\",\r\n            issues: \"issue\",\r\n            tasks: \"task\",\r\n            epic: \"epic\",\r\n            us: \"us\"\r\n            issue: \"issue\",\r\n            task: \"task\",\r\n        }\r\n\r\n        $scope.uploadFiles = (file, cb) ->\r\n            return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, types[$attrs.type], file).then (result) ->\r\n                cb({\r\n                    default: result.getIn(['file', 'url'])\r\n                })\r\n\r\n        $scope.$watch $attrs.model, (value) ->\r\n            return if not value\r\n            $scope.item = value\r\n            $scope.version = value.version\r\n            $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type\r\n\r\n        $scope.$watch 'project', (project) ->\r\n            return if !project\r\n\r\n            $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) != -1\r\n\r\n    return {\r\n        scope: true,\r\n        link: link,\r\n        template: \"\"\"\r\n            <div>\r\n                <tg-wysiwyg\r\n                    ng-if=\"editableDescription && project\"\r\n                    html-read-mode=\"true\"\r\n                    project=\"project\"\r\n                    placeholder=\"'COMMON.DESCRIPTION.EMPTY '| translate\"\r\n                    version='version'\r\n                    storage-key='storageKey'\r\n                    content='item.description'\r\n                    on-save='saveDescription(text, cb)'\r\n                    on-upload-file='uploadFiles'>\r\n                </tg-wysiwyg>\r\n                <div\r\n                    class=\"wysiwyg\"\r\n                    ng-if=\"!editableDescription && item.description.length\"\r\n                    tg-bind-wysiwyg-html=\"item.description\"></div>\r\n\r\n                <div\r\n                    class=\"wysiwyg no-description\"\r\n                    ng-if=\"!editableDescription && !item.description.length\">\r\n                    {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\r\n                </div>\r\n            </div>\r\n        \"\"\"\r\n    }\r\n\r\nangular.module(\"taigaComponents\")\r\n    .directive(\"tgItemWysiwyg\", [\r\n        \"$tgQueueModelTransformation\",\r\n        \"$rootScope\",\r\n        \"$tgConfirm\",\r\n        \"tgAttachmentsFullService\",\r\n        \"$translate\",\r\n        ItemWysiwyg])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\n# cp -r node_modules/taiga-html-editor/packages/ckeditor5-build-classic/build/translations ../taiga-front/extras\r\n\r\ntaiga = @.taiga\r\n\r\nWysiwyg = ($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, analytics, $location, $attachmentsFullService) ->\r\n    link = ($scope, $el, $attrs) ->\r\n        isEditOnly = !!$attrs.$attr.editonly\r\n        notPersist = !!$attrs.$attr.notPersist\r\n\r\n        if $scope.editonly != undefined\r\n            isEditOnly = $scope.editonly\r\n\r\n        $scope.required = !!$attrs.$attr.required\r\n        $scope.editMode = isEditOnly || false\r\n        $scope.mode = localStorage.getItem('editor-mode') || 'html'\r\n\r\n        if $scope.mode != 'html' && $scope.mode != 'markdown'\r\n            $scope.mode = 'html'\r\n\r\n        $scope.markdown = ''\r\n        $scope.html = ''\r\n        textEditor = null\r\n        pageAttachments = $attachmentsFullService.attachments.toJS()\r\n        editorLinks = []\r\n\r\n\r\n        linksEvents = () ->\r\n            initialPos = null\r\n\r\n            $el.on 'mousedown', '.js-wysiwyg-html', (e) =>\r\n                initialPos = {x: e.clientX, y: e.clientY}\r\n\r\n            $el.on 'click', '.js-wysiwyg-html', (e) =>\r\n                diffX = Math.abs(e.clientX - initialPos.x)\r\n                diffY = Math.abs(e.clientY - initialPos.y)\r\n\r\n                initialPos = null\r\n\r\n                if diffX > 10 || diffY > 10\r\n                    return\r\n\r\n                if e.target.tagName != 'A' && e.target.parentElement.tagName != 'A'\r\n                    $scope.$applyAsync () => $scope.setEditMode(true)\r\n\r\n            editorLinks = textEditor.querySelectorAll('a[target=\"_blank\"]:not(.link-event)')\r\n\r\n            if editorLinks.length\r\n                editorLinks.forEach (link) =>\r\n                    link.classList.add('link-event')\r\n\r\n                    # prevent ckeditor change to edit mode\r\n                    link.addEventListener 'mousedown', (e) =>\r\n                        if !$scope.editMode\r\n                            e.preventDefault()\r\n                            e.stopPropagation()\r\n\r\n                    link.addEventListener 'click', (e) =>\r\n                        if !$scope.editMode\r\n                            window.open(e.currentTarget.getAttribute('href'), '_blank');\r\n\r\n        unwatchContent = $scope.$watch 'content', (content) ->\r\n            if !_.isUndefined(content)\r\n                $scope.outdated = isOutdated()\r\n\r\n                if ($scope.markdown.length || content.length) && $scope.markdown == content\r\n                    return\r\n\r\n                content = getCurrentContent()\r\n\r\n                $scope.markdown = content\r\n\r\n                if tgLoader.open()\r\n                    unwatchLoader = tgLoader.onEnd () ->\r\n                        $scope.$evalAsync () ->\r\n                            create(content)\r\n                            unwatchLoader()\r\n                else\r\n                    create(content)\r\n\r\n                unwatchContent()\r\n\r\n        create = (text) =>\r\n            if textEditor\r\n                return\r\n\r\n            textEditor = document.createElement('tg-text-editor')\r\n            textEditor.projectId = $scope.project.id\r\n            textEditor.projectSlug = $scope.project.slug\r\n            textEditor.placeholder = $scope.placeholder\r\n            setHtmlEditor(text)\r\n            textEditor.mode = $scope.mode\r\n            textEditor.lan = $translate.preferredLanguage()\r\n            textEditor.uploadFunction = $scope.onUploadFile\r\n            textEditor.members = $scope.project.members.map (member) =>\r\n                return Object.assign(member, {\r\n                    fullNameDisplay: member.full_name_display\r\n                })\r\n\r\n            $scope.$applyAsync () => linksEvents()\r\n\r\n            if isDraft()\r\n                $scope.setEditMode(true)\r\n\r\n            textEditor.addEventListener 'modeChanged', (event) =>\r\n                $scope.$evalAsync () =>\r\n                    $scope.mode = event.detail\r\n                    $scope.setEditMode(true)\r\n                    localStorage.setItem('editor-mode', $scope.mode)\r\n\r\n            textEditor.addEventListener 'focusChanged', (event) =>\r\n                if event.detail\r\n                    $scope.$evalAsync () => $scope.setEditMode(true)\r\n\r\n            textEditor.addEventListener 'changed', (event) =>\r\n                if $scope.mode == 'html'\r\n                    $scope.html = event.detail\r\n                else\r\n                    $scope.markdown = event.detail\r\n\r\n                throttleChange()\r\n\r\n\r\n            $el.find('.editor-wrapper')[0].appendChild(textEditor)\r\n\r\n        setHtmlEditor = (markdown) ->\r\n            wysiwygService.refreshAttachmentURLFromMarkdown(markdown).then (markdown) =>\r\n                textEditor.markdown = markdown\r\n\r\n        $scope.setEditMode = (editMode) ->\r\n            $scope.editMode = editMode\r\n\r\n            if editMode\r\n                textEditor.mode = $scope.mode\r\n            else\r\n                textEditor.mode = 'html'\r\n\r\n        $scope.save = (e) ->\r\n            e.preventDefault() if e\r\n\r\n            setHtmlEditor($scope.markdown)\r\n\r\n            return if $scope.required && !$scope.markdown.length\r\n\r\n            $scope.saving  = true\r\n            $scope.outdated = false\r\n\r\n            $scope.onSave({text: $scope.markdown, cb: saveEnd})\r\n\r\n            linksEvents()\r\n\r\n            return\r\n\r\n        $scope.cancel = (e) ->\r\n            e.preventDefault() if e\r\n\r\n            if !isEditOnly\r\n                $scope.setEditMode(false)\r\n\r\n            if notPersist\r\n                clean()\r\n            else\r\n                $scope.markdown = $scope.content\r\n                setHtmlEditor($scope.content || '')\r\n\r\n            discardLocalStorage()\r\n            $scope.outdated = false\r\n\r\n            $scope.onCancel()\r\n\r\n            linksEvents()\r\n\r\n            return\r\n\r\n        clean = () ->\r\n            $scope.markdown = ''\r\n            setHtmlEditor('')\r\n\r\n        saveEnd = () ->\r\n            $scope.saving  = false\r\n\r\n            if !isEditOnly\r\n                $scope.setEditMode(false)\r\n\r\n            if notPersist\r\n                clean()\r\n\r\n            discardLocalStorage()\r\n\r\n            analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1)\r\n\r\n        isOutdated = () ->\r\n            store = $storage.get($scope.storageKey)\r\n\r\n            if store && store.version && store.version != $scope.version\r\n                return true\r\n\r\n            return false\r\n\r\n        isDraft = () ->\r\n            store = $storage.get($scope.storageKey)\r\n\r\n            if store\r\n                return true\r\n\r\n            return false\r\n\r\n        getCurrentContent = () ->\r\n            store = $storage.get($scope.storageKey)\r\n\r\n            if store\r\n                return store.text\r\n\r\n            return $scope.content\r\n\r\n        discardLocalStorage = () ->\r\n            $storage.remove($scope.storageKey)\r\n\r\n        $scope.cancelWithConfirmation = () ->\r\n            if $scope.content == $scope.markdown\r\n                $scope.cancel()\r\n                if document.activeElement.blur\r\n                    document.activeElement.blur()\r\n                document.body.click()\r\n\r\n                return null\r\n\r\n            title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\")\r\n            message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\")\r\n\r\n            $confirm.ask(title, null, message).then (askResponse) ->\r\n                $scope.cancel()\r\n                askResponse.finish()\r\n\r\n        updateMarkdownWithCurrentHtml = () ->\r\n            $scope.markdown = wysiwygService.getMarkdown($scope.html)\r\n\r\n        localSave = (markdown) ->\r\n            if $scope.storageKey\r\n                store = {}\r\n                store.version = $scope.version || 0\r\n                store.text = markdown\r\n                $storage.set($scope.storageKey, store)\r\n\r\n        change = () ->\r\n            if !$scope.editMode\r\n                return\r\n\r\n            if $scope.mode == 'html'\r\n                updateMarkdownWithCurrentHtml()\r\n\r\n            localSave($scope.markdown)\r\n\r\n            $scope.onChange({markdown: $scope.markdown})\r\n\r\n        throttleChange = _.throttle(change, 200)\r\n\r\n    return {\r\n        templateUrl: \"common/components/wysiwyg-toolbar.html\",\r\n        scope: {\r\n            htmlReadMode: '<'\r\n            editonly: '<',\r\n            project: '<',\r\n            placeholder: '<',\r\n            version: '<',\r\n            storageKey: '<',\r\n            content: '<',\r\n            onCancel: '&',\r\n            onSave: '&',\r\n            onUploadFile: '<',\r\n            onChange: '&'\r\n        },\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\r\n    \"$translate\",\r\n    \"$tgConfirm\",\r\n    \"$tgStorage\",\r\n    \"tgWysiwygService\",\r\n    \"animationFrame\",\r\n    \"tgLoader\",\r\n    \"$tgAnalytics\",\r\n    \"$location\",\r\n    \"tgAttachmentsFullService\",\r\n    Wysiwyg\r\n])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass WysiwygService\r\n    @.$inject = [\r\n        \"tgProjectService\",\r\n        \"tgAttachmentsFullService\",\r\n        \"tgAttachmentsService\",\r\n        \"$sce\"\r\n    ]\r\n\r\n    constructor: (@projectService, @attachmentsFullService, @attachmentsService, @sce) ->\r\n        @.projectDataConversion = {}\r\n        # prevent duplicate calls to the same attachment\r\n        @.cache = {}\r\n\r\n    getMarkdown: (html) ->\r\n        projectId = @projectService.project.get('id')\r\n\r\n        if !@.projectDataConversion[projectId]\r\n            @.dataConversion = window.angularDataConversion()\r\n            @.dataConversion.setUp(@projectService.project.get('slug'))\r\n            @.projectDataConversion[projectId] = @.dataConversion\r\n\r\n        return @.projectDataConversion[projectId].toMarkdown(html)\r\n\r\n    getHTML: (text) ->\r\n        return \"\" if !text || !text.length\r\n\r\n        projectId = @projectService.project.get('id')\r\n\r\n        if !@.projectDataConversion[projectId]\r\n            @.dataConversion = window.angularDataConversion()\r\n            @.dataConversion.setUp(@projectService.project.get('slug'))\r\n            @.projectDataConversion[projectId] = @.dataConversion\r\n\r\n        return @.projectDataConversion[projectId].toHtml(text)\r\n\r\n    getAttachmentData: (tokens) ->\r\n        return @attachmentsService.get(tokens[0], tokens[1]).then (response) => response.data.url\r\n\r\n    getCachedAttachment: (tokens) ->\r\n        attachmentId = parseInt(tokens[1], 10)\r\n\r\n        attachments = @attachmentsFullService.attachments.toJS()\r\n        attachment = attachments.find (attachment) => attachment.file.id == attachmentId\r\n\r\n        if attachment\r\n            return Promise.resolve(attachment.file.url)\r\n        else\r\n            cache_key = tokens[0] + tokens[1]\r\n            cached_result = @.cache[cache_key]\r\n\r\n            if cached_result\r\n                return Promise.resolve(cached_result)\r\n            else\r\n                return @.getAttachmentData(tokens).then (url) =>\r\n                    @.cache[cache_key] = url\r\n                    return url\r\n\r\n    relativePaths: (html) ->\r\n        el = document.createElement('html')\r\n\r\n        window._extraValidHtmlElments = {input: true}\r\n        window._extraValidAttrs = {checked: true}\r\n\r\n        el.innerHTML = @sce.getTrustedHtml(html) || ''\r\n\r\n        el.querySelectorAll('a').forEach (link) =>\r\n            href = link.getAttribute('href')\r\n\r\n            if href && !href.startsWith('http') && !href.startsWith('/') && !link.classList.contains('mention')\r\n                currentHref = window.location.href.slice(\r\n                    0,\r\n                    window.location.href.lastIndexOf('/') + 1\r\n                );\r\n\r\n                if !currentHref.endsWith('/')\r\n                    currentHref = currentHref + '/'\r\n\r\n                newHref = currentHref + link.getAttribute('href')\r\n                link.removeAttribute('rel')\r\n                link.removeAttribute('target')\r\n\r\n                link.setAttribute('href', newHref)\r\n\r\n            if href.startsWith('project') && link.classList.contains('mention')\r\n                link.removeAttribute('rel')\r\n                link.removeAttribute('target')\r\n\r\n        return el.innerHTML\r\n\r\n    refreshAttachmentURLFromMarkdown: (markdown) ->\r\n        html = @.getHTML(markdown)\r\n\r\n        return @.refreshAttachmentURL(html).then (html) =>\r\n            return @.getMarkdown(html)\r\n\r\n    refreshAttachmentURL: (html) ->\r\n        el = document.createElement('html')\r\n\r\n        window._extraValidHtmlElments = {input: true}\r\n        window._extraValidAttrs = {checked: true}\r\n\r\n        el.innerHTML = @sce.getTrustedHtml(html) || ''\r\n        regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/\r\n\r\n        links = {\r\n            \"elements\": el.querySelectorAll('a'),\r\n            \"attr\": \"href\",\r\n        }\r\n        images = {\r\n            \"elements\": el.querySelectorAll('img'),\r\n            \"attr\": \"src\",\r\n        }\r\n\r\n        promises = []\r\n        _.map [links, images], (tag) =>\r\n            _.map tag.elements, (e) =>\r\n                attrValue = e.getAttribute(tag.attr)\r\n\r\n                if attrValue && attrValue.indexOf && attrValue.indexOf('#_taiga-refresh=') != -1\r\n                    match = attrValue.match(regex)\r\n                    if match && match.length == 2\r\n                        tokens = match[1].split(\":\")\r\n\r\n                        promise = @.getCachedAttachment(tokens)\r\n                        .then (url) =>\r\n                            e.setAttribute(tag.attr, url)\r\n                        .catch () =>\r\n                            console.warn('attachment ref not found', attrValue)\r\n\r\n                        promises.push(promise)\r\n\r\n        Promise.all(promises).then ->\r\n            return el.innerHTML\r\n\r\nangular.module(\"taigaComponents\")\r\n    .service(\"tgWysiwygService\", WysiwygService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DiscoverHomeOrderByController\r\n    @.$inject = [\r\n        '$translate'\r\n    ]\r\n\r\n    constructor: (@translate) ->\r\n        @.is_open = false\r\n\r\n        @.texts = {\r\n            week: @translate.instant('DISCOVER.FILTERS.WEEK'),\r\n            month: @translate.instant('DISCOVER.FILTERS.MONTH'),\r\n            year: @translate.instant('DISCOVER.FILTERS.YEAR'),\r\n            all: @translate.instant('DISCOVER.FILTERS.ALL_TIME')\r\n        }\r\n\r\n    currentText: () ->\r\n        return @.texts[@.currentOrderBy]\r\n\r\n    open: () ->\r\n        @.is_open = true\r\n\r\n    close: () ->\r\n        @.is_open = false\r\n\r\n    orderBy: (type) ->\r\n        @.currentOrderBy = type\r\n        @.is_open = false\r\n        @.onChange({orderBy: @.currentOrderBy})\r\n\r\nangular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDiscoverHomeOrderByDirective = () ->\r\n    link = (scope, el, attrs) ->\r\n\r\n    return {\r\n        controller: \"DiscoverHomeOrderBy\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\r\n        scope: {\r\n            currentOrderBy: \"=orderBy\",\r\n            onChange: \"&\"\r\n        },\r\n        link: link\r\n    }\r\n\r\nDiscoverHomeOrderByDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DiscoverSearchBarController\r\n    @.$inject = [\r\n        'tgDiscoverProjectsService'\r\n    ]\r\n\r\n    constructor: (@discoverProjectsService) ->\r\n        taiga.defineImmutableProperty @, 'projects', () => return @discoverProjectsService.projectsCount\r\n\r\n        @discoverProjectsService.fetchStats()\r\n\r\n    selectFilter: (filter) ->\r\n        @.onChange({filter: filter, q: @.q})\r\n\r\n    submitFilter: ->\r\n        @.onChange({filter: @.filter, q: @.q})\r\n\r\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDiscoverSearchBarDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n\r\n    return {\r\n        controller: \"DiscoverSearchBar\",\r\n        controllerAs: \"vm\"\r\n        templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\r\n        bindToController: true,\r\n        scope: {\r\n            q: \"=\",\r\n            filter: \"=\",\r\n            onChange: \"&\"\r\n        },\r\n        compile: (element, attrs) ->\r\n            if !attrs.q\r\n                attrs.q = ''\r\n        link: link\r\n    }\r\n\r\nDiscoverSearchBarDirective.$inject = []\r\n\r\nangular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DiscoverSearchListHeaderController\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n        @.like_is_open = @.orderBy.indexOf('-total_fans') == 0\r\n        @.activity_is_open = @.orderBy.indexOf('-total_activity') == 0\r\n\r\n    openLike: () ->\r\n        @.like_is_open = true\r\n        @.activity_is_open = false\r\n\r\n        @.setOrderBy('-total_fans_last_week')\r\n\r\n    openActivity: () ->\r\n        @.activity_is_open = true\r\n        @.like_is_open = false\r\n\r\n        @.setOrderBy('-total_activity_last_week')\r\n\r\n    setOrderBy: (type = '') ->\r\n        if !type\r\n            @.like_is_open = false\r\n            @.activity_is_open = false\r\n\r\n        @.onChange({orderBy: type})\r\n\r\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDiscoverSearchListHeaderDirective = () ->\r\n    link = (scope, el, attrs) ->\r\n\r\n    return {\r\n        controller: \"DiscoverSearchListHeader\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\r\n        scope: {\r\n            onChange: \"&\",\r\n            orderBy: \"=\"\r\n        },\r\n        link: link\r\n    }\r\n\r\nDiscoverSearchListHeaderDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass FeaturedProjectsController\r\n    @.$inject = [\r\n        \"tgDiscoverProjectsService\"\r\n    ]\r\n\r\n    constructor: (@discoverProjectsService) ->\r\n        taiga.defineImmutableProperty @, \"featured\", () => return @discoverProjectsService.featured\r\n\r\n        @discoverProjectsService.fetchFeatured()\r\n\r\nangular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nFeaturedProjectsDirective = () ->\r\n    link = (scope, el, attrs) ->\r\n\r\n    return {\r\n        controller: \"FeaturedProjects\"\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"discover/components/featured-projects/featured-projects.html\",\r\n        scope: {},\r\n        link: link\r\n    }\r\n\r\nFeaturedProjectsDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nHighlightedDirective = () ->\r\n    return {\r\n        templateUrl: \"discover/components/highlighted/highlighted.html\",\r\n        scope: {\r\n            loading: \"=\",\r\n            highlighted: \"=\",\r\n            orderBy: \"=\"\r\n        }\r\n    }\r\n\r\nHighlightedDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass MostActiveController\r\n    @.$inject = [\r\n        \"tgDiscoverProjectsService\"\r\n    ]\r\n\r\n    constructor: (@discoverProjectsService) ->\r\n        taiga.defineImmutableProperty @, \"highlighted\", () => return @discoverProjectsService.mostActive\r\n\r\n        @.currentOrderBy = 'year'\r\n        @.order_by = @.getOrderBy()\r\n\r\n    fetch: () ->\r\n        @.loading = true\r\n        @.order_by = @.getOrderBy()\r\n\r\n        return @discoverProjectsService.fetchMostActive({order_by: @.order_by}).then () =>\r\n            @.loading = false\r\n\r\n    orderBy: (type) ->\r\n        @.currentOrderBy = type\r\n\r\n        @.fetch()\r\n\r\n    getOrderBy: (type) ->\r\n        if @.currentOrderBy == 'all'\r\n            return '-total_activity'\r\n        else\r\n            return '-total_activity_last_' + @.currentOrderBy\r\n\r\nangular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nMostActiveDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl.fetch()\r\n\r\n    return {\r\n        controller: \"MostActive\"\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"discover/components/most-active/most-active.html\",\r\n        scope: {},\r\n        link: link\r\n    }\r\n\r\nMostActiveDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass MostLikedController\r\n    @.$inject = [\r\n        \"tgDiscoverProjectsService\"\r\n    ]\r\n\r\n    constructor: (@discoverProjectsService) ->\r\n        taiga.defineImmutableProperty @, \"highlighted\", () => return @discoverProjectsService.mostLiked\r\n\r\n        @.currentOrderBy = 'year'\r\n        @.order_by = @.getOrderBy()\r\n\r\n    fetch: () ->\r\n        @.loading = true\r\n        @.order_by = @.getOrderBy()\r\n\r\n        @discoverProjectsService.fetchMostLiked({order_by: @.order_by}).then () =>\r\n            @.loading = false\r\n\r\n    orderBy: (type) ->\r\n        @.currentOrderBy = type\r\n\r\n        @.fetch()\r\n\r\n    getOrderBy: () ->\r\n        if @.currentOrderBy == 'all'\r\n            return '-total_fans'\r\n        else\r\n            return '-total_fans_last_' + @.currentOrderBy\r\n\r\nangular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nMostLikedDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl.fetch()\r\n\r\n    return {\r\n        controller: \"MostLiked\"\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"discover/components/most-liked/most-liked.html\",\r\n        scope: {},\r\n        link: link\r\n    }\r\n\r\nMostLikedDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DiscoverHomeController\r\n    @.$inject = [\r\n        '$tgLocation',\r\n        '$tgNavUrls',\r\n        'tgAppMetaService',\r\n        '$translate'\r\n    ]\r\n\r\n    constructor: (@location, @navUrls, @appMetaService, @translate) ->\r\n        title = @translate.instant(\"DISCOVER.PAGE_TITLE\")\r\n        description = @translate.instant(\"DISCOVER.PAGE_DESCRIPTION\")\r\n        @appMetaService.setAll(title, description)\r\n\r\n    onSubmit: (q) ->\r\n        url = @navUrls.resolve('discover-search')\r\n\r\n        @location.search('text', q).path(url)\r\n\r\nangular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DiscoverSearchController\r\n    @.$inject = [\r\n        '$routeParams',\r\n        'tgDiscoverProjectsService',\r\n        '$route',\r\n        '$tgLocation',\r\n        '$tgAnalytics',\r\n        'tgAppMetaService',\r\n        '$translate'\r\n    ]\r\n\r\n    constructor: (@routeParams, @discoverProjectsService, @route, @location, @analytics, @appMetaService, @translate) ->\r\n        @.page = 1\r\n\r\n        taiga.defineImmutableProperty @, \"searchResult\", () => return @discoverProjectsService.searchResult\r\n        taiga.defineImmutableProperty @, \"nextSearchPage\", () => return @discoverProjectsService.nextSearchPage\r\n\r\n        @.q = @routeParams.text\r\n        @.filter = @routeParams.filter || 'all'\r\n        @.orderBy = @routeParams['order_by'] || ''\r\n\r\n        @.loadingGlobal = false\r\n        @.loadingList = false\r\n        @.loadingPagination = false\r\n\r\n        title = @translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\")\r\n        description = @translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\")\r\n        @appMetaService.setAll(title, description)\r\n        @analytics.trackPage(@location.url(), \"Discover Search\")\r\n\r\n    fetch: () ->\r\n        @.page = 1\r\n\r\n        @discoverProjectsService.resetSearchList()\r\n\r\n        return @.search()\r\n\r\n    fetchByGlobalSearch: () ->\r\n        return if @.loadingGlobal\r\n\r\n        @.loadingGlobal = true\r\n\r\n        @.fetch().then () => @.loadingGlobal = false\r\n\r\n    fetchByOrderBy: () ->\r\n        return if @.loadingList\r\n\r\n        @.loadingList = true\r\n\r\n        @.fetch().then () => @.loadingList = false\r\n\r\n    showMore: () ->\r\n        return if @.loadingPagination\r\n\r\n        @.loadingPagination = true\r\n\r\n        @.page++\r\n\r\n        return @.search().then () => @.loadingPagination = false\r\n\r\n    search: () ->\r\n        filter = @.getFilter()\r\n\r\n        params = {\r\n            page: @.page,\r\n            q: @.q,\r\n            order_by: @.orderBy\r\n        }\r\n\r\n        _.assign(params, filter)\r\n\r\n        return @discoverProjectsService.fetchSearch(params)\r\n\r\n    getFilter: () ->\r\n        if @.filter == 'people'\r\n            return {is_looking_for_people: true}\r\n        else if @.filter == 'scrum'\r\n            return {is_backlog_activated: true}\r\n        else if @.filter == 'kanban'\r\n            return {is_kanban_activated: true}\r\n\r\n        return {}\r\n\r\n    onChangeFilter: (filter, q) ->\r\n        @.filter = filter\r\n        @.q = q\r\n\r\n        @route.updateParams({\r\n            filter: @.filter,\r\n            text: @.q\r\n        })\r\n        @analytics.trackPage(@location.url(), \"Discover Search\")\r\n\r\n        @.fetchByGlobalSearch()\r\n\r\n    onChangeOrder: (orderBy) ->\r\n        @.orderBy = orderBy\r\n\r\n        @route.updateParams({\r\n            order_by: orderBy\r\n        })\r\n        @analytics.trackPage(@location.url(), \"Discover Search\")\r\n\r\n        @.fetchByOrderBy()\r\n\r\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDiscoverSearchDirective = () ->\r\n    link = (scope, element, attrs, ctrl) ->\r\n        ctrl.fetch()\r\n\r\n    return {\r\n        controller: \"DiscoverSearch\",\r\n        controllerAs: \"vm\"\r\n        link: link\r\n    }\r\n\r\nDiscoverSearchDirective.$inject = []\r\n\r\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass DiscoverProjectsService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgResources\",\r\n        \"tgProjectsService\"\r\n    ]\r\n\r\n    _discoverParams = {\r\n        discover_mode: true\r\n    }\r\n\r\n    constructor: (@rs, @projectsService) ->\r\n        @._mostLiked = Immutable.List()\r\n        @._mostActive = Immutable.List()\r\n        @._featured = Immutable.List()\r\n        @._searchResult = Immutable.List()\r\n        @._projectsCount = 0\r\n\r\n        @.decorate = @projectsService._decorate.bind(@projectsService)\r\n\r\n        taiga.defineImmutableProperty @, \"mostLiked\", () => return @._mostLiked\r\n        taiga.defineImmutableProperty @, \"mostActive\", () => return @._mostActive\r\n        taiga.defineImmutableProperty @, \"featured\", () => return @._featured\r\n        taiga.defineImmutableProperty @, \"searchResult\", () => return @._searchResult\r\n        taiga.defineImmutableProperty @, \"nextSearchPage\", () => return @._nextSearchPage\r\n        taiga.defineImmutableProperty @, \"projectsCount\", () => return @._projectsCount\r\n\r\n    fetchMostLiked: (params) ->\r\n        _params = _.extend({}, _discoverParams, params)\r\n        return @rs.projects.getProjects(_params, false)\r\n            .then (result) =>\r\n                data = result.data.slice(0, 4)\r\n\r\n                projects = Immutable.fromJS(data)\r\n                projects = projects.map(@.decorate)\r\n\r\n                @._mostLiked = projects\r\n\r\n    fetchMostActive: (params) ->\r\n        _params = _.extend({}, _discoverParams, params)\r\n        return @rs.projects.getProjects(_params, false)\r\n            .then (result) =>\r\n                data = result.data.slice(0, 4)\r\n\r\n                projects = Immutable.fromJS(data)\r\n                projects = projects.map(@.decorate)\r\n\r\n                @._mostActive = projects\r\n\r\n    fetchFeatured: () ->\r\n        _params = _.extend({}, _discoverParams)\r\n        _params.is_featured = true\r\n\r\n        return @rs.projects.getProjects(_params, false)\r\n            .then (result) =>\r\n                data = result.data.slice(0, 4)\r\n\r\n                projects = Immutable.fromJS(data)\r\n                projects = projects.map(@.decorate)\r\n\r\n                @._featured = projects\r\n\r\n    resetSearchList: () ->\r\n        @._searchResult = Immutable.List()\r\n\r\n    fetchStats: () ->\r\n        return @rs.stats.discover().then (discover) =>\r\n            @._projectsCount = discover.getIn(['projects', 'total'])\r\n\r\n    fetchSearch: (params) ->\r\n        _params = _.extend({}, _discoverParams, params)\r\n        return @rs.projects.getProjects(_params)\r\n            .then (result) =>\r\n                @._nextSearchPage = !!result.headers('X-Pagination-Next')\r\n\r\n                projects = Immutable.fromJS(result.data)\r\n                projects = projects.map(@.decorate)\r\n\r\n                @._searchResult = @._searchResult.concat(projects)\r\n\r\nangular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ntrim = taiga.trim\r\ngetRandomDefaultColor = taiga.getRandomDefaultColor\r\n\r\n\r\nclass CreateEpicController\r\n    @.$inject = [\r\n        \"$tgConfirm\"\r\n        \"tgProjectService\",\r\n        \"tgEpicsService\",\r\n        \"$tgAnalytics\"\r\n    ]\r\n\r\n    constructor: (@confirm, @projectService, @epicsService, @analytics) ->\r\n        # NOTE: To use Checksley setFormErrors() and validateForm()\r\n        #       are defined in the directive.\r\n\r\n        # NOTE: We use project as no inmutable object to make\r\n        #       the code compatible with the old code\r\n        @.project = @projectService.project.toJS()\r\n\r\n        @.newEpic = {\r\n            color: getRandomDefaultColor()\r\n            status: @.project.default_epic_status\r\n            tags: []\r\n        }\r\n        @.attachments = Immutable.List()\r\n\r\n        @.loading = false\r\n\r\n    createEpic: () ->\r\n        return if not @.validateForm()\r\n\r\n        @.loading = true\r\n\r\n        @epicsService.createEpic(@.newEpic, @.attachments)\r\n            .then (response) => # On success\r\n                @analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1)\r\n                @.onCreateEpic()\r\n                @.loading = false\r\n            .catch (response) => # On error\r\n                @.loading = false\r\n                @.setFormErrors(response.data)\r\n                if response.data._error_message\r\n                    @confirm.notify(\"error\", response.data._error_message)\r\n\r\n    # Color selector\r\n    selectColor: (color) ->\r\n        @.newEpic.color = color\r\n\r\n    # Tags\r\n    addTag: (name, color) ->\r\n        name = trim(name.toLowerCase())\r\n\r\n        if not _.find(@.newEpic.tags, (it) -> it[0] == name)\r\n            @.newEpic.tags.push([name, color])\r\n\r\n    deleteTag: (tag) ->\r\n        _.remove @.newEpic.tags, (it) -> it[0] == tag[0]\r\n\r\n    # Attachments\r\n    addAttachment: (attachment) ->\r\n        @.attachments.push(attachment)\r\n\r\nangular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCreateEpicDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        form = el.find(\"form\").checksley()\r\n\r\n        ctrl.validateForm = =>\r\n            return form.validate()\r\n\r\n        ctrl.setFormErrors = (errors) =>\r\n            form.setErrors(errors)\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"epics/create-epic/create-epic.html\",\r\n        controller: \"CreateEpicCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            onCreateEpic: '&'\r\n        },\r\n        scope: {}\r\n    }\r\n\r\nangular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass EpicRowController\r\n    @.$inject = [\r\n        \"$tgConfirm\",\r\n        \"tgProjectService\",\r\n        \"tgEpicsService\"\r\n    ]\r\n\r\n    constructor: (@confirm, @projectService, @epicsService) ->\r\n        @.displayUserStories = false\r\n        @.displayAssignedTo = false\r\n        @.displayStatusList = false\r\n        @.loadingStatus = false\r\n\r\n        # NOTE: We use project as no inmutable object to make\r\n        #       the code compatible with the old code\r\n        @.project = @projectService.project.toJS()\r\n\r\n        @._calculateProgressBar()\r\n\r\n    _calculateProgressBar: () ->\r\n        if @.epic.getIn(['status_extra_info', 'is_closed']) == true\r\n            @.percentage = \"100%\"\r\n        else\r\n            progress = @.epic.getIn(['user_stories_counts', 'progress'])\r\n            total = @.epic.getIn(['user_stories_counts', 'total'])\r\n            if total == 0\r\n                @.percentage = \"0%\"\r\n            else\r\n                @.percentage = \"#{progress * 100 / total}%\"\r\n\r\n    canEditEpics: () ->\r\n        return @projectService.hasPermission(\"modify_epic\")\r\n\r\n    toggleUserStoryList: () ->\r\n        if !@.displayUserStories\r\n            @epicsService.listRelatedUserStories(@.epic)\r\n                .then (userStories) =>\r\n                    @.epicStories = userStories\r\n                    @.displayUserStories = true\r\n                .catch =>\r\n                    @confirm.notify('error')\r\n        else\r\n            @.displayUserStories = false\r\n\r\n    updateStatus: (statusId) ->\r\n        @.displayStatusList = false\r\n        @.loadingStatus = true\r\n        return @epicsService.updateEpicStatus(@.epic, statusId)\r\n            .catch () =>\r\n                @confirm.notify('error')\r\n            .finally () =>\r\n                @.loadingStatus = false\r\n\r\n    updateAssignedTo: (member) ->\r\n        @.assignLoader = true\r\n        return @epicsService.updateEpicAssignedTo(@.epic, member?.id or null)\r\n            .catch () =>\r\n                @confirm.notify('error')\r\n            .then () =>\r\n                @.assignLoader = false\r\n\r\nangular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nEpicRowDirective = () ->\r\n    return {\r\n        templateUrl:\"epics/dashboard/epic-row/epic-row.html\",\r\n        controller: \"EpicRowCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            epic: '=',\r\n            options: '='\r\n        }\r\n    }\r\n\r\nangular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\n\r\nclass EpicsDashboardController\r\n    @.$inject = [\r\n        \"$routeParams\",\r\n        \"tgErrorHandlingService\",\r\n        \"tgLightboxFactory\",\r\n        \"lightboxService\",\r\n        \"$tgConfirm\",\r\n        \"tgProjectService\",\r\n        \"tgEpicsService\",\r\n        \"tgAppMetaService\",\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@params, @errorHandlingService, @lightboxFactory, @lightboxService,\r\n                  @confirm, @projectService, @epicsService, @appMetaService, @translate) ->\r\n\r\n        @.sectionName = \"EPICS.SECTION_NAME\"\r\n\r\n        taiga.defineImmutableProperty @, 'project', () => return @projectService.project\r\n        taiga.defineImmutableProperty @, 'epics', () => return @epicsService.epics\r\n\r\n        @appMetaService.setfn @._setMeta.bind(this)\r\n\r\n    _setMeta: () ->\r\n        return null if !@.project\r\n\r\n        ctx = {\r\n            projectName: @.project.get(\"name\")\r\n            projectDescription: @.project.get(\"description\")\r\n        }\r\n\r\n        return {\r\n            title: @translate.instant(\"EPICS.PAGE_TITLE\", ctx)\r\n            description: @translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\r\n        }\r\n\r\n    loadInitialData: () ->\r\n        @epicsService.clear()\r\n        return @projectService.setProjectBySlug(@params.pslug)\r\n            .then () =>\r\n                if not @projectService.isEpicsDashboardEnabled()\r\n                    return @errorHandlingService.notFound()\r\n                if not @projectService.hasPermission(\"view_epics\")\r\n                    return @errorHandlingService.permissionDenied()\r\n\r\n                return @epicsService.fetchEpics()\r\n\r\n    canCreateEpics: () ->\r\n        return @projectService.hasPermission(\"add_epic\")\r\n\r\n    onCreateEpic: () ->\r\n        onCreateEpic =  () =>\r\n            @lightboxService.closeAll()\r\n            @confirm.notify(\"success\")\r\n            return # To prevent error https://docs.angularjs.org/error/$parse/isecdom?p0=onCreateEpic()\r\n\r\n        @lightboxFactory.create('tg-create-epic', {\r\n            \"class\": \"lightbox lightbox-create-epic open\"\r\n            \"on-create-epic\": \"onCreateEpic()\"\r\n        }, {\r\n            \"onCreateEpic\": onCreateEpic.bind(this)\r\n        })\r\n\r\nangular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nEpicsSortableDirective = ($parse, projectService) ->\r\n    link = (scope, el, attrs) ->\r\n        return if not projectService.hasPermission(\"modify_epic\")\r\n\r\n        callback = $parse(attrs.tgEpicsSortable)\r\n\r\n        drake = dragula([el[0]], {\r\n            copySortSource: false\r\n            copy: false\r\n            mirrorContainer: el[0]\r\n            moves: (item) ->\r\n                return $(item).is('div.epics-table-body-row')\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n\r\n            epic = itemEl.scope().epic\r\n            newIndex = itemEl.index()\r\n\r\n            scope.$apply () ->\r\n                callback(scope, {epic: epic, newIndex: newIndex})\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n        scope.$on \"$destroy\", ->\r\n            el.off()\r\n            drake.destroy()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nEpicsSortableDirective.$inject = [\r\n    \"$parse\",\r\n    \"tgProjectService\"\r\n]\r\n\r\nangular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ngenerateHash = @.taiga.generateHash\r\n\r\nclass EpicsTableController\r\n    @.$inject = [\r\n        \"$tgConfirm\",\r\n        \"tgEpicsService\",\r\n        \"$timeout\",\r\n        \"$tgStorage\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@confirm, @epicsService, @timeout, @storage, @projectService) ->\r\n        @.hash = generateHash([@projectService.project.get('id'), 'epics'])\r\n        @.displayOptions = false\r\n        @.displayVotes = true\r\n        @.options = @storage.get(@.hash, {\r\n            votes: true,\r\n            name: true,\r\n            project: true,\r\n            sprint: true,\r\n            assigned: true,\r\n            status: true,\r\n            progress: true,\r\n            closed: true,\r\n            closed_us: true,\r\n        })\r\n\r\n        taiga.defineImmutableProperty @, 'epics', () => return @epicsService.epics\r\n        taiga.defineImmutableProperty @, 'disabledEpicsPagination', () => return @epicsService._disablePagination\r\n        taiga.defineImmutableProperty @, 'loadingEpics', () => return @epicsService._loadingEpics\r\n\r\n    toggleEpicTableOptions: () ->\r\n        @.displayOptions = !@.displayOptions\r\n\r\n    reorderEpic: (epic, newIndex) ->\r\n        if epic.get('epics_order') == newIndex\r\n            return null\r\n\r\n        @epicsService.reorderEpic(epic, newIndex)\r\n            .then null, () => # on error\r\n                @confirm.notify(\"error\")\r\n\r\n    nextPage: () ->\r\n        @epicsService.nextPage()\r\n\r\n    hoverEpicTableOption: () ->\r\n        if @.timer\r\n            @timeout.cancel(@.timer)\r\n\r\n    hideEpicTableOption: () ->\r\n        return @.timer = @timeout (=> @.displayOptions = false), 400\r\n\r\n    updateViewOptions: () ->\r\n        @storage.set(@.hash, @.options)\r\n\r\nangular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nEpicsTableDirective = () ->\r\n    return {\r\n        templateUrl:\"epics/dashboard/epics-table/epics-table.html\",\r\n        controller: \"EpicsTableCtrl\",\r\n        controllerAs: \"vm\",\r\n        scope: {}\r\n    }\r\n\r\n\r\nangular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaEpics\")\r\n\r\nclass StoryRowController\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n        @._calculateProgressBar()\r\n\r\n    _calculateProgressBar: () ->\r\n        if @.story.get('is_closed') == true\r\n            @.percentage = \"100%\"\r\n        else\r\n            totalTasks = @.story.get('tasks').size\r\n            totalTasksCompleted = @.story.get('tasks').filter((it) -> it.get(\"is_closed\")).size\r\n            if totalTasks == 0\r\n                @.percentage = \"0%\"\r\n            else\r\n                @.percentage = \"#{totalTasksCompleted * 100 / totalTasks}%\"\r\n\r\nmodule.controller(\"StoryRowCtrl\", StoryRowController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\n\r\nStoryRowDirective = () ->\r\n    return {\r\n        templateUrl:\"epics/dashboard/story-row/story-row.html\",\r\n        controller: \"StoryRowCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            story: '=',\r\n            options: '='\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgStoryRow\", StoryRowDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass EpicsService\r\n    @.$inject = [\r\n        'tgProjectService',\r\n        'tgAttachmentsService'\r\n        'tgResources',\r\n        'tgXhrErrorService',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (@projectService, @attachmentsService, @resources, @xhrError, @q) ->\r\n        @.clear()\r\n\r\n        taiga.defineImmutableProperty @, 'epics', () => return @._epics\r\n\r\n    clear: () ->\r\n        @._loadingEpics = false\r\n        @._disablePagination = false\r\n        @._page = 1\r\n        @._epics = Immutable.List()\r\n\r\n    fetchEpics: (reset = false) ->\r\n        @._loadingEpics = true\r\n        @._disablePagination = true\r\n\r\n        return @resources.epics.list(@projectService.project.get('id'), @._page)\r\n            .then (result) =>\r\n                if reset\r\n                    @.clear()\r\n                    @._epics = result.list\r\n                else\r\n                    @._epics = @._epics.concat(result.list)\r\n\r\n                @._loadingEpics = false\r\n\r\n                @._disablePagination = !result.headers('x-pagination-next')\r\n            .catch (xhr) =>\r\n                @xhrError.response(xhr)\r\n\r\n    nextPage: () ->\r\n        @._page++\r\n\r\n        @.fetchEpics()\r\n\r\n    listRelatedUserStories: (epic) ->\r\n        return @resources.userstories.listInEpic(epic.get('id'))\r\n\r\n    createEpic: (epicData, attachments, projectId) ->\r\n        if projectId\r\n            epicData.project = projectId\r\n        else\r\n            epicData.project = @projectService.project.get('id')\r\n\r\n        return @resources.epics.post(epicData)\r\n            .then (epic) =>\r\n                if !attachments\r\n                    return epic\r\n                else\r\n                    promises = _.map attachments.toJS(), (attachment) =>\r\n                        @attachmentsService.upload(\r\n                            attachment.file, epic.get('id'), epic.get('project'), 'epic')\r\n\r\n                    @q.all(promises).then(@.fetchEpics.bind(this, true))\r\n\r\n\r\n    reorderEpic: (epic, newIndex) ->\r\n        orderList = {}\r\n        @._epics.forEach (it) ->\r\n            orderList[it.get('id')] = it.get('epics_order')\r\n\r\n        withoutMoved = @.epics.filter (it) => it.get('id') != epic.get('id')\r\n        beforeDestination = withoutMoved.slice(0, newIndex)\r\n        afterDestination = withoutMoved.slice(newIndex)\r\n\r\n        previous = beforeDestination.last()\r\n        newOrder = if !previous then 0 else previous.get('epics_order') + 1\r\n\r\n        orderList[epic.get('id')] = newOrder\r\n\r\n        previousWithTheSameOrder = beforeDestination.filter (it) =>\r\n            it.get('epics_order') == previous.get('epics_order')\r\n\r\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) =>\r\n            [it.get('id'), it.get('epics_order')]\r\n        ).toJS()\r\n\r\n        afterDestination.forEach (it) -> orderList[it.get('id')] = it.get('epics_order') + 1\r\n\r\n        @._epics = @._epics.map (it) -> it.set('epics_order', orderList[it.get('id')])\r\n        @._epics = @._epics.sortBy (it) -> it.get('epics_order')\r\n\r\n        data = {\r\n            epics_order: newOrder,\r\n            version: epic.get('version')\r\n        }\r\n\r\n        return @resources.epics.reorder(epic.get('id'), data, setOrders).then (newEpic) =>\r\n            @._epics = @._epics.map (it) ->\r\n                if it.get('id') == newEpic.get('id')\r\n                    return newEpic\r\n\r\n                return it\r\n\r\n    reorderRelatedUserstory: (epic, epicUserstories, userstory, newIndex) ->\r\n        withoutMoved = epicUserstories.filter (it) => it.get('id') != userstory.get('id')\r\n        beforeDestination = withoutMoved.slice(0, newIndex)\r\n\r\n        previous = beforeDestination.last()\r\n        newOrder = if !previous then 0 else previous.get('epic_order') + 1\r\n\r\n        previousWithTheSameOrder = beforeDestination.filter (it) =>\r\n            it.get('epic_order') == previous.get('epic_order')\r\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) =>\r\n            [it.get('id'), it.get('epic_order')]\r\n        ).toJS()\r\n\r\n        data = {\r\n            order: newOrder\r\n        }\r\n        epicId = epic.get('id')\r\n        userstoryId = userstory.get('id')\r\n        return @resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders)\r\n            .then () =>\r\n                return @.listRelatedUserStories(epic)\r\n\r\n    replaceEpic: (epic) ->\r\n        @._epics = @._epics.map (it) ->\r\n            if it.get('id') == epic.get('id')\r\n                return epic\r\n\r\n            return it\r\n\r\n    updateEpicStatus: (epic, statusId) ->\r\n        data = {\r\n            status: statusId,\r\n            version: epic.get('version')\r\n        }\r\n\r\n        return @resources.epics.patch(epic.get('id'), data)\r\n            .then(@.replaceEpic.bind(this))\r\n\r\n    updateEpicAssignedTo: (epic, userId) ->\r\n        data = {\r\n            assigned_to: userId,\r\n            version: epic.get('version')\r\n        }\r\n\r\n        return @resources.epics.patch(epic.get('id'), data)\r\n            .then(@.replaceEpic.bind(this))\r\n\r\nangular.module('taigaEpics').service('tgEpicsService', EpicsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaEpics\")\r\n\r\nclass RelatedUserStoriesController\r\n    @.$inject = [\r\n        \"tgProjectService\",\r\n        \"tgEpicsService\"\r\n    ]\r\n\r\n    constructor: (@projectService, @epicsService) ->\r\n        @.sectionName = \"Epics\"\r\n        @.showCreateRelatedUserstoriesLightbox = false\r\n\r\n    showRelatedUserStoriesSection: () ->\r\n        return @projectService.hasPermission(\"view_epics\") or @.userstories?.length > 0\r\n\r\n    userCanSort: () ->\r\n        return @projectService.hasPermission(\"modify_epic\")\r\n\r\n    loadRelatedUserstories: () ->\r\n        @epicsService.listRelatedUserStories(@.epic)\r\n            .then (userstories) =>\r\n                @.userstories = userstories\r\n\r\n    reorderRelatedUserstory: (us, newIndex) ->\r\n        @epicsService.reorderRelatedUserstory(@.epic, @.userstories, us, newIndex)\r\n            .then (userstories) =>\r\n                @.userstories = userstories\r\n\r\nmodule.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaEpics\")\r\n\r\nclass RelatedUserstoriesCreateController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n        \"tgResources\",\r\n        \"$tgConfirm\",\r\n        \"$tgAnalytics\"\r\n    ]\r\n\r\n    constructor: (@currentUserService, @rs, @confirm, @analytics) ->\r\n        @.projects = null\r\n        @.projectUserstories = Immutable.List()\r\n        @.loading = false\r\n\r\n    loadProjects: () ->\r\n        if @.projects == null\r\n            @.projects = @currentUserService.projects.get(\"unblocked\")\r\n\r\n    filterUss: (selectedProjectId, filterText) ->\r\n        promise = @rs.userstories.listInAllProjects({project: selectedProjectId, q: filterText}, true).then (data) =>\r\n            excludeIds = @.epicUserstories.map((us) -> us.get('id'))\r\n            filteredData = data.filter((us) -> excludeIds.indexOf(us.get('id')) == -1)\r\n            @.projectUserstories = filteredData\r\n        promise\r\n\r\n    saveRelatedUserStory: (selectedUserstoryId, onSavedRelatedUserstory) ->\r\n        # This method assumes the following methods are binded to the controller:\r\n        # - validateExistingUserstoryForm\r\n        # - setExistingUserstoryFormErrors\r\n        # - loadRelatedUserstories\r\n        return if not @.validateExistingUserstoryForm()\r\n\r\n        @.loading = true\r\n\r\n        onError = (data) =>\r\n            @.loading = false\r\n            @confirm.notify(\"error\")\r\n            @.setExistingUserstoryFormErrors(data)\r\n\r\n        onSuccess = () =>\r\n            @analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1)\r\n            @.loading = false\r\n            if onSavedRelatedUserstory\r\n                onSavedRelatedUserstory()\r\n            @.loadRelatedUserstories()\r\n\r\n        epicId = @.epic.get('id')\r\n        @rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError)\r\n\r\n    bulkCreateRelatedUserStories: (selectedProjectId, userstoriesText, onCreatedRelatedUserstory) ->\r\n        # This method assumes the following methods are binded to the controller:\r\n        # - validateNewUserstoryForm\r\n        # - setNewUserstoryFormErrors\r\n        # - loadRelatedUserstories\r\n        return if not @.validateNewUserstoryForm()\r\n\r\n        @.loading = true\r\n\r\n        onError = (data) =>\r\n            @.loading = false\r\n            @confirm.notify(\"error\")\r\n            @.setNewUserstoryFormErrors(data)\r\n\r\n        onSuccess = () =>\r\n            @analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1)\r\n            @.loading = false\r\n            if onCreatedRelatedUserstory\r\n                onCreatedRelatedUserstory()\r\n            @.loadRelatedUserstories()\r\n\r\n        epicId = @.epic.get('id')\r\n        @rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError)\r\n\r\n\r\nmodule.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nRelatedUserstoriesCreateDirective = (@lightboxService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        newUserstoryForm = el.find(\".new-user-story-form\").checksley()\r\n        existingUserstoryForm = el.find(\".existing-user-story-form\").checksley()\r\n\r\n        ctrl.validateNewUserstoryForm = =>\r\n            return newUserstoryForm.validate()\r\n\r\n        ctrl.setNewUserstoryFormErrors = (errors) =>\r\n            newUserstoryForm.setErrors(errors)\r\n\r\n        ctrl.validateExistingUserstoryForm = =>\r\n            return existingUserstoryForm.validate()\r\n\r\n        ctrl.setExistingUserstoryFormErrors = (errors) =>\r\n            existingUserstoryForm.setErrors(errors)\r\n\r\n        scope.showLightbox = (selectedProjectId) ->\r\n            ctrl.loadProjects()\r\n            scope.selectProject(selectedProjectId).then () =>\r\n                lightboxService.open(el.find(\".lightbox-create-related-user-stories\"))\r\n\r\n        scope.closeLightbox = () ->\r\n            scope.selectedUserstory = null\r\n            scope.searchUserstory = \"\"\r\n            scope.relatedUserstoriesText = \"\"\r\n            lightboxService.close(el.find(\".lightbox-create-related-user-stories\"))\r\n\r\n        scope.$watch 'vm.project', (project) ->\r\n            if project?\r\n              scope.selectedProject = project.get('id')\r\n\r\n        scope.selectProject = (selectedProjectId) ->\r\n            scope.selectedUserstory = null\r\n            scope.searchUserstory = \"\"\r\n            ctrl.filterUss(selectedProjectId, scope.searchUserstory)\r\n\r\n        scope.onUpdateSearchUserstory = debounceLeading 300, () ->\r\n            scope.selectedUserstory = null\r\n            ctrl.filterUss(scope.selectedProject, scope.searchUserstory)\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\r\n        controller: \"RelatedUserstoriesCreateCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n              showCreateRelatedUserstoriesLightbox: \"=\"\r\n              project: \"=\"\r\n              epic: \"=\"\r\n              epicUserstories: \"=\"\r\n              loadRelatedUserstories:\"&\"\r\n        }\r\n\r\n    }\r\n\r\nRelatedUserstoriesCreateDirective.$inject = [\"lightboxService\",]\r\n\r\nmodule.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\n\r\nRelatedUserstoriesSortableDirective = ($parse, projectService) ->\r\n    link = (scope, el, attrs) ->\r\n        return if not projectService.hasPermission(\"modify_epic\")\r\n\r\n        callback = $parse(attrs.tgRelatedUserstoriesSortable)\r\n\r\n        drake = dragula([el[0]], {\r\n            copySortSource: false\r\n            copy: false\r\n            mirrorContainer: el[0]\r\n            moves: (item) ->\r\n                return $(item).is('tg-related-userstory-row')\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n            us = itemEl.scope().us\r\n            newIndex = itemEl.index()\r\n\r\n            scope.$apply () ->\r\n                callback(scope, {us: us, newIndex: newIndex})\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n        scope.$on \"$destroy\", ->\r\n            el.off()\r\n            drake.destroy()\r\n\r\n    return {\r\n        link: link\r\n    }\r\n\r\nRelatedUserstoriesSortableDirective.$inject = [\r\n    \"$parse\",\r\n    \"tgProjectService\"\r\n]\r\n\r\nmodule.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\n\r\nRelatedUserStoriesDirective = () ->\r\n    return {\r\n        templateUrl:\"epics/related-userstories/related-userstories.html\",\r\n        controller: \"RelatedUserStoriesCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            userstories: '=',\r\n            project: '='\r\n            epic: '='\r\n        }\r\n    }\r\n\r\nRelatedUserStoriesDirective.$inject = []\r\n\r\nmodule.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaEpics\")\r\n\r\nclass RelatedUserstoryRowController\r\n    @.$inject = [\r\n        \"tgAvatarService\",\r\n        \"$translate\",\r\n        \"$tgConfirm\",\r\n        \"tgResources\"\r\n    ]\r\n\r\n    constructor: (@avatarService, @translate, @confirm, @rs) ->\r\n\r\n    setAvatarData: () ->\r\n        member = @.userstory.get('assigned_to_extra_info')\r\n        @.avatar = @avatarService.getAvatar(member)\r\n\r\n    getAssignedToFullNameDisplay: () ->\r\n        if @.userstory.get('assigned_to')\r\n            return @.userstory.getIn(['assigned_to_extra_info', 'full_name_display'])\r\n\r\n        return @translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\r\n\r\n    onDeleteRelatedUserstory: () ->\r\n        title = @translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\")\r\n        message = @translate.instant(\r\n            \"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\",\r\n            { epicSubject: @.epic.get('subject') }\r\n        )\r\n\r\n        return @confirm.ask(title, null, message)\r\n            .then (askResponse) =>\r\n                onError = () =>\r\n                    message = @translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {errorMessage: message})\r\n                    @confirm.notify(\"error\", null, message)\r\n                    askResponse.finish(false)\r\n\r\n                onSuccess = () =>\r\n                    @.loadRelatedUserstories()\r\n                    askResponse.finish()\r\n\r\n                epicId = @.epic.get('id')\r\n                userstoryId = @.userstory.get('id')\r\n                @rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError)\r\n\r\nmodule.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaEpics')\r\n\r\nRelatedUserstoryRowDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl.setAvatarData()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\r\n        controller: \"RelatedUserstoryRowCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            userstory: '='\r\n            epic: '='\r\n            project: '='\r\n            loadRelatedUserstories:\"&\"\r\n        }\r\n    }\r\n\r\nRelatedUserstoryRowDirective.$inject = []\r\n\r\nmodule.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass ExternalAppController extends taiga.Controller\r\n    @.$inject = [\r\n        \"$routeParams\",\r\n        \"tgExternalAppsService\",\r\n        \"$window\",\r\n        \"tgCurrentUserService\",\r\n        \"$location\",\r\n        \"$tgNavUrls\",\r\n        \"tgXhrErrorService\",\r\n        \"tgLoader\"\r\n    ]\r\n\r\n    constructor: (@routeParams, @externalAppsService, @window, @currentUserService, @location,\r\n    @navUrls, @xhrError, @loader) ->\r\n        @loader.start(false)\r\n        @._applicationId = @routeParams.application\r\n        @._state = @routeParams.state\r\n        @._getApplicationToken()\r\n        @._user = @currentUserService.getUser()\r\n        @._application = null\r\n        nextUrl = encodeURIComponent(@location.url())\r\n        loginUrl = @navUrls.resolve(\"login\")\r\n        @.loginWithAnotherUserUrl = \"#{loginUrl}?next=#{nextUrl}&force_login=1\"\r\n\r\n        taiga.defineImmutableProperty @, \"user\", () => @._user\r\n        taiga.defineImmutableProperty @, \"application\", () => @._application\r\n\r\n    _redirect: (applicationToken) =>\r\n        nextUrl = applicationToken.get(\"next_url\")\r\n        @window.open(nextUrl, \"_self\")\r\n\r\n    _getApplicationToken: =>\r\n        return @externalAppsService.getApplicationToken(@._applicationId, @._state)\r\n            .then (data) =>\r\n                @._application = data.get(\"application\")\r\n                if data.get(\"auth_code\")\r\n                    @._redirect(data)\r\n                else\r\n                    @loader.pageLoaded()\r\n\r\n            .catch (xhr) =>\r\n                @loader.pageLoaded()\r\n                return @xhrError.response(xhr)\r\n\r\n    cancel: () ->\r\n        @window.history.back()\r\n\r\n    createApplicationToken:  =>\r\n        return @externalAppsService.authorizeApplicationToken(@._applicationId, @._state)\r\n            .then (data) =>\r\n                @._redirect(data)\r\n            .catch (xhr) =>\r\n                return @xhrError.response(xhr)\r\n\r\n\r\nangular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ExternalAppsService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgResources\"\r\n    ]\r\n\r\n    constructor: (@rs) ->\r\n\r\n    getApplicationToken: (applicationId, state) ->\r\n        return @rs.externalapps.getApplicationToken(applicationId, state)\r\n\r\n    authorizeApplicationToken: (applicationId, state) ->\r\n        return @rs.externalapps.authorizeApplicationToken(applicationId, state)\r\n\r\nangular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass FeedbackService extends taiga.Service\r\n    @.$inject = [\"tgLightboxFactory\"]\r\n\r\n    constructor: (@lightboxFactory) ->\r\n\r\n    sendFeedback: ->\r\n        @lightboxFactory.create(\"tg-lb-feedback\", {\r\n            \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\r\n        })\r\n\r\nangular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass ActivityService\r\n    @.$inject = [\r\n        'tgResources',\r\n        'tgXhrErrorService'\r\n    ]\r\n\r\n    constructor: (@rs, @xhrError) ->\r\n        @._contentType = null\r\n        @._objectId = null\r\n        @.clear()\r\n\r\n    clear: () ->\r\n        @.page = 1\r\n        @.loadingEntries = false\r\n        @.disablePagination = false\r\n        @.entries = Immutable.List()\r\n        @.count = null\r\n\r\n    fetchEntries: (reset = false) ->\r\n        if reset\r\n            @.page = 1\r\n        @.loadingEntries = true\r\n        @.disablePagination = true\r\n\r\n        return if !@._contentType || !@._objectId\r\n\r\n        return @rs.history.getHistory('activity', @._contentType, @._objectId, @.page)\r\n            .then (result) =>\r\n                if reset\r\n                    @.clear()\r\n                    @.entries = result.list\r\n                else\r\n                    @.entries = @.entries.concat(result.list)\r\n\r\n                @.loadingEntries = false\r\n                @.disablePagination = !result.headers('x-pagination-next')\r\n                @.count = result.headers('x-pagination-count')\r\n                \r\n                return @.entries\r\n            .catch (xhr) =>\r\n                @xhrError.response(@.entries)\r\n\r\n    nextPage: (historyType = 'comment') ->\r\n        @.page++\r\n        @.fetchEntries()\r\n\r\n    init: (contentType, objectId) ->\r\n        @._contentType = contentType\r\n        @._objectId = objectId\r\n        @.clear()\r\n\r\n\r\nangular.module('taigaHistory').service('tgActivityService', ActivityService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHistory\")\r\n\r\nclass CommentController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n        \"tgCheckPermissionsService\",\r\n        \"tgLightboxFactory\"\r\n    ]\r\n\r\n    constructor: (@currentUserService, @permissionService, @lightboxFactory) ->\r\n        @.hiddenDeletedComment = true\r\n\r\n    showDeletedComment: () ->\r\n        @.hiddenDeletedComment = false\r\n\r\n    hideDeletedComment: () ->\r\n        @.hiddenDeletedComment = true\r\n\r\n    checkCancelComment: (event) ->\r\n        if event.keyCode == 27\r\n            @.onEditMode({commentId: @.comment.id})\r\n\r\n    canEditDeleteComment: () ->\r\n        if @currentUserService.getUser()\r\n            @.user = @currentUserService.getUser()\r\n            return @.user.get('id') == @.comment.user.pk || @permissionService.check('modify_project')\r\n\r\n    saveComment: (text, cb) ->\r\n        @.onEditComment({commentId: @.comment.id, commentData: text, callback: cb})\r\n\r\n    displayCommentHistory: () ->\r\n        @lightboxFactory.create('tg-lb-display-historic', {\r\n            \"class\": \"lightbox lightbox-display-historic\"\r\n            \"comment\": \"comment\"\r\n            \"name\": \"name\"\r\n            \"object\": \"object\"\r\n        }, {\r\n            \"comment\": @.comment\r\n            \"name\": @.name\r\n            \"object\": @.object\r\n        })\r\n\r\nmodule.controller(\"CommentCtrl\", CommentController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nCommentDirective = () ->\r\n\r\n    return {\r\n        scope: {\r\n            name: \"@\",\r\n            projectId: \"@\",\r\n            object: \"@\",\r\n            comment: \"<\",\r\n            type: \"<\",\r\n            loading: \"<\",\r\n            editing: \"<\",\r\n            deleting: \"<\",\r\n            objectId: \"<\",\r\n            editMode: \"<\",\r\n            project: \"<\",\r\n            onEditMode: \"&\",\r\n            onDeleteComment: \"&\",\r\n            onRestoreDeletedComment: \"&\",\r\n            onEditComment: \"&\"\r\n        },\r\n        templateUrl:\"history/comments/comment.html\",\r\n        bindToController: true,\r\n        controller: 'CommentCtrl',\r\n        controllerAs: \"vm\",\r\n    }\r\n\r\nmodule.directive(\"tgComment\", CommentDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHistory\")\r\n\r\nclass CommentsController\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n\r\n    initializePermissions: () ->\r\n        @.canAddCommentPermission = 'comment_' + @.name\r\n\r\nmodule.controller(\"CommentsCtrl\", CommentsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nCommentsDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl.initializePermissions()\r\n\r\n    return {\r\n        scope: {\r\n            type: \"<\",\r\n            name: \"@\",\r\n            object: \"@\",\r\n            comments: \"<\",\r\n            onEditMode: \"&\",\r\n            onDeleteComment: \"&\",\r\n            onRestoreDeletedComment: \"&\",\r\n            onAddComment: \"&\",\r\n            onEditComment: \"&\",\r\n            editMode: \"<\",\r\n            loading: \"<\",\r\n            deleting: \"<\",\r\n            editing: \"<\",\r\n            project: \"=\",\r\n            reverse: \"=\"\r\n        },\r\n        templateUrl:\"history/comments/comments.html\",\r\n        bindToController: true,\r\n        controller: 'CommentsCtrl',\r\n        controllerAs: \"vm\"\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgComments\", CommentsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHistory\")\r\n\r\nclass LightboxDisplayHistoricController\r\n    @.$inject = [\r\n        \"$tgResources\",\r\n    ]\r\n\r\n    constructor: (@rs) ->\r\n\r\n    _loadHistoric: () ->\r\n        type = @.name\r\n        objectId = @.object\r\n        activityId = @.comment.id\r\n\r\n        @rs.history.getCommentHistory(type, objectId, activityId).then (data) =>\r\n            @.commentHistoryEntries = data\r\n\r\nmodule.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nLightboxDisplayHistoricDirective = (lightboxService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl._loadHistoric()\r\n        lightboxService.open(el)\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            name: '=',\r\n            object: '=',\r\n            comment: '='\r\n        },\r\n        templateUrl:\"history/history-lightbox/comment-history-lightbox.html\",\r\n        controller: \"LightboxDisplayHistoricCtrl\",\r\n        controllerAs: \"vm\",\r\n        link: link\r\n    }\r\n\r\nLightboxDisplayHistoricDirective.$inject = [\r\n    \"lightboxService\"\r\n]\r\n\r\nangular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nHistoryEntryDirective = () ->\r\n    return {\r\n        scope: {\r\n            entry: \"<\"\r\n        },\r\n        templateUrl:\"history/history-lightbox/history-entry.html\",\r\n    }\r\n\r\nangular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nHistoryTabsDirective = () ->\r\n    return {\r\n        templateUrl:\"history/history-tabs/history-tabs.html\",\r\n        scope: {\r\n            showCommentTab: \"&\",\r\n            showActivityTab: \"&\"\r\n            onActiveComments: \"&\",\r\n            onActiveActivities: \"&\",\r\n            onOrderComments: \"&\"\r\n            activeTab: \"<\",\r\n            commentsNum: \"<\",\r\n            activitiesNum: \"<\",\r\n            onReverse: \"<\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgHistoryTabs\", HistoryTabsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHistory\")\r\n\r\nclass HistorySectionController\r\n    @.$inject = [\r\n        \"$tgResources\",\r\n        \"$tgRepo\",\r\n        \"$tgStorage\",\r\n        \"tgProjectService\",\r\n        \"tgActivityService\",\r\n        \"tgWysiwygService\"\r\n    ]\r\n\r\n    constructor: (@rs, @repo, @storage, @projectService, @activityService, @wysiwygService) ->\r\n        @.editing = null\r\n        @.deleting = null\r\n        @.editMode = {}\r\n        @.viewComments = true\r\n\r\n        @.reverse = @storage.get(\"orderComments\")\r\n\r\n        taiga.defineImmutableProperty @, 'disabledActivityPagination', () =>\r\n            return @activityService.disablePagination\r\n        taiga.defineImmutableProperty @, 'loadingActivity', () =>\r\n            return @activityService.loading\r\n\r\n    _loadHistory: () ->\r\n        if @.totalComments == 0\r\n            @.commentsNum = 0\r\n        else\r\n            @._loadComments()\r\n\r\n        @._loadActivity()\r\n\r\n    _loadActivity: () ->\r\n        @activityService.init(@.name, @.id)\r\n        @activityService.fetchEntries().then (response) =>\r\n            @.activitiesNum = @activityService.count\r\n            @.activities = response.toJS()\r\n\r\n    _loadComments: () ->\r\n        @rs.history.get(@.name, @.id, 'comment').then (comments) =>\r\n            @.comments = _.filter(comments, (item) -> item.comment != \"\")\r\n\r\n            if @.reverse\r\n                @.comments - _.reverse(@.comments)\r\n            @.commentsNum = @.comments.length\r\n\r\n    nextActivityPage: () ->\r\n        @activityService.nextPage().then (response) =>\r\n            @.activities = response.toJS()\r\n\r\n    showHistorySection: () ->\r\n        return @.showCommentTab() or @.showActivityTab()\r\n\r\n    showCommentTab: () ->\r\n        return @.commentsNum > 0 or @projectService.hasPermission(\"comment_#{@.name}\")\r\n\r\n    showActivityTab: () ->\r\n        return @.activitiesNum > 0\r\n\r\n    toggleEditMode: (commentId) ->\r\n        @.editMode[commentId] = !@.editMode[commentId]\r\n\r\n    onActiveHistoryTab: (active) ->\r\n        @.viewComments = active\r\n\r\n    deleteComment: (commentId) ->\r\n        type = @.name\r\n        objectId = @.id\r\n        activityId = commentId\r\n        @.deleting = commentId\r\n        return @rs.history.deleteComment(type, objectId, activityId).then =>\r\n            @._loadComments()\r\n            @.deleting = null\r\n\r\n    editComment: (commentId, comment) ->\r\n        type = @.name\r\n        objectId = @.id\r\n        activityId = commentId\r\n        @.editing = commentId\r\n        return @rs.history.editComment(type, objectId, activityId, comment).then =>\r\n            @._loadComments()\r\n            @.toggleEditMode(commentId)\r\n            @.editing = null\r\n\r\n    restoreDeletedComment: (commentId) ->\r\n        type = @.name\r\n        objectId = @.id\r\n        activityId = commentId\r\n        @.editing = commentId\r\n        return @rs.history.undeleteComment(type, objectId, activityId).then =>\r\n            @._loadComments()\r\n            @.editing = null\r\n\r\n    addComment: () ->\r\n        @.editMode = {}\r\n        @.editing = null\r\n        @._loadComments()\r\n\r\n    onOrderComments: () ->\r\n        @.reverse = !@.reverse\r\n        @storage.set(\"orderComments\", @.reverse)\r\n        @._loadComments()\r\n\r\nmodule.controller(\"HistorySection\", HistorySectionController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nbindOnce = @.taiga.bindOnce\r\n\r\nHistorySectionDirective = () ->\r\n    link = (scope, el, attr, ctrl) ->\r\n        scope.$on \"object:updated\", -> ctrl._loadActivity()\r\n\r\n        scope.$watch 'vm.id', (value) ->\r\n            ctrl._loadHistory()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"history/history.html\",\r\n        controller: \"HistorySection\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            type: \"=\",\r\n            name: \"@\",\r\n            id: \"=\",\r\n            project: \"=\"\r\n            totalComments: \"=\"\r\n        }\r\n    }\r\n\r\nHistorySectionDirective.$inject = []\r\n\r\nmodule.directive(\"tgHistorySection\", HistorySectionDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaHistory\")\r\n\r\nclass ActivitiesDiffController\r\n    @.$inject = [\r\n    ]\r\n\r\n    constructor: () ->\r\n\r\n    diffTags: () ->\r\n        if @.type == 'tags'\r\n            @.diffRemoveTags = _.difference(@.diff[0], @.diff[1]).toString()\r\n            @.diffAddTags = _.difference(@.diff[1], @.diff[0]).toString()\r\n        else if @.type == 'promoted_to'\r\n            diff = _.difference(@.diff[1], @.diff[0])\r\n            @.promotedTo = _.filter(@.model.generated_user_stories, (x) => _.includes(diff, x.id))\r\n\r\nmodule.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nHistoryDiffDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl.diffTags()\r\n    return {\r\n        scope: {\r\n            model: \"<\",\r\n            type: \"<\",\r\n            diff: \"<\"\r\n        },\r\n        templateUrl:\"history/history/history-diff.html\",\r\n        controller: \"ActivitiesDiffCtrl\",\r\n        controllerAs: 'vm',\r\n        bindToController: true,\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgHistoryDiff\", HistoryDiffDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaHistory')\r\n\r\nHistoryDirective = () ->\r\n    link = (scope, el, attrs) ->\r\n\r\n    return {\r\n        scope: {\r\n            activities: \"<\",\r\n            model: \"<\",\r\n        },\r\n        templateUrl:\"history/history/history.html\",\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgHistory\", HistoryDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDutyDirective = (navurls, $translate) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {}\r\n        scope.vm.duty = scope.duty\r\n        scope.vm.type = scope.type\r\n        scope.vm.isHidden = scope.isHidden\r\n\r\n        scope.vm.getDutyType = () ->\r\n            if scope.vm.duty\r\n                if scope.vm.duty.get('_name') == \"epics\"\r\n                    return $translate.instant(\"COMMON.EPIC\")\r\n                if scope.vm.duty.get('_name') == \"userstories\"\r\n                    return $translate.instant(\"COMMON.USER_STORY\")\r\n                if scope.vm.duty.get('_name') == \"tasks\"\r\n                    return $translate.instant(\"COMMON.TASK\")\r\n                if scope.vm.duty.get('_name') == \"issues\"\r\n                    return $translate.instant(\"COMMON.ISSUE\")\r\n\r\n        el.on \"click\", \".button-hide\", (event) ->\r\n            event.preventDefault()\r\n            el.remove()\r\n            scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type)\r\n\r\n    return {\r\n        templateUrl: \"home/duties/duty.html\"\r\n        scope: {\r\n            \"duty\": \"=tgDuty\",\r\n            \"isHidden\": \"=\",\r\n            \"type\": \"@\"\r\n        }\r\n        link: link\r\n    }\r\n\r\nDutyDirective.$inject = [\r\n    \"$tgNavUrls\",\r\n    \"$translate\"\r\n]\r\n\r\nangular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass HomeController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n        \"$location\",\r\n        \"$tgNavUrls\"\r\n    ]\r\n\r\n    constructor: (@currentUserService, @location, @navUrls) ->\r\n        if not @currentUserService.getUser()\r\n            @location.path(@navUrls.resolve(\"discover\"))\r\n\r\n\r\nangular.module(\"taigaHome\").controller(\"Home\", HomeController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass HomeService extends taiga.Service\r\n    @.$inject = [\r\n        \"$tgNavUrls\",\r\n        \"tgResources\",\r\n        \"tgProjectsService\",\r\n        \"$q\"\r\n    ]\r\n\r\n    constructor: (@navurls, @rs, @projectsService, @q) ->\r\n\r\n    _attachProjectInfoToWorkInProgress: (workInProgress, projectsById) ->\r\n        _attachProjectInfoToDuty = (duty, objType) =>\r\n            project = projectsById.get(String(duty.get('project')))\r\n\r\n            ctx = {\r\n                project: project.get('slug')\r\n                ref: duty.get('ref')\r\n            }\r\n\r\n            url = @navurls.resolve(\"project-#{objType}-detail\", ctx)\r\n\r\n            duty = duty.set('url', url)\r\n            duty = duty.set('project', project)\r\n            duty = duty.set(\"_name\", objType)\r\n\r\n            return duty\r\n\r\n        _getValidDutiesAndAttachProjectInfo = (duties, dutyType)->\r\n            # Exclude duties where I'm not member of the project\r\n            duties = duties.filter((duty) ->\r\n                return projectsById.get(String(duty.get('project'))))\r\n\r\n            duties = duties.map (duty) ->\r\n                return _attachProjectInfoToDuty(duty, dutyType)\r\n\r\n            return duties\r\n\r\n        assignedTo = workInProgress.get(\"assignedTo\")\r\n\r\n        if assignedTo.get(\"epics\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\")\r\n            assignedTo = assignedTo.set(\"epics\", _duties)\r\n\r\n        if assignedTo.get(\"userStories\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\")\r\n            assignedTo = assignedTo.set(\"userStories\", _duties)\r\n\r\n        if assignedTo.get(\"tasks\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\")\r\n            assignedTo = assignedTo.set(\"tasks\", _duties)\r\n\r\n        if assignedTo.get(\"issues\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\")\r\n            assignedTo = assignedTo.set(\"issues\", _duties)\r\n\r\n\r\n        watching = workInProgress.get(\"watching\")\r\n\r\n        if watching.get(\"epics\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\")\r\n            watching = watching.set(\"epics\", _duties)\r\n\r\n        if watching.get(\"userStories\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\")\r\n            watching = watching.set(\"userStories\", _duties)\r\n\r\n        if watching.get(\"tasks\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\")\r\n            watching = watching.set(\"tasks\", _duties)\r\n\r\n        if watching.get(\"issues\")\r\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\")\r\n            watching = watching.set(\"issues\", _duties)\r\n\r\n        workInProgress = workInProgress.set(\"assignedTo\", assignedTo)\r\n        workInProgress = workInProgress.set(\"watching\", watching)\r\n\r\n    getWorkInProgress: (userId) ->\r\n        projectsById = Immutable.Map()\r\n\r\n        projectsPromise = @projectsService.getListProjectsByUserId(userId).then (projects) ->\r\n            projectsById = Immutable.fromJS(groupBy(projects.toJS(), (p) -> p.id))\r\n\r\n        assignedTo = Immutable.Map()\r\n\r\n        params_epics = {\r\n            status__is_closed: false\r\n            assigned_to: userId\r\n        }\r\n\r\n        params_uss = {\r\n            is_closed: false\r\n            assigned_users: userId\r\n            dashboard: true\r\n        }\r\n\r\n        params_tasks = {\r\n            status__is_closed: false\r\n            assigned_to: userId\r\n        }\r\n\r\n        params_issues = {\r\n            status__is_closed: false\r\n            assigned_to: userId\r\n        }\r\n\r\n        assignedEpicsPromise = @rs.epics.listInAllProjects(params_epics).then (epics) ->\r\n            assignedTo = assignedTo.set(\"epics\", epics)\r\n\r\n        assignedUserStoriesPromise = @rs.userstories.listInAllProjects(params_uss).then (userstories) ->\r\n            assignedTo = assignedTo.set(\"userStories\", userstories)\r\n\r\n        assignedTasksPromise = @rs.tasks.listInAllProjects(params_tasks).then (tasks) ->\r\n            assignedTo = assignedTo.set(\"tasks\", tasks)\r\n\r\n        assignedIssuesPromise = @rs.issues.listInAllProjects(params_issues).then (issues) ->\r\n            assignedTo = assignedTo.set(\"issues\", issues)\r\n\r\n        params_epics = {\r\n            status__is_closed: false\r\n            watchers: userId\r\n        }\r\n\r\n        params_uss = {\r\n            is_closed: false\r\n            watchers: userId\r\n            dashboard: true\r\n        }\r\n\r\n        params_tasks = {\r\n            status__is_closed: false\r\n            watchers: userId\r\n        }\r\n\r\n        params_issues = {\r\n            status__is_closed: false\r\n            watchers: userId\r\n        }\r\n\r\n        watching = Immutable.Map()\r\n\r\n        watchingEpicsPromise = @rs.epics.listInAllProjects(params_epics).then (epics) ->\r\n            watching = watching.set(\"epics\", epics)\r\n\r\n        watchingUserStoriesPromise = @rs.userstories.listInAllProjects(params_uss).then (userstories) ->\r\n            watching = watching.set(\"userStories\", userstories)\r\n\r\n        watchingTasksPromise = @rs.tasks.listInAllProjects(params_tasks).then (tasks) ->\r\n            watching = watching.set(\"tasks\", tasks)\r\n\r\n        watchingIssuesPromise = @rs.issues.listInAllProjects(params_issues).then (issues) ->\r\n            watching = watching.set(\"issues\", issues)\r\n\r\n        workInProgress = Immutable.Map()\r\n\r\n        return @q.all([\r\n            projectsPromise,\r\n            assignedEpicsPromise,\r\n            watchingEpicsPromise,\r\n            assignedUserStoriesPromise,\r\n            watchingUserStoriesPromise,\r\n            assignedTasksPromise,\r\n            watchingTasksPromise,\r\n            assignedIssuesPromise,\r\n            watchingIssuesPromise\r\n        ]).then =>\r\n            workInProgress = workInProgress.set(\"assignedTo\", assignedTo)\r\n            workInProgress = workInProgress.set(\"watching\", watching)\r\n\r\n            workInProgress = @._attachProjectInfoToWorkInProgress(workInProgress, projectsById)\r\n\r\n            return workInProgress\r\n\r\nangular.module(\"taigaHome\").service(\"tgHomeService\", HomeService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nHomeProjectListDirective = (currentUserService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {}\r\n\r\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\r\n\r\n    directive = {\r\n        templateUrl: \"home/projects/home-project-list.html\"\r\n        scope: {}\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nHomeProjectListDirective.$inject = [\r\n    \"tgCurrentUserService\"\r\n]\r\n\r\nangular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass WorkingOnController\r\n    @.$inject = [\r\n        \"tgHomeService\"\r\n    ]\r\n\r\n    constructor: (@homeService) ->\r\n        @.assignedTo = Immutable.Map()\r\n        @.hiddenAssignedTo = []\r\n        @.showHiddenAssignedTo = false\r\n\r\n        @.watching = Immutable.Map()\r\n        @.showHiddenWatching = false\r\n\r\n    _setAssignedTo: (workInProgress) ->\r\n        epics = workInProgress.get(\"assignedTo\").get(\"epics\")\r\n        userStories = workInProgress.get(\"assignedTo\").get(\"userStories\")\r\n        tasks = workInProgress.get(\"assignedTo\").get(\"tasks\")\r\n        issues = workInProgress.get(\"assignedTo\").get(\"issues\")\r\n\r\n        @.assignedTo = userStories.concat(tasks).concat(issues).concat(epics)\r\n        if @.assignedTo.size > 0\r\n            @.assignedTo = @.assignedTo.sortBy((elem) -> elem.get(\"modified_date\")).reverse()\r\n\r\n    _setWatching: (workInProgress) ->\r\n        epics = workInProgress.get(\"watching\").get(\"epics\")\r\n        userStories = workInProgress.get(\"watching\").get(\"userStories\")\r\n        tasks = workInProgress.get(\"watching\").get(\"tasks\")\r\n        issues = workInProgress.get(\"watching\").get(\"issues\")\r\n\r\n        @.watching = userStories.concat(tasks).concat(issues).concat(epics)\r\n        if @.watching.size > 0\r\n            @.watching = @.watching.sortBy((elem) -> elem.get(\"modified_date\")).reverse()\r\n\r\n    getWorkInProgress: (userId) ->\r\n        return @homeService.getWorkInProgress(userId).then (workInProgress) =>\r\n            @._setAssignedTo(workInProgress)\r\n            @._setWatching(workInProgress)\r\n\r\nangular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngenerateHash = @.taiga.generateHash\r\n\r\nWorkingOnDirective = (homeService, currentUserService, storage) ->\r\n        \r\n    link = (scope, el, attrs, ctrl) ->\r\n        updateShowHiddenDuties = (slot) ->\r\n            hash = generateHash(['ShowHiddenDashboardDuties', slot])\r\n            return storage.set(hash, scope.showHiddenDuties[slot])\r\n\r\n        getShowHiddenDuties = (slot) ->\r\n            hash = generateHash(['ShowHiddenDashboardDuties', slot])\r\n            return storage.get(hash) or false\r\n\r\n        updateHiddenDuties = (slot) ->\r\n            hash = generateHash(['HiddenDashboardDuties', slot])\r\n            return storage.set(hash, scope.hiddenDuties[slot])\r\n\r\n        getHiddenDuties = (slot) ->\r\n            hash = generateHash(['HiddenDashboardDuties', slot])\r\n            return storage.get(hash) or []\r\n\r\n        toggleDutyHidden = (duty, slot) ->\r\n            if duty.get('id') in scope.hiddenDuties[slot]\r\n                scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1)\r\n            else\r\n                scope.hiddenDuties[slot].push(duty.get('id'))\r\n            updateHiddenDuties(slot)\r\n            scope.$apply()\r\n\r\n        user = currentUserService.getUser()\r\n        # If we are not logged in the user will be null\r\n        if !user\r\n            return\r\n\r\n        userId = user.get(\"id\")\r\n        ctrl.getWorkInProgress(userId)\r\n\r\n        slots = ['working-on', 'watching']\r\n\r\n        scope.hiddenDuties = {}\r\n        scope.showHiddenDuties = {}\r\n\r\n        scope.toggleShowHiddenDuties = (slot) ->\r\n            if !(slot in slots)\r\n                return console.error(\"Invalid duties slot `#{slot}`\")\r\n            scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot]\r\n            updateShowHiddenDuties(slot)\r\n\r\n        for slot in slots\r\n            scope.hiddenDuties[slot] =  getHiddenDuties(slot)\r\n            scope.showHiddenDuties[slot] =  getShowHiddenDuties(slot)\r\n\r\n        scope.$on \"duty:toggle-hidden\", (event, duty, slot) =>\r\n            if !(slot in slots)\r\n                return console.error(\"Invalid duties slot `#{slot}`\")\r\n            toggleDutyHidden(duty, slot)\r\n\r\n    return {\r\n        controller: \"WorkingOn\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"home/working-on/working-on.html\",\r\n        scope: {},\r\n        link: link\r\n    }\r\n\r\nWorkingOnDirective.$inject = [\r\n    \"tgHomeService\",\r\n    \"tgCurrentUserService\",\r\n    \"$tgStorage\"\r\n]\r\n\r\nangular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\n\r\nclass InviteMembersFormController\r\n    @.$inject = [\r\n        \"tgProjectService\",\r\n        \"$tgResources\",\r\n        \"lightboxService\",\r\n        \"$tgConfirm\",\r\n        \"$rootScope\"\r\n    ]\r\n\r\n    constructor: (@projectService, @rs, @lightboxService, @confirm, @rootScope) ->\r\n        @.project = @projectService.project\r\n        @.roles = @projectService.project.get('roles')\r\n        @.rolesValues = {}\r\n        @.loading = false\r\n        @.defaultMaxInvites = 4\r\n\r\n    _areRolesValidated: () ->\r\n        Object.defineProperty @, 'areRolesValidated', {\r\n            get: () =>\r\n                roleIds = _.filter _.values(@.rolesValues), (it) -> return it\r\n                return roleIds.length == @.contactsToInvite.size + @.emailsToInvite.size\r\n        }\r\n\r\n    _checkLimitMemberships: () ->\r\n        if @.project.get('max_memberships') == null\r\n            @.membersLimit = @.defaultMaxInvites\r\n        else\r\n            pendingMembersCount = Math.max(@.project.get('max_memberships') - @.project.get('total_memberships'), 0)\r\n            @.membersLimit = Math.min(pendingMembersCount, @.defaultMaxInvites)\r\n\r\n        @.showWarningMessage = @.membersLimit < @.defaultMaxInvites\r\n\r\n    sendInvites: () ->\r\n        @.setInvitedContacts = []\r\n        _.forEach(@.rolesValues, (key, value) =>\r\n            @.setInvitedContacts.push({\r\n                'role_id': key\r\n                'username': value\r\n            })\r\n        )\r\n        @.loading = true\r\n        @rs.memberships.bulkCreateMemberships(\r\n            @.project.get('id'),\r\n            @.setInvitedContacts,\r\n            @.inviteContactsMessage\r\n        )\r\n            .then (response) => # On success\r\n                @projectService.fetchProject().then =>\r\n                    @.loading = false\r\n                    @lightboxService.closeAll()\r\n                    @rootScope.$broadcast(\"membersform:new:success\")\r\n                    @confirm.notify('success')\r\n            .catch (response) => # On error\r\n                @.loading = false\r\n                if response.data._error_message\r\n                    @confirm.notify(\"error\", response.data._error_message)\r\n                else if response.data.__all__\r\n                    @confirm.notify(\"error\", response.data.__all__[0])\r\n\r\n\r\nangular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nInviteMembersFormDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        ctrl._areRolesValidated()\r\n        ctrl._checkLimitMemberships()\r\n\r\n    return {\r\n        scope: {},\r\n        templateUrl:\"invite-members/invite-members-form/invite-members-form.html\",\r\n        controller: \"InviteMembersFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            contactsToInvite: '<',\r\n            emailsToInvite: '=',\r\n            onDisplayContactList: '&',\r\n            onRemoveInvitedContact: '&',\r\n            onRemoveInvitedEmail: '&',\r\n            onSendInvites: '&'\r\n        },\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass AddMembersController\r\n    @.$inject = [\r\n        \"tgUserService\",\r\n        \"tgCurrentUserService\",\r\n        \"tgProjectService\",\r\n    ]\r\n\r\n    constructor: (@userService, @currentUserService, @projectService) ->\r\n        @.contactsToInvite = Immutable.List()\r\n        @.emailsToInvite = Immutable.List()\r\n        @.contacts = Immutable.List()\r\n        @.displayContactList = false\r\n\r\n    _getContacts: () ->\r\n        userId = @currentUserService.getUser().get(\"id\")\r\n        excludeProjectId = @projectService.project.get(\"id\")\r\n\r\n        @userService.getContacts(userId, excludeProjectId).then (contacts) =>\r\n            @.contacts = contacts\r\n\r\n    _filterContacts: (invited) ->\r\n        @.contacts = @.contacts.filter( (contact) =>\r\n            contact.get('id') != invited.get('id')\r\n        )\r\n\r\n    inviteSuggested: (contact) ->\r\n        @.contactsToInvite = @.contactsToInvite.push(contact)\r\n        @._filterContacts(contact)\r\n        @.displayContactList = true\r\n\r\n    removeContact: (invited) ->\r\n        @.contactsToInvite = @.contactsToInvite.filter( (contact) =>\r\n            return contact.get('id') != invited.id\r\n        )\r\n        invited = Immutable.fromJS(invited)\r\n        @.contacts = @.contacts.push(invited)\r\n        @.testEmptyContacts()\r\n\r\n    inviteEmail: (email) ->\r\n        emailData = Immutable.Map({'email': email})\r\n        @.emailsToInvite = @.emailsToInvite.push(emailData)\r\n        @.displayContactList = true\r\n\r\n    removeEmail: (invited) ->\r\n        @.emailsToInvite = @.emailsToInvite.filter( (email) =>\r\n            return email.get('email') != invited.email\r\n        )\r\n        @.testEmptyContacts()\r\n\r\n    testEmptyContacts: () ->\r\n        if @.emailsToInvite.size + @.contactsToInvite.size == 0\r\n            @.displayContactList = false\r\n\r\nangular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nLightboxAddMembersDirective = (lightboxService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        lightboxService.open(el)\r\n        ctrl._getContacts()\r\n\r\n    return {\r\n        scope: {},\r\n        templateUrl:\"invite-members/lightbox-add-members.html\",\r\n        controller: \"AddMembersCtrl\",\r\n        controllerAs: \"vm\",\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass SuggestAddMembersController\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n        @.contactQuery = \"\"\r\n\r\n    isEmail: () ->\r\n        return taiga.isEmail(@.contactQuery)\r\n\r\n    filterContacts: () ->\r\n        @.filteredContacts = @.contacts.filter( (contact) =>\r\n            contact.get('full_name_display').toLowerCase().includes(@.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(@.contactQuery.toLowerCase());\r\n        ).slice(0,12)\r\n\r\n    setInvited: (contact) ->\r\n        @.onInviteSuggested({'contact': contact})\r\n\r\nangular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nSuggestAddMembersDirective = (lightboxService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.$watch \"vm.contacts\", (contacts) =>\r\n            if contacts\r\n                ctrl.filterContacts()\r\n\r\n    return {\r\n        scope: {},\r\n        templateUrl:\"invite-members/suggest-add-members/suggest-add-members.html\",\r\n        controller: \"SuggestAddMembersCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: {\r\n            contacts: '=',\r\n            onInviteSuggested: '&',\r\n            onInviteEmail: '&'\r\n        },\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntimeout = @.taiga.timeout\r\n\r\nDropdownNotificationsDirective = ($rootScope, notificationsService, currentUserService) ->\r\n    link = ($scope, $el, $attrs, $ctrl) ->\r\n        $scope.notificationsList = []\r\n        $scope.loading = false\r\n\r\n        $scope.$on \"notifications:loaded\", (event, total) ->\r\n            $scope.loading = false\r\n            if $scope.total != undefined && total > $scope.total\r\n                $scope.newEvent = true\r\n                timeout 100, ->\r\n                    $scope.total = total\r\n                    $scope.$apply()\r\n                timeout 2000, ->\r\n                    $scope.newEvent = false\r\n            else\r\n                $scope.total = total\r\n\r\n        $scope.$on \"notifications:loading\", () ->\r\n            $scope.loading = true\r\n\r\n        $scope.setAllAsRead = () ->\r\n            notificationsService.setNotificationsAsRead().then ->\r\n                $rootScope.$emit(\"notifications:dismiss-all\")\r\n\r\n    directive = {\r\n        templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\"\r\n        scope: {\r\n            active: \"=\"\r\n        }\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nangular.module(\"taigaNavigationBar\")\r\n    .directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\",\r\n    \"tgCurrentUserService\", DropdownNotificationsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDropdownProjectListDirective = (rootScope, currentUserService, projectsService, projectService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {}\r\n\r\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\r\n\r\n        taiga.defineImmutableProperty(scope.vm, \"currentProject\",\r\n            () ->\r\n                if projectService.project\r\n                    return projectService.project.get('id')\r\n\r\n                return null\r\n        )\r\n\r\n        scope.vm.newProject = ->\r\n            projectsService.newProject()\r\n\r\n        updateLinks = ->\r\n            el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\")\r\n\r\n        rootScope.$on(\"dropdown-project-list:updated\", updateLinks)\r\n\r\n    directive = {\r\n        templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\"\r\n        scope: {\r\n            active: \"=\"\r\n        }\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nDropdownProjectListDirective.$inject = [\r\n    \"$rootScope\",\r\n    \"tgCurrentUserService\",\r\n    \"tgProjectsService\",\r\n    \"tgProjectService\"\r\n]\r\n\r\nangular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDropdownUserDirective = (authService, configService, locationService,\r\n        navUrlsService, $rootScope) ->\r\n\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {}\r\n        scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\")\r\n        scope.vm.customSupportUrl = configService.get(\"supportUrl\")\r\n        taiga.defineImmutableProperty(scope.vm, \"user\", () -> authService.userData)\r\n\r\n        scope.vm.logout = ->\r\n            authService.logout()\r\n            locationService.url(navUrlsService.resolve(\"discover\"))\r\n            locationService.search({})\r\n\r\n        scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {userMenu: true})\r\n\r\n    directive = {\r\n        templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\"\r\n        scope: {}\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nDropdownUserDirective.$inject = [\r\n    \"$tgAuth\",\r\n    \"$tgConfig\",\r\n    \"$tgLocation\",\r\n    \"$tgNavUrls\",\r\n    \"$rootScope\"\r\n]\r\n\r\nangular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nNavigationBarDirective = (currentUserService, navigationBarService, locationService, navUrlsService, config, feedbackService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {}\r\n\r\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\r\n        taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", () -> currentUserService.isAuthenticated())\r\n        taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", () -> navigationBarService.isEnabledHeader())\r\n\r\n        scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\")\r\n        scope.vm.customSupportUrl = config.get(\"supportUrl\")\r\n        scope.vm.isFeedbackEnabled = config.get(\"feedbackEnabled\")\r\n\r\n        loadUserPilot = () =>\r\n            userPilotIframe = document.querySelector('#userpilot-resource-centre-frame')\r\n\r\n            if userPilotIframe\r\n                scope.$applyAsync () =>\r\n                    userPilotIframeDocument = userPilotIframe.contentWindow.document.body\r\n                    widget = userPilotIframeDocument.querySelector('#widget-title')\r\n\r\n                    if widget\r\n                        scope.vm.userPilotTitle = widget.innerText\r\n                        clearInterval(userPilotInterval)\r\n\r\n        attempts = 10\r\n\r\n        if window.TAIGA_USER_PILOT_TOKEN\r\n            scope.vm.userPilotTitle = 'Help center'\r\n            scope.vm.userpilotEnabled = true\r\n\r\n            userPilotInterval = setInterval () =>\r\n                loadUserPilot()\r\n                attempts--\r\n\r\n                if !attempts\r\n                    clearInterval(userPilotInterval)\r\n            , 1000\r\n\r\n        scope.vm.login = ->\r\n            nextUrl = encodeURIComponent(locationService.url())\r\n            locationService.url(navUrlsService.resolve(\"login\"))\r\n            locationService.search({next: nextUrl})\r\n\r\n        scope.vm.sendFeedback = () ->\r\n            feedbackService.sendFeedback()\r\n\r\n        window._taigaSendFeedback = scope.vm.sendFeedback\r\n\r\n        scope.$on \"$routeChangeSuccess\", () ->\r\n            scope.vm.active = null\r\n            path = locationService.path()\r\n\r\n            switch path\r\n                when \"/\"\r\n                    scope.vm.active = 'dashboard'\r\n                when \"/discover\"\r\n                    scope.vm.active = 'discover'\r\n                when \"/notifications\"\r\n                    scope.vm.active = 'notifications'\r\n                when \"/projects/\"\r\n                    scope.vm.active = 'projects'\r\n                else\r\n                    if path.startsWith('/project')\r\n                        scope.vm.active = 'project'\r\n\r\n    directive = {\r\n        templateUrl: \"navigation-bar/navigation-bar.html\"\r\n        scope: {}\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nNavigationBarDirective.$inject = [\r\n    \"tgCurrentUserService\",\r\n    \"tgNavigationBarService\",\r\n    \"$tgLocation\",\r\n    \"$tgNavUrls\",\r\n    \"$tgConfig\",\r\n    \"tgFeedbackService\"\r\n]\r\n\r\nangular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass NavigationBarService extends taiga.Service\r\n\r\n    constructor: ->\r\n        @.disableHeader()\r\n\r\n    enableHeader: ->\r\n        @.enabledHeader = true\r\n\r\n    disableHeader:  ->\r\n        @.enabledHeader = false\r\n\r\n    isEnabledHeader: ->\r\n        return @.enabledHeader\r\n\r\nangular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nNotificationsListDirective = ->\r\n    return {\r\n        templateUrl: \"notifications/notifications-list/notifications-list.html\",\r\n        controller: \"Notifications\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            infiniteScrollContainer: \"@\",\r\n            infiniteScrollDistance: \"=\",\r\n            infiniteScrollDisabled: \"=\",\r\n            onlyUnread: \"=onlyUnread\"\r\n        }\r\n    }\r\n\r\nangular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nclass NotificationsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"$scope\",\r\n        \"tgNotificationsService\"\r\n        \"tgCurrentUserService\",\r\n        \"$tgEvents\",\r\n        \"$location\"\r\n        \"$window\"\r\n    ]\r\n\r\n    constructor: (@rootScope, @scope, @notificationsService, @currentUserService, @events,\r\n    @location, @window) ->\r\n        @.total = 0\r\n        @.user = @currentUserService.getUser()\r\n        @.scrollDisabled = false\r\n        @.initList()\r\n        @.loadNotifications()\r\n\r\n        @rootScope.$on \"notifications:dismiss\", (event) =>\r\n            if @.onlyUnread\r\n                @.reloadList()\r\n\r\n        @rootScope.$on \"notifications:new\", (event) =>\r\n            @.reloadList()\r\n\r\n        @rootScope.$on \"notifications:dismiss-all\", (event) =>\r\n            @.reloadList()\r\n\r\n    initList: ()->\r\n        @.notificationsList = Immutable.List()\r\n        if @.user\r\n            @.list = @notificationsService.getNotificationsList(@.user.get(\"id\"), @.onlyUnread?)\r\n\r\n        @.loading = !@.list?\r\n\r\n    reloadList: ()->\r\n        @.initList()\r\n        @.loadNotifications()\r\n\r\n    loadNotifications: () ->\r\n        @.scrollDisabled = true\r\n        @.loading = true\r\n        @scope.$emit(\"notifications:loading\")\r\n        return @.list\r\n            .next()\r\n            .then (response) =>\r\n                @.notificationsList = @.notificationsList.concat(response.get(\"items\"))\r\n\r\n                if !@.infiniteScrollDisabled && response.get(\"next\")\r\n                    @.scrollDisabled = false\r\n\r\n                @.total = response.get(\"total\")\r\n\r\n                @scope.$emit(\"notifications:loaded\", @.total)\r\n\r\n                @.loading = false\r\n                return @.notificationsList\r\n\r\n    setAsRead: (notification, url) ->\r\n        @notificationsService.setNotificationAsRead(notification.get(\"id\")).then =>\r\n            if @location.$$url == url\r\n                @window.location.reload()\r\n            else\r\n                @location.path(url)\r\n\r\n            @rootScope.$broadcast \"notifications:dismiss\"\r\n\r\n    setAllAsRead: () ->\r\n        @notificationsService.setNotificationsAsRead().then =>\r\n            @rootScope.$broadcast \"notifications:dismiss-all\"\r\n\r\n\r\nangular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass NotificationsService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgResources\"\r\n        \"tgUserTimelinePaginationSequenceService\"\r\n        \"$translate\"\r\n        \"$tgNavUrls\"\r\n        \"$tgSections\"\r\n    ]\r\n\r\n    _notificationTypes = [\r\n        { # Assigned to you\r\n            check: (notification) -> return notification.get('event_type') == 1\r\n            key: 'EVENTS.ASSIGNED_YOU',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # Mentioned you in a object description\r\n            check: (notification) -> return notification.get('event_type') == 2\r\n            key: 'EVENTS.MENTIONED_YOU',\r\n            translate_params: ['username', 'obj_name'],\r\n        },\r\n        { # Added you as watcher\r\n            check: (notification) -> return notification.get('event_type') == 3\r\n            key: 'EVENTS.ADDED_YOU_AS_WATCHER',\r\n            translate_params: ['username', 'obj_name'],\r\n        },\r\n        { # Added you as member\r\n            check: (notification) -> return notification.get('event_type') == 4\r\n            key: 'EVENTS.ADDED_YOU_AS_MEMBER',\r\n            translate_params: ['username']\r\n        },\r\n        { # Commented\r\n            check: (notification) -> return notification.get('event_type') == 5\r\n            key: 'EVENTS.COMMENTED',\r\n            translate_params: ['username', 'obj_name'],\r\n        },\r\n        { # Mentioned you in a comment\r\n            check: (notification) -> return notification.get('event_type') == 6\r\n            key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\r\n            translate_params: ['username', 'obj_name'],\r\n        },\r\n    ]\r\n\r\n    _params = {\r\n        username: (notification) ->\r\n            user = notification.getIn(['data', 'user'])\r\n            if user.get('is_profile_visible')\r\n                title_attr = @translate.instant('COMMON.SEE_USER_PROFILE', {username: user.get('username')})\r\n                url = @navUrls.resolve('user-profile', {\r\n                    username: notification.getIn(['data', 'user', 'username'])\r\n                })\r\n                return @._getLink(notification, url, user.get('name'), 'user-link', title_attr)\r\n            else\r\n                return @._getUsernameSpan(user.get('name'))\r\n\r\n        project_name: (notification) ->\r\n            url = @navUrls.resolve('project', {\r\n                project: notification.getIn(['data', 'project', 'slug'])\r\n            })\r\n            return @._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link')\r\n\r\n        obj_name: (notification) ->\r\n            obj = @._getNotificationObject(notification)\r\n            url = @._getDetailObjUrl(notification, obj.get('content_type'))\r\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\r\n            return @._getLink(notification, url, text, 'object-link' )\r\n    }\r\n\r\n    constructor: (\r\n        @rs\r\n        @userTimelinePaginationSequenceService\r\n        @translate\r\n        @navUrls\r\n        @tgSections\r\n    ) ->\r\n\r\n    getNotificationsList: (userId, onlyUnread) ->\r\n        total = 0\r\n        config = {}\r\n        config.fetch = (page) =>\r\n            return @rs.users.getNotifications(userId, page, onlyUnread)\r\n                .then (response) ->\r\n                    return response\r\n\r\n        config.map = (obj) => @._addNotificationAttributes(obj)\r\n        return @userTimelinePaginationSequenceService.generate(config)\r\n\r\n    setNotificationAsRead: (notificationId) ->\r\n        return @rs.users.setNotificationAsRead(notificationId)\r\n\r\n    setNotificationsAsRead: () ->\r\n        return @rs.users.setNotificationsAsRead()\r\n\r\n    _getNotificationObject: (notification) ->\r\n        if notification.get('data').get('obj')\r\n            return notification.get('data').get('obj')\r\n\r\n    _getType: (notification) ->\r\n        return _.find _notificationTypes, (obj) ->\r\n            return obj.check(notification)\r\n\r\n    _addNotificationAttributes: (notification) ->\r\n        event_type = notification.get('event_type')\r\n\r\n        type =  @._getType(notification)\r\n\r\n        title = @._getTitle(notification, event_type, type)\r\n        notification = notification.set('title_html', title)\r\n\r\n        projectSlug = notification.getIn(['data', 'project', 'slug'])\r\n        projectSectionPath = @tgSections.getPath(projectSlug)\r\n        projectUrl = @navUrls.resolve(\"project-#{projectSectionPath}\", { project: projectSlug })\r\n        notification = notification.set('projectUrl', projectUrl)\r\n\r\n        notification = notification.set('obj', @._getNotificationObject(notification))\r\n\r\n        return notification\r\n\r\n    _translateTitleParams: (param, notification, event) ->\r\n        return _params[param].call(this, notification, event)\r\n\r\n    _getDetailObjUrl: (notification, contentType) ->\r\n        urlMapping = {\r\n            \"issue\": \"project-issues-detail\",\r\n            \"task\": \"project-tasks-detail\",\r\n            \"userstory\": \"project-userstories-detail\",\r\n        }\r\n        url = @navUrls.resolve(urlMapping[contentType], {\r\n            project: notification.getIn(['data', 'project', 'slug']),\r\n            ref: notification.getIn(['data', 'obj', 'ref'])\r\n        })\r\n\r\n        return url\r\n\r\n    _getLink: (notification, url, text, css, title) ->\r\n        title = title || text\r\n\r\n        span = $('<span>')\r\n            .attr('ng-non-bindable', true)\r\n            .text(text)\r\n\r\n        return $('<a href=\"\">')\r\n            .attr('title', title)\r\n            .attr('class', css)\r\n            .attr('ng-click', \"vm.setAsRead(notification, \\\"#{url}\\\")\")\r\n            .append(span)\r\n            .prop('outerHTML')\r\n\r\n    _getUsernameSpan: (text) ->\r\n        title = title || text\r\n\r\n        return $('<span>')\r\n            .addClass('username')\r\n            .text(text)\r\n            .prop('outerHTML')\r\n\r\n    _getParams: (notification, event_type, notification_type) ->\r\n        params = {}\r\n\r\n        notification_type.translate_params.forEach (param) =>\r\n            params[param] = @._translateTitleParams(param, notification, event_type)\r\n        return params\r\n\r\n    _getTitle: (notification, event_type, notification_type) ->\r\n        params = @._getParams(notification, event_type, notification_type)\r\n\r\n        paramsKeys = {}\r\n        Object.keys(params).forEach (key) -> paramsKeys[key] = '{{' +key + '}}'\r\n\r\n        translation = @translate.instant(notification_type.key, paramsKeys)\r\n\r\n        Object.keys(params).forEach (key) ->\r\n            find = '{{' +key + '}}'\r\n            translation = translation.replace(new RegExp(find, 'g'), params[key])\r\n\r\n        return translation\r\n\r\nangular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileBarController\r\n    @.$inject = [\r\n        \"tgUserService\"\r\n    ]\r\n\r\n    constructor: (@userService) ->\r\n        @.loadStats()\r\n\r\n    loadStats: () ->\r\n        return @userService.getStats(@.user.get(\"id\")).then (stats) =>\r\n            @.stats = stats\r\n\r\nangular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileBarDirective = () ->\r\n    return {\r\n        templateUrl: \"profile/profile-bar/profile-bar.html\",\r\n        controller: \"ProfileBar\",\r\n        controllerAs: \"vm\",\r\n        scope: {\r\n            user: \"=user\",\r\n            isCurrentUser: \"=iscurrentuser\"\r\n        },\r\n        bindToController: true\r\n    }\r\n\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileContactsController\r\n    @.$inject = [\r\n        \"tgUserService\",\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@userService, @currentUserService) ->\r\n        @.currentUser = @currentUserService.getUser()\r\n\r\n        @.isCurrentUser = false\r\n\r\n        if @.currentUser && @.currentUser.get(\"id\") == @.user.get(\"id\")\r\n            @.isCurrentUser = true\r\n\r\n    loadContacts: () ->\r\n        @userService.getContacts(@.user.get(\"id\"))\r\n            .then (contacts) =>\r\n                @.contacts = contacts\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileContacts\", ProfileContactsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileContactsDirective = () ->\r\n    link = (scope, elm, attrs, ctrl) ->\r\n        ctrl.loadContacts()\r\n\r\n    return {\r\n        templateUrl: \"profile/profile-contacts/profile-contacts.html\",\r\n        scope: {\r\n            user: \"=\"\r\n        },\r\n        controllerAs: \"vm\",\r\n        controller: \"ProfileContacts\",\r\n        link: link,\r\n        bindToController: true\r\n    }\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nFavItemDirective = ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.vm = {item: scope.item}\r\n\r\n    templateUrl = (el, attrs) ->\r\n        if attrs.itemType == \"project\"\r\n            return \"profile/profile-favs/items/project.html\"\r\n        else # if attr.itemType in [\"userstory\", \"task\", \"issue\"]\r\n            return \"profile/profile-favs/items/ticket.html\"\r\n\r\n    return {\r\n        scope: {\r\n            \"item\": \"=tgFavItem\"\r\n        }\r\n        link: link\r\n        templateUrl: templateUrl\r\n    }\r\n\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ndebounceLeading = @.taiga.debounceLeading\r\n\r\nclass FavsBaseController\r\n    constructor: ->\r\n        @._init()\r\n\r\n        #@._getItems = null # Define in inheritance classes\r\n        #\r\n    _init: ->\r\n        @.enableFilterByAll = true\r\n        @.enableFilterByProjects = true\r\n        @.enableFilterByEpics = true\r\n        @.enableFilterByUserStories = true\r\n        @.enableFilterByTasks = true\r\n        @.enableFilterByIssues = true\r\n        @.enableFilterByTextQuery = true\r\n\r\n        @._resetList()\r\n        @.q = null\r\n        @.type = null\r\n\r\n    _resetList: ->\r\n        @.items = Immutable.List()\r\n        @.scrollDisabled = false\r\n        @._page = 1\r\n\r\n    _enableLoadingSpinner: ->\r\n        @.isLoading = true\r\n\r\n    _disableLoadingSpinner: ->\r\n        @.isLoading = false\r\n\r\n    _enableScroll : ->\r\n        @.scrollDisabled = false\r\n\r\n    _disableScroll : ->\r\n        @.scrollDisabled = true\r\n\r\n    _checkIfHasMorePages: (hasNext) ->\r\n        if hasNext\r\n            @._page += 1\r\n            @._enableScroll()\r\n        else\r\n            @._disableScroll()\r\n\r\n    _checkIfHasNoResults: ->\r\n        @.hasNoResults = @.items.size == 0\r\n\r\n    loadItems:  ->\r\n        @._enableLoadingSpinner()\r\n        @._disableScroll()\r\n\r\n        @._getItems(@.user.get(\"id\"), @._page, @.type, @.q)\r\n            .then (response) =>\r\n                @.items = @.items.concat(response.get(\"data\"))\r\n\r\n                @._checkIfHasMorePages(response.get(\"next\"))\r\n                @._checkIfHasNoResults()\r\n                @._disableLoadingSpinner()\r\n\r\n                return @.items\r\n            .catch =>\r\n                @._disableLoadingSpinner()\r\n\r\n                return @.items\r\n\r\n    ################################################\r\n    ## Filtre actions\r\n    ################################################\r\n    filterByTextQuery: debounceLeading 500, ->\r\n        @._resetList()\r\n        @.loadItems()\r\n\r\n    showAll: ->\r\n        if @.type isnt null\r\n            @.type = null\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n    showProjectsOnly: ->\r\n        if @.type isnt \"project\"\r\n            @.type = \"project\"\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n    showEpicsOnly: ->\r\n        if @.type isnt \"epic\"\r\n            @.type = \"epic\"\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n    showUserStoriesOnly: ->\r\n        if @.type isnt \"userstory\"\r\n            @.type = \"userstory\"\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n    showTasksOnly: ->\r\n        if @.type isnt \"task\"\r\n            @.type = \"task\"\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n    showIssuesOnly: ->\r\n        if @.type isnt \"issue\"\r\n            @.type = \"issue\"\r\n            @._resetList()\r\n            @.loadItems()\r\n\r\n\r\n####################################################\r\n## Liked\r\n####################################################\r\n\r\nclass ProfileLikedController extends FavsBaseController\r\n    @.$inject = [\r\n        \"tgUserService\",\r\n    ]\r\n\r\n    constructor: (@userService) ->\r\n        super()\r\n        @.tabName = 'likes'\r\n        @.enableFilterByAll = false\r\n        @.enableFilterByProjects = false\r\n        @.enableFilterByEpics = false\r\n        @.enableFilterByUserStories = false\r\n        @.enableFilterByTasks = false\r\n        @.enableFilterByIssues = false\r\n        @.enableFilterByTextQuery = true\r\n        @._getItems = @userService.getLiked\r\n\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileLiked\", ProfileLikedController)\r\n\r\n####################################################\r\n## Voted\r\n####################################################\r\n\r\nclass ProfileVotedController extends FavsBaseController\r\n    @.$inject = [\r\n        \"tgUserService\",\r\n    ]\r\n\r\n    constructor: (@userService) ->\r\n        super()\r\n        @.tabName = 'upvotes'\r\n        @.enableFilterByAll = true\r\n        @.enableFilterByProjects = false\r\n        @.enableFilterByEpics = true\r\n        @.enableFilterByUserStories = true\r\n        @.enableFilterByTasks = true\r\n        @.enableFilterByIssues = true\r\n        @.enableFilterByTextQuery = true\r\n        @._getItems = @userService.getVoted\r\n\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileVoted\", ProfileVotedController)\r\n\r\n\r\n\r\n####################################################\r\n## Watched\r\n####################################################\r\n\r\nclass ProfileWatchedController extends FavsBaseController\r\n    @.$inject = [\r\n        \"tgUserService\",\r\n    ]\r\n\r\n    constructor: (@userService) ->\r\n        super()\r\n        @.tabName = 'watchers'\r\n        @._getItems = @userService.getWatched\r\n\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileWatched\", ProfileWatchedController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nbase = {\r\n    scope: {},\r\n    bindToController: {\r\n        user: \"=\"\r\n        type: \"@\"\r\n        q: \"@\"\r\n        scrollDisabled: \"@\"\r\n        isLoading: \"@\"\r\n        hasNoResults: \"@\"\r\n    }\r\n    controller: null, # Define in directives\r\n    controllerAs: \"vm\",\r\n    templateUrl: \"profile/profile-favs/profile-favs.html\",\r\n}\r\n\r\n\r\n####################################################\r\n## Liked\r\n####################################################\r\n\r\nProfileLikedDirective = () ->\r\n    return _.extend({}, base, {\r\n        controller: \"ProfileLiked\"\r\n    })\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective)\r\n\r\n\r\n####################################################\r\n## Voted\r\n####################################################\r\n\r\nProfileVotedDirective = () ->\r\n    return _.extend({}, base, {\r\n        controller: \"ProfileVoted\"\r\n    })\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective)\r\n\r\n\r\n####################################################\r\n## Watched\r\n####################################################\r\n\r\nProfileWatchedDirective = () ->\r\n    return _.extend({}, base, {\r\n        controller: \"ProfileWatched\"\r\n    })\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileHints\r\n    HINTS: [\r\n        { #hint1\r\n            url: \"https://community.taiga.io/t/import-export-taiga-projects/168\"\r\n        },\r\n        { #hint2\r\n            url: \"https://community.taiga.io/t/customisation-for-your-projects/127#tier-4-custom-fields-and-due-dates-5\"\r\n        },\r\n        { #hint3\r\n        },\r\n        { #hint4\r\n        }\r\n    ]\r\n    constructor: (@translate) ->\r\n        hintKey = Math.floor(Math.random() * @.HINTS.length) + 1\r\n\r\n        @.hint = @.HINTS[hintKey - 1]\r\n\r\n        @.hint.linkText = @.hint.linkText || 'HINTS.LINK'\r\n\r\n        @.hint.title = @translate.instant(\"HINTS.HINT#{hintKey}_TITLE\")\r\n\r\n        @.hint.text = @translate.instant(\"HINTS.HINT#{hintKey}_TEXT\")\r\n\r\nProfileHints.$inject = [\r\n    \"$translate\"\r\n]\r\n\r\nangular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileHints = ($translate) ->\r\n    return {\r\n        scope: {},\r\n        controller: \"ProfileHints\",\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"profile/profile-hints/profile-hints.html\"\r\n    }\r\n\r\nProfileHints.$inject = [\r\n    \"$translate\"\r\n]\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileProjectsController\r\n    @.$inject = [\r\n        \"tgProjectsService\",\r\n        \"tgUserService\"\r\n    ]\r\n\r\n    constructor: (@projectsService, @userService) ->\r\n\r\n    loadProjects: () ->\r\n        @projectsService.getProjectsByUserId(@.user.get(\"id\"))\r\n            .then (projects) =>\r\n                return @userService.attachUserContactsToProjects(@.user.get(\"id\"), projects)\r\n            .then (projects) =>\r\n                @.projects = projects\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileProjects\", ProfileProjectsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileProjectsDirective = () ->\r\n    link = (scope, elm, attr, ctrl) ->\r\n        ctrl.loadProjects()\r\n\r\n    return {\r\n        templateUrl: \"profile/profile-projects/profile-projects.html\",\r\n        scope: {\r\n            user: \"=\"\r\n        },\r\n        link: link\r\n        bindToController: true,\r\n        controllerAs: \"vm\",\r\n        controller: \"ProfileProjects\"\r\n    }\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileTabDirective = () ->\r\n    link = (scope, element, attrs, ctrl, transclude) ->\r\n        scope.tab = {}\r\n\r\n        attrs.$observe \"tgProfileTab\", (name) ->\r\n            scope.tab.name = name\r\n\r\n        attrs.$observe \"tabTitle\", (title) ->\r\n            scope.tab.title = title\r\n\r\n        scope.tab.icon = attrs.tabIcon\r\n        scope.tab.active = !!attrs.tabActive\r\n\r\n        if scope.$eval(attrs.tabDisabled) != true\r\n            ctrl.addTab(scope.tab)\r\n\r\n    return {\r\n        templateUrl: \"profile/profile-tab/profile-tab.html\",\r\n        scope: {},\r\n        require: \"^tgProfileTabs\",\r\n        link: link,\r\n        transclude: true\r\n    }\r\n\r\nangular.module(\"taigaProfile\")\r\n    .directive(\"tgProfileTab\", ProfileTabDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileTabsController\r\n    constructor: () ->\r\n        @tabs = []\r\n\r\n    addTab: (tab) ->\r\n        @tabs.push(tab)\r\n\r\n    toggleTab: (tab) ->\r\n        _.map @tabs, (tab) -> tab.active = false\r\n\r\n        tab.active = true\r\n\r\nangular.module(\"taigaProfile\")\r\n    .controller(\"ProfileTabs\", ProfileTabsController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nProfileTabsDirective = () ->\r\n    return {\r\n        scope: {}\r\n        controller: \"ProfileTabs\"\r\n        controllerAs: \"vm\"\r\n        templateUrl: \"profile/profile-tabs/profile-tabs.html\"\r\n        transclude: true\r\n    }\r\n\r\nangular.module(\"taigaProfile\")\r\n    .directive(\"tgProfileTabs\", ProfileTabsDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProfileController\r\n    @.$inject = [\r\n        \"tgAppMetaService\",\r\n        \"tgCurrentUserService\",\r\n        \"$routeParams\",\r\n        \"tgUserService\",\r\n        \"tgXhrErrorService\",\r\n        \"$translate\"\r\n    ]\r\n\r\n    constructor: (@appMetaService, @currentUserService, @routeParams, @userService, @xhrError, @translate) ->\r\n        @.isCurrentUser = false\r\n\r\n        if @routeParams.slug\r\n            @userService\r\n                .getUserByUserName(@routeParams.slug)\r\n                .then (user) =>\r\n                    if !user.get('is_active')\r\n                        @xhrError.notFound()\r\n                    else\r\n                        @.user = user\r\n                        @.isCurrentUser = false\r\n                        @._setMeta(@.user)\r\n\r\n                        return user\r\n                .catch (xhr) =>\r\n                    return @xhrError.response(xhr)\r\n\r\n        else\r\n            @.user = @currentUserService.getUser()\r\n            @.isCurrentUser = true\r\n            @._setMeta(@.user)\r\n\r\n    _setMeta: (user) ->\r\n        ctx = {\r\n            userFullName: user.get(\"full_name_display\"),\r\n            userUsername: user.get(\"username\")\r\n        }\r\n\r\n        title = @translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx)\r\n\r\n        description = user.get(\"bio\")\r\n        @appMetaService.setAll(title, description)\r\n\r\nangular.module(\"taigaProfile\").controller(\"Profile\", ProfileController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nBlockedProjectExplanationDirective = () ->\r\n    return {\r\n        templateUrl: \"projects/project/blocked-project-explanation.html\"\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ContactProjectButtonController\r\n    @.$inject = ['tgLightboxFactory']\r\n\r\n    constructor: (@lightboxFactory)->\r\n\r\n    launchContactForm: () ->\r\n        @lightboxFactory.create(\r\n            'tg-lb-contact-project',\r\n            {\r\n                \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\r\n                \"project\": \"project\"\r\n            },\r\n            {\r\n                \"project\": @.project\r\n            }\r\n        )\r\n\r\n\r\nangular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nContactProjectButtonDirective = ->\r\n    return {\r\n        scope: {}\r\n        controller: \"ContactProjectButtonCtrl\",\r\n        bindToController: {\r\n            project: '='\r\n            layout: '@'\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"projects/components/contact-project-button/contact-project-button.html\",\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ContactProjectLbController\r\n    @.$inject = [\r\n        \"lightboxService\",\r\n        \"tgResources\",\r\n        \"$tgConfirm\",\r\n    ]\r\n\r\n    constructor: (@lightboxService, @rs, @confirm) ->\r\n        @.contact = {}\r\n\r\n    contactProject: () ->\r\n        project = @.project.get('id')\r\n        message = @.contact.message\r\n\r\n        promise = @rs.projects.contactProject(project, message)\r\n        @.sendingFeedback = true\r\n        promise.then  =>\r\n            @lightboxService.closeAll()\r\n            @.sendingFeedback = false\r\n            @confirm.notify(\"success\")\r\n\r\nangular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nContactProjectLbDirective = (lightboxService) ->\r\n\r\n    @.inject = ['lightboxService']\r\n\r\n    link = (scope, el) ->\r\n        lightboxService.open(el)\r\n\r\n    return {\r\n        controller: \"ContactProjectLbCtrl\",\r\n        bindToController: {\r\n            project: '='\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\r\n        link: link\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass LikeProjectButtonController\r\n    @.$inject = [\r\n        \"$tgConfirm\"\r\n        \"tgLikeProjectButtonService\"\r\n    ]\r\n\r\n    constructor: (@confirm, @likeButtonService)->\r\n        @.isMouseOver = false\r\n        @.loading = false\r\n\r\n    showTextWhenMouseIsOver: ->\r\n        @.isMouseOver = true\r\n\r\n    showTextWhenMouseIsLeave: ->\r\n        @.isMouseOver = false\r\n\r\n    toggleLike: ->\r\n        @.loading = true\r\n\r\n        if not @.project.get(\"is_fan\")\r\n            promise = @._like()\r\n        else\r\n            promise = @._unlike()\r\n\r\n        promise.finally () => @.loading = false\r\n\r\n        return promise\r\n\r\n    _like: ->\r\n        return @likeButtonService.like(@.project.get('id'))\r\n            .then =>\r\n                @.showTextWhenMouseIsLeave()\r\n            .catch =>\r\n                @confirm.notify(\"error\")\r\n\r\n    _unlike: ->\r\n        return @likeButtonService.unlike(@.project.get('id')).catch =>\r\n            @confirm.notify(\"error\")\r\n\r\nangular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nLikeProjectButtonDirective = ->\r\n    return {\r\n        scope: {}\r\n        controller: \"LikeProjectButton\",\r\n        bindToController: {\r\n            project: '='\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"projects/components/like-project-button/like-project-button.html\",\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass LikeProjectButtonService extends taiga.Service\r\n    @.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"]\r\n\r\n    constructor: (@rs, @currentUserService, @projectService) ->\r\n\r\n    _getProjectIndex: (projectId) ->\r\n        return @currentUserService.projects\r\n                .get('all')\r\n                .findIndex (project) -> project.get('id') == projectId\r\n\r\n    _updateProjects: (projectId, isFan) ->\r\n        projectIndex = @._getProjectIndex(projectId)\r\n\r\n        return if projectIndex == -1\r\n\r\n        projects = @currentUserService.projects\r\n            .get('all')\r\n            .update projectIndex, (project) ->\r\n                totalFans = project.get(\"total_fans\")\r\n\r\n                if isFan then totalFans++ else totalFans--\r\n\r\n                return project.merge({\r\n                    is_fan: isFan,\r\n                    total_fans: totalFans\r\n                })\r\n\r\n        @currentUserService.setProjects(projects)\r\n\r\n    _updateCurrentProject: (isFan) ->\r\n        totalFans = @projectService.project.get(\"total_fans\")\r\n\r\n        if isFan then totalFans++ else totalFans--\r\n\r\n        project = @projectService.project.merge({\r\n            is_fan: isFan,\r\n            total_fans: totalFans\r\n        })\r\n\r\n        @projectService.setProject(project)\r\n\r\n    like: (projectId) ->\r\n        return @rs.projects.likeProject(projectId).then =>\r\n            @._updateProjects(projectId, true)\r\n            @._updateCurrentProject(true)\r\n\r\n    unlike: (projectId) ->\r\n        return @rs.projects.unlikeProject(projectId).then =>\r\n            @._updateProjects(projectId, false)\r\n            @._updateCurrentProject(false)\r\n\r\nangular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nSortProjectsDirective = (currentUserService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        itemEl = null\r\n\r\n        drake = dragula([el[0]], {\r\n            copySortSource: false,\r\n            copy: false,\r\n            mirrorContainer: el[0],\r\n            moves: (item) -> return $(item).hasClass('list-itemtype-project')\r\n        })\r\n\r\n        drake.on 'dragend', (item) ->\r\n            itemEl = $(item)\r\n            project = itemEl.scope().project\r\n            index = itemEl.index()\r\n\r\n            sorted_project_ids = _.map(scope.projects.toJS(), (p) -> p.id)\r\n            sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"))\r\n            sorted_project_ids.splice(index, 0, project.get('id'))\r\n\r\n            sortData = []\r\n\r\n            for value, index in sorted_project_ids\r\n                sortData.push({\"project_id\": value, \"order\":index})\r\n\r\n            currentUserService.bulkUpdateProjectsOrder(sortData)\r\n\r\n        scroll = autoScroll(window, {\r\n            margin: 20,\r\n            pixels: 30,\r\n            scrollWhenOutside: true,\r\n            autoScroll: () ->\r\n                return this.down && drake.dragging\r\n        })\r\n\r\n        scope.$on \"$destroy\", ->\r\n            el.off()\r\n            drake.destroy()\r\n\r\n    directive = {\r\n        scope: {\r\n            projects: \"=tgSortProjects\"\r\n        },\r\n        link: link\r\n    }\r\n\r\n    return directive\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass WatchProjectButtonController\r\n    @.$inject = [\r\n        \"$tgConfirm\"\r\n        \"tgWatchProjectButtonService\"\r\n    ]\r\n\r\n    constructor: (@confirm, @watchButtonService)->\r\n        @.showWatchOptions = false\r\n        @.loading = false\r\n\r\n    toggleWatcherOptions: () ->\r\n        @.showWatchOptions = !@.showWatchOptions\r\n\r\n    closeWatcherOptions: () ->\r\n        @.showWatchOptions = false\r\n\r\n    watch: (notifyLevel) ->\r\n        return if notifyLevel == @.project.get('notify_level')\r\n\r\n        @.loading = true\r\n        @.closeWatcherOptions()\r\n\r\n        return @watchButtonService.watch(@.project.get('id'), notifyLevel)\r\n            .catch () => @confirm.notify(\"error\")\r\n            .finally () => @.loading = false\r\n\r\n    unwatch: ->\r\n        @.loading = true\r\n        @.closeWatcherOptions()\r\n\r\n        return @watchButtonService.unwatch(@.project.get('id'))\r\n            .catch () => @confirm.notify(\"error\")\r\n            .finally () => @.loading = false\r\n\r\nangular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nWatchProjectButtonDirective = ->\r\n    return {\r\n        scope: {}\r\n        controller: \"WatchProjectButton\",\r\n        bindToController: {\r\n            project: \"=\"\r\n        }\r\n        controllerAs: \"vm\",\r\n        templateUrl: \"projects/components/watch-project-button/watch-project-button.html\",\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass WatchProjectButtonService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgResources\",\r\n        \"tgCurrentUserService\",\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@rs, @currentUserService, @projectService) ->\r\n\r\n    _getProjectIndex: (projectId) ->\r\n        return @currentUserService.projects\r\n                .get('all')\r\n                .findIndex (project) -> project.get('id') == projectId\r\n\r\n\r\n    _updateProjects: (projectId, notifyLevel, isWatcher) ->\r\n        projectIndex = @._getProjectIndex(projectId)\r\n\r\n        return if projectIndex == -1\r\n\r\n        projects = @currentUserService.projects\r\n            .get('all')\r\n            .update projectIndex, (project) =>\r\n                totalWatchers = project.get('total_watchers')\r\n\r\n\r\n                if !@projectService.project.get('is_watcher')  && isWatcher\r\n                    totalWatchers++\r\n                else if @projectService.project.get('is_watcher') && !isWatcher\r\n                    totalWatchers--\r\n\r\n                return project.merge({\r\n                    is_watcher: isWatcher,\r\n                    total_watchers: totalWatchers\r\n                    notify_level: notifyLevel\r\n                })\r\n\r\n        @currentUserService.setProjects(projects)\r\n\r\n    _updateCurrentProject: (notifyLevel, isWatcher) ->\r\n        totalWatchers = @projectService.project.get(\"total_watchers\")\r\n\r\n        if !@projectService.project.get('is_watcher')  && isWatcher\r\n            totalWatchers++\r\n        else if @projectService.project.get('is_watcher') && !isWatcher\r\n            totalWatchers--\r\n\r\n        project = @projectService.project.merge({\r\n            is_watcher: isWatcher,\r\n            notify_level: notifyLevel,\r\n            total_watchers: totalWatchers\r\n        })\r\n\r\n        @projectService.setProject(project)\r\n\r\n    watch: (projectId, notifyLevel) ->\r\n        return @rs.projects.watchProject(projectId, notifyLevel).then =>\r\n            @._updateProjects(projectId, notifyLevel, true)\r\n            @._updateCurrentProject(notifyLevel, true)\r\n\r\n    unwatch: (projectId) ->\r\n        return @rs.projects.unwatchProject(projectId).then =>\r\n            @._updateProjects(projectId, null, false)\r\n            @._updateCurrentProject(null, false)\r\n\r\nangular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AsanaImportProjectFormController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        @.projectForm = @.project.toJS()\r\n\r\n        @.platformName = \"Asana\"\r\n        @.projectForm.is_private = false\r\n        @.projectForm.keepExternalReference = false\r\n        @.projectForm.project_type = \"scrum\"\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\r\n\r\n    saveForm: () ->\r\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid\r\n\r\n    isDisabled: () ->\r\n        return !@.canCreateProject()\r\n\r\nangular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAsanaImportProjectFormDirective = () ->\r\n    return {\r\n        link: (scope, elm, attr, ctrl) ->\r\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\r\n\r\n        templateUrl:\"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\r\n        controller: \"AsanaImportProjectFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            members: '<',\r\n            project: '<',\r\n            onSaveProjectDetails: '&',\r\n            onCancelForm: '&',\r\n            fetchingUsers: '<'\r\n        }\r\n    }\r\n\r\nAsanaImportProjectFormDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AsanaImportController\r\n    @.$inject = [\r\n        'tgAsanaImportService',\r\n        '$tgConfirm',\r\n        '$translate',\r\n        'tgImportProjectService',\r\n    ]\r\n\r\n    constructor: (@asanaImportService, @confirm, @translate, @importProjectService) ->\r\n        @.step = 'autorization-asana'\r\n        @.project = null\r\n        taiga.defineImmutableProperty @, 'projects', () => return @asanaImportService.projects\r\n        taiga.defineImmutableProperty @, 'members', () => return @asanaImportService.projectUsers\r\n\r\n    startProjectSelector: () ->\r\n        @.step = 'project-select-asana'\r\n        @asanaImportService.fetchProjects()\r\n\r\n    onSelectProject: (project) ->\r\n        @.step = 'project-form-asana'\r\n        @.project = project\r\n        @.fetchingUsers = true\r\n\r\n        @asanaImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\r\n\r\n    onSaveProjectDetails: (project) ->\r\n        @.project = project\r\n        @.step = 'project-members-asana'\r\n\r\n    onCancelMemberSelection: () ->\r\n        @.step = 'project-form-asana'        \r\n\r\n    startImport: (users) ->\r\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\r\n\r\n        loader.start()\r\n\r\n        promise = @asanaImportService.importProject(\r\n            @.project.get('name'),\r\n            @.project.get('description'),\r\n            @.project.get('id'),\r\n            users,\r\n            @.project.get('keepExternalReference'),\r\n            @.project.get('is_private')\r\n            @.project.get('project_type')\r\n        )\r\n\r\n        @importProjectService.importPromise(promise).then () => loader.stop()\r\n\r\n    submitUserSelection: (users) ->\r\n        @.startImport(users)\r\n        return null\r\n\r\nangular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nAsanaImportDirective = () ->\r\n    return {\r\n        link: (scope, elm, attrs, ctrl) ->\r\n            ctrl.startProjectSelector()\r\n        templateUrl:\"projects/create/asana-import/asana-import.html\",\r\n        controller: \"AsanaImportCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            onCancel: '&'\r\n        }\r\n    }\r\n\r\nAsanaImportDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AsanaImportService extends taiga.Service\r\n    @.$inject = [\r\n        'tgResources',\r\n        '$location',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (@resources, @location, @q) ->\r\n        @.projects = Immutable.List()\r\n        @.projectUsers = Immutable.List()\r\n        @.token = null\r\n\r\n    setToken: (token) ->\r\n        @.token = token\r\n\r\n    fetchProjects: () ->\r\n        @resources.asanaImporter.listProjects(@.token).then (projects) => @.projects = projects\r\n\r\n    fetchUsers: (projectId) ->\r\n        @resources.asanaImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\r\n\r\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\r\n        return @resources.asanaImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType)\r\n\r\n    getAuthUrl: () ->\r\n        return @q (resolve) =>\r\n            @resources.asanaImporter.getAuthUrl().then (response) =>\r\n                @.authUrl = response.data.url\r\n                resolve(@.authUrl)\r\n\r\n    authorize: (code) ->\r\n        return @q (resolve, reject) =>\r\n            @resources.asanaImporter.authorize(code).then ((response) =>\r\n                @.token = response.data.token\r\n                resolve(@.token)\r\n            ), (error) ->\r\n                reject(new Error(error.status))\r\n\r\nangular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass CreatetProjectFormController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n        \"tgProjectsService\",\r\n        \"$projectUrl\",\r\n        \"$location\",\r\n        \"$tgNavUrls\",\r\n        \"$tgAnalytics\"\r\n   ]\r\n\r\n    constructor: (@currentUserService, @projectsService, @projectUrl, @location, @navUrls, @analytics) ->\r\n        @.errorList = []\r\n        @.projectForm = {\r\n            is_private: false\r\n        }\r\n\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n        if @.type == 'scrum'\r\n            @.projectForm.creation_template = 1\r\n        else\r\n            @.projectForm.creation_template = 2\r\n\r\n    submit: () ->\r\n        @.errorList = []\r\n        if !@.projectForm.name then @.errorList.push('name')\r\n        if !@.projectForm.description then @.errorList.push ('description')\r\n        if(@.errorList.length == 0)\r\n            @.formSubmitLoading = true\r\n            @projectsService.create(@.projectForm).then (project) =>\r\n                @analytics.trackEvent(\"project\", \"create\", \"project creation\", {slug: project.get('slug'), id: project.get('id')})\r\n                @location.url(@projectUrl.get(project))\r\n                @currentUserService.loadProjects()\r\n\r\n    onCancelForm: () ->\r\n        @location.path(@navUrls.resolve(\"create-project\"))\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid\r\n\r\n    isDisabled: () ->\r\n        return @.formSubmitLoading || !@.canCreateProject()\r\n\r\nangular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCreateProjectFormDirective = () ->\r\n    return {\r\n        templateUrl:\"projects/create/create-project-form/create-project-form.html\",\r\n        controller: \"CreateProjectFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            type: '@'\r\n        }\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaProject\")\r\n\r\ncreateProjectMembersRestrictionsDirective = () ->\r\n    return {\r\n        scope: {\r\n            isPrivate: '=',\r\n            limitMembersPrivateProject: '=',\r\n            limitMembersPublicProject: '='\r\n        },\r\n        templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\r\n    }\r\n\r\nmodule.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module(\"taigaProject\")\r\n\r\ncreateProjectRestrictionsDirective = () ->\r\n    return {\r\n        scope: {\r\n            isPrivate: '=',\r\n            canCreatePrivateProjects: '=',\r\n            canCreatePublicProjects: '='\r\n        },\r\n        templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\r\n    }\r\n\r\nmodule.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass CreateProjectController\r\n    @.$inject = [\r\n        \"tgAppMetaService\",\r\n        \"$translate\",\r\n        \"tgProjectService\",\r\n        \"$tgAuth\",\r\n        \"tgLightboxFactory\",\r\n        \"tgResources\",\r\n        \"$tgConfig\"\r\n    ]\r\n\r\n    constructor: (@appMetaService, @translate, @projectService, @authService, @lightboxFactory, @rs, @config) ->\r\n        taiga.defineImmutableProperty @, \"project\", () => return @projectService.project\r\n\r\n        @appMetaService.setfn @._setMeta.bind(this)\r\n\r\n        @authService.refresh()\r\n\r\n        @.displayScrumDesc = false\r\n        @.dontAsk = false\r\n\r\n        # If you want to prevent this lightbox from showing up you need to add the variable isSass and set it to true on the conf.json\r\n        if !@config.get(\"isSaas\")\r\n            @rs.user.getUserStorage('dont_ask_premise_newsletter')\r\n                .then (storageState) =>\r\n                    @.dontAsk = storageState\r\n                    @.displayOnPremise()\r\n                .catch (storageError) =>\r\n                    if storageError.status = 404\r\n                        @rs.user.createUserStorage('dont_ask_premise_newsletter', false)\r\n                        @.dontAsk = false\r\n                        @.displayOnPremise()\r\n\r\n\r\n    _setMeta: () ->\r\n        return null if !@.project\r\n\r\n        ctx = {projectName: @.project.get(\"name\")}\r\n\r\n        return {\r\n            title: @translate.instant(\"PROJECT.PAGE_TITLE\", ctx)\r\n            description: @.project.get(\"description\")\r\n        }\r\n\r\n    displayOnPremise: () ->\r\n        if !@.dontAsk\r\n            @lightboxFactory.create(\"tg-newsletter-email-lightbox\", {\r\n                \"class\": \"lightbox newsletter-email\"\r\n            })\r\n\r\n    displayHelp: (type, $event) ->\r\n        $event.stopPropagation()\r\n        $event.preventDefault()\r\n\r\n        if type == 'scrum'\r\n            @.displayScrumDesc = !@.displayScrumDesc\r\n        if type == 'kanban'\r\n            @.displayKanbanDesc = !@.displayKanbanDesc\r\n\r\n\r\nangular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass DuplicateProjectController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\",\r\n        \"tgProjectsService\",\r\n        \"$tgLocation\",\r\n        \"$tgNavUrls\"\r\n    ]\r\n\r\n    constructor: (@currentUserService, @projectsService, @location, @navUrls) ->\r\n        @.user = @currentUserService.getUser()\r\n        @.members = Immutable.List()\r\n\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        taiga.defineImmutableProperty @, 'projects', () => @currentUserService.projects.get(\"all\")\r\n\r\n        @.projectForm = {\r\n            is_private: false\r\n        }\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n    refreshReferenceProject: (slug) ->\r\n        @projectsService.getProjectBySlug(slug).then (project) =>\r\n            @.referenceProject = project\r\n            @.members = project.get('members').filter (it) => return it.get('id') != @.user.get('id')\r\n            @.invitedMembers = @.members.map (it) -> return it.get('id')\r\n            @.checkUsersLimit()\r\n\r\n    toggleInvitedMember: (member) ->\r\n        if @.invitedMembers.includes(member)\r\n            @.invitedMembers = @.invitedMembers.filter (it) -> it != member\r\n        else\r\n            @.invitedMembers = @.invitedMembers.push(member)\r\n\r\n        @.checkUsersLimit()\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.invitedMembers.size + 1)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.invitedMembers.size + 1)\r\n\r\n    submit: () ->\r\n        projectId = @.referenceProject.get('id')\r\n        data = @.projectForm\r\n        data.users = @.invitedMembers\r\n\r\n        @.formSubmitLoading = true\r\n        @projectsService.duplicate(projectId, data).then (newProject) =>\r\n            @.formSubmitLoading = false\r\n            @location.path(@navUrls.resolve(\"project\", {project: newProject.data.slug}))\r\n            @currentUserService.loadProjects()\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid && @.limitMembersPrivateProject.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid && @.limitMembersPublicProject.valid\r\n\r\n    isDisabled: () ->\r\n        return @.formSubmitLoading || !@.canCreateProject()\r\n\r\n    onCancelForm: () ->\r\n        @location.path(@navUrls.resolve(\"create-project\"))\r\n\r\nangular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nDuplicateProjectDirective = () ->\r\n\r\n    link = (scope, el, attr, ctrl) ->\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"projects/create/duplicate/duplicate-project.html\",\r\n        controller: \"DuplicateProjectCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {}\r\n    }\r\n\r\nDuplicateProjectDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass GithubImportProjectFormController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        @.projectForm = @.project.toJS()\r\n\r\n        @.platformName = \"Github\"\r\n        @.projectForm.is_private = false\r\n        @.projectForm.keepExternalReference = false\r\n        @.projectForm.project_type = \"kanban\"\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\r\n\r\n    saveForm: () ->\r\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid\r\n\r\n    isDisabled: () ->\r\n        return !@.canCreateProject()\r\n\r\n\r\nangular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nGithubImportProjectFormDirective = () ->\r\n    return {\r\n        link: (scope, elm, attr, ctrl) ->\r\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\r\n\r\n        templateUrl:\"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\r\n        controller: \"GithubImportProjectFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            members: '<',\r\n            project: '<',\r\n            onSaveProjectDetails: '&',\r\n            onCancelForm: '&',\r\n            fetchingUsers: '<'\r\n        }\r\n    }\r\n\r\nGithubImportProjectFormDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass GithubImportController\r\n    @.$inject = [\r\n        'tgGithubImportService',\r\n        '$tgConfirm',\r\n        '$translate',\r\n        'tgImportProjectService',\r\n    ]\r\n\r\n    constructor: (@githubImportService, @confirm, @translate, @importProjectService) ->\r\n        @.step = 'autorization-github'\r\n        @.project = null\r\n\r\n        taiga.defineImmutableProperty @, 'projects', () => return @githubImportService.projects\r\n        taiga.defineImmutableProperty @, 'members', () => return @githubImportService.projectUsers\r\n\r\n    startProjectSelector: () ->\r\n        @.step = 'project-select-github'\r\n        @githubImportService.fetchProjects()\r\n\r\n    onSelectProject: (project) ->\r\n        @.step = 'project-form-github'\r\n        @.project = project\r\n        @.fetchingUsers = true\r\n\r\n        @githubImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\r\n\r\n    onSaveProjectDetails: (project) ->\r\n        @.project = project\r\n        @.step = 'project-members-github'\r\n\r\n    onCancelMemberSelection: () ->\r\n        @.step = 'project-form-github'\r\n\r\n    startImport: (users) ->\r\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\r\n\r\n        loader.start()\r\n\r\n        promise = @githubImportService.importProject(\r\n            @.project.get('name'),\r\n            @.project.get('description'),\r\n            @.project.get('id'),\r\n            users,\r\n            @.project.get('keepExternalReference'),\r\n            @.project.get('is_private')\r\n            @.project.get('project_type')\r\n        )\r\n\r\n        @importProjectService.importPromise(promise).then () => loader.stop()\r\n\r\n    submitUserSelection: (users) ->\r\n        @.startImport(users)\r\n        return null\r\n\r\nangular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nGithubImportDirective = () ->\r\n    return {\r\n        link: (scope, elm, attrs, ctrl) ->\r\n            ctrl.startProjectSelector()\r\n        templateUrl:\"projects/create/github-import/github-import.html\",\r\n        controller: \"GithubImportCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            onCancel: '&'\r\n        }\r\n    }\r\n\r\nGithubImportDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass GithubImportService extends taiga.Service\r\n    @.$inject = [\r\n        'tgResources',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (@resources, @q) ->\r\n        @.projects = Immutable.List()\r\n        @.projectUsers = Immutable.List()\r\n\r\n    setToken: (token) ->\r\n        @.token = token\r\n\r\n    fetchProjects: () ->\r\n        @resources.githubImporter.listProjects(@.token).then (projects) => @.projects = projects\r\n\r\n    fetchUsers: (projectId) ->\r\n        @resources.githubImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\r\n\r\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\r\n        return @resources.githubImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType)\r\n\r\n    getAuthUrl: (callbackUri) ->\r\n        return @q (resolve) =>\r\n            @resources.githubImporter.getAuthUrl(callbackUri).then (response) =>\r\n                @.authUrl = response.data.url\r\n                resolve(@.authUrl)\r\n\r\n    authorize: (code) ->\r\n        return @q (resolve, reject) =>\r\n            @resources.githubImporter.authorize(code).then ((response) =>\r\n                @.token = response.data.token\r\n                resolve(@.token)\r\n            ), (error) ->\r\n                reject(new Error(error.status))\r\n\r\nangular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ImportProjectMembersController\r\n    @.$inject = [\r\n        'tgCurrentUserService',\r\n        'tgUserService'\r\n    ]\r\n\r\n    constructor: (@currentUserService, @userService) ->\r\n        @.selectImportUserLightbox = false\r\n        @.warningImportUsers = false\r\n        @.displayEmailSelector = true\r\n        @.cancelledUsers = Immutable.List()\r\n        @.selectedUsers = Immutable.List()\r\n        @.selectableUsers = Immutable.List()\r\n        @.userContacts = Immutable.List()\r\n\r\n    fetchUser: () ->\r\n        @.currentUser = @currentUserService.getUser()\r\n\r\n        @userService.getContacts(@.currentUser.get('id')).then (userContacts) =>\r\n            @.userContacts = userContacts\r\n            @.refreshSelectableUsers()\r\n\r\n    searchUser: (user) ->\r\n        @.selectImportUserLightbox = true\r\n        @.searchingUser = user\r\n\r\n    beforeSubmitUsers: () ->\r\n        if @.selectedUsers.size != @.members.size\r\n            @.warningImportUsers = true\r\n        else\r\n            @.submit()\r\n\r\n    confirmUser: (externalUser, taigaUser) ->\r\n        @.selectImportUserLightbox = false\r\n\r\n        user = Immutable.Map()\r\n        user = user.set('user', externalUser)\r\n        user = user.set('taigaUser', taigaUser)\r\n\r\n        @.selectedUsers = @.selectedUsers.push(user)\r\n\r\n        @.discardSuggestedUser(externalUser)\r\n\r\n        @.refreshSelectableUsers()\r\n\r\n    unselectUser: (user) ->\r\n        index = @.selectedUsers.findIndex (it) -> it.getIn(['user', 'id']) == user.get('id')\r\n\r\n        @.selectedUsers = @.selectedUsers.delete(index)\r\n        @.refreshSelectableUsers()\r\n\r\n    discardSuggestedUser: (member) ->\r\n        @.cancelledUsers = @.cancelledUsers.push(member.get('id'))\r\n\r\n    getSelectedMember: (member) ->\r\n        return @.selectedUsers.find (it) ->\r\n            return it.getIn(['user', 'id']) == member.get('id')\r\n\r\n    isMemberSelected: (member) ->\r\n        return !!@.getSelectedMember(member)\r\n\r\n    getUser: (user) ->\r\n        userSelected = @.getSelectedMember(user)\r\n\r\n        if userSelected\r\n            return userSelected.get('taigaUser')\r\n        else\r\n            return null\r\n\r\n    submit: () ->\r\n        @.warningImportUsers = false\r\n\r\n        users = Immutable.Map()\r\n\r\n        @.selectedUsers.map (it) ->\r\n            id = ''\r\n\r\n            if _.isString(it.get('taigaUser'))\r\n                id = it.get('taigaUser')\r\n            else\r\n                id = it.getIn(['taigaUser', 'id'])\r\n\r\n            users = users.set(it.getIn(['user', 'id']), id)\r\n\r\n        @.onSubmit({users: users})\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size + 1)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size + 1)\r\n\r\n    showSuggestedMatch: (member) ->\r\n        return member.get('user') && @.cancelledUsers.indexOf(member.get('id')) == -1 && !@.isMemberSelected(member)\r\n\r\n    getDistinctSelectedTaigaUsers: () ->\r\n        ids = []\r\n\r\n        users = @.selectedUsers.filter (it) ->\r\n            id = it.getIn(['taigaUser', 'id'])\r\n\r\n            if ids.indexOf(id) == -1\r\n                ids.push(id)\r\n                return true\r\n\r\n            return false\r\n\r\n        return users.filter (it) =>\r\n            return it.getIn(['taigaUser', 'id']) != @.currentUser.get('id')\r\n\r\n    refreshSelectableUsers: () ->\r\n        @.importMoreUsersDisabled = @.isImportMoreUsersDisabled()\r\n\r\n        if @.importMoreUsersDisabled\r\n            users = @.getDistinctSelectedTaigaUsers()\r\n\r\n            @.selectableUsers = users.map (it) -> return it.get('taigaUser')\r\n            @.displayEmailSelector = false\r\n        else\r\n            @.selectableUsers = @.userContacts\r\n            @.displayEmailSelector = true\r\n\r\n        @.selectableUsers = @.selectableUsers.push(@.currentUser)\r\n\r\n    isImportMoreUsersDisabled: () ->\r\n        users = @.getDistinctSelectedTaigaUsers()\r\n\r\n        # currentUser + newUser = +2\r\n        total = users.size + 2\r\n\r\n\r\n        if @.project.get('is_private')\r\n            return !@currentUserService.canAddMembersPrivateProject(total).valid\r\n        else\r\n            return !@currentUserService.canAddMembersPublicProject(total).valid\r\n\r\nangular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nImportProjectMembersDirective = () ->\r\n    return {\r\n        link: (scope, elm, attr, ctrl) ->\r\n            ctrl.fetchUser()\r\n\r\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\r\n\r\n        templateUrl:\"projects/create/import-project-members/import-project-members.html\",\r\n        controller: \"ImportProjectMembersCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            members: '<',\r\n            project: '<',\r\n            onSubmit: '&',\r\n            platform: '@',\r\n            logo: '@',\r\n            onCancel: '&'\r\n        }\r\n    }\r\n\r\nImportProjectMembersDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ImportProjectSelectorController\r\n    selectProject: (project) ->\r\n        @.onSelectProject({project: Immutable.fromJS(project)})\r\n\r\nangular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nImportProjectSelectorDirective = () ->\r\n    return {\r\n        templateUrl:\"projects/create/import-project-selector/import-project-selector.html\",\r\n        controller: \"ImportProjectSelectorCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            projects: '<',\r\n            onCancel: '&',\r\n            onSelectProject: '&',\r\n            logo: '@',\r\n            noProjectsMsg: '@',\r\n            search: '@'\r\n        }\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ImportTaigaController\r\n    @.$inject = [\r\n        '$tgConfirm',\r\n        '$tgResources',\r\n        'tgImportProjectService',\r\n        '$translate',\r\n        '$tgAnalytics',\r\n    ]\r\n\r\n    constructor: (@confirm, @rs, @importProjectService, @translate, @analytics) ->\r\n\r\n    importTaiga: (files) ->\r\n        @analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1)\r\n\r\n        file = files[0]\r\n\r\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'),\r\n            @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\r\n\r\n        loader.start()\r\n\r\n        promise = @rs.projects.import(file, loader.update)\r\n        @importProjectService.importPromise(promise).finally () -> loader.stop()\r\n\r\n        return\r\n\r\nangular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nImportTaigaDirective = () ->\r\n    return {\r\n        templateUrl:\"projects/create/import-taiga/import-taiga.html\",\r\n        controller: \"ImportTaigaCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {}\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nLbImportErrorDirective = (lightboxService) ->\r\n    link = (scope, el, attrs) ->\r\n        lightboxService.open(el)\r\n\r\n        scope.close = () ->\r\n            lightboxService.close(el)\r\n            return\r\n\r\n    return {\r\n        templateUrl: \"projects/create/import/import-project-error-lb.html\",\r\n        link: link\r\n    }\r\n\r\nLbImportErrorDirective.$inject = [\"lightboxService\"]\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ImportProjectController\r\n    @.$inject = [\r\n        'tgTrelloImportService',\r\n        'tgJiraImportService',\r\n        'tgGithubImportService',\r\n        'tgAsanaImportService',\r\n        '$location',\r\n        '$window',\r\n        '$routeParams',\r\n        '$tgNavUrls',\r\n        '$tgConfig',\r\n        '$tgConfirm',\r\n        '$tgAnalytics',\r\n    ]\r\n\r\n    constructor: (@trelloService, @jiraService, @githubService, @asanaService,\r\n                  @location, @window, @routeParams, @tgNavUrls, @config, @confirm,\r\n                  @analytics) ->\r\n\r\n    start: ->\r\n        @.token = null\r\n        @.from = @routeParams.platform\r\n\r\n        locationSearch = @location.search()\r\n\r\n        if @.from\r\n            @analytics.trackEvent(\"import\", @.from, \"Start import from \"+@.from, 1)\r\n\r\n        if @.from == \"asana\"\r\n            asanaOauthToken = locationSearch.code\r\n            if locationSearch.code\r\n                asanaOauthToken = locationSearch.code\r\n\r\n                return @asanaService.authorize(asanaOauthToken).then ((token) =>\r\n                    @location.search({token: encodeURIComponent(JSON.stringify(token))})\r\n                ), @.cancelCurrentImport.bind(this)\r\n            else\r\n                @.token = JSON.parse(decodeURIComponent(locationSearch.token))\r\n                @asanaService.setToken(@.token)\r\n\r\n        if @.from  == 'trello'\r\n            if locationSearch.oauth_verifier\r\n                trelloOauthToken = locationSearch.oauth_verifier\r\n                return @trelloService.authorize(trelloOauthToken).then ((token) =>\r\n                    @location.search({token: token})\r\n                ), @.cancelCurrentImport.bind(this)\r\n            else if locationSearch.token\r\n                @.token = locationSearch.token\r\n                @trelloService.setToken(locationSearch.token)\r\n\r\n        if @.from == \"github\"\r\n            if locationSearch.code\r\n                githubOauthToken = locationSearch.code\r\n\r\n                return @githubService.authorize(githubOauthToken).then ((token) =>\r\n                    @location.search({token: token})\r\n                ), @.cancelCurrentImport.bind(this)\r\n            else if locationSearch.token\r\n                @.token = locationSearch.token\r\n                @githubService.setToken(locationSearch.token)\r\n\r\n        if @.from == \"jira\"\r\n            jiraOauthToken = locationSearch.oauth_token\r\n\r\n            if jiraOauthToken\r\n                jiraOauthVerifier = locationSearch.oauth_verifier\r\n                return @jiraService.authorize(jiraOauthVerifier).then ((data) =>\r\n                    @location.search({token: data.token, url: data.url})\r\n                ), @.cancelCurrentImport.bind(this)\r\n            else\r\n                @.token = locationSearch.token\r\n                @jiraService.setToken(locationSearch.token, locationSearch.url)\r\n\r\n    select: (from) ->\r\n        if from == \"trello\"\r\n            @trelloService.getAuthUrl().then (url) =>\r\n                @window.open(url, \"_self\")\r\n        else if from == \"jira\"\r\n            @jiraService.getAuthUrl(@.jiraUrl).then (url) =>\r\n                @window.open url, \"_self\"\r\n            , (err) =>\r\n                @confirm.notify('error', err)\r\n        else if from == \"github\"\r\n            callbackUri = @location.absUrl() + \"/github\"\r\n            @githubService.getAuthUrl(callbackUri).then (url) =>\r\n                @window.open(url, \"_self\")\r\n        else if from == \"asana\"\r\n            @asanaService.getAuthUrl().then (url) =>\r\n                @window.open(url, \"_self\")\r\n        else\r\n            @.from = from\r\n\r\n    unfoldOptions: (options) ->\r\n        @.unfoldedOptions = options\r\n\r\n    isActiveImporter: (importer) ->\r\n        switch(importer)\r\n            when \"asana\" then @config.get('enableAsanaImporter')\r\n            when \"github\" then @config.get('enableGithubImporter')\r\n            when \"jira\" then @config.get('enableJiraImporter')\r\n            when \"trello\" then @config.get('enableTrelloImporter')\r\n            else return false\r\n\r\n    cancelCurrentImport: () ->\r\n        @location.url(@tgNavUrls.resolve('create-project-import'))\r\n\r\n    backToCreate: () ->\r\n        @location.url(@tgNavUrls.resolve('create-project'))\r\n\r\nangular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nImportProjectDirective = () ->\r\n\r\n    link = (scope, el, attr, ctrl) ->\r\n        ctrl.start()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"projects/create/import/import-project.html\",\r\n        controller: \"ImportProjectCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            onCancelImport: '&'\r\n        }\r\n    }\r\n\r\nImportProjectDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ImportProjectService extends taiga.Service\r\n    @.$inject = [\r\n        'tgCurrentUserService',\r\n        '$tgAuth',\r\n        'tgLightboxFactory',\r\n        '$translate',\r\n        '$tgConfirm',\r\n        '$location',\r\n        '$tgNavUrls'\r\n    ]\r\n\r\n    constructor: (@currentUserService, @tgAuth, @lightboxFactory, @translate, @confirm, @location, @tgNavUrls) ->\r\n\r\n    importPromise: (promise) ->\r\n        return promise.then(@.importSuccess.bind(this), @.importError.bind(this))\r\n\r\n    importSuccess: (result) ->\r\n        promise = @currentUserService.loadProjects()\r\n        promise.then () =>\r\n            if result.status == 202 # Async mode\r\n                title = @translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE')\r\n                message = @translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE')\r\n                @location.path(@tgNavUrls.resolve('home'))\r\n                @confirm.success(title, message)\r\n            else # result.status == 201 # Sync mode\r\n                ctx = {project: result.data.slug}\r\n                @location.path(@tgNavUrls.resolve('project-admin-project-profile-details', ctx))\r\n                msg = @translate.instant('PROJECT.IMPORT.SYNC_SUCCESS')\r\n                @confirm.notify('success', msg)\r\n        return promise\r\n\r\n    importError: (result) ->\r\n        promise = @tgAuth.refresh()\r\n        promise.then () =>\r\n            restrictionError = @.getRestrictionError(result)\r\n\r\n            if restrictionError\r\n                @lightboxFactory.create('tg-lb-import-error', {\r\n                    class: 'lightbox lightbox-import-error'\r\n                }, restrictionError)\r\n\r\n            else\r\n                errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR\")\r\n\r\n                if result.status == 429  # TOO MANY REQUESTS\r\n                    errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\")\r\n                else if result.data?._error_message\r\n                    errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {error_message: result.data._error_message})\r\n\r\n                @confirm.notify(\"error\", errorMsg)\r\n        return promise\r\n\r\n    getRestrictionError: (result) ->\r\n        if result.headers\r\n            errorKey = ''\r\n\r\n            user = @currentUserService.getUser()\r\n            maxMemberships = null\r\n\r\n            if result.headers.isPrivate\r\n                privateError = !@currentUserService.canCreatePrivateProjects().valid\r\n\r\n                if user.get('max_memberships_private_projects') != null && result.headers.memberships >= user.get('max_memberships_private_projects')\r\n                    membersError = true\r\n                else\r\n                    membersError = false\r\n\r\n                if privateError && membersError\r\n                    errorKey = 'private-space-members'\r\n                    maxMemberships = user.get('max_memberships_private_projects')\r\n                else if privateError\r\n                    errorKey = 'private-space'\r\n                else if membersError\r\n                    errorKey = 'private-members'\r\n                    maxMemberships = user.get('max_memberships_private_projects')\r\n\r\n            else\r\n                publicError = !@currentUserService.canCreatePublicProjects().valid\r\n\r\n                if user.get('max_memberships_public_projects') != null && result.headers.memberships >= user.get('max_memberships_public_projects')\r\n                    membersError = true\r\n                else\r\n                    membersError = false\r\n\r\n                if publicError && membersError\r\n                    errorKey = 'public-space-members'\r\n                    maxMemberships = user.get('max_memberships_public_projects')\r\n                else if publicError\r\n                    errorKey = 'public-space'\r\n                else if membersError\r\n                    errorKey = 'public-members'\r\n                    maxMemberships = user.get('max_memberships_public_projects')\r\n\r\n            if !errorKey\r\n                return false\r\n\r\n            return {\r\n                key: errorKey,\r\n                values: {\r\n                    max_memberships: maxMemberships,\r\n                    members: result.headers.memberships\r\n                }\r\n            }\r\n        else\r\n            return false\r\n\r\nangular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass InviteMembersController\r\n    @.$inject = []\r\n\r\n    isDisabled: (id) ->\r\n        return @.invitedMembers.indexOf(id) == -1\r\n\r\nangular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nInviteMembersDirective = () ->\r\n    link = (scope, el, attr, ctrl) ->\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"projects/create/invite-members/invite-members.html\",\r\n        controller: \"InviteMembersCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            invitedMembers: '<',\r\n            members: '<',\r\n            onToggleInvitedMember: '&'\r\n        }\r\n    }\r\n\r\nInviteMembersDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nSingleMemberDirective = () ->\r\n    return {\r\n        templateUrl:\"projects/create/invite-members/single-member/single-member.html\",\r\n        scope: {\r\n            disabled: \"<\",\r\n            avatar: \"=\"\r\n        }\r\n    }\r\n\r\nSingleMemberDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass JiraImportProjectFormController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        @.projectForm = @.project.toJS()\r\n\r\n        @.projectForm.is_private = false\r\n        @.projectForm.keepExternalReference = false\r\n        if @.projectForm.importer_type == \"agile\"\r\n            @.projectForm.project_type = null\r\n        else\r\n            @.projectForm.project_type = \"scrum\"\r\n        @.projectForm.create_subissues = true\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\r\n\r\n    saveForm: () ->\r\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid\r\n\r\n    isDisabled: () ->\r\n        return !@.canCreateProject()\r\n\r\nangular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nJiraImportProjectFormDirective = () ->\r\n    return {\r\n        link: (scope, elm, attr, ctrl) ->\r\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\r\n\r\n        templateUrl:\"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\r\n        controller: \"JiraImportProjectFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            members: '<',\r\n            project: '<',\r\n            onSaveProjectDetails: '&',\r\n            onCancelForm: '&',\r\n            fetchingUsers: '<'\r\n        }\r\n    }\r\n\r\nJiraImportProjectFormDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass JiraImportController\r\n    @.$inject = [\r\n        'tgJiraImportService',\r\n        '$tgConfirm',\r\n        '$translate',\r\n        'tgImportProjectService',\r\n    ]\r\n\r\n    constructor: (@jiraImportService, @confirm, @translate, @importProjectService) ->\r\n        @.step = 'autorization-jira'\r\n        @.project = null\r\n        taiga.defineImmutableProperty @, 'projects', () => return @jiraImportService.projects\r\n        taiga.defineImmutableProperty @, 'members', () => return @jiraImportService.projectUsers\r\n\r\n    startProjectSelector: () ->\r\n        @.step = 'project-select-jira'\r\n        @jiraImportService.fetchProjects()\r\n\r\n    onSelectProject: (project) ->\r\n        @.step = 'project-form-jira'\r\n        @.project = project\r\n        @.fetchingUsers = true\r\n\r\n        @jiraImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\r\n\r\n    onSaveProjectDetails: (project) ->\r\n        @.project = project\r\n        @.step = 'project-members-jira'\r\n\r\n    onCancelMemberSelection: () ->\r\n        @.step = 'project-form-jira'        \r\n\r\n    startImport: (users) ->\r\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\r\n\r\n        loader.start()\r\n\r\n        projectType = @.project.get('project_type')\r\n        if projectType == \"issues\" and @.project.get('create_subissues')\r\n            projectType = \"issues-with-subissues\"\r\n\r\n        promise = @jiraImportService.importProject(\r\n            @.project.get('name'),\r\n            @.project.get('description'),\r\n            @.project.get('id'),\r\n            users,\r\n            @.project.get('keepExternalReference'),\r\n            @.project.get('is_private'),\r\n            projectType,\r\n            @.project.get('importer_type'),\r\n        )\r\n\r\n        @importProjectService.importPromise(promise).then () => loader.stop()\r\n\r\n    submitUserSelection: (users) ->\r\n        @.startImport(users)\r\n        return null\r\n\r\nangular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nJiraImportDirective = () ->\r\n    return {\r\n        link: (scope, elm, attrs, ctrl) ->\r\n            ctrl.startProjectSelector()\r\n        templateUrl:\"projects/create/jira-import/jira-import.html\",\r\n        controller: \"JiraImportCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            onCancel: '&'\r\n        }\r\n    }\r\n\r\nJiraImportDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass JiraImportService extends taiga.Service\r\n    @.$inject = [\r\n        'tgResources',\r\n        '$location',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (@resources, @location, @q) ->\r\n        @.projects = Immutable.List()\r\n        @.projectUsers = Immutable.List()\r\n\r\n    setToken: (token, url) ->\r\n        @.token = token\r\n        @.url = url\r\n\r\n    fetchProjects: () ->\r\n        @resources.jiraImporter.listProjects(@.url, @.token).then (projects) => @.projects = projects\r\n\r\n    fetchUsers: (projectId) ->\r\n        @resources.jiraImporter.listUsers(@.url, @.token, projectId).then (users) => @.projectUsers = users\r\n\r\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) ->\r\n            @resources.jiraImporter.importProject(@.url, @.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType)\r\n\r\n    getAuthUrl: (url) ->\r\n        return @q (resolve, reject) =>\r\n            @resources.jiraImporter.getAuthUrl(url).then (response) =>\r\n                @.authUrl = response.data.url\r\n                resolve(@.authUrl)\r\n            , (err) =>\r\n                reject(err.data._error_message)\r\n\r\n    authorize: (oauth_verifier) ->\r\n        return @q (resolve, reject) =>\r\n            @resources.jiraImporter.authorize(oauth_verifier).then ((response) =>\r\n                @.token = response.data.token\r\n                @.url = response.data.url\r\n                resolve(response.data)\r\n            ), (error) ->\r\n                reject(new Error(error.status))\r\n\r\nangular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nNewsletterEmailLightboxDirective = (lightboxService, lightboxKeyboardNavigationService, $storageService, $rs, $currentUserService, $rs2, $confirm) ->\r\n\r\n    link = (scope, el, attrs, ctrl) ->\r\n        lightboxService.open(el)\r\n        scope.dontAsk = false\r\n        scope.preference = false\r\n\r\n        scope.$watch 'vm.visible', (visible) ->\r\n            if visible && !el.hasClass('open')\r\n                ctrl.start()\r\n                lightboxService.open(el, null, scope.vm.onClose).then ->\r\n                    el.find('input').focus()\r\n                    lightboxKeyboardNavigationService.init(el)\r\n            else if !visible && el.hasClass('open')\r\n                lightboxService.close(el).then () ->\r\n                    ctrl.userEmail = ''\r\n                    ctrl.usersSearch = ''\r\n\r\n        scope.closeLightbox = () ->\r\n            lightboxService.close(el)\r\n\r\n        scope.setEmail = () ->\r\n            if scope.preference\r\n                $rs2.onPremise.subscribeOnPremiseNewsletter(\r\n                    {\r\n                        \"email\": $currentUserService.getUser().get('email'),\r\n                        \"full_name\": $currentUserService.getUser().get('full_name'),\r\n                        \"origin_form\": 'Newsletter sign-up create'\r\n                    }\r\n                ).then () =>\r\n                    $rs.user.setUserStorage('dont_ask_premise_newsletter', true)\r\n                    scope.closeLightbox()\r\n                .catch () =>\r\n                    $confirm.notify(\"light-error\", \"\")\r\n            else\r\n                $rs.user.setUserStorage('dont_ask_premise_newsletter', scope.dontAsk)\r\n                scope.closeLightbox()\r\n\r\n    return {\r\n        scope: {\r\n            visible: '<',\r\n            openNewsletter: '<',\r\n            onClose: '&',\r\n            onSelectUser: '&',\r\n        },\r\n        templateUrl: 'projects/create/newsletter-email-lightbox/newsletter-email-lightbox.html'\r\n        link: link\r\n    }\r\n\r\nNewsletterEmailLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService', \"$tgStorage\", \"tgResources\", \"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\"]\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgNewsletterEmailLightbox\", NewsletterEmailLightboxDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass SelectImportUserLightboxCtrl\r\n    @.$inject = []\r\n\r\n    constructor: () ->\r\n\r\n    start: () ->\r\n        @.mode = 'search'\r\n        @.invalid = false\r\n\r\n    assignUser: () ->\r\n        @.onSelectUser({user: @.user, taigaUser: @.userEmail})\r\n\r\n    selectUser: (taigaUser) ->\r\n        @.onSelectUser({user: @.user, taigaUser: Immutable.fromJS(taigaUser)})\r\n\r\nangular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nSelectImportUserLightboxDirective = (lightboxService, lightboxKeyboardNavigationService) ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        scope.$watch 'vm.visible', (visible) ->\r\n            if visible && !el.hasClass('open')\r\n                ctrl.start()\r\n                lightboxService.open(el, null, scope.vm.onClose).then ->\r\n                    el.find('input').focus()\r\n                    lightboxKeyboardNavigationService.init(el)\r\n            else if !visible && el.hasClass('open')\r\n                lightboxService.close(el).then () ->\r\n                    ctrl.userEmail = ''\r\n                    ctrl.usersSearch = ''\r\n\r\n    return {\r\n        controller: \"SelectImportUserLightboxCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            user: '<',\r\n            visible: '<',\r\n            onClose: '&',\r\n            onSelectUser: '&',\r\n            selectableUsers: '<',\r\n            isPrivate: '<',\r\n            limitMembersPrivateProject: '<',\r\n            limitMembersPublicProject: '<',\r\n            displayEmailSelector: '<'\r\n        },\r\n        templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html'\r\n        link: link\r\n    }\r\n\r\nSelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService']\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass TrelloImportProjectFormController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\r\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\r\n\r\n        @.projectForm = @.project.toJS()\r\n\r\n        @.platformName = \"Trello\"\r\n        @.projectForm.is_private = false\r\n        @.projectForm.keepExternalReference = false\r\n\r\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\r\n            @.projectForm.is_private = true\r\n\r\n    checkUsersLimit: () ->\r\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\r\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\r\n\r\n    saveForm: () ->\r\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\r\n\r\n    canCreateProject: () ->\r\n        if @.projectForm.is_private\r\n            return @.canCreatePrivateProjects.valid\r\n        else\r\n            return @.canCreatePublicProjects.valid\r\n\r\n    isDisabled: () ->\r\n        return !@.canCreateProject()\r\n\r\nangular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTrelloImportProjectFormDirective = () ->\r\n    return {\r\n        link: (scope, elm, attr, ctrl) ->\r\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\r\n\r\n        templateUrl:\"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\r\n        controller: \"TrelloImportProjectFormCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            members: '<',\r\n            project: '<',\r\n            onSaveProjectDetails: '&',\r\n            onCancelForm: '&',\r\n            fetchingUsers: '<'\r\n        }\r\n    }\r\n\r\nTrelloImportProjectFormDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass TrelloImportController\r\n    @.$inject = [\r\n        'tgTrelloImportService',\r\n        '$tgConfirm',\r\n        '$translate',\r\n        'tgImportProjectService',\r\n    ]\r\n\r\n    constructor: (@trelloImportService, @confirm, @translate, @importProjectService) ->\r\n        @.project = null\r\n        taiga.defineImmutableProperty @, 'projects', () => return @trelloImportService.projects\r\n        taiga.defineImmutableProperty @, 'members', () => return @trelloImportService.projectUsers\r\n\r\n    startProjectSelector: () ->\r\n        @trelloImportService.fetchProjects().then () => @.step = 'project-select-trello'\r\n\r\n    onSelectProject: (project) ->\r\n        @.step = 'project-form-trello'\r\n        @.project = project\r\n        @.fetchingUsers = true\r\n\r\n        @trelloImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\r\n\r\n    onSaveProjectDetails: (project) ->\r\n        @.project = project\r\n        @.step = 'project-members-trello'\r\n\r\n    onCancelMemberSelection: () ->\r\n        @.step = 'project-form-trello'\r\n\r\n    startImport: (users) ->\r\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\r\n\r\n        loader.start()\r\n\r\n        promise = @trelloImportService.importProject(\r\n            @.project.get('name'),\r\n            @.project.get('description'),\r\n            @.project.get('id'),\r\n            users,\r\n            @.project.get('keepExternalReference'),\r\n            @.project.get('is_private')\r\n        )\r\n\r\n        @importProjectService.importPromise(promise).then () => loader.stop()\r\n\r\n    submitUserSelection: (users) ->\r\n        @.startImport(users)\r\n\r\n        return null\r\n\r\nangular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nTrelloImportDirective = () ->\r\n    return {\r\n        link: (scope, elm, attrs, ctrl) ->\r\n            ctrl.startProjectSelector()\r\n        templateUrl:\"projects/create/trello-import/trello-import.html\",\r\n        controller: \"TrelloImportCtrl\",\r\n        controllerAs: \"vm\",\r\n        bindToController: true,\r\n        scope: {\r\n            onCancel: '&'\r\n        }\r\n    }\r\n\r\nTrelloImportDirective.$inject = []\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass TrelloImportService extends taiga.Service\r\n    @.$inject = [\r\n        'tgResources',\r\n        '$q'\r\n    ]\r\n\r\n    constructor: (@resources, @q) ->\r\n        @.projects = Immutable.List()\r\n        @.projectUsers = Immutable.List()\r\n        @.token = null\r\n\r\n    setToken: (token) ->\r\n        @.token = token\r\n\r\n    fetchProjects: () ->\r\n        @resources.trelloImporter.listProjects(@.token).then (projects) => @.projects = projects\r\n\r\n    fetchUsers: (projectId) ->\r\n        @resources.trelloImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\r\n\r\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate) ->\r\n        return @resources.trelloImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate)\r\n\r\n    getAuthUrl: () ->\r\n        return @q (resolve) =>\r\n            @resources.trelloImporter.getAuthUrl().then (response) =>\r\n                @.authUrl = response.data.url\r\n                resolve(@.authUrl)\r\n\r\n    authorize: (verifyCode) ->\r\n        return @q (resolve, reject) =>\r\n            @resources.trelloImporter.authorize(verifyCode).then ((response) =>\r\n                @.token = response.data.token\r\n                resolve(@.token)\r\n            ), (error) ->\r\n                reject(new Error(error.status))\r\n\r\nangular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nWarningUserImportDirective = (lightboxService, lightboxKeyboardNavigationService) ->\r\n    return {\r\n        link: (scope, el, attr) ->\r\n            scope.$watch 'visible', (visible) ->\r\n                if visible && !el.hasClass('open')\r\n                    lightboxService.open(el, scope.onClose).then ->\r\n                        el.find('input').focus()\r\n                        lightboxKeyboardNavigationService.init(el)\r\n                else if !visible && el.hasClass('open')\r\n                    lightboxService.close(el)\r\n\r\n        templateUrl:\"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\r\n        scope: {\r\n            visible: '<',\r\n            onClose: '&',\r\n            onConfirm: '&'\r\n        }\r\n    }\r\n\r\nWarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService']\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectsListingController\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService) ->\r\n        taiga.defineImmutableProperty(@, \"projects\", () => @currentUserService.projects.get(\"all\"))\r\n\r\nangular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectRouterController\r\n    @.$inject = [\r\n        \"$routeParams\",\r\n        \"$location\"\r\n        \"tgProjectService\"\r\n        \"$tgResources\"\r\n        \"$tgSections\"\r\n    ]\r\n\r\n    constructor: (@routeParams, @location, @projectService, @rs, @tgSections) ->\r\n        @getProjectHomepage()\r\n            .then (section) =>\r\n                if section\r\n                    @location.url(\"project/#{@routeParams.pslug}/#{section}\")\r\n                else\r\n                    @gotoDefaultProjectHomepage()\r\n            .then null, ->\r\n                @gotoDefaultProjectHomepage()\r\n\r\n    gotoDefaultProjectHomepage: () ->\r\n        @location.url(\"project/#{@routeParams.pslug}/timeline\")\r\n\r\n    getProjectHomepage: () ->\r\n        project = @projectService.project.toJS()\r\n\r\n        @rs.userProjectSettings.list({project: project.id}).then (userProjectSettings) =>\r\n            settings = _.find(userProjectSettings, {\"project\": project.id})\r\n            return if !settings\r\n\r\n            return @tgSections.getPath(project.slug, settings.homepage)\r\n\r\nangular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectController\r\n    @.$inject = [\r\n        \"$routeParams\",\r\n        \"tgAppMetaService\",\r\n        \"$tgAuth\",\r\n        \"$translate\",\r\n        \"tgProjectService\",\r\n        \"$tgConfig\",\r\n        \"$tgNavUrls\",\r\n        \"$location\"\r\n    ]\r\n\r\n    constructor: (@routeParams, @appMetaService, @auth, @translate, @projectService, @config, @navUrls, @location) ->\r\n        @.user = @auth.userData\r\n\r\n        taiga.defineImmutableProperty @, \"project\", () => return @projectService.project\r\n        taiga.defineImmutableProperty @, \"members\", () => return @projectService.activeMembers\r\n        taiga.defineImmutableProperty @, \"isAuthenticated\", () => return !!@.user\r\n\r\n        nextUrl = @location.url()\r\n        @.registerUrl = \"#{@navUrls.resolve(\"register\")}?next=#{nextUrl}\"\r\n        @.loginUrl = \"#{@navUrls.resolve(\"login\")}?next=#{nextUrl}\"\r\n\r\n        @.publicRegisterEnabled = @config.get(\"publicRegisterEnabled\")\r\n\r\n        @appMetaService.setfn @._setMeta.bind(this)\r\n\r\n    _setMeta: ()->\r\n        return null if !@.project\r\n\r\n        ctx = {projectName: @.project.get(\"name\")}\r\n\r\n        return {\r\n            title: @translate.instant(\"PROJECT.PAGE_TITLE\", ctx)\r\n            description: @.project.get(\"description\")\r\n        }\r\n\r\nangular.module(\"taigaProjects\").controller(\"Project\", ProjectController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\ngroupBy = @.taiga.groupBy\r\n\r\n\r\nclass ProjectsService extends taiga.Service\r\n    @.$inject = [\"tgResources\", \"$projectUrl\"]\r\n\r\n    constructor: (@rs, @projectUrl) ->\r\n\r\n    create: (data) ->\r\n        return @rs.projects.create(data)\r\n\r\n    duplicate: (projectId, data) ->\r\n        return @rs.projects.duplicate(projectId, data)\r\n\r\n    getProjectBySlug: (projectSlug) ->\r\n        return @rs.projects.getProjectBySlug(projectSlug)\r\n            .then (project) =>\r\n                return @._decorate(project)\r\n\r\n    getProjectStats: (projectId) ->\r\n        return @rs.projects.getProjectStats(projectId)\r\n\r\n    getProjectsByUserId: (userId, paginate) ->\r\n        return @rs.projects.getProjectsByUserId(userId, paginate)\r\n            .then (projects) =>\r\n                return projects.map @._decorate.bind(@)\r\n\r\n    getListProjectsByUserId: (userId, paginate) ->\r\n        return @rs.projects.getListProjectsByUserId(userId, paginate)\r\n            .then (projects) =>\r\n                return projects.map @._decorate.bind(@)\r\n\r\n    _decorate: (project) ->\r\n        url = @projectUrl.get(project.toJS())\r\n\r\n        project = project.set(\"url\", url)\r\n\r\n        return project\r\n\r\n    bulkUpdateProjectsOrder: (sortData) ->\r\n        return @rs.projects.bulkUpdateOrder(sortData)\r\n\r\n    transferValidateToken: (projectId, token) ->\r\n        return @rs.projects.transferValidateToken(projectId, token)\r\n\r\n    transferAccept: (projectId, token, reason) ->\r\n        return @rs.projects.transferAccept(projectId, token, reason)\r\n\r\n    transferReject: (projectId, token, reason) ->\r\n        return @rs.projects.transferReject(projectId, token, reason)\r\n\r\n\r\nangular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nCantOwnProjectExplanationDirective = () ->\r\n    return {\r\n        templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\r\n    }\r\n\r\nangular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaProjects')\r\n\r\nclass TransferProject\r\n    @.$inject = [\r\n        \"$routeParams\",\r\n        \"tgProjectsService\"\r\n        \"tgProjectService\"\r\n        \"$location\",\r\n        \"$tgAuth\",\r\n        \"tgCurrentUserService\",\r\n        \"$tgNavUrls\",\r\n        \"$translate\",\r\n        \"$tgConfirm\",\r\n        \"tgErrorHandlingService\"\r\n    ]\r\n\r\n    constructor: (@routeParams, @projectsService, @projectService, @location, @authService, @currentUserService, @navUrls, @translate, @confirmService, @errorHandlingService) ->\r\n\r\n    initialize: () ->\r\n        @.projectId = @.project.get(\"id\")\r\n        @.token = @routeParams.token\r\n        @.showAddComment = false\r\n        return @._refreshUserData()\r\n\r\n    _validateToken: () ->\r\n        return @projectsService.transferValidateToken(@.projectId, @.token).then null, (data, status) =>\r\n            @errorHandlingService.notfound()\r\n\r\n    _refreshUserData: () ->\r\n        return @authService.refresh().then () =>\r\n            @._validateToken()\r\n            @._setProjectData()\r\n            @._checkOwnerData()\r\n\r\n    _setProjectData: () ->\r\n        @.canBeOwnedByUser = @currentUserService.canOwnProject(@.project)\r\n\r\n    _checkOwnerData: () ->\r\n        currentUser = @currentUserService.getUser()\r\n        if(@.project.get('is_private'))\r\n            @.currentProjects = currentUser.get('total_private_projects')\r\n            @.maxProjects = currentUser.get('max_private_projects')\r\n            maxMemberships = currentUser.get('max_memberships_private_projects')\r\n            if @.maxProjects == null\r\n                @.maxProjects = @translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS')\r\n                @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE'\r\n            else\r\n                if @.currentProjects < @.maxProjects\r\n                    @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE'\r\n                else\r\n                    @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE_EXCEEDED'\r\n\r\n        else\r\n            @.currentProjects = currentUser.get('total_public_projects')\r\n            @.maxProjects = currentUser.get('max_public_projects')\r\n            maxMemberships = currentUser.get('max_memberships_public_projects')\r\n            if @.maxProjects == null\r\n                @.maxProjects = @translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS')\r\n                @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC'\r\n            else\r\n                if @.currentProjects < @.maxProjects\r\n                    @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC'\r\n                else\r\n                    @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC_EXCEEDED'\r\n\r\n        @.validNumberOfMemberships = maxMemberships == null || @.project.get('total_memberships') <= maxMemberships\r\n\r\n    transferAccept: (token, reason) ->\r\n        @.loadingAccept = true\r\n        return @projectsService.transferAccept(@.project.get(\"id\"), token, reason).then () =>\r\n            @projectService.fetchProject().then () =>\r\n                newUrl = @navUrls.resolve(\"project-admin-project-profile-details\", {\r\n                    project: @.project.get(\"slug\")\r\n                })\r\n                @.loadingAccept = false\r\n                @location.path(newUrl)\r\n\r\n                @confirmService.notify(\"success\", @translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000)\r\n                return\r\n\r\n    transferReject: (token, reason) ->\r\n        @.loadingReject = true\r\n        return @projectsService.transferReject(@.project.get(\"id\"), token, reason).then () =>\r\n            newUrl = @navUrls.resolve(\"home\", {\r\n                project: @project.get(\"slug\")\r\n            })\r\n            @.loadingReject = false\r\n            @location.path(newUrl)\r\n            @confirmService.notify(\"success\", @translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000)\r\n\r\n            return\r\n\r\n    addComment: () ->\r\n        @.showAddComment = true\r\n\r\n    hideComment: () ->\r\n        @.showAddComment = false\r\n        @.reason = ''\r\n\r\n\r\nmodule.controller(\"TransferProjectController\", TransferProject)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaProjects')\r\n\r\nTransferProjectDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n      ctrl.initialize()\r\n\r\n    return {\r\n        link: link,\r\n        scope: {},\r\n        bindToController: {\r\n            project: \"=\"\r\n        },\r\n        templateUrl: \"projects/transfer/transfer-project.html\",\r\n        controller: 'TransferProjectController',\r\n        controllerAs: 'vm'\r\n    }\r\n\r\nmodule.directive('tgTransferProject', TransferProjectDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\nResource = (urlsService, http, config, $rootScope, $q, storage) ->\r\n    service = {}\r\n\r\n    service.list = (type, objectId, projectId) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        params = {object_id: objectId, project: projectId}\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        url = urlsService.resolve(urlname)\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) -> Immutable.fromJS(result.data)\r\n\r\n    service.get = (type, id) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        url = urlsService.resolve(urlname) + \"/#{id}\"\r\n\r\n        return http.get(url)\r\n\r\n    service.delete = (type, id) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        url = urlsService.resolve(urlname) + \"/#{id}\"\r\n\r\n        return http.delete(url)\r\n\r\n    service.patch = (type, id, patch) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        url = urlsService.resolve(urlname) + \"/#{id}\"\r\n\r\n        return http.patch(url, patch)\r\n\r\n    service.bulkAttachments = (objectId, type, afterAttachmentId, bulkAttachments) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        url = urlsService.resolve(urlname) + \"/bulk_update_order\"\r\n\r\n        return http.post(url, {\r\n            object_id: objectId,\r\n            after_attachment_id: afterAttachmentId,\r\n            bulk_attachments: bulkAttachments\r\n        })\r\n\r\n    service.create = (type, projectId, objectId, file, from_comment) ->\r\n        urlname = \"attachments/#{type}\"\r\n\r\n        url = urlsService.resolve(urlname)\r\n\r\n        defered = $q.defer()\r\n\r\n        if file is undefined\r\n            defered.reject(null)\r\n            return defered.promise\r\n\r\n        maxFileSize = config.get(\"maxUploadFileSize\", null)\r\n\r\n        if maxFileSize and file.size > maxFileSize\r\n            response = {\r\n                status: 413,\r\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\r\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\r\n            }\r\n            defered.reject(response)\r\n            return defered.promise\r\n\r\n        uploadProgress = (evt) =>\r\n            $rootScope.$apply =>\r\n                file.status = \"in-progress\"\r\n                file.size = sizeFormat(evt.total)\r\n                file.progressMessage = \"upload #{sizeFormat(evt.loaded)} of #{sizeFormat(evt.total)}\"\r\n                file.progressPercent = \"#{Math.round((evt.loaded / evt.total) * 100)}\"\r\n\r\n        uploadComplete = (evt) =>\r\n            $rootScope.$apply ->\r\n                file.status = \"done\"\r\n\r\n                status = evt.target.status\r\n                try\r\n                    attachment = JSON.parse(evt.target.responseText)\r\n                catch\r\n                    attachment = {}\r\n\r\n                if status >= 200 and status < 400\r\n                    attachment = Immutable.fromJS(attachment)\r\n                    defered.resolve(attachment)\r\n                else\r\n                    response = {\r\n                        status: status,\r\n                        data: {_error_message: data['attached_file']?[0]}\r\n                    }\r\n                    defered.reject(response)\r\n\r\n        uploadFailed = (evt) =>\r\n            $rootScope.$apply ->\r\n                file.status = \"error\"\r\n                defered.reject(\"fail\")\r\n\r\n        data = new FormData()\r\n        data.append(\"project\", projectId)\r\n        data.append(\"object_id\", objectId)\r\n        data.append(\"attached_file\", file)\r\n        data.append(\"from_comment\", from_comment)\r\n\r\n        xhr = new XMLHttpRequest()\r\n        xhr.upload.addEventListener(\"progress\", uploadProgress, false)\r\n        xhr.addEventListener(\"load\", uploadComplete, false)\r\n        xhr.addEventListener(\"error\", uploadFailed, false)\r\n\r\n        token = storage.get('token')\r\n\r\n        xhr.open(\"POST\", url)\r\n        xhr.setRequestHeader(\"Authorization\", \"Bearer #{token}\")\r\n        xhr.setRequestHeader('Accept', 'application/json')\r\n        xhr.send(data)\r\n\r\n        return defered.promise\r\n\r\n    return () ->\r\n        return {\"attachments\": service}\r\n\r\nResource.$inject = [\r\n    \"$tgUrls\",\r\n    \"$tgHttp\",\r\n    \"$tgConfig\",\r\n    \"$rootScope\",\r\n    \"$q\",\r\n    \"$tgStorage\"\r\n]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgAttachmentsResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.listInAllProjects = (params) ->\r\n        url = urlsService.resolve(\"epics\")\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.list = (projectId, page=0) ->\r\n        url = urlsService.resolve(\"epics\")\r\n\r\n        params = {project: projectId, page: page}\r\n\r\n        return http.get(url, params)\r\n            .then (result) ->\r\n                return {\r\n                    list: Immutable.fromJS(result.data)\r\n                    headers: result.headers\r\n                }\r\n\r\n    service.patch = (id, patch) ->\r\n        url = urlsService.resolve(\"epics\") + \"/#{id}\"\r\n\r\n        return http.patch(url, patch)\r\n            .then (result) -> Immutable.fromJS(result.data)\r\n\r\n    service.post = (params) ->\r\n        url = urlsService.resolve(\"epics\")\r\n\r\n        return http.post(url, params)\r\n            .then (result) -> Immutable.fromJS(result.data)\r\n\r\n    service.reorder = (id, data, setOrders) ->\r\n        url = urlsService.resolve(\"epics\") + \"/#{id}\"\r\n\r\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\r\n\r\n        return http.patch(url, data, null, options)\r\n            .then (result) -> Immutable.fromJS(result.data)\r\n\r\n    service.addRelatedUserstory = (epicId, userstoryId) ->\r\n        url = urlsService.resolve(\"epic-related-userstories\", epicId)\r\n\r\n        params = {\r\n            user_story: userstoryId\r\n            epic: epicId\r\n        }\r\n\r\n        return http.post(url, params)\r\n\r\n    service.reorderRelatedUserstory = (epicId, userstoryId, data, setOrders) ->\r\n        url = urlsService.resolve(\"epic-related-userstories\", epicId) + \"/#{userstoryId}\"\r\n\r\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\r\n\r\n        return http.patch(url, data, null, options)\r\n\r\n    service.bulkCreateRelatedUserStories = (epicId, projectId, bulk_userstories) ->\r\n        url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId)\r\n\r\n        params = {\r\n            bulk_userstories: bulk_userstories,\r\n            project_id: projectId\r\n        }\r\n\r\n        return http.post(url, params)\r\n\r\n    service.deleteRelatedUserstory = (epicId, userstoryId) ->\r\n        url = urlsService.resolve(\"epic-related-userstories\", epicId) + \"/#{userstoryId}\"\r\n\r\n        return http.delete(url)\r\n\r\n    return () ->\r\n        return {\"epics\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgEpicsResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getApplicationToken = (applicationId, state) ->\r\n        url = urlsService.resolve(\"applications\")\r\n        url = \"#{url}/#{applicationId}/token?state=#{state}\"\r\n        return http.get(url).then (result) ->\r\n            Immutable.fromJS(result.data)\r\n\r\n    service.authorizeApplicationToken = (applicationId, state) ->\r\n        url = urlsService.resolve(\"application-tokens\")\r\n        url = \"#{url}/authorize\"\r\n        data = {\r\n            \"state\": state\r\n            \"application\": applicationId\r\n        }\r\n\r\n        return http.post(url, data).then (result) ->\r\n            Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"externalapps\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgExternalAppsResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getHistory = (historyType, contentType, objectId, page) ->\r\n        url = urlsService.resolve(\"history/#{contentType}\", )\r\n        return http.get(\"#{url}/#{objectId}\", {page: page, type: historyType})\r\n            .then (result) ->\r\n                return {\r\n                    list: Immutable.fromJS(result.data)\r\n                    headers: result.headers\r\n                }\r\n\r\n    return () ->\r\n        return {\"history\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgHistory\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nTrelloResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getAuthUrl = (url) ->\r\n        url = urlsService.resolve(\"importers-trello-auth-url\")\r\n        return http.get(url)\r\n\r\n    service.authorize = (verifyCode) ->\r\n        url = urlsService.resolve(\"importers-trello-authorize\")\r\n        return http.post(url, {code: verifyCode})\r\n\r\n    service.listProjects = (token) ->\r\n        url = urlsService.resolve(\"importers-trello-list-projects\")\r\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.listUsers = (token, projectId) ->\r\n        url = urlsService.resolve(\"importers-trello-list-users\")\r\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate) ->\r\n        url = urlsService.resolve(\"importers-trello-import-project\")\r\n        data = {\r\n            token: token,\r\n            name: name,\r\n            description: description,\r\n            project: projectId,\r\n            users_bindings: userBindings.toJS(),\r\n            keep_external_reference: keepExternalReference,\r\n            is_private: isPrivate,\r\n            template: \"kanban\",\r\n        }\r\n        return http.post(url, data)\r\n\r\n    return () ->\r\n        return {\"trelloImporter\": service}\r\n\r\nTrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nJiraResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getAuthUrl = (jira_url) ->\r\n        url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url\r\n        return http.get(url)\r\n\r\n    service.authorize = (oauth_verifier) ->\r\n        url = urlsService.resolve(\"importers-jira-authorize\")\r\n        return http.post(url, {oauth_verifier: oauth_verifier})\r\n\r\n    service.listProjects = (jira_url, token) ->\r\n        url = urlsService.resolve(\"importers-jira-list-projects\")\r\n        return http.post(url, {url: jira_url, token: token}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.listUsers = (jira_url, token, projectId) ->\r\n        url = urlsService.resolve(\"importers-jira-list-users\")\r\n        return http.post(url, {url: jira_url, token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.importProject = (jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) ->\r\n        url = urlsService.resolve(\"importers-jira-import-project\")\r\n        projectTemplate = \"kanban\"\r\n        if projectType != \"kanban\"\r\n            projectTemplate = \"scrum\"\r\n\r\n        data = {\r\n            url: jira_url,\r\n            token: token,\r\n            name: name,\r\n            description: description,\r\n            project: projectId,\r\n            users_bindings: userBindings.toJS(),\r\n            keep_external_reference: keepExternalReference,\r\n            is_private: isPrivate,\r\n            project_type: projectType,\r\n            importer_type: importerType,\r\n            template: projectTemplate,\r\n        }\r\n        return http.post(url, data)\r\n\r\n    return () ->\r\n        return {\"jiraImporter\": service}\r\n\r\nJiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nGithubResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getAuthUrl = (callbackUri) ->\r\n        url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri\r\n        return http.get(url)\r\n\r\n    service.authorize = (code) ->\r\n        url = urlsService.resolve(\"importers-github-authorize\")\r\n        return http.post(url, {code: code})\r\n\r\n    service.listProjects = (token) ->\r\n        url = urlsService.resolve(\"importers-github-list-projects\")\r\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.listUsers = (token, projectId) ->\r\n        url = urlsService.resolve(\"importers-github-list-users\")\r\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\r\n        url = urlsService.resolve(\"importers-github-import-project\")\r\n\r\n        data = {\r\n            token: token,\r\n            name: name,\r\n            description: description,\r\n            project: projectId,\r\n            users_bindings: userBindings.toJS(),\r\n            keep_external_reference: keepExternalReference,\r\n            is_private: isPrivate,\r\n            template: projectType,\r\n        }\r\n        return http.post(url, data)\r\n\r\n    return () ->\r\n        return {\"githubImporter\": service}\r\n\r\nGithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nAsanaResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.getAuthUrl = () ->\r\n        url = urlsService.resolve(\"importers-asana-auth-url\")\r\n        return http.get(url)\r\n\r\n    service.authorize = (code) ->\r\n        url = urlsService.resolve(\"importers-asana-authorize\")\r\n        return http.post(url, {code: code})\r\n\r\n    service.listProjects = (token) ->\r\n        url = urlsService.resolve(\"importers-asana-list-projects\")\r\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.listUsers = (token, projectId) ->\r\n        url = urlsService.resolve(\"importers-asana-list-users\")\r\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\r\n\r\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\r\n        url = urlsService.resolve(\"importers-asana-import-project\")\r\n\r\n        data = {\r\n            token: token,\r\n            name: name,\r\n            description: description,\r\n            project: projectId,\r\n            users_bindings: userBindings.toJS(),\r\n            keep_external_reference: keepExternalReference,\r\n            is_private: isPrivate,\r\n            template: projectType,\r\n        }\r\n        return http.post(url, data)\r\n\r\n    return () ->\r\n        return {\"asanaImporter\": service}\r\n\r\nAsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgTrelloImportResource\", TrelloResource)\r\nmodule.factory(\"tgJiraImportResource\", JiraResource)\r\nmodule.factory(\"tgGithubImportResource\", GithubResource)\r\nmodule.factory(\"tgAsanaImportResource\", AsanaResource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.listInAllProjects = (params) ->\r\n        url = urlsService.resolve(\"issues\")\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"issues\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgIssuesResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http, config) ->\r\n    service = {}\r\n    service.subscribeOnPremiseNewsletter = (requestParams) ->\r\n        params = {\r\n            url: config.get(\"newsletterSubscriberUrl\") + \"/subscribe/\",\r\n            method: \"POST\",\r\n            cancelable: true,\r\n            data: requestParams\r\n        }\r\n\r\n        return http.request(params)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"onPremise\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgOnPremiseResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\npagination = () ->\r\n\r\nResource = (urlsService, http, paginateResponseService) ->\r\n    service = {}\r\n\r\n    service.create = (data) ->\r\n        url = urlsService.resolve('projects')\r\n\r\n        return http.post(url, JSON.stringify(data))\r\n            .then (result) => return Immutable.fromJS(result.data)\r\n\r\n    service.duplicate = (projectId, data) ->\r\n\r\n        url = urlsService.resolve(\"projects\")\r\n        url = \"#{url}/#{projectId}/duplicate\"\r\n\r\n        members = data.users.map (member) => {\"id\": member}\r\n\r\n        params = {\r\n            \"name\": data.name,\r\n            \"description\": data.description,\r\n            \"is_private\": data.is_private,\r\n            \"users\": members\r\n        }\r\n\r\n        return http.post(url, params)\r\n\r\n    service.getProjects = (params = {}, pagination = true) ->\r\n        url = urlsService.resolve(\"projects\")\r\n\r\n        httpOptions = {}\r\n\r\n        if !pagination\r\n            httpOptions = {\r\n                headers: {\r\n                    \"x-lazy-pagination\": true\r\n                }\r\n            }\r\n\r\n        return http.get(url, params, httpOptions)\r\n\r\n    service.getProjectBySlug = (projectSlug) ->\r\n        url = urlsService.resolve(\"projects\")\r\n\r\n        url = \"#{url}/by_slug?slug=#{projectSlug}\"\r\n\r\n        return http.get(url)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getProjectsByUserId = (userId, paginate=false) ->\r\n        url = urlsService.resolve(\"projects\")\r\n        httpOptions = {}\r\n\r\n        if !paginate\r\n            httpOptions.headers = {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n\r\n        params = {\"member\": userId, \"order_by\": \"user_order\"}\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getListProjectsByUserId = (userId, paginate=false) ->\r\n        url = urlsService.resolve(\"projects\")\r\n        httpOptions = {}\r\n\r\n        if !paginate\r\n            httpOptions.headers = {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n\r\n        params = {\"member\": userId, \"order_by\": \"user_order\", \"slight\": true}\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getProjectStats = (projectId) ->\r\n        url = urlsService.resolve(\"projects\")\r\n        url = \"#{url}/#{projectId}\"\r\n\r\n        return http.get(url)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.bulkUpdateOrder = (bulkData) ->\r\n        url = urlsService.resolve(\"bulk-update-projects-order\")\r\n        return http.post(url, bulkData)\r\n\r\n    service.getTimeline = (projectId, page) ->\r\n        params = {\r\n            page: page,\r\n            only_relevant: true\r\n        }\r\n\r\n        url = urlsService.resolve(\"timeline-project\")\r\n        url = \"#{url}/#{projectId}\"\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.likeProject = (projectId) ->\r\n        url = urlsService.resolve(\"project-like\", projectId)\r\n        return http.post(url)\r\n\r\n    service.unlikeProject = (projectId) ->\r\n        url = urlsService.resolve(\"project-unlike\", projectId)\r\n        return http.post(url)\r\n\r\n    service.watchProject = (projectId, notifyLevel) ->\r\n        data = {\r\n            notify_level: notifyLevel\r\n            live_notify_level: notifyLevel\r\n        }\r\n        url = urlsService.resolve(\"project-watch\", projectId)\r\n        return http.post(url, data)\r\n\r\n    service.unwatchProject = (projectId) ->\r\n        url = urlsService.resolve(\"project-unwatch\", projectId)\r\n        return http.post(url)\r\n\r\n    service.contactProject = (projectId, message) ->\r\n        params = {\r\n            project: projectId,\r\n            comment: message\r\n        }\r\n\r\n        url = urlsService.resolve(\"project-contact\")\r\n        return http.post(url, params)\r\n\r\n    service.transferValidateToken = (projectId, token) ->\r\n        data = {\r\n            token: token\r\n        }\r\n        url = urlsService.resolve(\"project-transfer-validate-token\", projectId)\r\n        return http.post(url, data)\r\n\r\n    service.transferAccept = (projectId, token, reason) ->\r\n        data = {\r\n            token: token\r\n            reason: reason\r\n        }\r\n        url = urlsService.resolve(\"project-transfer-accept\", projectId)\r\n        return http.post(url, data)\r\n\r\n    service.transferReject = (projectId, token, reason) ->\r\n        data = {\r\n            token: token\r\n            reason: reason\r\n        }\r\n        url = urlsService.resolve(\"project-transfer-reject\", projectId)\r\n        return http.post(url, data)\r\n\r\n    service.transferRequest = (projectId) ->\r\n        url = urlsService.resolve(\"project-transfer-request\", projectId)\r\n        return http.post(url)\r\n\r\n    service.transferStart = (projectId, userId, reason) ->\r\n        data = {\r\n            user: userId,\r\n            reason: reason\r\n        }\r\n\r\n        url = urlsService.resolve(\"project-transfer-start\", projectId)\r\n        return http.post(url, data)\r\n\r\n    return () ->\r\n        return {\"projects\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgProjectsResources\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nservices = [\r\n    \"tgProjectsResources\",\r\n    \"tgUserResources\",\r\n    \"tgUsersResources\",\r\n    \"tgUserstoriesResource\",\r\n    \"tgTasksResource\",\r\n    \"tgIssuesResource\",\r\n    \"tgExternalAppsResource\",\r\n    \"tgAttachmentsResource\",\r\n    \"tgStatsResource\",\r\n    \"tgHistory\",\r\n    \"tgEpicsResource\",\r\n    \"tgTrelloImportResource\",\r\n    \"tgJiraImportResource\",\r\n    \"tgGithubImportResource\",\r\n    \"tgAsanaImportResource\",\r\n    \"tgOnPremiseResource\"\r\n]\r\n\r\nResources = ($injector) ->\r\n    for serviceName in services\r\n        serviceFn = $injector.get(serviceName)\r\n\r\n        service = $injector.invoke(serviceFn)\r\n\r\n        for serviceProperty in Object.keys(service)\r\n            if @[serviceProperty]\r\n                console.warn(\"repeated resource \" + serviceProperty)\r\n\r\n            @[serviceProperty] = service[serviceProperty]\r\n\r\n    return @\r\n\r\n\r\nResources.$inject = [\"$injector\"]\r\n\r\nangular.module(\"taigaResources2\").service(\"tgResources\", Resources)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.discover = (applicationId, state) ->\r\n        url = urlsService.resolve(\"stats-discover\")\r\n        return http.get(url).then (result) ->\r\n            Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"stats\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgStatsResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.listInAllProjects = (params) ->\r\n        url = urlsService.resolve(\"tasks\")\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"tasks\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgTasksResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http, paginateResponseService) ->\r\n    service = {}\r\n\r\n    service.getUserStorage = (key) ->\r\n        url = urlsService.resolve(\"user-storage\")\r\n\r\n        if key\r\n            url += '/' + key\r\n\r\n        httpOptions = {}\r\n\r\n        return http.get(url, {}).then (response) ->\r\n            return response.data.value\r\n\r\n    service.setUserStorage = (key, value) ->\r\n        url = urlsService.resolve(\"user-storage\") + '/' + key\r\n\r\n        params = {\r\n            key: key,\r\n            value: value\r\n        }\r\n\r\n        return http.put(url, params)\r\n\r\n    service.createUserStorage = (key, value) ->\r\n        url = urlsService.resolve(\"user-storage\")\r\n\r\n        params = {\r\n            key: key,\r\n            value: value\r\n        }\r\n\r\n        return http.post(url, params)\r\n\r\n    return () ->\r\n        return {\"user\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgUserResources\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http, paginateResponseService) ->\r\n    service = {}\r\n\r\n    service.getUserByUsername = (username) ->\r\n        url = urlsService.resolve(\"by_username\")\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        params = {\r\n            username: username\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getStats = (userId) ->\r\n        url = urlsService.resolve(\"user-stats\", userId)\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        return http.get(url, {}, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getContacts = (userId, excludeProjectId) ->\r\n        url = urlsService.resolve(\"user-contacts\", userId)\r\n\r\n        params = {}\r\n        params.exclude_project = excludeProjectId if excludeProjectId?\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.getLiked = (userId, page, type, q) ->\r\n        url = urlsService.resolve(\"user-liked\", userId)\r\n\r\n        params = {}\r\n        params.page = page if page?\r\n        params.type = type if type?\r\n        params.q = q if q?\r\n\r\n        params.only_relevant = true\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.getVoted = (userId, page, type, q) ->\r\n        url = urlsService.resolve(\"user-voted\", userId)\r\n\r\n        params = {}\r\n        params.page = page if page?\r\n        params.type = type if type?\r\n        params.q = q if q?\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.getWatched = (userId, page, type, q) ->\r\n        url = urlsService.resolve(\"user-watched\", userId)\r\n\r\n        params = {}\r\n        params.page = page if page?\r\n        params.type = type if type?\r\n        params.q = q if q?\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.getProfileTimeline = (userId, page) ->\r\n        params = {\r\n            page: page\r\n        }\r\n\r\n        url = urlsService.resolve(\"timeline-profile\")\r\n        url = \"#{url}/#{userId}\"\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.getUserTimeline = (userId, page) ->\r\n        params = {\r\n            page: page,\r\n            only_relevant: true\r\n        }\r\n\r\n        url = urlsService.resolve(\"timeline-user\")\r\n        url = \"#{url}/#{userId}\"\r\n\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            return paginateResponseService(result)\r\n\r\n    service.getNotifications = (userId, page, onlyUnread) ->\r\n        params = {\r\n            page: page\r\n        }\r\n        if onlyUnread\r\n            params['only_unread'] = true\r\n\r\n        url = urlsService.resolve(\"notifications\")\r\n\r\n        return http.get(url, params, {\r\n            headers: {\r\n                'x-lazy-pagination': true\r\n            }\r\n        }).then (result) ->\r\n            result = Immutable.fromJS(result)\r\n            paginateResponse = Immutable.Map({\r\n                \"data\": result.get(\"data\").get(\"objects\"),\r\n                \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\r\n                \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\r\n                \"current\": result.get(\"headers\")(\"x-pagination-current\"),\r\n                \"count\": result.get(\"headers\")(\"x-pagination-count\"),\r\n                \"total\": result.get(\"data\").get(\"total\")\r\n            })\r\n            return paginateResponse\r\n\r\n    service.setNotificationAsRead = (notificationId) ->\r\n        url = \"#{urlsService.resolve(\"notifications\")}/#{notificationId}/set-as-read\"\r\n        return http.patch(url).then (result) ->\r\n            return result\r\n\r\n    service.setNotificationsAsRead = () ->\r\n        url = \"#{urlsService.resolve(\"notifications\")}/set-as-read\"\r\n        return http.post(url).then (result) ->\r\n            return result\r\n\r\n    return () ->\r\n        return {\"users\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgUsersResources\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nResource = (urlsService, http) ->\r\n    service = {}\r\n\r\n    service.listInAllProjects = (params, pagination=false) ->\r\n        url = urlsService.resolve(\"userstories\")\r\n\r\n        if !pagination\r\n            httpOptions = {\r\n                headers: {\r\n                    \"x-disable-pagination\": \"1\"\r\n                }\r\n            }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.listAllInProject = (projectId) ->\r\n        url = urlsService.resolve(\"userstories\")\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        params = {\r\n            project: projectId\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    service.listInEpic = (epicIid) ->\r\n        url = urlsService.resolve(\"userstories\")\r\n\r\n        httpOptions = {\r\n            headers: {\r\n                \"x-disable-pagination\": \"1\"\r\n            }\r\n        }\r\n\r\n        params = {\r\n            epic: epicIid,\r\n            order_by: 'epic_order',\r\n            include_tasks: true\r\n        }\r\n\r\n        return http.get(url, params, httpOptions)\r\n            .then (result) ->\r\n                return Immutable.fromJS(result.data)\r\n\r\n    return () ->\r\n        return {\"userstories\": service}\r\n\r\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\r\n\r\nmodule = angular.module(\"taigaResources2\")\r\nmodule.factory(\"tgUserstoriesResource\", Resource)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ntruncate = taiga.truncate\r\n\r\n\r\nclass AppMetaService\r\n    @.$inject = [\r\n        \"$rootScope\"\r\n    ]\r\n\r\n    constructor: (@rootScope) ->\r\n\r\n    _set: (key, value) ->\r\n        return if not key\r\n\r\n        if key == \"title\"\r\n            meta = $(\"head title\")\r\n\r\n            if meta.length == 0\r\n                meta = $(\"<title></title>\")\r\n                $(\"head\").append(meta)\r\n\r\n            meta.html(value or \"\")\r\n        else if key.indexOf(\"og:\") == 0\r\n            meta = $(\"head meta[property='#{key}']\")\r\n\r\n            if meta.length == 0\r\n                meta = $(\"<meta property='#{key}'/>\")\r\n                $(\"head\").append(meta)\r\n\r\n            meta.attr(\"content\", value or \"\")\r\n        else\r\n            meta = $(\"head meta[name='#{key}']\")\r\n\r\n            if meta.length == 0\r\n                meta = $(\"<meta name='#{key}'/>\")\r\n                $(\"head\").append(meta)\r\n\r\n            meta.attr(\"content\", value or \"\")\r\n\r\n    setTitle: (title) ->\r\n        @._set('title', title)\r\n\r\n    setDescription: (description) ->\r\n        @._set(\"description\", truncate(description, 250))\r\n\r\n    setTwitterMetas: (title, description) ->\r\n        @._set(\"twitter:card\", \"summary\")\r\n        @._set(\"twitter:site\", \"@taigaio\")\r\n        @._set(\"twitter:title\", title)\r\n        @._set(\"twitter:description\", truncate(description, 300))\r\n        @._set(\"twitter:image\", \"#{window.location.origin}/#{window._version}/images/logo-color.png\")\r\n\r\n    setOpenGraphMetas: (title, description) ->\r\n        @._set(\"og:type\", \"object\")\r\n        @._set(\"og:site_name\", \"Taiga - Love your projects\")\r\n        @._set(\"og:title\", title)\r\n        @._set(\"og:description\", truncate(description, 300))\r\n        @._set(\"og:image\", \"#{window.location.origin}/#{window._version}/images/logo-color.png\")\r\n        @._set(\"og:url\", window.location.href)\r\n\r\n    setAll: (title, description) ->\r\n        @.setTitle(title)\r\n        @.setDescription(description)\r\n        @.setTwitterMetas(title, description)\r\n        @.setOpenGraphMetas(title, description)\r\n\r\n    addMobileViewport: () ->\r\n        $(\"head\").append(\r\n            \"<meta name=\\\"viewport\\\"\r\n                   content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\"\r\n        )\r\n\r\n    removeMobileViewport: () ->\r\n        $(\"head meta[name=\\\"viewport\\\"]\").remove()\r\n\r\n    setfn: (fn) ->\r\n        @._listener() if @.listener\r\n\r\n        @._listener = @rootScope.$watchCollection fn, (metas) =>\r\n            if metas\r\n                @.setAll(metas.title, metas.description)\r\n                @._listener()\r\n\r\nangular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nsizeFormat = @.taiga.sizeFormat\r\n\r\nclass AttachmentsService\r\n    @.$inject = [\r\n        \"$tgConfirm\",\r\n        \"$tgConfig\",\r\n        \"$translate\",\r\n        \"tgResources\"\r\n    ]\r\n\r\n    constructor: (@confirm, @config, @translate, @rs) ->\r\n        @.types = {\r\n            epics: \"epic\",\r\n            userstories: \"us\",\r\n            userstory: \"us\",\r\n            issues: \"issue\",\r\n            tasks: \"task\",\r\n            epic: \"epic\",\r\n            us: \"us\"\r\n            issue: \"issue\",\r\n            task: \"task\",\r\n            wiki: \"wiki\",\r\n            wikipage: \"wiki\"\r\n        }\r\n        @.maxFileSize = @.getMaxFileSize()\r\n\r\n        if @.maxFileSize\r\n            @.maxFileSizeFormated = sizeFormat(@.maxFileSize)\r\n\r\n    sizeError: (file) ->\r\n        message = @translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\r\n            fileName: file.name,\r\n            fileSize: sizeFormat(file.size),\r\n            maxFileSize: @.maxFileSizeFormated\r\n        })\r\n\r\n        @confirm.notify(\"error\", message)\r\n\r\n    validate: (file) ->\r\n        if @.maxFileSize && file.size > @.maxFileSize\r\n            @.sizeError(file)\r\n\r\n            return false\r\n\r\n        return true\r\n\r\n    getMaxFileSize: () ->\r\n        return @config.get(\"maxUploadFileSize\", null)\r\n\r\n    list: (type, objId, projectId) ->\r\n        return @rs.attachments.list(type, objId, projectId).then (attachments) =>\r\n            return attachments.sortBy (attachment) => attachment.get('order')\r\n\r\n    get: (type, id) ->\r\n        return @rs.attachments.get(@.types[type], id)\r\n\r\n    delete: (type, id) ->\r\n        return @rs.attachments.delete(type, id)\r\n\r\n    saveError: (file, data) ->\r\n        message = \"\"\r\n\r\n        if file\r\n            message = @translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\r\n                        fileName: file.name, errorMessage: data.data._error_message\r\n                      })\r\n\r\n        @confirm.notify(\"error\", message)\r\n\r\n    upload: (file, objId, projectId, type, from_comment = false) ->\r\n        promise = @rs.attachments.create(type, projectId, objId, file, from_comment)\r\n\r\n        promise.then null, @.saveError.bind(this, file)\r\n\r\n        return promise\r\n\r\n    bulkUpdateOrder: (objectId, type, afterAttachmentId, bulkAttachments) ->\r\n        promise = @rs.attachments.bulkAttachments(objectId, type, afterAttachmentId, bulkAttachments)\r\n\r\n        promise.then null, @.saveError.bind(this, null)\r\n\r\n        return promise\r\n\r\n    patch: (id, type, patch) ->\r\n        promise = @rs.attachments.patch(type, id, patch)\r\n\r\n        promise.then null, @.saveError.bind(this, null)\r\n\r\n        return promise\r\n\r\nangular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass AvatarService\r\n    constructor: (@config) ->\r\n        IMAGES = [\r\n            \"#{window._version}/images/user-avatars/user-avatar-01.png\"\r\n            \"#{window._version}/images/user-avatars/user-avatar-02.png\"\r\n            \"#{window._version}/images/user-avatars/user-avatar-03.png\"\r\n            \"#{window._version}/images/user-avatars/user-avatar-04.png\"\r\n            \"#{window._version}/images/user-avatars/user-avatar-05.png\"\r\n        ]\r\n\r\n        COLORS = [\r\n            \"rgba( 178, 176, 204, 1 )\"\r\n            \"rgba( 183, 203, 131, 1 )\"\r\n            \"rgba( 210, 198, 139, 1 )\"\r\n            \"rgba( 214, 161, 212, 1 )\"\r\n            \"rgba( 247, 154, 154, 1 )\"\r\n        ]\r\n\r\n        @.logos = _.cartesianProduct(IMAGES, COLORS)\r\n\r\n    getDefault: (key) ->\r\n        idx = murmurhash3_32_gc(key, 42) %% @.logos.length\r\n        logo = @.logos[idx]\r\n\r\n        return { src: logo[0], color: logo[1] }\r\n\r\n    getUnnamed: () ->\r\n        return {\r\n            url: \"#{window._version}/images/unnamed.png\"\r\n            username: ''\r\n        }\r\n\r\n    getAvatar: (user, type) ->\r\n        return @.getUnnamed() if !user\r\n\r\n        avatarParamName = 'photo'\r\n\r\n        if type == 'avatarBig'\r\n            avatarParamName = 'big_photo'\r\n\r\n        photo = null\r\n\r\n        if user instanceof Immutable.Map\r\n            gravatar = user.get('gravatar_id')\r\n            photo = user.get(avatarParamName)\r\n            username = \"@#{user.get('username')}\"\r\n            fullName = user.get('full_name_display')\r\n        else\r\n            gravatar = user.gravatar_id\r\n            photo = user[avatarParamName]\r\n            username = \"@#{user.username}\"\r\n            fullName = user.full_name_display\r\n\r\n        return @.getUnnamed() if !gravatar\r\n\r\n        if photo\r\n            return {\r\n                url: photo,\r\n                username: username,\r\n                fullName: fullName\r\n            }\r\n        else if location.host.indexOf('localhost') != -1 || !@config.get(\"gravatar\", true)\r\n            root = location.protocol + '//' + location.host + @config.get('baseHref')\r\n            logo = @.getDefault(gravatar)\r\n\r\n            return {\r\n                url: root + logo.src,\r\n                bg: logo.color,\r\n                username: username,\r\n                fullName: fullName\r\n            }\r\n        else\r\n            root = location.protocol + '//' + location.host + @config.get('baseHref')\r\n            logo = @.getDefault(gravatar)\r\n\r\n            logoUrl = encodeURIComponent(root + logo.src)\r\n\r\n            return {\r\n                url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\r\n                bg: logo.color,\r\n                username: username,\r\n                fullName: fullName\r\n            }\r\n\r\nangular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService])\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass CheckPermissionsService\r\n    @.$inject = [\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@projectService) ->\r\n\r\n    check: (permission) ->\r\n        return false if !@projectService.project\r\n\r\n        return @projectService.project.get('my_permissions').indexOf(permission) != -1\r\n\r\nangular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass CurrentUserService\r\n    @.$inject = [\r\n        \"tgProjectsService\",\r\n        \"$tgStorage\",\r\n        \"tgResources\",\r\n        \"$q\"\r\n    ]\r\n\r\n    constructor: (@projectsService, @storageService, @rs, @q) ->\r\n        @._user = null\r\n        @._projects = Immutable.Map()\r\n        @._projectsById = Immutable.Map()\r\n        @._joyride = null\r\n\r\n        taiga.defineImmutableProperty @, \"projects\", () => return @._projects\r\n        taiga.defineImmutableProperty @, \"projectsById\", () => return @._projectsById\r\n\r\n    isAuthenticated: ->\r\n        if @.getUser() != null\r\n            return true\r\n        return false\r\n\r\n    getUser: () ->\r\n        if !@._user\r\n            userData = @storageService.get(\"userInfo\")\r\n\r\n            if userData\r\n                userData = Immutable.fromJS(userData)\r\n                @.setUser(userData)\r\n\r\n        return @._user\r\n\r\n    removeUser: () ->\r\n        @._user = null\r\n        @._projects = Immutable.Map()\r\n        @._projectsById = Immutable.Map()\r\n        @._joyride = null\r\n\r\n    setUser: (user) ->\r\n        @._user = user\r\n        return @._loadUserInfo()\r\n\r\n    bulkUpdateProjectsOrder: (sortData) ->\r\n        @projectsService.bulkUpdateProjectsOrder(sortData).then () =>\r\n            @.loadProjects()\r\n\r\n    loadProjects: () ->\r\n        return @projectsService.getProjectsByUserId(@._user.get(\"id\"))\r\n            .then (projects) => @.setProjects(projects)\r\n\r\n    loadProjectsList: () ->\r\n        return @projectsService.getListProjectsByUserId(@._user.get(\"id\"), null,)\r\n            .then (projects) => @.setProjects(projects)\r\n\r\n    disableJoyRide: (section) ->\r\n        if !@.isAuthenticated()\r\n            return\r\n\r\n        if section\r\n            @._joyride[section] = false\r\n        else\r\n            @._joyride = {\r\n                backlog: false,\r\n                kanban: false,\r\n                dashboard: false\r\n            }\r\n\r\n        @rs.user.setUserStorage('joyride', @._joyride)\r\n\r\n    loadJoyRideConfig: () ->\r\n        return @q (resolve) =>\r\n            if @._joyride != null\r\n                resolve(@._joyride)\r\n                return\r\n\r\n            @rs.user.getUserStorage('joyride')\r\n                .then (config) =>\r\n                    @._joyride = config\r\n                    resolve(@._joyride)\r\n                .catch () =>\r\n                    #joyride not defined\r\n                    @._joyride = {\r\n                        backlog: true,\r\n                        kanban: true,\r\n                        dashboard: true\r\n                    }\r\n\r\n                    @rs.user.createUserStorage('joyride', @._joyride)\r\n\r\n                    resolve(@._joyride)\r\n\r\n    _loadUserInfo: () ->\r\n        return @q.all([\r\n            @.loadProjectsList()\r\n        ])\r\n\r\n    setProjects: (projects) ->\r\n        @._projects = @._projects.set(\"all\", projects)\r\n        @._projects = @._projects.set(\"recents\", projects.slice(0, 4))\r\n        @._projects = @._projects.set(\"unblocked\",\r\n                                      projects.filter((project) -> project.toJS().blocked_code == null))\r\n\r\n        @._projectsById = Immutable.fromJS(groupBy(projects.toJS(), (p) -> p.id))\r\n\r\n        return @.projects\r\n\r\n    canCreatePrivateProjects: () ->\r\n        user = @.getUser()\r\n        if user.get('max_private_projects') != null &&\r\n            user.get('total_private_projects') >= user.get('max_private_projects')\r\n                return {\r\n                    valid: false,\r\n                    reason: 'max_private_projects',\r\n                    type: 'private_project',\r\n                    current: user.get('total_private_projects'),\r\n                    max: user.get('max_private_projects')\r\n                }\r\n\r\n        return {valid: true}\r\n\r\n    canCreatePublicProjects: () ->\r\n        user = @.getUser()\r\n\r\n        if user && user.get('max_public_projects') != null &&\r\n            user.get('total_public_projects') >= user.get('max_public_projects')\r\n                return {\r\n                    valid: false,\r\n                    reason: 'max_public_projects',\r\n                    type: 'public_project',\r\n                    current: user.get('total_public_projects'),\r\n                    max: user.get('max_public_projects')\r\n                }\r\n\r\n        return {valid: true}\r\n\r\n    canAddMembersPublicProject: (totalMembers) ->\r\n        user = @.getUser()\r\n\r\n        if user.get('max_memberships_public_projects') != null &&\r\n            totalMembers > user.get('max_memberships_public_projects')\r\n                return {\r\n                    valid: false,\r\n                    reason: 'max_members_public_projects',\r\n                    type: 'public_project',\r\n                    current: totalMembers,\r\n                    max: user.get('max_memberships_public_projects')\r\n                }\r\n\r\n        return {valid: true}\r\n\r\n    canAddMembersPrivateProject: (totalMembers) ->\r\n        user = @.getUser()\r\n\r\n        if user.get('max_memberships_private_projects') != null &&\r\n            totalMembers > user.get('max_memberships_private_projects')\r\n                return {\r\n                    valid: false,\r\n                    reason: 'max_members_private_projects',\r\n                    type: 'private_project',\r\n                    current: totalMembers,\r\n                    max: user.get('max_memberships_private_projects')\r\n                }\r\n\r\n        return {valid: true}\r\n\r\n    canOwnProject: (project) ->\r\n        user = @.getUser()\r\n        if project.get('is_private')\r\n            result = @.canCreatePrivateProjects()\r\n            return result if !result.valid\r\n\r\n            membersResult = @.canAddMembersPrivateProject(project.get('total_memberships'))\r\n            return membersResult if !membersResult.valid\r\n        else\r\n            result = @.canCreatePublicProjects()\r\n            return result if !result.valid\r\n\r\n            membersResult = @.canAddMembersPublicProject(project.get('total_memberships'))\r\n            return membersResult if !membersResult.valid\r\n\r\n        return {valid: true}\r\n\r\nangular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass ErrorHandlingService\r\n    @.$inject = [\r\n        \"$rootScope\"\r\n    ]\r\n\r\n    constructor: (@rootScope) ->\r\n\r\n    init: () ->\r\n        @rootScope.errorHandling = {}\r\n\r\n    notfound: ->\r\n        @rootScope.errorHandling.showingError = true\r\n        @rootScope.errorHandling.notfound = true\r\n\r\n    error: ->\r\n        @rootScope.errorHandling.showingError = true\r\n        @rootScope.errorHandling.error = true\r\n\r\n    permissionDenied: ->\r\n        @rootScope.errorHandling.showingError = true\r\n        @rootScope.errorHandling.permissionDenied = true\r\n\r\n    block: ->\r\n        @rootScope.errorHandling.showingError = true\r\n        @rootScope.errorHandling.blocked = true\r\n\r\nangular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass LightboxFactory\r\n    @.$inject = [\"$rootScope\", \"$compile\"]\r\n    constructor: (@rootScope, @compile) ->\r\n\r\n    create: (name, attrs, scopeAttrs) ->\r\n        scope = @rootScope.$new()\r\n\r\n        scope = _.merge(scope, scopeAttrs)\r\n\r\n        elm = $(\"<div>\")\r\n            .attr(name, true)\r\n            .attr(\"tg-bind-scope\", true)\r\n\r\n        if attrs\r\n            elm.attr(attrs)\r\n\r\n        elm.addClass(\"remove-on-close\")\r\n\r\n        html = @compile(elm)(scope)\r\n\r\n        $(document.body).append(html)\r\n\r\n        return\r\n\r\nangular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nPaginateResponse = () ->\r\n    return (result) ->\r\n        paginateResponse = Immutable.Map({\r\n            \"data\": result.get(\"data\"),\r\n            \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\r\n            \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\r\n            \"current\": result.get(\"headers\")(\"x-pagination-current\"),\r\n            \"count\": result.get(\"headers\")(\"x-pagination-count\")\r\n        })\r\n\r\n        return paginateResponse\r\n\r\nangular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass ProjectLogoService\r\n    constructor: () ->\r\n        IMAGES = [\r\n            \"#{window._version}/images/project-logos/project-logo-01.png\"\r\n            \"#{window._version}/images/project-logos/project-logo-02.png\"\r\n            \"#{window._version}/images/project-logos/project-logo-03.png\"\r\n            \"#{window._version}/images/project-logos/project-logo-04.png\"\r\n            \"#{window._version}/images/project-logos/project-logo-05.png\"\r\n        ]\r\n\r\n        COLORS = [\r\n            \"rgba( 153,  214, 220, 1 )\"\r\n            \"rgba( 213,  156,  156, 1 )\"\r\n            \"rgba( 214, 161, 212,  1 )\"\r\n            \"rgba( 164, 162, 219, 1 )\"\r\n            \"rgba( 152, 224, 168,  1 )\"\r\n        ]\r\n\r\n        @.logos = _.cartesianProduct(IMAGES, COLORS)\r\n\r\n    getDefaultProjectLogo: (slug, id) ->\r\n        key = \"#{slug}-#{id}\"\r\n        idx = murmurhash3_32_gc(key, 42) %% @.logos.length\r\n        logo = @.logos[idx]\r\n\r\n        return { src: logo[0], color: logo[1] }\r\n\r\nangular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass ProjectService\r\n    @.$inject = [\r\n        \"$rootScope\",\r\n        \"tgProjectsService\",\r\n        \"tgXhrErrorService\",\r\n        \"tgUserActivityService\",\r\n        \"$interval\",\r\n        \"$q\"\r\n    ]\r\n\r\n    constructor: (@rootScope,  @projectsService, @xhrError, @userActivityService, @interval, @q) ->\r\n        @._project = null\r\n        @._section = null\r\n        @._sectionsBreadcrumb = Immutable.List()\r\n        @._activeMembers = Immutable.List()\r\n\r\n        taiga.defineImmutableProperty @, \"project\", () => return @._project\r\n        taiga.defineImmutableProperty @, \"section\", () => return @._section\r\n        taiga.defineImmutableProperty @, \"sectionsBreadcrumb\", () => return @._sectionsBreadcrumb\r\n        taiga.defineImmutableProperty @, \"activeMembers\", () => return @._activeMembers\r\n\r\n        @.autoRefresh() if !window.localStorage.e2e\r\n        @.watchSignals()\r\n\r\n    watchSignals: () ->\r\n        fetchRequiredSignals = [\r\n            \"admin:project-modules:updated\"\r\n            \"admin:project-roles:updated\"\r\n            \"admin:project-default-values:updated\"\r\n            \"admin:project-values:updated\"\r\n            \"admin:project-values:move\"\r\n            \"admin:project-custom-attributes:updated\"\r\n            \"sprintform:create:success\"\r\n            \"sprintform:edit:success\"\r\n            \"sprintform:remove:success\"\r\n            \"tags:updated\"\r\n        ]\r\n        for signal in fetchRequiredSignals\r\n            @rootScope.$on(signal, @.manageProjectSignal)\r\n\r\n    manageProjectSignal: (ctx) =>\r\n        @.fetchProject()\r\n\r\n    cleanProject: () ->\r\n        @._project = null\r\n        @._activeMembers = Immutable.List()\r\n        @._section = null\r\n        @._sectionsBreadcrumb = Immutable.List()\r\n\r\n    autoRefresh: () ->\r\n        intervalId = @interval () =>\r\n            @.fetchProject()\r\n        , 60 * 10 * 1000\r\n\r\n        @userActivityService.onInactive () => @interval.cancel(intervalId)\r\n        @userActivityService.onActive () =>\r\n            @.fetchProject()\r\n            @.autoRefresh()\r\n\r\n    setSection: (section) ->\r\n        @._section = section\r\n\r\n        if section\r\n            @._sectionsBreadcrumb = @._sectionsBreadcrumb.push(@._section)\r\n        else\r\n            @._sectionsBreadcrumb = Immutable.List()\r\n\r\n    setProject: (project) ->\r\n        @._project = project\r\n        @._activeMembers = @._project.get('members').filter (member) -> member.get('is_active')\r\n\r\n    setProjectBySlug: (pslug) ->\r\n        return @q (resolve, reject) =>\r\n            if !@.project || @.project.get('slug') != pslug\r\n                @projectsService\r\n                    .getProjectBySlug(pslug)\r\n                    .then (project) =>\r\n                        @.setProject(project)\r\n                        resolve()\r\n                    .catch (xhr) =>\r\n                        @xhrError.response(xhr)\r\n\r\n            else resolve()\r\n\r\n    fetchProject: () ->\r\n        return if !@.project\r\n\r\n        pslug = @.project.get('slug')\r\n\r\n        return @projectsService.getProjectBySlug(pslug).then (project) => @.setProject(project)\r\n\r\n    hasPermission: (permission) ->\r\n        return @._project.get('my_permissions').indexOf(permission) != -1\r\n\r\n    isEpicsDashboardEnabled: ->\r\n        return @._project.get(\"is_epics_activated\")\r\n\r\nangular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\n\r\nclass ThemeService extends taiga.Service\r\n    use: (themeName) ->\r\n        stylesheetEl = $(\"link[rel='stylesheet']:first\")\r\n\r\n        if stylesheetEl.length == 0\r\n            stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\")\r\n            $(\"head\").append(stylesheetEl)\r\n\r\n        stylesheetEl.attr(\"href\", \"#{window._version}/styles/theme-#{themeName}.css\")\r\n\r\n\r\nangular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\ngroupBy = @.taiga.groupBy\r\n\r\nclass UserActivityService\r\n    @.$inject = ['$timeout']\r\n\r\n    idleTimeout: 60 * 5 * 1000\r\n\r\n    constructor: (@timeout) ->\r\n        return null if window.localStorage.e2e\r\n\r\n        window.addEventListener('mousemove', @.resetTimer.bind(this), false)\r\n        window.addEventListener('mousedown', @.resetTimer.bind(this), false)\r\n        window.addEventListener('keypress', @.resetTimer.bind(this), false)\r\n        window.addEventListener('mousewheel', @.resetTimer.bind(this), false)\r\n        window.addEventListener('touchmove', @.resetTimer.bind(this), false)\r\n\r\n        @.subscriptionsActive = []\r\n        @.subscriptionsInactive = []\r\n        @.isActive = true\r\n\r\n        @.startTimer()\r\n\r\n    startTimer: () ->\r\n        @.timerId = @timeout(@._fireInactive.bind(this), @.idleTimeout)\r\n\r\n    resetTimer: () ->\r\n        if !@.isActive\r\n            @._fireActive()\r\n\r\n        @timeout.cancel(@.timerId)\r\n        @.startTimer()\r\n\r\n        @.isActive = true\r\n\r\n    onActive: (cb) ->\r\n        @.subscriptionsActive.push(cb)\r\n\r\n        return @._unSubscriptionsActive.bind(this, cb)\r\n\r\n    onInactive: (cb) ->\r\n        @.subscriptionsInactive.push(cb)\r\n\r\n        return @._unSubscriptionsInactive.bind(this, cb)\r\n\r\n    _fireActive: () ->\r\n        @.subscriptionsActive.forEach (it) -> it()\r\n\r\n    _fireInactive: () ->\r\n        @.isActive = false\r\n        @.subscriptionsInactive.forEach (it) -> it()\r\n\r\n    _unSubscriptionsActive: (cb) ->\r\n        @.subscriptionsActive = @.subscriptionsActive.filter (fn) -> fn != cb\r\n\r\n    _unSubscriptionsInactive: (cb) ->\r\n        @.subscriptionsInactive = @.subscriptionsInactive.filter (fn) -> fn != cb\r\n\r\nangular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nnormalizeString = @.taiga.normalizeString\r\n\r\nclass UserListService\r\n    @.$inject = [\r\n        \"tgCurrentUserService\"\r\n        \"tgProjectService\"\r\n    ]\r\n\r\n    constructor: (@currentUserService, @projectService) ->\r\n\r\n    filterUsers: (text, user) ->\r\n        username = user.full_name_display.toUpperCase()\r\n        username = normalizeString(username)\r\n        text = text.toUpperCase()\r\n        text = normalizeString(text)\r\n        return _.includes(username, text)\r\n\r\n    searchUsers: (text, excludedUser) ->\r\n        @.currentUser = @currentUserService.getUser()\r\n        users = _.clone(@projectService.activeMembers.toJS(), true)\r\n        users = _.reject(users, {\"id\": excludedUser.id}) if excludedUser\r\n        users = _.sortBy(users, (o) => if o.id is @.currentUser?.get('id') then 0 else o.id)\r\n        users = _.filter(users, _.partial(@.filterUsers, text)) if text?\r\n        return users\r\n\r\nangular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\nbindMethods = taiga.bindMethods\r\n\r\n\r\nclass UserService extends taiga.Service\r\n    @.$inject = [\"tgResources\"]\r\n\r\n    constructor: (@rs) ->\r\n        bindMethods(@)\r\n\r\n    getUserByUserName: (username) ->\r\n        return @rs.users.getUserByUsername(username)\r\n\r\n    getContacts: (userId, excludeProjectId) ->\r\n        return @rs.users.getContacts(userId, excludeProjectId)\r\n\r\n    getLiked: (userId, pageNumber, objectType, textQuery) ->\r\n        return @rs.users.getLiked(userId, pageNumber, objectType, textQuery)\r\n\r\n    getVoted: (userId, pageNumber, objectType, textQuery) ->\r\n        return @rs.users.getVoted(userId, pageNumber, objectType, textQuery)\r\n\r\n    getWatched: (userId, pageNumber, objectType, textQuery) ->\r\n        return @rs.users.getWatched(userId, pageNumber, objectType, textQuery)\r\n\r\n    getStats: (userId) ->\r\n        return @rs.users.getStats(userId)\r\n\r\n    attachUserContactsToProjects: (userId, projects) ->\r\n        return @.getContacts(userId)\r\n            .then (contacts) ->\r\n                projects = projects.map (project) ->\r\n                    contactsFiltered = contacts.filter (contact) ->\r\n                        contactId = contact.get(\"id\")\r\n                        return project.get('members').indexOf(contactId) != -1\r\n\r\n                    project = project.set(\"contacts\", contactsFiltered)\r\n\r\n                    return project\r\n\r\n                return projects\r\n\r\nangular.module(\"taigaCommon\").service(\"tgUserService\", UserService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nclass xhrError extends taiga.Service\r\n    @.$inject = [\r\n        \"$q\",\r\n        \"tgErrorHandlingService\"\r\n    ]\r\n\r\n    constructor: (@q, @errorHandlingService) ->\r\n\r\n    notFound: () ->\r\n        @errorHandlingService.notfound()\r\n\r\n    permissionDenied: () ->\r\n        @errorHandlingService.permissionDenied()\r\n\r\n    response: (xhr) ->\r\n        if xhr\r\n            if xhr.status == 404\r\n                @.notFound()\r\n\r\n            else if xhr.status == 403\r\n                @.permissionDenied()\r\n\r\n        return @q.reject(xhr)\r\n\r\nangular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nUserTimelineAttachmentDirective = (template, $compile) ->\r\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"]\r\n\r\n    isImage = (url) ->\r\n        url = url.toLowerCase()\r\n\r\n        return _.some validFileExtensions, (extension) ->\r\n            return url.indexOf(extension, url - extension.length) != -1\r\n\r\n    link = (scope, el) ->\r\n        is_image = isImage(scope.attachment.get('url'))\r\n\r\n        if is_image\r\n            templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\")\r\n        else\r\n            templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\")\r\n\r\n        el.html(templateHtml)\r\n        $compile(el.contents())(scope)\r\n\r\n        el.find(\"img\").error () -> @.remove()\r\n\r\n    return {\r\n        link: link\r\n        scope: {\r\n            attachment: \"=tgUserTimelineAttachment\"\r\n        }\r\n    }\r\n\r\nUserTimelineAttachmentDirective.$inject = [\r\n    \"$tgTemplate\",\r\n    \"$compile\"\r\n]\r\n\r\nangular.module(\"taigaUserTimeline\")\r\n    .directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nunslugify = @.taiga.unslugify\r\n\r\nclass UserTimelineItemTitle\r\n    @.$inject = [\r\n        \"$translate\",\r\n        \"$sce\"\r\n    ]\r\n\r\n    _fieldTranslationKey: {\r\n        'status': 'COMMON.FIELDS.STATUS',\r\n        'subject': 'COMMON.FIELDS.SUBJECT',\r\n        'description_diff': 'COMMON.FIELDS.DESCRIPTION',\r\n        'points': 'COMMON.FIELDS.POINTS',\r\n        'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\r\n        'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\r\n        'severity': 'ISSUES.FIELDS.SEVERITY',\r\n        'priority': 'ISSUES.FIELDS.PRIORITY',\r\n        'type': 'ISSUES.FIELDS.TYPE',\r\n        'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\r\n        'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\r\n        'color': 'COMMON.FIELDS.COLOR',\r\n        'due_date': 'COMMON.FIELDS.DUE_DATE',\r\n        'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\r\n        'milestone': 'COMMON.FIELDS.SPRINT',\r\n    }\r\n\r\n    _params: {\r\n        username: (timeline, event) ->\r\n            user = timeline.getIn(['data', 'user'])\r\n\r\n            if user.get('is_profile_visible')\r\n                title_attr = @translate.instant('COMMON.SEE_USER_PROFILE', {username: user.get('username')})\r\n                url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\"\r\n\r\n                return @._getLink(url, user.get('name'), title_attr)\r\n            else\r\n                return @._getUsernameSpan(user.get('name'))\r\n\r\n        field_name: (timeline, event) ->\r\n            field_name = timeline.getIn(['data', 'value_diff', 'key'])\r\n\r\n            return @translate.instant(@._fieldTranslationKey[field_name])\r\n\r\n        project_name: (timeline, event) ->\r\n            url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\"\r\n\r\n            return @._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]))\r\n\r\n        new_value: (timeline, event) ->\r\n            if _.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())\r\n                value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1)\r\n\r\n                # assigned to unasigned\r\n                if value == null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'assigned_to'\r\n                    value = @translate.instant('ACTIVITY.VALUES.UNASSIGNED')\r\n\r\n                # assigned_users to unasigned\r\n                if value == null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'assigned_users'\r\n                    value = @translate.instant('ACTIVITY.VALUES.UNASSIGNED')\r\n\r\n                # due date\r\n                else if timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'due_date'\r\n                    if value\r\n                        prettyDate = @translate.instant(\"COMMON.PICKERDATE.FORMAT\")\r\n                        value = moment(value, \"YYYY-MM-DD\").format(prettyDate)\r\n                    else\r\n                        value = @translate.instant('ACTIVITY.VALUES.NOT_SET')\r\n\r\n                # color\r\n                else if timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'color'\r\n                    if value\r\n                        return value\r\n\r\n                new_value = value\r\n            else\r\n                new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1)\r\n\r\n            return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML')\r\n\r\n        sprint_name: (timeline, event) ->\r\n            url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\"\r\n\r\n            return @._getLink(url, timeline.getIn(['data', 'milestone', 'name']))\r\n\r\n        us_name: (timeline, event) ->\r\n            obj = @._getTimelineObj(timeline, event).get('userstory')\r\n\r\n            event_us = {obj: 'parent_userstory'}\r\n            url = @._getDetailObjUrl(event_us)\r\n\r\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\r\n\r\n            return @._getLink(url, text)\r\n\r\n        related_us_name: (timeline, event) ->\r\n            obj = timeline.getIn([\"data\", \"userstory\"])\r\n            url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\"\r\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\r\n            return @._getLink(url, text)\r\n\r\n        epic_name: (timeline, event) ->\r\n            obj = timeline.getIn([\"data\", \"epic\"])\r\n            url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\"\r\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\r\n            return @._getLink(url, text)\r\n\r\n        obj_name: (timeline, event) ->\r\n            obj = @._getTimelineObj(timeline, event)\r\n            url = @._getDetailObjUrl(event)\r\n\r\n            if event.obj == 'wikipage'\r\n                text = unslugify(obj.get('slug'))\r\n            else if event.obj == 'milestone'\r\n                text = obj.get('name')\r\n            else\r\n                text = '#' + obj.get('ref') + ' ' + obj.get('subject')\r\n\r\n            return @._getLink(url, text)\r\n\r\n        role_name: (timeline, event) ->\r\n            return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first())\r\n    }\r\n\r\n    constructor: (@translate, @sce) ->\r\n\r\n\r\n    _translateTitleParams: (param, timeline, event) ->\r\n        return @._params[param].call(this, timeline, event)\r\n\r\n    _getTimelineObj: (timeline, event) ->\r\n        return timeline.getIn(['data', event.obj])\r\n\r\n    _getDetailObjUrl: (event) ->\r\n        url = {\r\n            \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\r\n            \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\r\n            \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\r\n            \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\r\n            \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\r\n            \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\r\n            \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\r\n        }\r\n        return url[event.obj][0] + url[event.obj][1]\r\n\r\n    _getLink: (url, text, title) ->\r\n        title = title || text\r\n\r\n        span = $('<span>')\r\n            .attr('ng-non-bindable', true)\r\n            .text(text)\r\n\r\n        return $('<a>')\r\n            .attr('tg-nav', url)\r\n            .append(span)\r\n            .prop('outerHTML')\r\n\r\n    _getUsernameSpan: (text) ->\r\n        title = title || text\r\n\r\n        return $('<span>')\r\n            .addClass('username')\r\n            .text(text)\r\n            .prop('outerHTML')\r\n\r\n    _getParams: (timeline, event, timeline_type) ->\r\n        params = {}\r\n\r\n        timeline_type.translate_params.forEach (param) =>\r\n            params[param] = @._translateTitleParams(param, timeline, event)\r\n        return params\r\n\r\n    getTitle: (timeline, event, type) ->\r\n        params = @._getParams(timeline, event, type)\r\n\r\n        paramsKeys = {}\r\n        Object.keys(params).forEach (key) -> paramsKeys[key] = '{{' +key + '}}'\r\n\r\n        translation = @translate.instant(type.key, paramsKeys)\r\n\r\n        Object.keys(params).forEach (key) ->\r\n            find = '{{' +key + '}}'\r\n            translation = translation.replace(new RegExp(find, 'g'), params[key])\r\n\r\n        return translation\r\n\r\nangular.module(\"taigaUserTimeline\")\r\n    .service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntimelineType = (timeline, event) ->\r\n    types = [\r\n        { # NewMember\r\n            check: (timeline, event) ->\r\n                return event.obj == 'membership'\r\n            key: 'TIMELINE.NEW_MEMBER',\r\n            translate_params: ['project_name']\r\n            member: (timeline) ->\r\n                return Immutable.Map({\r\n                    user: timeline.getIn(['data', 'user']),\r\n                    role: timeline.getIn(['data', 'role'])\r\n                })\r\n        },\r\n        { # NewProject\r\n            check: (timeline, event) ->\r\n                return event.obj == 'project' && event.type == 'create'\r\n            key: 'TIMELINE.NEW_PROJECT',\r\n            translate_params: ['username', 'project_name'],\r\n            description: (timeline) ->\r\n                return timeline.getIn(['data', 'project', 'description'])\r\n        },\r\n        { # NewAttachment\r\n            check: (timeline, event) ->\r\n                return event.type == 'change' &&\r\n                     timeline.hasIn(['data', 'value_diff']) &&\r\n                     timeline.getIn(['data', 'value_diff', 'key']) == 'attachments'\r\n            key: 'TIMELINE.UPLOAD_ATTACHMENT',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # NewUs\r\n            check: (timeline, event) ->\r\n                return event.obj == 'userstory' && event.type == 'create'\r\n            key: 'TIMELINE.US_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewIssue\r\n            check: (timeline, event) ->\r\n                return event.obj == 'issue' && event.type == 'create'\r\n            key: 'TIMELINE.ISSUE_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewWiki\r\n            check: (timeline, event) ->\r\n                return event.obj == 'wikipage' && event.type == 'create'\r\n            key: 'TIMELINE.WIKI_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewTask\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' && event.type == 'create' && !timeline.getIn(['data', 'task', 'userstory'])\r\n            key: 'TIMELINE.TASK_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewTask with US\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' && event.type == 'create' && timeline.getIn(['data', 'task', 'userstory'])\r\n            key: 'TIMELINE.TASK_CREATED_WITH_US',\r\n            translate_params: ['username', 'project_name', 'obj_name', 'us_name']\r\n        },\r\n        { # NewMilestone\r\n            check: (timeline, event) ->\r\n                return event.obj == 'milestone' && event.type == 'create'\r\n            key: 'TIMELINE.MILESTONE_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewEpic\r\n            check: (timeline, event) ->\r\n                return event.obj == 'epic' && event.type == 'create'\r\n            key: 'TIMELINE.EPIC_CREATED',\r\n            translate_params: ['username', 'project_name', 'obj_name']\r\n        },\r\n        { # NewEpicRelatedUserstory\r\n            check: (timeline, event) ->\r\n                return event.obj == 'relateduserstory' && event.type == 'create'\r\n            key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\r\n            translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\r\n        },\r\n        { # NewUsComment\r\n            check: (timeline, event) ->\r\n                return timeline.getIn(['data', 'comment']) && event.obj == 'userstory'\r\n            key: 'TIMELINE.NEW_COMMENT_US',\r\n            translate_params: ['username', 'obj_name'],\r\n            description: (timeline) ->\r\n                text = timeline.getIn(['data', 'comment_html'])\r\n                return $($.parseHTML(text)).text()\r\n        },\r\n        { # NewIssueComment\r\n            check: (timeline, event) ->\r\n                return timeline.getIn(['data', 'comment']) && event.obj == 'issue'\r\n            key: 'TIMELINE.NEW_COMMENT_ISSUE',\r\n            translate_params: ['username', 'obj_name'],\r\n            description: (timeline) ->\r\n                text = timeline.getIn(['data', 'comment_html'])\r\n                return $($.parseHTML(text)).text()\r\n        },\r\n        { # NewTaskComment\r\n            check: (timeline, event) ->\r\n                return timeline.getIn(['data', 'comment']) && event.obj == 'task'\r\n            key: 'TIMELINE.NEW_COMMENT_TASK'\r\n            translate_params: ['username', 'obj_name'],\r\n            description: (timeline) ->\r\n                text = timeline.getIn(['data', 'comment_html'])\r\n                return $($.parseHTML(text)).text()\r\n        },\r\n        { # NewEpicComment\r\n            check: (timeline, event) ->\r\n                return timeline.getIn(['data', 'comment']) && event.obj == 'epic'\r\n            key: 'TIMELINE.NEW_COMMENT_EPIC'\r\n            translate_params: ['username', 'obj_name'],\r\n            description: (timeline) ->\r\n                text = timeline.getIn(['data', 'comment_html'])\r\n                return $($.parseHTML(text)).text()\r\n        },\r\n        { # UsMove\r\n            check: (timeline, event) ->\r\n                return timeline.hasIn(['data', 'value_diff']) &&\r\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\r\n                      timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) &&\r\n                      event.type == 'change'\r\n            key: 'TIMELINE.US_MOVED',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # UsToBacklog\r\n            check: (timeline, event) ->\r\n                if timeline.hasIn(['data', 'value_diff']) &&\r\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\r\n                      event.type == 'change' &&\r\n                      event.obj == 'userstory'\r\n\r\n                    return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) == null\r\n\r\n                return false\r\n            key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # UsToMilestone\r\n            check: (timeline, event) ->\r\n                return timeline.hasIn(['data', 'value_diff']) &&\r\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\r\n                      event.type == 'change' &&\r\n                      event.obj == 'userstory'\r\n\r\n            key: 'TIMELINE.US_ADDED_MILESTONE',\r\n            translate_params: ['username', 'obj_name', 'sprint_name']\r\n        },\r\n        { # Blocked\r\n            check: (timeline, event) ->\r\n                if timeline.hasIn(['data', 'value_diff']) &&\r\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'blocked' &&\r\n                      event.type == 'change'\r\n                    return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) == true\r\n\r\n                return false\r\n            key: 'TIMELINE.BLOCKED',\r\n            translate_params: ['username', 'obj_name'],\r\n            description: (timeline) ->\r\n                if timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])\r\n                    text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1)\r\n                    return $($.parseHTML(text)).text()\r\n                else\r\n                    return false\r\n        },\r\n        { # UnBlocked\r\n            check: (timeline, event) ->\r\n                if timeline.hasIn(['data', 'value_diff']) &&\r\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'blocked' &&\r\n                      event.type == 'change'\r\n                    return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) == false\r\n\r\n                return false\r\n            key: 'TIMELINE.UNBLOCKED',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # MilestoneUpdated\r\n            check: (timeline, event) ->\r\n                return event.obj == 'milestone' && event.type == 'change'\r\n            key: 'TIMELINE.MILESTONE_UPDATED',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # WikiUpdated\r\n            check: (timeline, event) ->\r\n                return event.obj == 'wikipage' && event.type == 'change'\r\n            key: 'TIMELINE.WIKI_UPDATED',\r\n            translate_params: ['username', 'obj_name']\r\n        },\r\n        { # UsUpdated points\r\n            check: (timeline, event) ->\r\n                return event.obj == 'userstory' &&\r\n                    event.type == 'change' &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'points'\r\n            key: 'TIMELINE.US_UPDATED_POINTS',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\r\n        },\r\n        { # UsUpdated description\r\n            check: (timeline, event) ->\r\n                return event.obj == 'userstory' &&\r\n                    event.type == 'change' &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\r\n            key: 'TIMELINE.US_UPDATED',\r\n            translate_params: ['username', 'field_name', 'obj_name']\r\n        },\r\n        { # UsUpdated general\r\n            check: (timeline, event) ->\r\n                return event.obj == 'userstory' &&\r\n                    event.type == 'change'\r\n            key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\r\n        },\r\n        { # IssueUpdated description\r\n            check: (timeline, event) ->\r\n                return event.obj == 'issue' &&\r\n                    event.type == 'change' &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\r\n            key: 'TIMELINE.ISSUE_UPDATED',\r\n            translate_params: ['username', 'field_name', 'obj_name']\r\n        },\r\n        { # IssueUpdated general\r\n            check: (timeline, event) ->\r\n                return event.obj == 'issue' &&\r\n                    event.type == 'change'\r\n            key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\r\n        },\r\n        { # TaskUpdated description\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' &&\r\n                    event.type == 'change' &&\r\n                    !timeline.getIn(['data', 'task', 'userstory']) &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\r\n            key: 'TIMELINE.TASK_UPDATED',\r\n            translate_params: ['username', 'field_name', 'obj_name']\r\n        },\r\n        { # TaskUpdated with US description\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' &&\r\n                    event.type == 'change' &&\r\n                    timeline.getIn(['data', 'task', 'userstory']) &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\r\n            key: 'TIMELINE.TASK_UPDATED_WITH_US',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'us_name']\r\n        },\r\n        { # TaskUpdated general\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' &&\r\n                    event.type == 'change' &&\r\n                    !timeline.getIn(['data', 'task', 'userstory'])\r\n            key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\r\n        },\r\n        { # TaskUpdated with US\r\n            check: (timeline, event) ->\r\n                return event.obj == 'task' &&\r\n                    event.type == 'change' &&\r\n                    timeline.getIn(['data', 'task', 'userstory'])\r\n            key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\r\n        },\r\n        { # EpicUpdated description\r\n            check: (timeline, event) ->\r\n                return event.obj == 'epic' &&\r\n                    event.type == 'change' &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\r\n            key: 'TIMELINE.EPIC_UPDATED',\r\n            translate_params: ['username', 'field_name', 'obj_name']\r\n        },\r\n        { # EpicUpdated color\r\n            check: (timeline, event) ->\r\n                return event.obj == 'epic' &&\r\n                    event.type == 'change' &&\r\n                    timeline.hasIn(['data', 'value_diff']) &&\r\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'color'\r\n            key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\r\n        },\r\n        { # EpicUpdated general\r\n            check: (timeline, event) ->\r\n                return event.obj == 'epic' &&\r\n                    event.type == 'change'\r\n            key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\r\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\r\n        },\r\n        { # New User\r\n            check: (timeline, event) ->\r\n                return event.obj == 'user' && event.type == 'create'\r\n            key: 'TIMELINE.NEW_USER',\r\n            translate_params: ['username']\r\n        }\r\n    ]\r\n\r\n    return _.find types, (obj) ->\r\n        return obj.check(timeline, event)\r\n\r\nclass UserTimelineType\r\n    getType: (timeline, event) -> timelineType(timeline, event)\r\n\r\nangular.module(\"taigaUserTimeline\")\r\n    .service(\"tgUserTimelineItemType\", UserTimelineType)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nUserTimelineItemDirective = () ->\r\n    return {\r\n        templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\"\r\n        scope: {\r\n            timeline: \"=tgUserTimelineItem\"\r\n        }\r\n    }\r\n\r\nangular.module(\"taigaUserTimeline\")\r\n    .directive(\"tgUserTimelineItem\", UserTimelineItemDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nUserTimelinePaginationSequence = () ->\r\n    obj = {}\r\n\r\n    obj.generate = (config) ->\r\n        page = 1\r\n        items = Immutable.List()\r\n\r\n        config.minItems = config.minItems || 20\r\n\r\n        next = () ->\r\n            items = Immutable.List()\r\n            return getContent()\r\n\r\n        getContent = () ->\r\n            config.fetch(page).then (response) ->\r\n                page++\r\n\r\n                data = response.get(\"data\")\r\n\r\n                if config.filter\r\n                    data = config.filter(data)\r\n\r\n                if config.map && data\r\n                    data = data.map(config.map)\r\n\r\n                items = items.concat(data)\r\n\r\n                if items.size < config.minItems && response.get(\"next\")\r\n                    return getContent()\r\n\r\n                pagination = Immutable.Map({\r\n                    items: items,\r\n                    total: response.get(\"total\"),\r\n                    next: response.get(\"next\")\r\n                })\r\n\r\n                return pagination\r\n\r\n        return {\r\n            next: () -> next()\r\n        }\r\n\r\n    return obj\r\n\r\nangular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmixOf = @.taiga.mixOf\r\n\r\nclass UserTimelineController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\r\n    @.$inject = [\r\n        \"tgUserTimelineService\"\r\n    ]\r\n\r\n    constructor: (@userTimelineService) ->\r\n        @.timelineList = Immutable.List()\r\n        @.scrollDisabled = false\r\n\r\n        @.timeline = null\r\n\r\n        if @.projectId\r\n            @.timeline = @userTimelineService.getProjectTimeline(@.projectId)\r\n        else if @.currentUser\r\n            @.timeline = @userTimelineService.getProfileTimeline(@.user.get(\"id\"))\r\n        else\r\n            @.timeline = @userTimelineService.getUserTimeline(@.user.get(\"id\"))\r\n\r\n        @.loadTimeline()\r\n\r\n    loadTimeline: () ->\r\n        @.scrollDisabled = true\r\n\r\n        return @.timeline\r\n            .next()\r\n            .then (response) =>\r\n                @.timelineList = @.timelineList.concat(response.get(\"items\"))\r\n\r\n                if response.get(\"next\")\r\n                    @.scrollDisabled = false\r\n\r\n                return @.timelineList\r\n\r\nangular.module(\"taigaUserTimeline\")\r\n    .controller(\"UserTimeline\", UserTimelineController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nUserTimelineDirective = ->\r\n    return {\r\n        templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\r\n        controller: \"UserTimeline\",\r\n        controllerAs: \"vm\",\r\n        scope: {\r\n            projectId: \"=projectid\",\r\n            user: \"=\",\r\n            currentUser: \"=\"\r\n        },\r\n        bindToController: true\r\n    }\r\n\r\nangular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nclass UserTimelineService extends taiga.Service\r\n    @.$inject = [\r\n        \"tgResources\",\r\n        \"tgUserTimelinePaginationSequenceService\",\r\n        \"tgUserTimelineItemType\",\r\n        \"tgUserTimelineItemTitle\"\r\n    ]\r\n\r\n    constructor: (@rs, @userTimelinePaginationSequenceService, @userTimelineItemType, @userTimelineItemTitle) ->\r\n\r\n    _valid_fields: [\r\n        'status',\r\n        'subject',\r\n        'description_diff',\r\n        'assigned_users',\r\n        'assigned_to',\r\n        'points',\r\n        'severity',\r\n        'priority',\r\n        'type',\r\n        'attachments',\r\n        'is_iocaine',\r\n        'content_diff',\r\n        'name',\r\n        'estimated_finish',\r\n        'estimated_start',\r\n        # customs\r\n        'blocked',\r\n        'moveInBacklog',\r\n        'milestone',\r\n        'color',\r\n        'due_date',\r\n        'due_date_reason'\r\n    ]\r\n\r\n    _invalid: [\r\n        {# Items with only invalid fields\r\n            check: (timeline) ->\r\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\r\n\r\n                if value_diff\r\n                    fieldKey = value_diff.get('key')\r\n\r\n                    if @._valid_fields.indexOf(fieldKey) == -1\r\n                        return true\r\n                    else if fieldKey == 'attachments' &&\r\n                         value_diff.get('value').get('new').size == 0\r\n                        return true\r\n\r\n                return false\r\n        },\r\n        {# Empty change\r\n            check: (timeline) ->\r\n                event = timeline.get('event_type').split(\".\")\r\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\r\n                return event[2] == 'change' and value_diff == undefined\r\n        },\r\n        {# Deleted\r\n            check: (timeline) ->\r\n                event = timeline.get('event_type').split(\".\")\r\n                return event[2] == 'delete'\r\n        },\r\n        {# Project change\r\n            check: (timeline) ->\r\n                event = timeline.get('event_type').split(\".\")\r\n                return event[1] == 'project' && event[2] == 'change'\r\n        },\r\n        {# Comment deleted\r\n            check: (timeline) ->\r\n                return !!timeline.get(\"data\").get(\"comment_deleted\")\r\n        },\r\n        {# Task milestone\r\n            check: (timeline) ->\r\n                event = timeline.get('event_type').split(\".\")\r\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\r\n\r\n                if value_diff &&\r\n                     event[1] == \"task\" &&\r\n                     event[2] == \"change\" &&\r\n                     value_diff.get(\"key\") == \"milestone\"\r\n                    return timeline.get(\"data\").get(\"value_diff\").get(\"value\")\r\n\r\n                return false\r\n        }\r\n    ]\r\n\r\n    _isInValidTimeline: (timeline) ->\r\n        return _.some @._invalid, (invalid) =>\r\n            return invalid.check.call(this, timeline)\r\n\r\n    _parseEventType: (event_type) ->\r\n        event_type = event_type.split(\".\")\r\n\r\n        return {\r\n            section: event_type[0],\r\n            obj: event_type[1],\r\n            type: event_type[2]\r\n        }\r\n\r\n    _getTimelineObject: (timeline, event) ->\r\n        if timeline.get('data').get(event.obj)\r\n            return timeline.get('data').get(event.obj)\r\n\r\n    _attachExtraInfoToTimelineEntry: (timeline, event, type) ->\r\n        title = @userTimelineItemTitle.getTitle(timeline, event, type)\r\n\r\n        timeline = timeline.set('title_html', title)\r\n\r\n        timeline =  timeline.set('obj', @._getTimelineObject(timeline, event))\r\n\r\n        if type.description\r\n            timeline = timeline.set('description', type.description(timeline))\r\n\r\n        if type.member\r\n            timeline = timeline.set('member', type.member(timeline))\r\n\r\n        if timeline.getIn(['data', 'value_diff', 'key']) == 'attachments' &&\r\n          timeline.hasIn(['data', 'value_diff', 'value', 'new'])\r\n            timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']))\r\n\r\n        return timeline\r\n\r\n    # - create a entry per every item in the values_diff\r\n    _parseTimeline: (response) ->\r\n        newdata = Immutable.List()\r\n\r\n        response.get('data').forEach (item) =>\r\n            event = @._parseEventType(item.get('event_type'))\r\n\r\n            data = item.get('data')\r\n            values_diff = data.get('values_diff')\r\n\r\n            if values_diff && values_diff.count()\r\n                # blocked/unblocked change must be a single change\r\n                if values_diff.has('is_blocked')\r\n                    values_diff = Immutable.Map({'blocked': values_diff})\r\n\r\n                if values_diff.has('milestone')\r\n                    if event.obj == 'userstory'\r\n                        values_diff = Immutable.Map({'moveInBacklog': values_diff})\r\n                    else\r\n                        values_diff = values_diff.deleteIn(['values_diff', 'milestone'])\r\n\r\n                else if event.obj == 'milestone'\r\n                     values_diff = Immutable.Map({'milestone': values_diff})\r\n\r\n                values_diff.forEach (value, key) =>\r\n                    obj = Immutable.Map({\r\n                        key: key,\r\n                        value: value\r\n                    })\r\n\r\n                    newItem = item.setIn(['data', 'value_diff'], obj)\r\n                    newItem = newItem.deleteIn(['data', 'values_diff'])\r\n                    newdata = newdata.push(newItem)\r\n            else\r\n                newItem = item.deleteIn(['data', 'values_diff'])\r\n                newdata = newdata.push(newItem)\r\n\r\n        return response.set('data', newdata)\r\n\r\n    _addEntyAttributes: (item) ->\r\n        event = @._parseEventType(item.get('event_type'))\r\n        type = @userTimelineItemType.getType(item, event)\r\n\r\n        return @._attachExtraInfoToTimelineEntry(item, event, type)\r\n\r\n    getProfileTimeline: (userId) ->\r\n        config = {}\r\n\r\n        config.fetch = (page) =>\r\n            return @rs.users.getProfileTimeline(userId, page)\r\n                .then (response) =>\r\n                    return @._parseTimeline(response)\r\n\r\n        config.map = (obj) => @._addEntyAttributes(obj)\r\n\r\n        config.filter = (items) =>\r\n            return items.filterNot (item) => @._isInValidTimeline(item)\r\n\r\n        return @userTimelinePaginationSequenceService.generate(config)\r\n\r\n    getUserTimeline: (userId) ->\r\n        config = {}\r\n\r\n        config.fetch = (page) =>\r\n            return @rs.users.getUserTimeline(userId, page)\r\n                .then (response) =>\r\n                    return @._parseTimeline(response)\r\n\r\n        config.map = (obj) => @._addEntyAttributes(obj)\r\n\r\n        config.filter = (items) =>\r\n            return items.filterNot (item) => @._isInValidTimeline(item)\r\n\r\n        return @userTimelinePaginationSequenceService.generate(config)\r\n\r\n    getProjectTimeline: (projectId) ->\r\n        config = {}\r\n\r\n        config.fetch = (page) =>\r\n            return @rs.projects.getTimeline(projectId, page)\r\n                .then (response) => return @._parseTimeline(response)\r\n\r\n        config.map = (obj) => @._addEntyAttributes(obj)\r\n\r\n        config.filter = (items) =>\r\n            return items.filterNot (item) => @._isInValidTimeline(item)\r\n\r\n        return @userTimelinePaginationSequenceService.generate(config)\r\n\r\nangular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nIsolateClickDirective = () ->\r\n    link = (scope, el, attrs) ->\r\n        el.on 'click', (e) =>\r\n            e.stopPropagation()\r\n\r\n    return {link: link}\r\n\r\nangular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaWikiHistory')\r\n\r\nWikiHistoryDiffDirective = () ->\r\n    return {\r\n        templateUrl:\"wiki/history/wiki-history-diff.html\",\r\n        scope: {\r\n            key: \"<\",\r\n            diff: \"<\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nmodule = angular.module('taigaWikiHistory')\r\n\r\nWikiHistoryEntryDirective = () ->\r\n    link = (scope, el, attr) ->\r\n        scope.singleHistoryEntry = scope.historyEntry.toJS()\r\n\r\n    return {\r\n        link: link,\r\n        templateUrl:\"wiki/history/wiki-history-entry.html\",\r\n        scope: {\r\n            historyEntry: \"<\"\r\n        }\r\n    }\r\n\r\nmodule.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\ntaiga = @.taiga\r\n\r\nmodule = angular.module(\"taigaWikiHistory\")\r\n\r\nclass WikiHistoryController\r\n    @.$inject = [\r\n        \"tgActivityService\"\r\n    ]\r\n\r\n    constructor: (@activityService) ->\r\n        taiga.defineImmutableProperty @, 'historyEntries', () =>\r\n            return @activityService.entries\r\n        taiga.defineImmutableProperty @, 'disablePagination', () =>\r\n            return @activityService.disablePagination\r\n        @.toggle = false\r\n\r\n    initializeHistory: (wikiId) ->\r\n        if wikiId\r\n            @activityService.init('wiki', wikiId)\r\n        @.loadHistory()\r\n\r\n    loadHistory: ()->\r\n        @activityService.fetchEntries()\r\n\r\n    nextPage: () ->\r\n        @activityService.nextPage()\r\n\r\nmodule.controller(\"WikiHistoryCtrl\", WikiHistoryController)\r\n","###\r\n# This source code is licensed under the terms of the\r\n# GNU Affero General Public License found in the LICENSE file in\r\n# the root directory of this source tree.\r\n#\r\n# Copyright (c) 2021-present Kaleidos INC\r\n###\r\n\r\nbindOnce = @.taiga.bindOnce\r\n\r\nmodule = angular.module('taigaWikiHistory')\r\n\r\n\r\nWikiHistoryDirective = () ->\r\n    link = (scope, el, attrs, ctrl) ->\r\n        bindOnce scope, 'vm.wikiId', (value) ->\r\n            ctrl.initializeHistory(value)\r\n\r\n    return {\r\n        scope: {},\r\n        bindToController: {\r\n            wikiId: \"<\"\r\n        }\r\n        controller: \"WikiHistoryCtrl\",\r\n        controllerAs: \"vm\",\r\n        templateUrl:\"wiki/history/wiki-history.html\",\r\n        link: link\r\n    }\r\n\r\nmodule.directive(\"tgWikiHistory\", WikiHistoryDirective)\r\n"]}